"use strict";(self.webpackChunktest_app_14=self.webpackChunktest_app_14||[]).push([[179],{2011:(yt,Me,R)=>{R.d(Me,{Dh:()=>ye,GT:()=>me,cc:()=>Te,hO:()=>Pe,on:()=>G,pX:()=>fe,xv:()=>he});var l=R(4650),X=R(9260),V=R(462);yt=R.hmd(yt);const re=["ngOnDestroy"],fe=(ue,pt,lt,Re={})=>new Proxy(ue,{get:(Ee,Ae)=>lt.runOutsideAngular(()=>{var $e;if(ue[Ae])return!(null===($e=Re?.spy)||void 0===$e)&&$e.get&&Re.spy.get(Ae,ue[Ae]),ue[Ae];if(re.indexOf(Ae)>-1)return()=>{};const Le=pt.toPromise().then(j=>{const Ce=j&&j[Ae];return"function"==typeof Ce?Ce.bind(j):Ce&&Ce.then?Ce.then(Q=>lt.run(()=>Q)):lt.run(()=>Ce)});return new Proxy(()=>{},{get:(j,Ce)=>Le[Ce],apply:(j,Ce,Q)=>Le.then(te=>{var se;const ie=te&&te(...Q);return!(null===(se=Re?.spy)||void 0===se)&&se.apply&&Re.spy.apply(Ae,Q,ie),ie})})})}),me=(ue,pt)=>{pt.forEach(lt=>{Object.getOwnPropertyNames(lt.prototype||lt).forEach(Re=>{Object.defineProperty(ue.prototype,Re,Object.getOwnPropertyDescriptor(lt.prototype||lt,Re))})})};class ae{constructor(pt){return pt}}const ye=new l.OlP("angularfire2.app.options"),he=new l.OlP("angularfire2.app.name");function G(ue,pt,lt){const Ee="object"==typeof lt&&lt||{};Ee.name=Ee.name||"string"==typeof lt&&lt||"[DEFAULT]";const $e=X.Z.apps.filter(Le=>Le&&Le.name===Ee.name)[0]||pt.runOutsideAngular(()=>X.Z.initializeApp(ue,Ee));try{JSON.stringify(ue)!==JSON.stringify($e.options)&&$("error",`${$e.name} Firebase App already initialized with different options${yt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new ae($e)}const $=(ue,...pt)=>{(0,l.X6Q)()&&typeof console<"u"&&console[ue](...pt)},J={provide:ae,useFactory:G,deps:[ye,l.R0b,[new l.FiY,he]]};let Pe=(()=>{class ue{constructor(lt){X.Z.registerVersion("angularfire",V.q4.full,"core"),X.Z.registerVersion("angularfire",V.q4.full,"app-compat"),X.Z.registerVersion("angular",l.q4F.full,lt.toString())}static initializeApp(lt,Re){return{ngModule:ue,providers:[{provide:ye,useValue:lt},{provide:he,useValue:Re}]}}}return ue.\u0275fac=function(lt){return new(lt||ue)(l.LFG(l.Lbi))},ue.\u0275mod=l.oAB({type:ue}),ue.\u0275inj=l.cJS({providers:[J]}),ue})();function Te(ue,pt,lt,Re,Ee){const[,Ae,$e]=globalThis.\u0275AngularfireInstanceCache.find(Le=>Le[0]===ue)||[];if(Ae)return function Se(ue,pt){try{return ue.toString()===pt.toString()}catch{return ue===pt}}(Ee,$e)||(be("error",`${pt} was already initialized on the ${lt} Firebase App with different settings.${et?" You may need to reload as Firebase is not HMR aware.":""}`),be("warn",{is:Ee,was:$e})),Ae;{const Le=Re();return globalThis.\u0275AngularfireInstanceCache.push([ue,Le,Ee]),Le}}const et=!!yt.hot,be=(ue,...pt)=>{(0,l.X6Q)()&&typeof console<"u"&&console[ue](...pt)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},462:(yt,Me,R)=>{R.d(Me,{q4:()=>Ic,iC:()=>Sc,HU:()=>Qu,vb:()=>fl,JM:()=>ei});var l=R(4650),X=R(259),V=R(5861),re=R(9681),fe=R(2090),me=R(4859),ae=R(1877);R(2833);const he="@firebase/remote-config",G="0.4.0",Te=new fe.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class gt{constructor(P,z,de,Be){this.client=P,this.storage=z,this.storageCache=de,this.logger=Be}isCachedDataFresh(P,z){if(!z)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const de=Date.now()-z,Be=de<=P;return this.logger.debug(`Config fetch cache check. Cache age millis: ${de}. Cache max age millis (minimumFetchIntervalMillis setting): ${P}. Is cache hit: ${Be}.`),Be}fetch(P){var z=this;return(0,V.Z)(function*(){const[de,Be]=yield Promise.all([z.storage.getLastSuccessfulFetchTimestampMillis(),z.storage.getLastSuccessfulFetchResponse()]);if(Be&&z.isCachedDataFresh(P.cacheMaxAgeMillis,de))return Be;P.eTag=Be&&Be.eTag;const ze=yield z.client.fetch(P),Ct=[z.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ze.status&&Ct.push(z.storage.setLastSuccessfulFetchResponse(ze)),yield Promise.all(Ct),ze})()}}function Jt(M=navigator){return M.languages&&M.languages[0]||M.language}class Lt{constructor(P,z,de,Be,ze,Ct){this.firebaseInstallations=P,this.sdkVersion=z,this.namespace=de,this.projectId=Be,this.apiKey=ze,this.appId=Ct}fetch(P){var z=this;return(0,V.Z)(function*(){const[de,Be]=yield Promise.all([z.firebaseInstallations.getId(),z.firebaseInstallations.getToken()]),Ct=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${z.projectId}/namespaces/${z.namespace}:fetch?key=${z.apiKey}`,Bn={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":P.eTag||"*"},Zn={sdk_version:z.sdkVersion,app_instance_id:de,app_instance_id_token:Be,app_id:z.appId,language_code:Jt()},De={method:"POST",headers:Bn,body:JSON.stringify(Zn)},vt=fetch(Ct,De),Gt=new Promise((dr,rs)=>{P.signal.addEventListener(()=>{const gl=new Error("The operation was aborted.");gl.name="AbortError",rs(gl)})});let Gs;try{yield Promise.race([vt,Gt]),Gs=yield vt}catch(dr){let rs="fetch-client-network";throw"AbortError"===dr?.name&&(rs="fetch-timeout"),Te.create(rs,{originalErrorMessage:dr?.message})}let An=Gs.status;const Oa=Gs.headers.get("ETag")||void 0;let $s,ur;if(200===Gs.status){let dr;try{dr=yield Gs.json()}catch(rs){throw Te.create("fetch-client-parse",{originalErrorMessage:rs?.message})}$s=dr.entries,ur=dr.state}if("INSTANCE_STATE_UNSPECIFIED"===ur?An=500:"NO_CHANGE"===ur?An=304:("NO_TEMPLATE"===ur||"EMPTY_CONFIG"===ur)&&($s={}),304!==An&&200!==An)throw Te.create("fetch-status",{httpStatus:An});return{status:An,eTag:Oa,config:$s}})()}}class Un{constructor(P,z){this.client=P,this.storage=z}fetch(P){var z=this;return(0,V.Z)(function*(){const de=(yield z.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return z.attemptFetch(P,de)})()}attemptFetch(P,{throttleEndTimeMillis:z,backoffCount:de}){var Be=this;return(0,V.Z)(function*(){yield function Ke(M,P){return new Promise((z,de)=>{const Be=Math.max(P-Date.now(),0),ze=setTimeout(z,Be);M.addEventListener(()=>{clearTimeout(ze),de(Te.create("fetch-throttle",{throttleEndTimeMillis:P}))})})}(P.signal,z);try{const ze=yield Be.client.fetch(P);return yield Be.storage.deleteThrottleMetadata(),ze}catch(ze){if(!function un(M){if(!(M instanceof fe.ZR&&M.customData))return!1;const P=Number(M.customData.httpStatus);return 429===P||500===P||503===P||504===P}(ze))throw ze;const Ct={throttleEndTimeMillis:Date.now()+(0,fe.$s)(de),backoffCount:de+1};return yield Be.storage.setThrottleMetadata(Ct),Be.attemptFetch(P,Ct)}})()}}class ii{constructor(P,z,de,Be,ze){this.app=P,this._client=z,this._storageCache=de,this._storage=Be,this._logger=ze,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Et(M,P){const z=M.target.error||void 0;return Te.create(P,{originalErrorMessage:z&&z?.message})}const jt="app_namespace_store";class On{constructor(P,z,de,Be=function xi(){return new Promise((M,P)=>{try{const z=indexedDB.open("firebase_remote_config",1);z.onerror=de=>{P(Et(de,"storage-open"))},z.onsuccess=de=>{M(de.target.result)},z.onupgradeneeded=de=>{0===de.oldVersion&&de.target.result.createObjectStore(jt,{keyPath:"compositeKey"})}}catch(z){P(Te.create("storage-open",{originalErrorMessage:z?.message}))}})}()){this.appId=P,this.appName=z,this.namespace=de,this.openDbPromise=Be}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(P){return this.set("last_fetch_status",P)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(P){return this.set("last_successful_fetch_timestamp_millis",P)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(P){return this.set("last_successful_fetch_response",P)}getActiveConfig(){return this.get("active_config")}setActiveConfig(P){return this.set("active_config",P)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(P){return this.set("active_config_etag",P)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(P){return this.set("throttle_metadata",P)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(P){var z=this;return(0,V.Z)(function*(){const de=yield z.openDbPromise;return new Promise((Be,ze)=>{const Bn=de.transaction([jt],"readonly").objectStore(jt),Zn=z.createCompositeKey(P);try{const De=Bn.get(Zn);De.onerror=vt=>{ze(Et(vt,"storage-get"))},De.onsuccess=vt=>{const Gt=vt.target.result;Be(Gt?Gt.value:void 0)}}catch(De){ze(Te.create("storage-get",{originalErrorMessage:De?.message}))}})})()}set(P,z){var de=this;return(0,V.Z)(function*(){const Be=yield de.openDbPromise;return new Promise((ze,Ct)=>{const Zn=Be.transaction([jt],"readwrite").objectStore(jt),De=de.createCompositeKey(P);try{const vt=Zn.put({compositeKey:De,value:z});vt.onerror=Gt=>{Ct(Et(Gt,"storage-set"))},vt.onsuccess=()=>{ze()}}catch(vt){Ct(Te.create("storage-set",{originalErrorMessage:vt?.message}))}})})()}delete(P){var z=this;return(0,V.Z)(function*(){const de=yield z.openDbPromise;return new Promise((Be,ze)=>{const Bn=de.transaction([jt],"readwrite").objectStore(jt),Zn=z.createCompositeKey(P);try{const De=Bn.delete(Zn);De.onerror=vt=>{ze(Et(vt,"storage-delete"))},De.onsuccess=()=>{Be()}}catch(De){ze(Te.create("storage-delete",{originalErrorMessage:De?.message}))}})})()}createCompositeKey(P){return[this.appId,this.appName,this.namespace,P].join()}}class sr{constructor(P){this.storage=P}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var P=this;return(0,V.Z)(function*(){const z=P.storage.getLastFetchStatus(),de=P.storage.getLastSuccessfulFetchTimestampMillis(),Be=P.storage.getActiveConfig(),ze=yield z;ze&&(P.lastFetchStatus=ze);const Ct=yield de;Ct&&(P.lastSuccessfulFetchTimestampMillis=Ct);const Bn=yield Be;Bn&&(P.activeConfig=Bn)})()}setLastFetchStatus(P){return this.lastFetchStatus=P,this.storage.setLastFetchStatus(P)}setLastSuccessfulFetchTimestampMillis(P){return this.lastSuccessfulFetchTimestampMillis=P,this.storage.setLastSuccessfulFetchTimestampMillis(P)}setActiveConfig(P){return this.activeConfig=P,this.storage.setActiveConfig(P)}}function Lr(){return tt.apply(this,arguments)}function tt(){return(tt=(0,V.Z)(function*(){if(!(0,fe.hl)())return!1;try{return yield(0,fe.eu)()}catch{return!1}})).apply(this,arguments)}!function hi(){(0,re._registerComponent)(new me.wA("remote-config",function M(P,{instanceIdentifier:z}){const de=P.getProvider("app").getImmediate(),Be=P.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Te.create("registration-window");if(!(0,fe.hl)())throw Te.create("indexed-db-unavailable");const{projectId:ze,apiKey:Ct,appId:Bn}=de.options;if(!ze)throw Te.create("registration-project-id");if(!Ct)throw Te.create("registration-api-key");if(!Bn)throw Te.create("registration-app-id");const Zn=new On(Bn,de.name,z=z||"firebase"),De=new sr(Zn),vt=new ae.Yd(he);vt.logLevel=ae.in.ERROR;const Gt=new Lt(Be,re.SDK_VERSION,z,ze,Ct,Bn),Gs=new Un(Gt,Zn),An=new gt(Gs,Zn,De,vt),Oa=new ii(de,An,De,Zn,vt);return function $e(M){const P=(0,fe.m9)(M);P._initializePromise||(P._initializePromise=P._storageCache.loadFromStorage().then(()=>{P._isInitializationComplete=!0}))}(Oa),Oa},"PUBLIC").setMultipleInstances(!0)),(0,re.registerVersion)(he,G),(0,re.registerVersion)(he,G,"esm2017")}();var Tn=R(8766);const Tr="/firebase-messaging-sw.js",kn="/firebase-cloud-messaging-push-scope",qi="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Rn="google.c.a.c_id",$n="google.c.a.c_l",ln="google.c.a.ts",Dt="google.c.a.e";var Vt=(()=>{return(M=Vt||(Vt={})).PUSH_RECEIVED="push-received",M.NOTIFICATION_CLICKED="notification-clicked",Vt;var M})();function pn(M){const P=new Uint8Array(M);return btoa(String.fromCharCode(...P)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Qn(M){const z=(M+"=".repeat((4-M.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),de=atob(z),Be=new Uint8Array(de.length);for(let ze=0;ze<de.length;++ze)Be[ze]=de.charCodeAt(ze);return Be}const bi="fcm_token_details_db",or="fcm_token_object_Store";function Yt(M){return Mi.apply(this,arguments)}function Mi(){return Mi=(0,V.Z)(function*(M){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ze=>ze.name).includes(bi))return null;let P=null;return(yield(0,Tn.X3)(bi,5,{upgrade:(de=(0,V.Z)(function*(Be,ze,Ct,Bn){var Zn;if(ze<2||!Be.objectStoreNames.contains(or))return;const De=Bn.objectStore(or),vt=yield De.index("fcmSenderId").get(M);if(yield De.clear(),vt)if(2===ze){const Gt=vt;if(!Gt.auth||!Gt.p256dh||!Gt.endpoint)return;P={token:Gt.fcmToken,createTime:null!==(Zn=Gt.createTime)&&void 0!==Zn?Zn:Date.now(),subscriptionOptions:{auth:Gt.auth,p256dh:Gt.p256dh,endpoint:Gt.endpoint,swScope:Gt.swScope,vapidKey:"string"==typeof Gt.vapidKey?Gt.vapidKey:pn(Gt.vapidKey)}}}else if(3===ze){const Gt=vt;P={token:Gt.fcmToken,createTime:Gt.createTime,subscriptionOptions:{auth:pn(Gt.auth),p256dh:pn(Gt.p256dh),endpoint:Gt.endpoint,swScope:Gt.swScope,vapidKey:pn(Gt.vapidKey)}}}else if(4===ze){const Gt=vt;P={token:Gt.fcmToken,createTime:Gt.createTime,subscriptionOptions:{auth:pn(Gt.auth),p256dh:pn(Gt.p256dh),endpoint:Gt.endpoint,swScope:Gt.swScope,vapidKey:pn(Gt.vapidKey)}}}}),function(ze,Ct,Bn,Zn){return de.apply(this,arguments)})})).close(),yield(0,Tn.Lj)(bi),yield(0,Tn.Lj)("fcm_vapid_details_db"),yield(0,Tn.Lj)("undefined"),Xt(P)?P:null;var de}),Mi.apply(this,arguments)}function Xt(M){if(!M||!M.subscriptionOptions)return!1;const{subscriptionOptions:P}=M;return"number"==typeof M.createTime&&M.createTime>0&&"string"==typeof M.token&&M.token.length>0&&"string"==typeof P.auth&&P.auth.length>0&&"string"==typeof P.p256dh&&P.p256dh.length>0&&"string"==typeof P.endpoint&&P.endpoint.length>0&&"string"==typeof P.swScope&&P.swScope.length>0&&"string"==typeof P.vapidKey&&P.vapidKey.length>0}const nt="firebase-messaging-store";let Ne=null;function ot(){return Ne||(Ne=(0,Tn.X3)("firebase-messaging-database",1,{upgrade:(M,P)=>{0===P&&M.createObjectStore(nt)}})),Ne}function xt(M){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,V.Z)(function*(M){const P=W(M),de=yield(yield ot()).transaction(nt).objectStore(nt).get(P);if(de)return de;{const Be=yield Yt(M.appConfig.senderId);if(Be)return yield Ut(M,Be),Be}})).apply(this,arguments)}function Ut(M,P){return H.apply(this,arguments)}function H(){return(H=(0,V.Z)(function*(M,P){const z=W(M),Be=(yield ot()).transaction(nt,"readwrite");return yield Be.objectStore(nt).put(P,z),yield Be.done,P})).apply(this,arguments)}function B(M){return O.apply(this,arguments)}function O(){return(O=(0,V.Z)(function*(M){const P=W(M),de=(yield ot()).transaction(nt,"readwrite");yield de.objectStore(nt).delete(P),yield de.done})).apply(this,arguments)}function W({appConfig:M}){return M.appId}const oe=new fe.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Ie(M,P){return Ye.apply(this,arguments)}function Ye(){return(Ye=(0,V.Z)(function*(M,P){const z=yield yn(M),de=hn(P),Be={method:"POST",headers:z,body:JSON.stringify(de)};let ze;try{ze=yield(yield fetch(At(M.appConfig),Be)).json()}catch(Ct){throw oe.create("token-subscribe-failed",{errorInfo:Ct?.toString()})}if(ze.error)throw oe.create("token-subscribe-failed",{errorInfo:ze.error.message});if(!ze.token)throw oe.create("token-subscribe-no-token");return ze.token})).apply(this,arguments)}function ut(M,P){return mt.apply(this,arguments)}function mt(){return(mt=(0,V.Z)(function*(M,P){const z=yield yn(M),de=hn(P.subscriptionOptions),Be={method:"PATCH",headers:z,body:JSON.stringify(de)};let ze;try{ze=yield(yield fetch(`${At(M.appConfig)}/${P.token}`,Be)).json()}catch(Ct){throw oe.create("token-update-failed",{errorInfo:Ct?.toString()})}if(ze.error)throw oe.create("token-update-failed",{errorInfo:ze.error.message});if(!ze.token)throw oe.create("token-update-no-token");return ze.token})).apply(this,arguments)}function xe(M,P){return Fe.apply(this,arguments)}function Fe(){return(Fe=(0,V.Z)(function*(M,P){const de={method:"DELETE",headers:yield yn(M)};try{const ze=yield(yield fetch(`${At(M.appConfig)}/${P}`,de)).json();if(ze.error)throw oe.create("token-unsubscribe-failed",{errorInfo:ze.error.message})}catch(Be){throw oe.create("token-unsubscribe-failed",{errorInfo:Be?.toString()})}})).apply(this,arguments)}function At({projectId:M}){return`https://fcmregistrations.googleapis.com/v1/projects/${M}/registrations`}function yn(M){return si.apply(this,arguments)}function si(){return(si=(0,V.Z)(function*({appConfig:M,installations:P}){const z=yield P.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":M.apiKey,"x-goog-firebase-installations-auth":`FIS ${z}`})})).apply(this,arguments)}function hn({p256dh:M,auth:P,endpoint:z,vapidKey:de}){const Be={web:{endpoint:z,auth:P,p256dh:M}};return de!==qi&&(Be.web.applicationPubKey=de),Be}const Vr=6048e5;function Nn(M){return ts.apply(this,arguments)}function ts(){return(ts=(0,V.Z)(function*(M){const P=yield Ht(M.swRegistration,M.vapidKey),z={vapidKey:M.vapidKey,swScope:M.swRegistration.scope,endpoint:P.endpoint,auth:pn(P.getKey("auth")),p256dh:pn(P.getKey("p256dh"))},de=yield xt(M.firebaseDependencies);if(de){if(Xn(de.subscriptionOptions,z))return Date.now()>=de.createTime+Vr?K(M,{token:de.token,createTime:Date.now(),subscriptionOptions:z}):de.token;try{yield xe(M.firebaseDependencies,de.token)}catch(Be){console.warn(Be)}return Ue(M.firebaseDependencies,z)}return Ue(M.firebaseDependencies,z)})).apply(this,arguments)}function Ls(M){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,V.Z)(function*(M){const P=yield xt(M.firebaseDependencies);P&&(yield xe(M.firebaseDependencies,P.token),yield B(M.firebaseDependencies));const z=yield M.swRegistration.pushManager.getSubscription();return!z||z.unsubscribe()})).apply(this,arguments)}function K(M,P){return we.apply(this,arguments)}function we(){return(we=(0,V.Z)(function*(M,P){try{const z=yield ut(M.firebaseDependencies,P),de=Object.assign(Object.assign({},P),{token:z,createTime:Date.now()});return yield Ut(M.firebaseDependencies,de),z}catch(z){throw yield Ls(M),z}})).apply(this,arguments)}function Ue(M,P){return ft.apply(this,arguments)}function ft(){return(ft=(0,V.Z)(function*(M,P){const de={token:yield Ie(M,P),createTime:Date.now(),subscriptionOptions:P};return yield Ut(M,de),de.token})).apply(this,arguments)}function Ht(M,P){return rn.apply(this,arguments)}function rn(){return(rn=(0,V.Z)(function*(M,P){return(yield M.pushManager.getSubscription())||M.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Qn(P)})})).apply(this,arguments)}function Xn(M,P){return P.vapidKey===M.vapidKey&&P.endpoint===M.endpoint&&P.auth===M.auth&&P.p256dh===M.p256dh}function gn(M){const P={from:M.from,collapseKey:M.collapse_key,messageId:M.fcmMessageId};return function ar(M,P){if(!P.notification)return;M.notification={};const z=P.notification.title;z&&(M.notification.title=z);const de=P.notification.body;de&&(M.notification.body=de);const Be=P.notification.image;Be&&(M.notification.image=Be);const ze=P.notification.icon;ze&&(M.notification.icon=ze)}(P,M),function Li(M,P){!P.data||(M.data=P.data)}(P,M),function fn(M,P){var z,de,Be,ze,Ct;if(!(P.fcmOptions||null!==(z=P.notification)&&void 0!==z&&z.click_action))return;M.fcmOptions={};const Bn=null!==(Be=null===(de=P.fcmOptions)||void 0===de?void 0:de.link)&&void 0!==Be?Be:null===(ze=P.notification)||void 0===ze?void 0:ze.click_action;Bn&&(M.fcmOptions.link=Bn);const Zn=null===(Ct=P.fcmOptions)||void 0===Ct?void 0:Ct.analytics_label;Zn&&(M.fcmOptions.analyticsLabel=Zn)}(P,M),P}function wc(M){return"object"==typeof M&&!!M&&Rn in M}function Dc(M,P){const z=[];for(let de=0;de<M.length;de++)z.push(M.charAt(de)),de<P.length&&z.push(P.charAt(de));return z.join("")}function Sa(M){return oe.create("missing-app-config-values",{valueName:M})}Dc("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Dc("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Oi{constructor(P,z,de){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Be=function oo(M){if(!M||!M.options)throw Sa("App Configuration Object");if(!M.name)throw Sa("App Name");const P=["projectId","apiKey","appId","messagingSenderId"],{options:z}=M;for(const de of P)if(!z[de])throw Sa(de);return{appName:M.name,projectId:z.projectId,apiKey:z.apiKey,appId:z.appId,senderId:z.messagingSenderId}}(P);this.firebaseDependencies={app:P,appConfig:Be,installations:z,analyticsProvider:de}}_delete(){return Promise.resolve()}}function ys(M){return Ur.apply(this,arguments)}function Ur(){return(Ur=(0,V.Z)(function*(M){try{M.swRegistration=yield navigator.serviceWorker.register(Tr,{scope:kn}),M.swRegistration.update().catch(()=>{})}catch(P){throw oe.create("failed-service-worker-registration",{browserErrorMessage:P?.message})}})).apply(this,arguments)}function Sn(M,P){return Aa.apply(this,arguments)}function Aa(){return(Aa=(0,V.Z)(function*(M,P){if(!P&&!M.swRegistration&&(yield ys(M)),P||!M.swRegistration){if(!(P instanceof ServiceWorkerRegistration))throw oe.create("invalid-sw-registration");M.swRegistration=P}})).apply(this,arguments)}function zi(M,P){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,V.Z)(function*(M,P){P?M.vapidKey=P:M.vapidKey||(M.vapidKey=qi)})).apply(this,arguments)}function Vs(){return(Vs=(0,V.Z)(function*(M,P){if(!navigator)throw oe.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw oe.create("permission-blocked");return yield zi(M,P?.vapidKey),yield Sn(M,P?.serviceWorkerRegistration),Nn(M)})).apply(this,arguments)}function ll(M,P,z){return lr.apply(this,arguments)}function lr(){return(lr=(0,V.Z)(function*(M,P,z){const de=$u(P);(yield M.firebaseDependencies.analyticsProvider.get()).logEvent(de,{message_id:z[Rn],message_name:z[$n],message_time:z[ln],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function $u(M){switch(M){case Vt.NOTIFICATION_CLICKED:return"notification_open";case Vt.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Na(){return(Na=(0,V.Z)(function*(M,P){const z=P.data;if(!z.isFirebaseMessaging)return;M.onMessageHandler&&z.messageType===Vt.PUSH_RECEIVED&&("function"==typeof M.onMessageHandler?M.onMessageHandler(gn(z)):M.onMessageHandler.next(gn(z)));const de=z.data;wc(de)&&"1"===de[Dt]&&(yield ll(M,z.messageType,de))})).apply(this,arguments)}const Us="@firebase/messaging",wi=M=>{const P=new Oi(M.getProvider("app").getImmediate(),M.getProvider("installations-internal").getImmediate(),M.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",z=>function Zu(M,P){return Na.apply(this,arguments)}(P,z)),P},Wu=M=>{const P=M.getProvider("messaging").getImmediate();return{getToken:de=>function Zo(M,P){return Vs.apply(this,arguments)}(P,de)}};function ns(){return qu.apply(this,arguments)}function qu(){return(qu=(0,V.Z)(function*(){try{yield(0,fe.eu)()}catch{return!1}return typeof window<"u"&&(0,fe.hl)()&&(0,fe.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function xg(){(0,re._registerComponent)(new me.wA("messaging",wi,"PUBLIC")),(0,re._registerComponent)(new me.wA("messaging-internal",Wu,"PRIVATE")),(0,re.registerVersion)(Us,"0.12.0"),(0,re.registerVersion)(Us,"0.12.0","esm2017")}();var Bs=R(3008),Ec=R(4408),ul=R(7565);const is=new class Gy extends ul.v{}(class Mg extends Ec.o{constructor(P,z){super(P,z),this.scheduler=P,this.work=z}schedule(P,z=0){return z>0?super.schedule(P,z):(this.delay=z,this.state=P,this.scheduler.flush(this),this)}execute(P,z){return z>0||this.closed?super.execute(P,z):this._execute(P,z)}requestAsyncId(P,z,de=0){return null!=de&&de>0||null==de&&this.delay>0?super.requestAsyncId(P,z,de):(P.flush(this),0)}});var Hs=R(4986),ao=R(8505),dl=R(9468),hl=R(5363);const Ic=new l.GfV("7.5.0"),Tc="__angularfire_symbol__analyticsIsSupportedValue",oi="__angularfire_symbol__analyticsIsSupported",Wo="__angularfire_symbol__remoteConfigIsSupportedValue",qo="__angularfire_symbol__remoteConfigIsSupported",Ki="__angularfire_symbol__messagingIsSupportedValue",zo="__angularfire_symbol__messagingIsSupported";function ei(M,P,z){if(P){if(1===P.length)return P[0];const ze=P.filter(Ct=>Ct.app===z);if(1===ze.length)return ze[0]}return z.container.getProvider(M).getImmediate({optional:!0})}globalThis[oi]||(globalThis[oi]=(0,Bs.Gb)().then(M=>globalThis[Tc]=M).catch(()=>globalThis[Tc]=!1)),globalThis[zo]||(globalThis[zo]=ns().then(M=>globalThis[Ki]=M).catch(()=>globalThis[Ki]=!1)),globalThis[qo]||(globalThis[qo]=Lr().then(M=>globalThis[Wo]=M).catch(()=>globalThis[Wo]=!1));const fl=(M,P)=>{const z=P?[P]:(0,X.C6)(),de=[];return z.forEach(Be=>{Be.container.getProvider(M).instances.forEach(Ct=>{de.includes(Ct)||de.push(Ct)})}),de};function Ko(){}class lo{constructor(P,z=is){this.zone=P,this.delegate=z}now(){return this.delegate.now()}schedule(P,z,de){const Be=this.zone;return this.delegate.schedule(function(Ct){Be.runGuarded(()=>{P.apply(this,[Ct])})},z,de)}}class mr{constructor(P){this.zone=P,this.task=null}call(P,z){const de=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ko,{},Ko,Ko)),z.pipe((0,ao.b)({next:de,complete:de,error:de})).subscribe(P).add(de)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Qu=(()=>{class M{constructor(z){this.ngZone=z,this.outsideAngular=z.runOutsideAngular(()=>new lo(Zone.current)),this.insideAngular=z.run(()=>new lo(Zone.current,Hs.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return M.\u0275fac=function(z){return new(z||M)(l.LFG(l.R0b))},M.\u0275prov=l.Yz7({token:M,factory:M.\u0275fac,providedIn:"root"}),M})();function Br(){const M=globalThis.\u0275AngularFireScheduler;if(!M)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return M}function Sc(M){return Br(),function vs(M){return function(z){return(z=z.lift(new mr(M.ngZone))).pipe((0,dl.R)(M.outsideAngular),(0,hl.Q)(M.insideAngular))}}(Br())(M)}},2090:(yt,Me,R)=>{R.d(Me,{$s:()=>ot,BH:()=>Lt,DV:()=>Wi,Dv:()=>pn,G6:()=>Ae,GJ:()=>sr,L:()=>ye,LL:()=>dn,Pz:()=>Jt,Sg:()=>Ke,UG:()=>Se,UI:()=>Lr,US:()=>me,Wj:()=>Nt,Wl:()=>jt,Yr:()=>Ee,ZB:()=>$,ZR:()=>Un,aH:()=>gt,b$:()=>ue,cI:()=>Et,dS:()=>Yt,eu:()=>Le,g5:()=>V,gK:()=>Qn,gQ:()=>Rn,h$:()=>ae,hl:()=>$e,hu:()=>X,jU:()=>et,lb:()=>or,m9:()=>Ut,ne:()=>$n,p$:()=>G,pd:()=>ri,r3:()=>hi,ru:()=>be,tV:()=>he,uI:()=>Te,ug:()=>Mi,vZ:()=>tt,w1:()=>lt,w9:()=>On,xO:()=>kn,xb:()=>fi,z$:()=>Pe,zI:()=>j,zd:()=>qi});const X=function(H,B){if(!H)throw V(B)},V=function(H){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+H)},re=function(H){const B=[];let O=0;for(let W=0;W<H.length;W++){let U=H.charCodeAt(W);U<128?B[O++]=U:U<2048?(B[O++]=U>>6|192,B[O++]=63&U|128):55296==(64512&U)&&W+1<H.length&&56320==(64512&H.charCodeAt(W+1))?(U=65536+((1023&U)<<10)+(1023&H.charCodeAt(++W)),B[O++]=U>>18|240,B[O++]=U>>12&63|128,B[O++]=U>>6&63|128,B[O++]=63&U|128):(B[O++]=U>>12|224,B[O++]=U>>6&63|128,B[O++]=63&U|128)}return B},me={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(H,B){if(!Array.isArray(H))throw Error("encodeByteArray takes an array as a parameter");this.init_();const O=B?this.byteToCharMapWebSafe_:this.byteToCharMap_,W=[];for(let U=0;U<H.length;U+=3){const oe=H[U],Ie=U+1<H.length,Ye=Ie?H[U+1]:0,ut=U+2<H.length,mt=ut?H[U+2]:0;let At=(15&Ye)<<2|mt>>6,yn=63&mt;ut||(yn=64,Ie||(At=64)),W.push(O[oe>>2],O[(3&oe)<<4|Ye>>4],O[At],O[yn])}return W.join("")},encodeString(H,B){return this.HAS_NATIVE_SUPPORT&&!B?btoa(H):this.encodeByteArray(re(H),B)},decodeString(H,B){return this.HAS_NATIVE_SUPPORT&&!B?atob(H):function(H){const B=[];let O=0,W=0;for(;O<H.length;){const U=H[O++];if(U<128)B[W++]=String.fromCharCode(U);else if(U>191&&U<224){const oe=H[O++];B[W++]=String.fromCharCode((31&U)<<6|63&oe)}else if(U>239&&U<365){const ut=((7&U)<<18|(63&H[O++])<<12|(63&H[O++])<<6|63&H[O++])-65536;B[W++]=String.fromCharCode(55296+(ut>>10)),B[W++]=String.fromCharCode(56320+(1023&ut))}else{const oe=H[O++],Ie=H[O++];B[W++]=String.fromCharCode((15&U)<<12|(63&oe)<<6|63&Ie)}}return B.join("")}(this.decodeStringToByteArray(H,B))},decodeStringToByteArray(H,B){this.init_();const O=B?this.charToByteMapWebSafe_:this.charToByteMap_,W=[];for(let U=0;U<H.length;){const oe=O[H.charAt(U++)],Ye=U<H.length?O[H.charAt(U)]:0;++U;const mt=U<H.length?O[H.charAt(U)]:64;++U;const Fe=U<H.length?O[H.charAt(U)]:64;if(++U,null==oe||null==Ye||null==mt||null==Fe)throw Error();W.push(oe<<2|Ye>>4),64!==mt&&(W.push(Ye<<4&240|mt>>2),64!==Fe&&W.push(mt<<6&192|Fe))}return W},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let H=0;H<this.ENCODED_VALS.length;H++)this.byteToCharMap_[H]=this.ENCODED_VALS.charAt(H),this.charToByteMap_[this.byteToCharMap_[H]]=H,this.byteToCharMapWebSafe_[H]=this.ENCODED_VALS_WEBSAFE.charAt(H),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[H]]=H,H>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(H)]=H,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(H)]=H)}}},ae=function(H){const B=re(H);return me.encodeByteArray(B,!0)},ye=function(H){return ae(H).replace(/\./g,"")},he=function(H){try{return me.decodeString(H,!0)}catch(B){console.error("base64Decode failed: ",B)}return null};function G(H){return $(void 0,H)}function $(H,B){if(!(B instanceof Object))return B;switch(B.constructor){case Date:return new Date(B.getTime());case Object:void 0===H&&(H={});break;case Array:H=[];break;default:return B}for(const O in B)!B.hasOwnProperty(O)||!J(O)||(H[O]=$(H[O],B[O]));return H}function J(H){return"__proto__"!==H}function Pe(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Te(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Pe())}function Se(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function et(){return"object"==typeof self&&self.self===self}function be(){const H="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof H&&void 0!==H.id}function ue(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function lt(){const H=Pe();return H.indexOf("MSIE ")>=0||H.indexOf("Trident/")>=0}function Ee(){return!1}function Ae(){return!Se()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function $e(){try{return"object"==typeof indexedDB}catch{return!1}}function Le(){return new Promise((H,B)=>{try{let O=!0;const W="validate-browser-context-for-indexeddb-analytics-module",U=self.indexedDB.open(W);U.onsuccess=()=>{U.result.close(),O||self.indexedDB.deleteDatabase(W),H(!0)},U.onupgradeneeded=()=>{O=!1},U.onerror=()=>{var oe;B((null===(oe=U.error)||void 0===oe?void 0:oe.message)||"")}}catch(O){B(O)}})}function j(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const ie=()=>{try{return function Ce(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const H=process.env.__FIREBASE_DEFAULTS__;return H?JSON.parse(H):void 0})()||(()=>{if(typeof document>"u")return;let H;try{H=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const B=H&&he(H[1]);return B&&JSON.parse(B)})()}catch(H){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${H}`)}},gt=()=>{var H;return null===(H=ie())||void 0===H?void 0:H.config},Jt=H=>{var B;return null===(B=ie())||void 0===B?void 0:B[`_${H}`]};class Lt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((B,O)=>{this.resolve=B,this.reject=O})}wrapCallback(B){return(O,W)=>{O?this.reject(O):this.resolve(W),"function"==typeof B&&(this.promise.catch(()=>{}),1===B.length?B(O):B(O,W))}}}function Ke(H,B){if(H.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const W=B||"demo-project",U=H.iat||0,oe=H.sub||H.user_id;if(!oe)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ie=Object.assign({iss:`https://securetoken.google.com/${W}`,aud:W,iat:U,exp:U+3600,auth_time:U,sub:oe,user_id:oe,firebase:{sign_in_provider:"custom",identities:{}}},H);return[ye(JSON.stringify({alg:"none",type:"JWT"})),ye(JSON.stringify(Ie)),""].join(".")}class Un extends Error{constructor(B,O,W){super(O),this.code=B,this.customData=W,this.name="FirebaseError",Object.setPrototypeOf(this,Un.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,dn.prototype.create)}}class dn{constructor(B,O,W){this.service=B,this.serviceName=O,this.errors=W}create(B,...O){const W=O[0]||{},U=`${this.service}/${B}`,oe=this.errors[B],Ie=oe?function nn(H,B){return H.replace(ii,(O,W)=>{const U=B[W];return null!=U?String(U):`<${W}?>`})}(oe,W):"Error";return new Un(U,`${this.serviceName}: ${Ie} (${U}).`,W)}}const ii=/\{\$([^}]+)}/g;function Et(H){return JSON.parse(H)}function jt(H){return JSON.stringify(H)}const rr=function(H){let B={},O={},W={},U="";try{const oe=H.split(".");B=Et(he(oe[0])||""),O=Et(he(oe[1])||""),U=oe[2],W=O.d||{},delete O.d}catch{}return{header:B,claims:O,data:W,signature:U}},On=function(H){const O=rr(H).claims;return!!O&&"object"==typeof O&&O.hasOwnProperty("iat")},sr=function(H){const B=rr(H).claims;return"object"==typeof B&&!0===B.admin};function hi(H,B){return Object.prototype.hasOwnProperty.call(H,B)}function Wi(H,B){if(Object.prototype.hasOwnProperty.call(H,B))return H[B]}function fi(H){for(const B in H)if(Object.prototype.hasOwnProperty.call(H,B))return!1;return!0}function Lr(H,B,O){const W={};for(const U in H)Object.prototype.hasOwnProperty.call(H,U)&&(W[U]=B.call(O,H[U],U,H));return W}function tt(H,B){if(H===B)return!0;const O=Object.keys(H),W=Object.keys(B);for(const U of O){if(!W.includes(U))return!1;const oe=H[U],Ie=B[U];if(Tn(oe)&&Tn(Ie)){if(!tt(oe,Ie))return!1}else if(oe!==Ie)return!1}for(const U of W)if(!O.includes(U))return!1;return!0}function Tn(H){return null!==H&&"object"==typeof H}function kn(H){const B=[];for(const[O,W]of Object.entries(H))Array.isArray(W)?W.forEach(U=>{B.push(encodeURIComponent(O)+"="+encodeURIComponent(U))}):B.push(encodeURIComponent(O)+"="+encodeURIComponent(W));return B.length?"&"+B.join("&"):""}function qi(H){const B={};return H.replace(/^\?/,"").split("&").forEach(W=>{if(W){const[U,oe]=W.split("=");B[decodeURIComponent(U)]=decodeURIComponent(oe)}}),B}function ri(H){const B=H.indexOf("?");if(!B)return"";const O=H.indexOf("#",B);return H.substring(B,O>0?O:void 0)}class Rn{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let B=1;B<this.blockSize;++B)this.pad_[B]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(B,O){O||(O=0);const W=this.W_;if("string"==typeof B)for(let Fe=0;Fe<16;Fe++)W[Fe]=B.charCodeAt(O)<<24|B.charCodeAt(O+1)<<16|B.charCodeAt(O+2)<<8|B.charCodeAt(O+3),O+=4;else for(let Fe=0;Fe<16;Fe++)W[Fe]=B[O]<<24|B[O+1]<<16|B[O+2]<<8|B[O+3],O+=4;for(let Fe=16;Fe<80;Fe++){const At=W[Fe-3]^W[Fe-8]^W[Fe-14]^W[Fe-16];W[Fe]=4294967295&(At<<1|At>>>31)}let mt,xe,U=this.chain_[0],oe=this.chain_[1],Ie=this.chain_[2],Ye=this.chain_[3],ut=this.chain_[4];for(let Fe=0;Fe<80;Fe++){Fe<40?Fe<20?(mt=Ye^oe&(Ie^Ye),xe=1518500249):(mt=oe^Ie^Ye,xe=1859775393):Fe<60?(mt=oe&Ie|Ye&(oe|Ie),xe=2400959708):(mt=oe^Ie^Ye,xe=3395469782);const At=(U<<5|U>>>27)+mt+ut+xe+W[Fe]&4294967295;ut=Ye,Ye=Ie,Ie=4294967295&(oe<<30|oe>>>2),oe=U,U=At}this.chain_[0]=this.chain_[0]+U&4294967295,this.chain_[1]=this.chain_[1]+oe&4294967295,this.chain_[2]=this.chain_[2]+Ie&4294967295,this.chain_[3]=this.chain_[3]+Ye&4294967295,this.chain_[4]=this.chain_[4]+ut&4294967295}update(B,O){if(null==B)return;void 0===O&&(O=B.length);const W=O-this.blockSize;let U=0;const oe=this.buf_;let Ie=this.inbuf_;for(;U<O;){if(0===Ie)for(;U<=W;)this.compress_(B,U),U+=this.blockSize;if("string"==typeof B){for(;U<O;)if(oe[Ie]=B.charCodeAt(U),++Ie,++U,Ie===this.blockSize){this.compress_(oe),Ie=0;break}}else for(;U<O;)if(oe[Ie]=B[U],++Ie,++U,Ie===this.blockSize){this.compress_(oe),Ie=0;break}}this.inbuf_=Ie,this.total_+=O}digest(){const B=[];let O=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let U=this.blockSize-1;U>=56;U--)this.buf_[U]=255&O,O/=256;this.compress_(this.buf_);let W=0;for(let U=0;U<5;U++)for(let oe=24;oe>=0;oe-=8)B[W]=this.chain_[U]>>oe&255,++W;return B}}function $n(H,B){const O=new ln(H,B);return O.subscribe.bind(O)}class ln{constructor(B,O){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=O,this.task.then(()=>{B(this)}).catch(W=>{this.error(W)})}next(B){this.forEachObserver(O=>{O.next(B)})}error(B){this.forEachObserver(O=>{O.error(B)}),this.close(B)}complete(){this.forEachObserver(B=>{B.complete()}),this.close()}subscribe(B,O,W){let U;if(void 0===B&&void 0===O&&void 0===W)throw new Error("Missing Observer.");U=function ht(H,B){if("object"!=typeof H||null===H)return!1;for(const O of B)if(O in H&&"function"==typeof H[O])return!0;return!1}(B,["next","error","complete"])?B:{next:B,error:O,complete:W},void 0===U.next&&(U.next=Vt),void 0===U.error&&(U.error=Vt),void 0===U.complete&&(U.complete=Vt);const oe=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?U.error(this.finalError):U.complete()}catch{}}),this.observers.push(U),oe}unsubscribeOne(B){void 0===this.observers||void 0===this.observers[B]||(delete this.observers[B],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(B){if(!this.finalized)for(let O=0;O<this.observers.length;O++)this.sendOne(O,B)}sendOne(B,O){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[B])try{O(this.observers[B])}catch(W){typeof console<"u"&&console.error&&console.error(W)}})}close(B){this.finalized||(this.finalized=!0,void 0!==B&&(this.finalError=B),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Vt(){}const pn=function(H,B,O,W){let U;if(W<B?U="at least "+B:W>O&&(U=0===O?"none":"no more than "+O),U)throw new Error(H+" failed: Was called with "+W+(1===W?" argument.":" arguments.")+" Expects "+U+".")};function Qn(H,B){return`${H} failed: ${B} argument `}function Nt(H,B,O,W){if((!W||O)&&"function"!=typeof O)throw new Error(Qn(H,B)+"must be a valid function.")}function or(H,B,O,W){if((!W||O)&&("object"!=typeof O||null===O))throw new Error(Qn(H,B)+"must be a valid context object.")}const Yt=function(H){const B=[];let O=0;for(let W=0;W<H.length;W++){let U=H.charCodeAt(W);if(U>=55296&&U<=56319){const oe=U-55296;W++,X(W<H.length,"Surrogate pair missing trail surrogate."),U=65536+(oe<<10)+(H.charCodeAt(W)-56320)}U<128?B[O++]=U:U<2048?(B[O++]=U>>6|192,B[O++]=63&U|128):U<65536?(B[O++]=U>>12|224,B[O++]=U>>6&63|128,B[O++]=63&U|128):(B[O++]=U>>18|240,B[O++]=U>>12&63|128,B[O++]=U>>6&63|128,B[O++]=63&U|128)}return B},Mi=function(H){let B=0;for(let O=0;O<H.length;O++){const W=H.charCodeAt(O);W<128?B++:W<2048?B+=2:W>=55296&&W<=56319?(B+=4,O++):B+=3}return B};function ot(H,B=1e3,O=2){const W=B*Math.pow(O,H),U=Math.round(.5*W*(Math.random()-.5)*2);return Math.min(144e5,W+U)}function Ut(H){return H&&H._delegate?H._delegate:H}},4411:(yt,Me,R)=>{var l=R(4650);let X=null;function V(){return X}const ae=new l.OlP("DocumentToken");let ye=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:function(){return function he(){return(0,l.LFG)($)}()},providedIn:"platform"}),n})();const G=new l.OlP("Location Initialized");let $=(()=>{class n extends ye{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return V().getBaseHref(this._doc)}onPopState(t){const i=V().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){const i=V().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,i,r){J()?this._history.pushState(t,i,r):this.location.hash=r}replaceState(t,i,r){J()?this._history.replaceState(t,i,r):this.location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(ae))},n.\u0275prov=l.Yz7({token:n,factory:function(){return function Pe(){return new $((0,l.LFG)(ae))}()},providedIn:"platform"}),n})();function J(){return!!window.history.pushState}function Te(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Se(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function et(n){return n&&"?"!==n[0]?"?"+n:n}let be=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:function(){return(0,l.f3M)(pt)},providedIn:"root"}),n})();const ue=new l.OlP("appBaseHref");let pt=(()=>{class n extends be{constructor(t,i){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??(0,l.f3M)(ae).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Te(this._baseHref,t)}path(t=!1){const i=this._platformLocation.pathname+et(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,o){const u=this.prepareExternalUrl(r+et(o));this._platformLocation.pushState(t,i,u)}replaceState(t,i,r,o){const u=this.prepareExternalUrl(r+et(o));this._platformLocation.replaceState(t,i,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(ye),l.LFG(ue,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),lt=(()=>{class n extends be{constructor(t,i){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(t){const i=Te(this._baseHref,t);return i.length>0?"#"+i:i}pushState(t,i,r,o){let u=this.prepareExternalUrl(r+et(o));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.pushState(t,i,u)}replaceState(t,i,r,o){let u=this.prepareExternalUrl(r+et(o));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.replaceState(t,i,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(ye),l.LFG(ue,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),Re=(()=>{class n{constructor(t){this._subject=new l.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const i=this._locationStrategy.getBaseHref();this._baseHref=Se($e(i)),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+et(i))}normalize(t){return n.stripTrailingSlash(function Ae(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,$e(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._locationStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+et(i)),r)}replaceState(t,i="",r=null){this._locationStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+et(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i,complete:r})}}return n.normalizeQueryParams=et,n.joinWithSlash=Te,n.stripTrailingSlash=Se,n.\u0275fac=function(t){return new(t||n)(l.LFG(be))},n.\u0275prov=l.Yz7({token:n,factory:function(){return function Ee(){return new Re((0,l.LFG)(be))}()},providedIn:"root"}),n})();function $e(n){return n.replace(/\/index.html$/,"")}let fn=(()=>{class n{constructor(t,i,r,o){this._iterableDiffers=t,this._keyValueDiffers=i,this._ngEl=r,this._renderer=o,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,l.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(i=>this._toggleClass(i.key,i.currentValue)),t.forEachChangedItem(i=>this._toggleClass(i.key,i.currentValue)),t.forEachRemovedItem(i=>{i.previousValue&&this._toggleClass(i.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(i=>{if("string"!=typeof i.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,l.AaK)(i.item)}`);this._toggleClass(i.item,!0)}),t.forEachRemovedItem(i=>this._toggleClass(i.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(i=>this._toggleClass(i,!0)):Object.keys(t).forEach(i=>this._toggleClass(i,!!t[i])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(i=>this._toggleClass(i,!1)):Object.keys(t).forEach(i=>this._toggleClass(i,!1)))}_toggleClass(t,i){(t=t.trim())&&t.split(/\s+/g).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.ZZ4),l.Y36(l.aQg),l.Y36(l.SBq),l.Y36(l.Qsj))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class Sa{constructor(e,t,i,r){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Oi=(()=>{class n{constructor(t,i,r){this._viewContainer=t,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const i=this._viewContainer;t.forEachOperation((r,o,u)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new Sa(r.item,this._ngForOf,-1,-1),null===u?void 0:u);else if(null==u)i.remove(null===o?void 0:o);else if(null!==o){const h=i.get(o);i.move(h,u),ys(h,r)}});for(let r=0,o=i.length;r<o;r++){const h=i.get(r).context;h.index=r,h.count=o,h.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{ys(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.s_b),l.Y36(l.Rgc),l.Y36(l.ZZ4))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function ys(n,e){n.context.$implicit=e.item}let Sn=(()=>{class n{constructor(t,i){this._viewContainer=t,this._context=new Aa,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){zi("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){zi("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.s_b),l.Y36(l.Rgc))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class Aa{constructor(){this.$implicit=null,this.ngIf=null}}function zi(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,l.AaK)(e)}'.`)}let Na=(()=>{class n{constructor(t,i,r){this._ngEl=t,this._differs=i,this._renderer=r,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,i){const[r,o]=t.split("."),u=-1===r.indexOf("-")?void 0:l.JOm.DashCase;null!=i?this._renderer.setStyle(this._ngEl.nativeElement,r,o?`${i}${o}`:i,u):this._renderer.removeStyle(this._ngEl.nativeElement,r,u)}_applyChanges(t){t.forEachRemovedItem(i=>this._setStyle(i.key,null)),t.forEachAddedItem(i=>this._setStyle(i.key,i.currentValue)),t.forEachChangedItem(i=>this._setStyle(i.key,i.currentValue))}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.SBq),l.Y36(l.aQg),l.Y36(l.Qsj))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),n})();class Wu{createSubscription(e,t){return e.subscribe({next:t,error:i=>{throw i}})}dispose(e){e.unsubscribe()}}class xg{createSubscription(e,t){return e.then(t,i=>{throw i})}dispose(e){}}const ns=new xg,qu=new Wu;let Cc=(()=>{class n{constructor(t){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,i=>this._updateLatestValue(t,i))}_selectStrategy(t){if((0,l.QGY)(t))return ns;if((0,l.F4k)(t))return qu;throw function wi(n,e){return new l.vHH(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,i){t===this._obj&&(this._latestValue=i,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.sBO,16))},n.\u0275pipe=l.Yjl({name:"async",type:n,pure:!1,standalone:!0}),n})(),oi=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})();function cr(n){return"server"===n}let fl=(()=>{class n{}return n.\u0275prov=(0,l.Yz7)({token:n,providedIn:"root",factory:()=>new Ko((0,l.LFG)(ae),window)}),n})();class Ko{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function mr(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const o=r.shadowRoot;if(o){const u=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(u)return u}r=i.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),i=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(i-o[0],r-o[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=lo(this.window.history)||lo(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function lo(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class xc extends class Lg extends class me{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function fe(n){X||(X=n)}(new xc)}onAndCancel(e,t,i){return e.addEventListener(t,i,!1),()=>{e.removeEventListener(t,i,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function sf(){return ml=ml||document.querySelector("base"),ml?ml.getAttribute("href"):null}();return null==t?null:function jr(n){Vi=Vi||document.createElement("a"),Vi.setAttribute("href",n);const e=Vi.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){ml=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Li(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const i=t.indexOf("="),[r,o]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(o)}return null}(document.cookie,e)}}let Vi,ml=null;const jn=new l.OlP("TRANSITION_ID"),Ky=[{provide:l.ip1,useFactory:function zy(n,e,t){return()=>{t.get(l.CZH).donePromise.then(()=>{const i=V(),r=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let o=0;o<r.length;o++)i.remove(r[o])})}},deps:[jn,ae,l.zs3],multi:!0}];let Qy=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const Xu=new l.OlP("EventManagerPlugins");let af=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(r=>r.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}addGlobalEventListener(t,i,r){return this._findPluginFor(i).addGlobalEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){const i=this._eventNameToPlugin.get(t);if(i)return i;const r=this._plugins;for(let o=0;o<r.length;o++){const u=r[o];if(u.supports(t))return this._eventNameToPlugin.set(t,u),u}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Xu),l.LFG(l.R0b))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();class Mc{constructor(e){this._doc=e}addGlobalEventListener(e,t,i){const r=V().getGlobalEventTarget(this._doc,e);if(!r)throw new Error(`Unsupported event target ${r} for event ${t}`);return this.addEventListener(r,t,i)}}let Oc=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const i=new Set;t.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),i.add(r))}),this.onStylesAdded(i)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),Pa=(()=>{class n extends Oc{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,i,r){t.forEach(o=>{const u=this._doc.createElement("style");u.textContent=o,r.push(i.appendChild(u))})}addHost(t){const i=[];this._addStylesToHost(this._stylesSet,t,i),this._hostNodes.set(t,i)}removeHost(t){const i=this._hostNodes.get(t);i&&i.forEach(lf),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((i,r)=>{this._addStylesToHost(t,r,i)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(lf))}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(ae))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();function lf(n){V().remove(n)}const cf={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Vg=/%COMP%/g;function ed(n,e,t){for(let i=0;i<e.length;i++){let r=e[i];Array.isArray(r)?ed(n,r,t):(r=r.replace(Vg,n),t.push(r))}return t}function Ug(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let td=(()=>{class n{constructor(t,i,r){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new _l(t)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;switch(i.encapsulation){case l.ifc.Emulated:{let r=this.rendererByCompId.get(i.id);return r||(r=new Bg(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,r)),r.applyToHost(t),r}case 1:case l.ifc.ShadowDom:return new jg(this.eventManager,this.sharedStylesHost,t,i);default:if(!this.rendererByCompId.has(i.id)){const r=ed(i.id,i.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(af),l.LFG(Pa),l.LFG(l.AFp))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();class _l{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(cf[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(kc(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(kc(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i="string"==typeof e?document.querySelector(e):e;if(!i)throw new Error(`The selector "${e}" did not match any elements`);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;const o=cf[r];o?e.setAttributeNS(o,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){const r=cf[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(l.JOm.DashCase|l.JOm.Important)?e.style.setProperty(t,i,r&l.JOm.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&l.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e[t]=i}setValue(e,t){e.nodeValue=t}listen(e,t,i){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Ug(i)):this.eventManager.addEventListener(e,t,Ug(i))}}function kc(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Bg extends _l{constructor(e,t,i,r){super(e),this.component=i;const o=ed(r+"-"+i.id,i.styles,[]);t.addStyles(o),this.contentAttr=function Rc(n){return"_ngcontent-%COMP%".replace(Vg,n)}(r+"-"+i.id),this.hostAttr=function df(n){return"_nghost-%COMP%".replace(Vg,n)}(r+"-"+i.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}}class jg extends _l{constructor(e,t,i,r){super(e),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const o=ed(r.id,r.styles,[]);for(let u=0;u<o.length;u++){const h=document.createElement("style");h.textContent=o[u],this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Fc=(()=>{class n extends Mc{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(ae))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const Lc=["alt","control","meta","shift"],Vc={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ws={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let id=(()=>{class n extends Mc{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,i,r){const o=n.parseEventName(i),u=n.eventCallback(o.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>V().onAndCancel(t,o.domEventName,u))}static parseEventName(t){const i=t.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const o=n._normalizeKey(i.pop());let u="",h=i.indexOf("code");if(h>-1&&(i.splice(h,1),u="code."),Lc.forEach(y=>{const C=i.indexOf(y);C>-1&&(i.splice(C,1),u+=y+".")}),u+=o,0!=i.length||0===o.length)return null;const g={};return g.domEventName=r,g.fullKey=u,g}static matchEventFullKeyCode(t,i){let r=Vc[t.key]||t.key,o="";return i.indexOf("code.")>-1&&(r=t.code,o="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),Lc.forEach(u=>{u!==r&&(0,Ws[u])(t)&&(o+=u+".")}),o+=r,o===i)}static eventCallback(t,i,r){return o=>{n.matchEventFullKeyCode(o,t)&&r.runGuarded(()=>i(o))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(ae))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const sd=(0,l.eFA)(l._c5,"browser",[{provide:l.Lbi,useValue:"browser"},{provide:l.g9A,useValue:function hf(){xc.makeCurrent()},multi:!0},{provide:ae,useFactory:function jc(){return(0,l.RDi)(document),document},deps:[]}]),yl=new l.OlP(""),Gg=[{provide:l.rWj,useClass:class Yy{addToWindow(e){l.dqk.getAngularTestability=(i,r=!0)=>{const o=e.findTestabilityInTree(i,r);if(null==o)throw new Error("Could not find testability for element.");return o},l.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),l.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),l.dqk.frameworkStabilizers||(l.dqk.frameworkStabilizers=[]),l.dqk.frameworkStabilizers.push(i=>{const r=l.dqk.getAllAngularTestabilities();let o=r.length,u=!1;const h=function(g){u=u||g,o--,0==o&&i(u)};r.forEach(function(g){g.whenStable(h)})})}findTestabilityInTree(e,t,i){return null==t?null:e.getTestability(t)??(i?V().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:l.lri,useClass:l.dDg,deps:[l.R0b,l.eoX,l.rWj]},{provide:l.dDg,useClass:l.dDg,deps:[l.R0b,l.eoX,l.rWj]}],vl=[{provide:l.zSh,useValue:"root"},{provide:l.qLn,useFactory:function Bc(){return new l.qLn},deps:[]},{provide:Xu,useClass:Fc,multi:!0,deps:[ae,l.R0b,l.Lbi]},{provide:Xu,useClass:id,multi:!0,deps:[ae]},{provide:td,useClass:td,deps:[af,Pa,l.AFp]},{provide:l.FYo,useExisting:td},{provide:Oc,useExisting:Pa},{provide:Pa,useClass:Pa,deps:[ae]},{provide:af,useClass:af,deps:[Xu,l.R0b]},{provide:class Br{},useClass:Qy,deps:[]},[]];let ff=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:l.AFp,useValue:t.appId},{provide:jn,useExisting:l.AFp},Ky]}}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(yl,12))},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[...vl,...Gg],imports:[oi,l.hGG]}),n})(),Fa=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(ae))},n.\u0275prov=l.Yz7({token:n,factory:function(t){let i=null;return i=t?new t:function bl(){return new Fa((0,l.LFG)(ae))}(),i},providedIn:"root"}),n})();typeof window<"u"&&window;var Pn=R(8996),Sr=R(3269);function bt(...n){const e=(0,Sr.yG)(n);return(0,Pn.D)(n,e)}var Wn=R(7579);class wn extends Wn.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}}const Cl=(0,R(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var ai=R(9751);const{isArray:ea}=Array,{getPrototypeOf:cd,prototype:tv,keys:vf}=Object;function qc(n){if(1===n.length){const e=n[0];if(ea(e))return{args:e,keys:null};if(function El(n){return n&&"object"==typeof n&&cd(n)===tv}(e)){const t=vf(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}var fo=R(4671),at=R(4004);const{isArray:bf}=Array;function ud(n){return(0,at.U)(e=>function Il(n,e){return bf(e)?n(...e):n(e)}(n,e))}function dd(n,e){return n.reduce((t,i,r)=>(t[i]=e[r],t),{})}var ti=R(5403),nv=R(9672);function Tl(...n){const e=(0,Sr.yG)(n),t=(0,Sr.jO)(n),{args:i,keys:r}=qc(n);if(0===i.length)return(0,Pn.D)([],e);const o=new ai.y(function iv(n,e,t=fo.y){return i=>{hd(e,()=>{const{length:r}=n,o=new Array(r);let u=r,h=r;for(let g=0;g<r;g++)hd(e,()=>{const y=(0,Pn.D)(n[g],e);let C=!1;y.subscribe((0,ti.x)(i,I=>{o[g]=I,C||(C=!0,h--),h||i.next(t(o.slice()))},()=>{--u||i.complete()}))},i)},i)}}(i,e,r?u=>dd(r,u):fo.y));return t?o.pipe(ud(t)):o}function hd(n,e,t){n?(0,nv.f)(t,n,e):e()}var zc=R(8189);function qs(...n){return function Kc(){return(0,zc.J)(1)}()((0,Pn.D)(n,(0,Sr.yG)(n)))}var po=R(8421);function zs(n){return new ai.y(e=>{(0,po.Xf)(n()).subscribe(e)})}var wf=R(9635),Hr=R(576);function Va(n,e){const t=(0,Hr.m)(n)?n:()=>n,i=r=>r.error(t());return new ai.y(e?r=>e.schedule(i,0,r):i)}var ws=R(515),fd=R(727),Ci=R(4482);function go(){return(0,Ci.e)((n,e)=>{let t=null;n._refCount++;const i=(0,ti.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const r=n._connection,o=t;t=null,r&&(!o||r===o)&&r.unsubscribe(),e.unsubscribe()});n.subscribe(i),i.closed||(t=n.connect())})}class ta extends ai.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Ci.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new fd.w0;const t=this.getSubject();e.add(this.source.subscribe((0,ti.x)(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=fd.w0.EMPTY)}return e}refCount(){return go()(this)}}function li(n,e){return(0,Ci.e)((t,i)=>{let r=null,o=0,u=!1;const h=()=>u&&!r&&i.complete();t.subscribe((0,ti.x)(i,g=>{r?.unsubscribe();let y=0;const C=o++;(0,po.Xf)(n(g,C)).subscribe(r=(0,ti.x)(i,I=>i.next(e?e(g,I,C,y++):I),()=>{r=null,h()}))},()=>{u=!0,h()}))})}function cn(n){return n<=0?()=>ws.E:(0,Ci.e)((e,t)=>{let i=0;e.subscribe((0,ti.x)(t,r=>{++i<=n&&(t.next(r),n<=i&&t.complete())}))})}function na(...n){const e=(0,Sr.yG)(n);return(0,Ci.e)((t,i)=>{(e?qs(n,t,e):qs(n,t)).subscribe(i)})}function gi(n,e){return(0,Ci.e)((t,i)=>{let r=0;t.subscribe((0,ti.x)(i,o=>n.call(e,o,r++)&&i.next(o)))})}var Pi=R(5577);function ia(n){return(0,Ci.e)((e,t)=>{let i=!1;e.subscribe((0,ti.x)(t,r=>{i=!0,t.next(r)},()=>{i||t.next(n),t.complete()}))})}function pd(n=rv){return(0,Ci.e)((e,t)=>{let i=!1;e.subscribe((0,ti.x)(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(n())))})}function rv(){return new Cl}function ss(n,e){const t=arguments.length>=2;return i=>i.pipe(n?gi((r,o)=>n(r,o,i)):fo.y,cn(1),t?ia(e):pd(()=>new Cl))}function Ds(n,e){return(0,Hr.m)(e)?(0,Pi.z)(n,e,1):(0,Pi.z)(n,1)}var ci=R(8505);function Cs(n){return(0,Ci.e)((e,t)=>{let o,i=null,r=!1;i=e.subscribe((0,ti.x)(t,void 0,void 0,u=>{o=(0,po.Xf)(n(u,Cs(n)(e))),i?(i.unsubscribe(),i=null,o.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,o.subscribe(t))})}function ra(n,e,t,i,r){return(o,u)=>{let h=t,g=e,y=0;o.subscribe((0,ti.x)(u,C=>{const I=y++;g=h?n(g,C,I):(h=!0,C),i&&u.next(g)},r&&(()=>{h&&u.next(g),u.complete()})))}}function mo(n,e){return(0,Ci.e)(ra(n,e,arguments.length>=2,!0))}function Yc(n){return n<=0?()=>ws.E:(0,Ci.e)((e,t)=>{let i=[];e.subscribe((0,ti.x)(t,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(const r of i)t.next(r);t.complete()},void 0,()=>{i=null}))})}function sa(n,e){const t=arguments.length>=2;return i=>i.pipe(n?gi((r,o)=>n(r,o,i)):fo.y,Yc(1),t?ia(e):pd(()=>new Cl))}function _d(n){return(0,Ci.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const zt="primary",Ks=Symbol("RouteTitle");class Sl{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function oa(n){return new Sl(n)}function mD(n,e,t){const i=t.path.split("/");if(i.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||i.length<n.length))return null;const r={};for(let o=0;o<i.length;o++){const u=i[o],h=n[o];if(u.startsWith(":"))r[u.substring(1)]=h;else if(u!==h.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function Ys(n,e){const t=n?Object.keys(n):void 0,i=e?Object.keys(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let o=0;o<t.length;o++)if(r=t[o],!Df(n[r],e[r]))return!1;return!0}function Df(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),i=[...e].sort();return t.every((r,o)=>i[o]===r)}return n===e}function zg(n){return Array.prototype.concat.apply([],n)}function Kg(n){return n.length>0?n[n.length-1]:null}function Ei(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function os(n){return(0,l.CqO)(n)?n:(0,l.QGY)(n)?(0,Pn.D)(Promise.resolve(n)):bt(n)}const _D={exact:function Qg(n,e,t){if(!xl(n.segments,e.segments)||!Al(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const i in e.children)if(!n.children[i]||!Qg(n.children[i],e.children[i],t))return!1;return!0},subset:Tf},Ef={exact:function av(n,e){return Ys(n,e)},subset:function If(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Df(n[t],e[t]))},ignored:()=>!0};function ov(n,e,t){return _D[t.paths](n.root,e.root,t.matrixParams)&&Ef[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Tf(n,e,t){return lv(n,e,e.segments,t)}function lv(n,e,t,i){if(n.segments.length>t.length){const r=n.segments.slice(0,t.length);return!(!xl(r,t)||e.hasChildren()||!Al(r,t,i))}if(n.segments.length===t.length){if(!xl(n.segments,t)||!Al(n.segments,t,i))return!1;for(const r in e.children)if(!n.children[r]||!Tf(n.children[r],e.children[r],i))return!1;return!0}{const r=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!!(xl(n.segments,r)&&Al(n.segments,r,i)&&n.children[zt])&&lv(n.children[zt],e,o,i)}}function Al(n,e,t){return e.every((i,r)=>Ef[t](n[r].parameters,i.parameters))}class Nl{constructor(e,t,i){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=oa(this.queryParams)),this._queryParamMap}toString(){return vd.serialize(this)}}class sn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Ei(t,(i,r)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Jc(this)}}class yd{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=oa(this.parameters)),this._parameterMap}toString(){return Af(this)}}function xl(n,e){return n.length===e.length&&n.every((t,i)=>t.path===e[i].path)}let Sf=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:function(){return new Qc},providedIn:"root"}),n})();class Qc{parse(e){const t=new _o(e);return new Nl(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${aa(e.root,!0)}`,i=function fv(n){const e=Object.keys(n).map(t=>{const i=n[t];return Array.isArray(i)?i.map(r=>`${Xc(t)}=${Xc(r)}`).join("&"):`${Xc(t)}=${Xc(i)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${i}${"string"==typeof e.fragment?`#${function dv(n){return encodeURI(n)}(e.fragment)}`:""}`}}const vd=new Qc;function Jc(n){return n.segments.map(e=>Af(e)).join("/")}function aa(n,e){if(!n.hasChildren())return Jc(n);if(e){const t=n.children[zt]?aa(n.children[zt],!1):"",i=[];return Ei(n.children,(r,o)=>{o!==zt&&i.push(`${o}:${aa(r,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}{const t=function uv(n,e){let t=[];return Ei(n.children,(i,r)=>{r===zt&&(t=t.concat(e(i,r)))}),Ei(n.children,(i,r)=>{r!==zt&&(t=t.concat(e(i,r)))}),t}(n,(i,r)=>r===zt?[aa(n.children[zt],!1)]:[`${r}:${aa(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[zt]?`${Jc(n)}/${t[0]}`:`${Jc(n)}/(${t.join("//")})`}}function Es(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Xc(n){return Es(n).replace(/%3B/gi,";")}function eu(n){return Es(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function tu(n){return decodeURIComponent(n)}function nu(n){return tu(n.replace(/\+/g,"%20"))}function Af(n){return`${eu(n.path)}${function hv(n){return Object.keys(n).map(e=>`;${eu(e)}=${eu(n[e])}`).join("")}(n.parameters)}`}const Jg=/^[^\/()?;=#]+/;function bd(n){const e=n.match(Jg);return e?e[0]:""}const pv=/^[^=?&#]+/,Nf=/^[^&#]+/;class _o{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new sn([],{}):new sn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[zt]=new sn(e,t)),i}parseSegment(){const e=bd(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new l.vHH(4009,!1);return this.capture(e),new yd(tu(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=bd(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const r=bd(this.remaining);r&&(i=r,this.capture(i))}e[tu(t)]=tu(i)}parseQueryParam(e){const t=function hr(n){const e=n.match(pv);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const u=function gv(n){const e=n.match(Nf);return e?e[0]:""}(this.remaining);u&&(i=u,this.capture(i))}const r=nu(t),o=nu(i);if(e.hasOwnProperty(r)){let u=e[r];Array.isArray(u)||(u=[u],e[r]=u),u.push(o)}else e[r]=o}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=bd(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new l.vHH(4010,!1);let o;i.indexOf(":")>-1?(o=i.slice(0,i.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=zt);const u=this.parseChildren();t[o]=1===Object.keys(u).length?u[zt]:new sn([],u),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new l.vHH(4011,!1)}}function Bi(n){return n.segments.length>0?new sn([],{[zt]:n}):n}function la(n){const e={};for(const i of Object.keys(n.children)){const o=la(n.children[i]);(o.segments.length>0||o.hasChildren())&&(e[i]=o)}return function wd(n){if(1===n.numberOfChildren&&n.children[zt]){const e=n.children[zt];return new sn(n.segments.concat(e.segments),e.children)}return n}(new sn(n.segments,e))}function Ua(n){return n instanceof Nl}function yv(n,e,t,i,r){if(0===t.length)return Ol(e.root,e.root,e.root,i,r);const o=function Xg(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Ed(!0,0,n);let e=0,t=!1;const i=n.reduce((r,o,u)=>{if("object"==typeof o&&null!=o){if(o.outlets){const h={};return Ei(o.outlets,(g,y)=>{h[y]="string"==typeof g?g.split("/"):g}),[...r,{outlets:h}]}if(o.segmentPath)return[...r,o.segmentPath]}return"string"!=typeof o?[...r,o]:0===u?(o.split("/").forEach((h,g)=>{0==g&&"."===h||(0==g&&""===h?t=!0:".."===h?e++:""!=h&&r.push(h))}),r):[...r,o]},[]);return new Ed(t,e,i)}(t);return o.toRoot()?Ol(e.root,e.root,new sn([],{}),i,r):function u(g){const y=function Ha(n,e,t,i){if(n.isAbsolute)return new ja(e.root,!0,0);if(-1===i)return new ja(t,t===e.root,0);return function tm(n,e,t){let i=n,r=e,o=t;for(;o>r;){if(o-=r,i=i.parent,!i)throw new l.vHH(4005,!1);r=i.segments.length}return new ja(i,!1,r-o)}(t,i+(Ml(n.commands[0])?0:1),n.numberOfDoubleDots)}(o,e,n.snapshot?._urlSegment,g),C=y.processChildren?yo(y.segmentGroup,y.index,o.commands):Ga(y.segmentGroup,y.index,o.commands);return Ol(e.root,y.segmentGroup,C,i,r)}(n.snapshot?._lastPathIndex)}function Ml(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Ba(n){return"object"==typeof n&&null!=n&&n.outlets}function Ol(n,e,t,i,r){let u,o={};i&&Ei(i,(g,y)=>{o[y]=Array.isArray(g)?g.map(C=>`${C}`):`${g}`}),u=n===e?t:Cd(n,e,t);const h=Bi(la(u));return new Nl(h,o,r)}function Cd(n,e,t){const i={};return Ei(n.children,(r,o)=>{i[o]=r===e?t:Cd(r,e,t)}),new sn(n.segments,i)}class Ed{constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&Ml(i[0]))throw new l.vHH(4003,!1);const r=i.find(Ba);if(r&&r!==Kg(i))throw new l.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ja{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}}function Ga(n,e,t){if(n||(n=new sn([],{})),0===n.segments.length&&n.hasChildren())return yo(n,e,t);const i=function nm(n,e,t){let i=0,r=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return o;const u=n.segments[r],h=t[i];if(Ba(h))break;const g=`${h}`,y=i<t.length-1?t[i+1]:null;if(r>0&&void 0===g)break;if(g&&y&&"object"==typeof y&&void 0===y.outlets){if(!xf(g,y,u))return o;i+=2}else{if(!xf(g,{},u))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const o=new sn(n.segments.slice(0,i.pathIndex),{});return o.children[zt]=new sn(n.segments.slice(i.pathIndex),n.children),yo(o,0,r)}return i.match&&0===r.length?new sn(n.segments,{}):i.match&&!n.hasChildren()?im(n,e,t):i.match?yo(n,0,r):im(n,e,t)}function yo(n,e,t){if(0===t.length)return new sn(n.segments,{});{const i=function vv(n){return Ba(n[0])?n[0].outlets:{[zt]:n}}(t),r={};return Ei(i,(o,u)=>{"string"==typeof o&&(o=[o]),null!==o&&(r[u]=Ga(n.children[u],e,o))}),Ei(n.children,(o,u)=>{void 0===i[u]&&(r[u]=o)}),new sn(n.segments,r)}}function im(n,e,t){const i=n.segments.slice(0,e);let r=0;for(;r<t.length;){const o=t[r];if(Ba(o)){const g=vo(o.outlets);return new sn(i,g)}if(0===r&&Ml(t[0])){i.push(new yd(n.segments[e].path,Id(t[0]))),r++;continue}const u=Ba(o)?o.outlets[zt]:`${o}`,h=r<t.length-1?t[r+1]:null;u&&h&&Ml(h)?(i.push(new yd(u,Id(h))),r+=2):(i.push(new yd(u,{})),r++)}return new sn(i,{})}function vo(n){const e={};return Ei(n,(t,i)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[i]=im(new sn([],{}),0,t))}),e}function Id(n){const e={};return Ei(n,(t,i)=>e[i]=`${t}`),e}function xf(n,e,t){return n==t.path&&Ys(e,t.parameters)}class bo{constructor(e,t){this.id=e,this.url=t}}class Rl extends bo{constructor(e,t,i="imperative",r=null){super(e,t),this.type=0,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class $a extends bo{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Td extends bo{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class rm extends bo{constructor(e,t,i,r){super(e,t),this.error=i,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class bv extends bo{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ru extends bo{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class wv extends bo{constructor(e,t,i,r,o){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=o,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Mf extends bo{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Of extends bo{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class sm{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Rf{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Dv{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class om{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Sd{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ad{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class wo{constructor(e,t,i){this.routerEvent=e,this.position=t,this.anchor=i,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class su{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Pf(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){const t=Pf(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Ar(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return Ar(e,this._root).map(t=>t.value)}}function Pf(n,e){if(n===e.value)return e;for(const t of e.children){const i=Pf(n,t);if(i)return i}return null}function Ar(n,e){if(n===e.value)return[e];for(const t of e.children){const i=Ar(n,t);if(i.length)return i.unshift(e),i}return[]}class fr{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Za(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class kf extends su{constructor(e,t){super(e),this.snapshot=t,au(this,e)}toString(){return this.snapshot.toString()}}function ou(n,e){const t=function Nd(n,e){const u=new Nr([],{},{},"",{},zt,e,null,n.root,-1,{});return new Od("",new fr(u,[]))}(n,e),i=new wn([new yd("",{})]),r=new wn({}),o=new wn({}),u=new wn({}),h=new wn(""),g=new Do(i,r,u,h,o,zt,e,t.root);return g.snapshot=t.root,new kf(new fr(g,[]),t)}class Do{constructor(e,t,i,r,o,u,h,g){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=u,this.component=h,this.title=this.data?.pipe((0,at.U)(y=>y[Ks]))??bt(void 0),this._futureSnapshot=g}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,at.U)(e=>oa(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,at.U)(e=>oa(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function xd(n,e="emptyOnly"){const t=n.pathFromRoot;let i=0;if("always"!==e)for(i=t.length-1;i>=1;){const r=t[i],o=t[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(o.component)break;i--}}return function Md(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(i))}class Nr{constructor(e,t,i,r,o,u,h,g,y,C,I,A){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=u,this.component=h,this.title=this.data?.[Ks],this.routeConfig=g,this._urlSegment=y,this._lastPathIndex=C,this._correctedLastPathIndex=A??C,this._resolve=I}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=oa(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=oa(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Od extends su{constructor(e,t){super(t),this.url=e,au(this,t)}toString(){return Rd(this._root)}}function au(n,e){e.value._routerState=n,e.children.forEach(t=>au(n,t))}function Rd(n){const e=n.children.length>0?` { ${n.children.map(Rd).join(", ")} } `:"";return`${n.value}${e}`}function lu(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Ys(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Ys(e.params,t.params)||n.params.next(t.params),function qg(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Ys(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Ys(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function ca(n,e){const t=Ys(n.params,e.params)&&function cv(n,e){return xl(n,e)&&n.every((t,i)=>Ys(t.parameters,e[i].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||ca(n.parent,e.parent))}function ua(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const i=t.value;i._futureSnapshot=e.value;const r=function Ff(n,e,t){return e.children.map(i=>{for(const r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return ua(n,i,r);return ua(n,i)})}(n,e,t);return new fr(i,r)}{if(n.shouldAttach(e.value)){const o=n.retrieve(e.value);if(null!==o){const u=o.route;return u.value._futureSnapshot=e.value,u.children=e.children.map(h=>ua(n,h)),u}}const i=function Cv(n){return new Do(new wn(n.url),new wn(n.params),new wn(n.queryParams),new wn(n.fragment),new wn(n.data),n.outlet,n.component,n)}(e.value),r=e.children.map(o=>ua(n,o));return new fr(i,r)}}const as="ngNavigationCancelingError";function da(n,e){const{redirectTo:t,navigationBehaviorOptions:i}=Ua(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=Pl(!1,0,e);return r.url=t,r.navigationBehaviorOptions=i,r}function Pl(n,e,t){const i=new Error("NavigationCancelingError: "+(n||""));return i[as]=!0,i.cancellationCode=e,t&&(i.url=t),i}function cu(n){return ha(n)&&Ua(n.url)}function ha(n){return n&&n[as]}class Lf{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new uu,this.attachRef=null}}let uu=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,i){const r=this.getOrCreateContext(t);r.outlet=i,this.contexts.set(t,r)}onChildOutletDestroyed(t){const i=this.getContext(t);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let i=this.getContext(t);return i||(i=new Lf,this.contexts.set(t,i)),i}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Vf=!1;let Uf=(()=>{class n{constructor(t,i,r,o,u){this.parentContexts=t,this.location=i,this.changeDetector=o,this.environmentInjector=u,this.activated=null,this._activatedRoute=null,this.activateEvents=new l.vpe,this.deactivateEvents=new l.vpe,this.attachEvents=new l.vpe,this.detachEvents=new l.vpe,this.name=r||zt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new l.vHH(4012,Vf);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new l.vHH(4012,Vf);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new l.vHH(4012,Vf);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new l.vHH(4013,Vf);this._activatedRoute=t;const r=this.location,u=t._futureSnapshot.component,h=this.parentContexts.getOrCreateContext(this.name).children,g=new Bf(t,h,r.injector);if(i&&function v(n){return!!n.resolveComponentFactory}(i)){const y=i.resolveComponentFactory(u);this.activated=r.createComponent(y,r.length,g)}else this.activated=r.createComponent(u,{index:r.length,injector:g,environmentInjector:i??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(uu),l.Y36(l.s_b),l.$8M("name"),l.Y36(l.sBO),l.Y36(l.lqb))},n.\u0275dir=l.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class Bf{constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===Do?this.route:e===uu?this.childContexts:this.parent.get(e,t)}}let p=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[l.jDz],decls:1,vars:0,template:function(t,i){1&t&&l._UZ(0,"router-outlet")},dependencies:[Uf],encapsulation:2}),n})();function _(n,e){return n.providers&&!n._injector&&(n._injector=(0,l.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function It(n){const e=n.children&&n.children.map(It),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==zt&&(t.component=p),t}function Dn(n){return n.outlet||zt}function ki(n,e){const t=n.filter(i=>Dn(i)===e);return t.push(...n.filter(i=>Dn(i)!==e)),t}function ls(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class cm{constructor(e,t,i,r){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r}activate(e){const t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),lu(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){const r=Za(t);e.children.forEach(o=>{const u=o.value.outlet;this.deactivateRoutes(o,r[u],i),delete r[u]}),Ei(r,(o,u)=>{this.deactivateRouteAndItsChildren(o,i)})}deactivateRoutes(e,t,i){const r=e.value,o=t?t.value:null;if(r===o)if(r.component){const u=i.getContext(r.outlet);u&&this.deactivateChildRoutes(e,t,u.children)}else this.deactivateChildRoutes(e,t,i);else o&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,o=Za(e);for(const u of Object.keys(o))this.deactivateRouteAndItsChildren(o[u],r);if(i&&i.outlet){const u=i.outlet.detach(),h=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:u,route:e,contexts:h})}}deactivateRouteAndOutlet(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,o=Za(e);for(const u of Object.keys(o))this.deactivateRouteAndItsChildren(o[u],r);i&&i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated(),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(e,t,i){const r=Za(t);e.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],i),this.forwardEvent(new Ad(o.value.snapshot))}),e.children.length&&this.forwardEvent(new om(e.value.snapshot))}activateRoutes(e,t,i){const r=e.value,o=t?t.value:null;if(lu(r),r===o)if(r.component){const u=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,u.children)}else this.activateChildRoutes(e,t,i);else if(r.component){const u=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const h=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),u.children.onOutletReAttached(h.contexts),u.attachRef=h.componentRef,u.route=h.route.value,u.outlet&&u.outlet.attach(h.componentRef,h.route.value),lu(h.route.value),this.activateChildRoutes(e,null,u.children)}else{const h=ls(r.snapshot),g=h?.get(l._Vd)??null;u.attachRef=null,u.route=r,u.resolver=g,u.injector=h,u.outlet&&u.outlet.activateWith(r,u.injector),this.activateChildRoutes(e,null,u.children)}}else this.activateChildRoutes(e,null,i)}}class um{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Pd{constructor(e,t){this.component=e,this.route=t}}function dm(n,e,t){const i=n._root;return Wa(i,e?e._root:null,t,[i.value])}function fa(n,e){const t=Symbol(),i=e.get(n,t);return i===t?"function"!=typeof n||(0,l.Z0I)(n)?e.get(n):n:i}function Wa(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const o=Za(e);return n.children.forEach(u=>{(function hm(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const o=n.value,u=e?e.value:null,h=t?t.getContext(n.value.outlet):null;if(u&&o.routeConfig===u.routeConfig){const g=function Iv(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!xl(n.url,e.url);case"pathParamsOrQueryParamsChange":return!xl(n.url,e.url)||!Ys(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ca(n,e)||!Ys(n.queryParams,e.queryParams);default:return!ca(n,e)}}(u,o,o.routeConfig.runGuardsAndResolvers);g?r.canActivateChecks.push(new um(i)):(o.data=u.data,o._resolvedData=u._resolvedData),Wa(n,e,o.component?h?h.children:null:t,i,r),g&&h&&h.outlet&&h.outlet.isActivated&&r.canDeactivateChecks.push(new Pd(h.outlet.component,u))}else u&&qa(e,h,r),r.canActivateChecks.push(new um(i)),Wa(n,null,o.component?h?h.children:null:t,i,r)})(u,o[u.value.outlet],t,i.concat([u.value]),r),delete o[u.value.outlet]}),Ei(o,(u,h)=>qa(u,t.getContext(h),r)),r}function qa(n,e,t){const i=Za(n),r=n.value;Ei(i,(o,u)=>{qa(o,r.component?e?e.children.getContext(u):null:e,t)}),t.canDeactivateChecks.push(new Pd(r.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,r))}function za(n){return"function"==typeof n}function Hf(n){return n instanceof Cl||"EmptyError"===n?.name}const kd=Symbol("INITIAL_VALUE");function Gf(){return li(n=>Tl(n.map(e=>e.pipe(cn(1),na(kd)))).pipe((0,at.U)(e=>{for(const t of e)if(!0!==t){if(t===kd)return kd;if(!1===t||t instanceof Nl)return t}return!0}),gi(e=>e!==kd),cn(1)))}function pm(n){return(0,wf.z)((0,ci.b)(e=>{if(Ua(e))throw da(0,e)}),(0,at.U)(e=>!0===e))}const Ii={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function CD(n,e,t,i,r){const o=Tv(n,e,t);return o.matched?function zT(n,e,t,i){const r=e.canMatch;return r&&0!==r.length?bt(r.map(u=>{const h=fa(u,n);return os(function rP(n){return n&&za(n.canMatch)}(h)?h.canMatch(e,t):n.runInContext(()=>h(e,t)))})).pipe(Gf(),pm()):bt(!0)}(i=_(e,i),e,t).pipe((0,at.U)(u=>!0===u?o:{...Ii})):bt(o)}function Tv(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...Ii}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const r=(e.matcher||mD)(t,n,e);if(!r)return{...Ii};const o={};Ei(r.posParams,(h,g)=>{o[g]=h.path});const u=r.consumed.length>0?{...o,...r.consumed[r.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:u,positionalParamSegments:r.posParams??{}}}function Fd(n,e,t,i,r="corrected"){if(t.length>0&&function YT(n,e,t){return t.some(i=>gm(n,e,i)&&Dn(i)!==zt)}(n,t,i)){const u=new sn(e,function KT(n,e,t,i){const r={};r[zt]=i,i._sourceSegment=n,i._segmentIndexShift=e.length;for(const o of t)if(""===o.path&&Dn(o)!==zt){const u=new sn([],{});u._sourceSegment=n,u._segmentIndexShift=e.length,r[Dn(o)]=u}return r}(n,e,i,new sn(t,n.children)));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:[]}}if(0===t.length&&function QT(n,e,t){return t.some(i=>gm(n,e,i))}(n,t,i)){const u=new sn(n.segments,function ED(n,e,t,i,r,o){const u={};for(const h of i)if(gm(n,t,h)&&!r[Dn(h)]){const g=new sn([],{});g._sourceSegment=n,g._segmentIndexShift="legacy"===o?n.segments.length:e.length,u[Dn(h)]=g}return{...r,...u}}(n,e,t,i,n.children,r));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}const o=new sn(n.segments,n.children);return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:t}}function gm(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function ID(n,e,t,i){return!!(Dn(n)===i||i!==zt&&gm(e,t,n))&&("**"===n.path||Tv(e,n,t).matched)}function JT(n,e,t){return 0===e.length&&!n.children[t]}const Sv=!1;class kl{constructor(e){this.segmentGroup=e||null}}class mm{constructor(e){this.urlTree=e}}function Ld(n){return Va(new kl(n))}function Av(n){return Va(new mm(n))}class AD{constructor(e,t,i,r,o){this.injector=e,this.configLoader=t,this.urlSerializer=i,this.urlTree=r,this.config=o,this.allowRedirects=!0}apply(){const e=Fd(this.urlTree.root,[],[],this.config).segmentGroup,t=new sn(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,zt).pipe((0,at.U)(o=>this.createUrlTree(la(o),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Cs(o=>{if(o instanceof mm)return this.allowRedirects=!1,this.match(o.urlTree);throw o instanceof kl?this.noMatchError(o):o}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,zt).pipe((0,at.U)(r=>this.createUrlTree(la(r),e.queryParams,e.fragment))).pipe(Cs(r=>{throw r instanceof kl?this.noMatchError(r):r}))}noMatchError(e){return new l.vHH(4002,Sv)}createUrlTree(e,t,i){const r=Bi(e);return new Nl(r,t,i)}expandSegmentGroup(e,t,i,r){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(e,t,i).pipe((0,at.U)(o=>new sn([],o))):this.expandSegment(e,i,t,i.segments,r,!0)}expandChildren(e,t,i){const r=[];for(const o of Object.keys(i.children))"primary"===o?r.unshift(o):r.push(o);return(0,Pn.D)(r).pipe(Ds(o=>{const u=i.children[o],h=ki(t,o);return this.expandSegmentGroup(e,h,u,o).pipe((0,at.U)(g=>({segment:g,outlet:o})))}),mo((o,u)=>(o[u.outlet]=u.segment,o),{}),sa())}expandSegment(e,t,i,r,o,u){return(0,Pn.D)(i).pipe(Ds(h=>this.expandSegmentAgainstRoute(e,t,i,h,r,o,u).pipe(Cs(y=>{if(y instanceof kl)return bt(null);throw y}))),ss(h=>!!h),Cs((h,g)=>{if(Hf(h))return JT(t,r,o)?bt(new sn([],{})):Ld(t);throw h}))}expandSegmentAgainstRoute(e,t,i,r,o,u,h){return ID(r,t,o,u)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,t,r,o,u):h&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,i,r,o,u):Ld(t):Ld(t)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,o,u){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,i,r,u):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,o,u)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,i,r){const o=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?Av(o):this.lineralizeSegments(i,o).pipe((0,Pi.z)(u=>{const h=new sn(u,{});return this.expandSegment(e,h,t,u,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,o,u){const{matched:h,consumedSegments:g,remainingSegments:y,positionalParamSegments:C}=Tv(t,r,o);if(!h)return Ld(t);const I=this.applyRedirectCommands(g,r.redirectTo,C);return r.redirectTo.startsWith("/")?Av(I):this.lineralizeSegments(r,I).pipe((0,Pi.z)(A=>this.expandSegment(e,t,i,A.concat(y),u,!1)))}matchSegmentAgainstRoute(e,t,i,r,o){return"**"===i.path?(e=_(i,e),i.loadChildren?(i._loadedRoutes?bt({routes:i._loadedRoutes,injector:i._loadedInjector}):this.configLoader.loadChildren(e,i)).pipe((0,at.U)(h=>(i._loadedRoutes=h.routes,i._loadedInjector=h.injector,new sn(r,{})))):bt(new sn(r,{}))):CD(t,i,r,e).pipe(li(({matched:u,consumedSegments:h,remainingSegments:g})=>u?this.getChildConfig(e=i._injector??e,i,r).pipe((0,Pi.z)(C=>{const I=C.injector??e,A=C.routes,{segmentGroup:F,slicedSegments:Z}=Fd(t,h,g,A),ee=new sn(F.segments,F.children);if(0===Z.length&&ee.hasChildren())return this.expandChildren(I,A,ee).pipe((0,at.U)(rt=>new sn(h,rt)));if(0===A.length&&0===Z.length)return bt(new sn(h,{}));const ce=Dn(i)===o;return this.expandSegment(I,ee,A,Z,ce?zt:o,!0).pipe((0,at.U)(We=>new sn(h.concat(We.segments),We.children)))})):Ld(t)))}getChildConfig(e,t,i){return t.children?bt({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?bt({routes:t._loadedRoutes,injector:t._loadedInjector}):function qT(n,e,t,i){const r=e.canLoad;return void 0===r||0===r.length?bt(!0):bt(r.map(u=>{const h=fa(u,n);return os(function jf(n){return n&&za(n.canLoad)}(h)?h.canLoad(e,t):n.runInContext(()=>h(e,t)))})).pipe(Gf(),pm())}(e,t,i).pipe((0,Pi.z)(r=>r?this.configLoader.loadChildren(e,t).pipe((0,ci.b)(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):function XT(n){return Va(Pl(Sv,3))}())):bt({routes:[],injector:e})}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return bt(i);if(r.numberOfChildren>1||!r.children[zt])return Va(new l.vHH(4e3,Sv));r=r.children[zt]}}applyRedirectCommands(e,t,i){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,i)}applyRedirectCreateUrlTree(e,t,i,r){const o=this.createSegmentGroup(e,t.root,i,r);return new Nl(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const i={};return Ei(e,(r,o)=>{if("string"==typeof r&&r.startsWith(":")){const h=r.substring(1);i[o]=t[h]}else i[o]=r}),i}createSegmentGroup(e,t,i,r){const o=this.createSegments(e,t.segments,i,r);let u={};return Ei(t.children,(h,g)=>{u[g]=this.createSegmentGroup(e,h,i,r)}),new sn(o,u)}createSegments(e,t,i,r){return t.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,r):this.findOrReturn(o,i))}findPosParam(e,t,i){const r=i[t.path.substring(1)];if(!r)throw new l.vHH(4001,Sv);return r}findOrReturn(e,t){let i=0;for(const r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}}class eS{}class xD{constructor(e,t,i,r,o,u,h,g){this.injector=e,this.rootComponentType=t,this.config=i,this.urlTree=r,this.url=o,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=h,this.urlSerializer=g}recognize(){const e=Fd(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,zt).pipe((0,at.U)(t=>{if(null===t)return null;const i=new Nr([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},zt,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new fr(i,t),o=new Od(this.url,r);return this.inheritParamsAndData(o._root),o}))}inheritParamsAndData(e){const t=e.value,i=xd(t,this.paramsInheritanceStrategy);t.params=Object.freeze(i.params),t.data=Object.freeze(i.data),e.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(e,t,i,r){return 0===i.segments.length&&i.hasChildren()?this.processChildren(e,t,i):this.processSegment(e,t,i,i.segments,r)}processChildren(e,t,i){return(0,Pn.D)(Object.keys(i.children)).pipe(Ds(r=>{const o=i.children[r],u=ki(t,r);return this.processSegmentGroup(e,u,o,r)}),mo((r,o)=>r&&o?(r.push(...o),r):null),function gd(n,e=!1){return(0,Ci.e)((t,i)=>{let r=0;t.subscribe((0,ti.x)(i,o=>{const u=n(o,r++);(u||e)&&i.next(o),!u&&i.complete()}))})}(r=>null!==r),ia(null),sa(),(0,at.U)(r=>{if(null===r)return null;const o=$f(r);return function du(n){n.sort((e,t)=>e.value.outlet===zt?-1:t.value.outlet===zt?1:e.value.outlet.localeCompare(t.value.outlet))}(o),o}))}processSegment(e,t,i,r,o){return(0,Pn.D)(t).pipe(Ds(u=>this.processSegmentAgainstRoute(u._injector??e,u,i,r,o)),ss(u=>!!u),Cs(u=>{if(Hf(u))return JT(i,r,o)?bt([]):bt(null);throw u}))}processSegmentAgainstRoute(e,t,i,r,o){if(t.redirectTo||!ID(t,i,r,o))return bt(null);let u;if("**"===t.path){const h=r.length>0?Kg(r).parameters:{},g=Zf(i)+r.length;u=bt({snapshot:new Nr(r,h,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Rv(t),Dn(t),t.component??t._loadedComponent??null,t,_m(i),g,ym(t),g),consumedSegments:[],remainingSegments:[]})}else u=CD(i,t,r,e).pipe((0,at.U)(({matched:h,consumedSegments:g,remainingSegments:y,parameters:C})=>{if(!h)return null;const I=Zf(i)+g.length;return{snapshot:new Nr(g,C,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Rv(t),Dn(t),t.component??t._loadedComponent??null,t,_m(i),I,ym(t),I),consumedSegments:g,remainingSegments:y}}));return u.pipe(li(h=>{if(null===h)return bt(null);const{snapshot:g,consumedSegments:y,remainingSegments:C}=h;e=t._injector??e;const I=t._loadedInjector??e,A=function tS(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:F,slicedSegments:Z}=Fd(i,y,C,A.filter(ce=>void 0===ce.redirectTo),this.relativeLinkResolution);if(0===Z.length&&F.hasChildren())return this.processChildren(I,A,F).pipe((0,at.U)(ce=>null===ce?null:[new fr(g,ce)]));if(0===A.length&&0===Z.length)return bt([new fr(g,[])]);const ee=Dn(t)===o;return this.processSegment(I,A,F,Z,ee?zt:o).pipe((0,at.U)(ce=>null===ce?null:[new fr(g,ce)]))}))}}function Ov(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function $f(n){const e=[],t=new Set;for(const i of n){if(!Ov(i)){e.push(i);continue}const r=e.find(o=>i.value.routeConfig===o.value.routeConfig);void 0!==r?(r.children.push(...i.children),t.add(r)):e.push(i)}for(const i of t){const r=$f(i.children);e.push(new fr(i.value,r))}return e.filter(i=>!t.has(i))}function _m(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Zf(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function Rv(n){return n.data||{}}function ym(n){return n.resolve||{}}function rS(n,e){return(0,Pi.z)(t=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return bt(t);let o=0;return(0,Pn.D)(r).pipe(Ds(u=>function MD(n,e,t,i){const r=n.routeConfig,o=n._resolve;return void 0!==r?.title&&!OD(r)&&(o[Ks]=r.title),function Vd(n,e,t,i){const r=function sS(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===r.length)return bt({});const o={};return(0,Pn.D)(r).pipe((0,Pi.z)(u=>function oS(n,e,t,i){const r=ls(e)??i,o=fa(n,r);return os(o.resolve?o.resolve(e,t):r.runInContext(()=>o(e,t)))}(n[u],e,t,i).pipe(ss(),(0,ci.b)(h=>{o[u]=h}))),Yc(1),function md(n){return(0,at.U)(()=>n)}(o),Cs(u=>Hf(u)?ws.E:Va(u)))}(o,n,e,i).pipe((0,at.U)(u=>(n._resolvedData=u,n.data=xd(n,t).resolve,r&&OD(r)&&(n.data[Ks]=r.title),null)))}(u.route,i,n,e)),(0,ci.b)(()=>o++),Yc(1),(0,Pi.z)(u=>o===r.length?bt(t):ws.E))})}function OD(n){return"string"==typeof n.title||null===n.title}function Pv(n){return li(e=>{const t=n(e);return t?(0,Pn.D)(t).pipe((0,at.U)(()=>e)):bt(e)})}let vm=(()=>{class n{buildTitle(t){let i,r=t.root;for(;void 0!==r;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(o=>o.outlet===zt);return i}getResolvedTitleForRoute(t){return t.data[Ks]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:function(){return(0,l.f3M)(RD)},providedIn:"root"}),n})(),RD=(()=>{class n extends vm{constructor(t){super(),this.title=t}updateTitle(t){const i=this.buildTitle(t);void 0!==i&&this.title.setTitle(i)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Fa))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class lS{}class aP extends class PD{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Ll=new l.OlP("",{providedIn:"root",factory:()=>({})}),Vl=new l.OlP("ROUTES");let hu=(()=>{class n{constructor(t,i){this.injector=t,this.compiler=i,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return bt(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const i=os(t.loadComponent()).pipe((0,ci.b)(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),_d(()=>{this.componentLoaders.delete(t)})),r=new ta(i,()=>new Wn.x).pipe(go());return this.componentLoaders.set(t,r),r}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return bt({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const o=this.loadModuleFactoryOrRoutes(i.loadChildren).pipe((0,at.U)(h=>{this.onLoadEndListener&&this.onLoadEndListener(i);let g,y,C=!1;Array.isArray(h)?y=h:(g=h.create(t).injector,y=zg(g.get(Vl,[],l.XFs.Self|l.XFs.Optional)));return{routes:y.map(It),injector:g}}),_d(()=>{this.childrenLoaders.delete(i)})),u=new ta(o,()=>new Wn.x).pipe(go());return this.childrenLoaders.set(i,u),u}loadModuleFactoryOrRoutes(t){return os(t()).pipe((0,Pi.z)(i=>i instanceof l.YKP||Array.isArray(i)?bt(i):(0,Pn.D)(this.compiler.compileModuleAsync(i))))}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(l.zs3),l.LFG(l.Sil))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class uS{}class lP{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function dS(n){throw n}function hS(n,e,t){return e.parse("/")}const fS={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},FD={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function bm(){const n=(0,l.f3M)(Sf),e=(0,l.f3M)(uu),t=(0,l.f3M)(Re),i=(0,l.f3M)(l.zs3),r=(0,l.f3M)(l.Sil),o=(0,l.f3M)(Vl,{optional:!0})??[],u=(0,l.f3M)(Ll,{optional:!0})??{},h=(0,l.f3M)(RD),g=(0,l.f3M)(vm,{optional:!0}),y=(0,l.f3M)(uS,{optional:!0}),C=(0,l.f3M)(lS,{optional:!0}),I=new mi(null,n,e,t,i,r,zg(o));return y&&(I.urlHandlingStrategy=y),C&&(I.routeReuseStrategy=C),I.titleStrategy=g??h,function LD(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(u,I),I}let mi=(()=>{class n{constructor(t,i,r,o,u,h,g){this.rootComponentType=t,this.urlSerializer=i,this.rootContexts=r,this.location=o,this.config=g,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Wn.x,this.errorHandler=dS,this.malformedUriErrorHandler=hS,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>bt(void 0),this.urlHandlingStrategy=new lP,this.routeReuseStrategy=new aP,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=u.get(hu),this.configLoader.onLoadEndListener=A=>this.triggerEvent(new Rf(A)),this.configLoader.onLoadStartListener=A=>this.triggerEvent(new sm(A)),this.ngModule=u.get(l.h0i),this.console=u.get(l.c2e);const I=u.get(l.R0b);this.isNgZoneEnabled=I instanceof l.R0b&&l.R0b.isInAngularZone(),this.resetConfig(g),this.currentUrlTree=function Yg(){return new Nl(new sn([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=ou(this.currentUrlTree,this.rootComponentType),this.transitions=new wn({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const i=this.events;return t.pipe(gi(r=>0!==r.id),(0,at.U)(r=>({...r,extractedUrl:this.urlHandlingStrategy.extract(r.rawUrl)})),li(r=>{let o=!1,u=!1;return bt(r).pipe((0,ci.b)(h=>{this.currentNavigation={id:h.id,initialUrl:h.rawUrl,extractedUrl:h.extractedUrl,trigger:h.source,extras:h.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),li(h=>{const g=this.browserUrlTree.toString(),y=!this.navigated||h.extractedUrl.toString()!==g||g!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||y)&&this.urlHandlingStrategy.shouldProcessUrl(h.rawUrl))return wm(h.source)&&(this.browserUrlTree=h.extractedUrl),bt(h).pipe(li(I=>{const A=this.transitions.getValue();return i.next(new Rl(I.id,this.serializeUrl(I.extractedUrl),I.source,I.restoredState)),A!==this.transitions.getValue()?ws.E:Promise.resolve(I)}),function Nv(n,e,t,i){return li(r=>function SD(n,e,t,i,r){return new AD(n,e,t,i,r).apply()}(n,e,t,r.extractedUrl,i).pipe((0,at.U)(o=>({...r,urlAfterRedirects:o}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,ci.b)(I=>{this.currentNavigation={...this.currentNavigation,finalUrl:I.urlAfterRedirects},r.urlAfterRedirects=I.urlAfterRedirects}),function iS(n,e,t,i,r,o){return(0,Pi.z)(u=>function ND(n,e,t,i,r,o,u="emptyOnly",h="legacy"){return new xD(n,e,t,i,r,u,h,o).recognize().pipe(li(g=>null===g?function Mv(n){return new ai.y(e=>e.error(n))}(new eS):bt(g)))}(n,e,t,u.urlAfterRedirects,i.serialize(u.urlAfterRedirects),i,r,o).pipe((0,at.U)(h=>({...u,targetSnapshot:h}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,ci.b)(I=>{if(r.targetSnapshot=I.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!I.extras.skipLocationChange){const F=this.urlHandlingStrategy.merge(I.urlAfterRedirects,I.rawUrl);this.setBrowserUrl(F,I)}this.browserUrlTree=I.urlAfterRedirects}const A=new bv(I.id,this.serializeUrl(I.extractedUrl),this.serializeUrl(I.urlAfterRedirects),I.targetSnapshot);i.next(A)}));if(y&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:A,extractedUrl:F,source:Z,restoredState:ee,extras:ce}=h,Ze=new Rl(A,this.serializeUrl(F),Z,ee);i.next(Ze);const We=ou(F,this.rootComponentType).snapshot;return bt(r={...h,targetSnapshot:We,urlAfterRedirects:F,extras:{...ce,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=h.rawUrl,h.resolve(null),ws.E}),(0,ci.b)(h=>{const g=new ru(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot);this.triggerEvent(g)}),(0,at.U)(h=>r={...h,guards:dm(h.targetSnapshot,h.currentSnapshot,this.rootContexts)}),function oP(n,e){return(0,Pi.z)(t=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:u}}=t;return 0===u.length&&0===o.length?bt({...t,guardsResult:!0}):function wD(n,e,t,i){return(0,Pn.D)(n).pipe((0,Pi.z)(r=>function fm(n,e,t,i,r){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return o&&0!==o.length?bt(o.map(h=>{const g=ls(e)??r,y=fa(h,g);return os(function bD(n){return n&&za(n.canDeactivate)}(y)?y.canDeactivate(n,e,t,i):g.runInContext(()=>y(n,e,t,i))).pipe(ss())})).pipe(Gf()):bt(!0)}(r.component,r.route,t,e,i)),ss(r=>!0!==r,!0))}(u,i,r,n).pipe((0,Pi.z)(h=>h&&function Ka(n){return"boolean"==typeof n}(h)?function GT(n,e,t,i){return(0,Pn.D)(e).pipe(Ds(r=>qs(function ZT(n,e){return null!==n&&e&&e(new Dv(n)),bt(!0)}(r.route.parent,i),function $T(n,e){return null!==n&&e&&e(new Sd(n)),bt(!0)}(r.route,i),function DD(n,e,t){const i=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(u=>function Ev(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(u)).filter(u=>null!==u).map(u=>zs(()=>bt(u.guards.map(g=>{const y=ls(u.node)??t,C=fa(g,y);return os(function vD(n){return n&&za(n.canActivateChild)}(C)?C.canActivateChild(i,n):y.runInContext(()=>C(i,n))).pipe(ss())})).pipe(Gf())));return bt(o).pipe(Gf())}(n,r.path,t),function WT(n,e,t){const i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||0===i.length)return bt(!0);const r=i.map(o=>zs(()=>{const u=ls(e)??t,h=fa(o,u);return os(function yD(n){return n&&za(n.canActivate)}(h)?h.canActivate(e,n):u.runInContext(()=>h(e,n))).pipe(ss())}));return bt(r).pipe(Gf())}(n,r.route,t))),ss(r=>!0!==r,!0))}(i,o,n,e):bt(h)),(0,at.U)(h=>({...t,guardsResult:h})))})}(this.ngModule.injector,h=>this.triggerEvent(h)),(0,ci.b)(h=>{if(r.guardsResult=h.guardsResult,Ua(h.guardsResult))throw da(0,h.guardsResult);const g=new wv(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot,!!h.guardsResult);this.triggerEvent(g)}),gi(h=>!!h.guardsResult||(this.restoreHistory(h),this.cancelNavigationTransition(h,"",3),!1)),Pv(h=>{if(h.guards.canActivateChecks.length)return bt(h).pipe((0,ci.b)(g=>{const y=new Mf(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot);this.triggerEvent(y)}),li(g=>{let y=!1;return bt(g).pipe(rS(this.paramsInheritanceStrategy,this.ngModule.injector),(0,ci.b)({next:()=>y=!0,complete:()=>{y||(this.restoreHistory(g),this.cancelNavigationTransition(g,"",2))}}))}),(0,ci.b)(g=>{const y=new Of(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot);this.triggerEvent(y)}))}),Pv(h=>{const g=y=>{const C=[];y.routeConfig?.loadComponent&&!y.routeConfig._loadedComponent&&C.push(this.configLoader.loadComponent(y.routeConfig).pipe((0,ci.b)(I=>{y.component=I}),(0,at.U)(()=>{})));for(const I of y.children)C.push(...g(I));return C};return Tl(g(h.targetSnapshot.root)).pipe(ia(),cn(1))}),Pv(()=>this.afterPreactivation()),(0,at.U)(h=>{const g=function xr(n,e,t){const i=ua(n,e._root,t?t._root:void 0);return new kf(i,e)}(this.routeReuseStrategy,h.targetSnapshot,h.currentRouterState);return r={...h,targetRouterState:g}}),(0,ci.b)(h=>{this.currentUrlTree=h.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(h.urlAfterRedirects,h.rawUrl),this.routerState=h.targetRouterState,"deferred"===this.urlUpdateStrategy&&(h.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,h),this.browserUrlTree=h.urlAfterRedirects)}),((n,e,t)=>(0,at.U)(i=>(new cm(e,i.targetRouterState,i.currentRouterState,t).activate(n),i)))(this.rootContexts,this.routeReuseStrategy,h=>this.triggerEvent(h)),(0,ci.b)({next(){o=!0},complete(){o=!0}}),_d(()=>{o||u||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),Cs(h=>{if(u=!0,ha(h)){cu(h)||(this.navigated=!0,this.restoreHistory(r,!0));const g=new Td(r.id,this.serializeUrl(r.extractedUrl),h.message,h.cancellationCode);if(i.next(g),cu(h)){const y=this.urlHandlingStrategy.merge(h.url,this.rawUrlTree),C={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||wm(r.source)};this.scheduleNavigation(y,"imperative",null,C,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{this.restoreHistory(r,!0);const g=new rm(r.id,this.serializeUrl(r.extractedUrl),h,r.targetSnapshot??void 0);i.next(g);try{r.resolve(this.errorHandler(h))}catch(y){r.reject(y)}}return ws.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const i="popstate"===t.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{const r={replaceUrl:!0},o=t.state?.navigationId?t.state:null;if(o){const h={...o};delete h.navigationId,delete h.\u0275routerPageId,0!==Object.keys(h).length&&(r.state=h)}const u=this.parseUrl(t.url);this.scheduleNavigation(u,i,o,r)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(It),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,i={}){const{relativeTo:r,queryParams:o,fragment:u,queryParamsHandling:h,preserveFragment:g}=i,y=r||this.routerState.root,C=g?this.currentUrlTree.fragment:u;let I=null;switch(h){case"merge":I={...this.currentUrlTree.queryParams,...o};break;case"preserve":I=this.currentUrlTree.queryParams;break;default:I=o||null}return null!==I&&(I=this.removeEmptyProps(I)),yv(y,this.currentUrlTree,t,I,C??null)}navigateByUrl(t,i={skipLocationChange:!1}){const r=Ua(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(o,"imperative",null,i)}navigate(t,i={skipLocationChange:!1}){return function pS(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new l.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let i;try{i=this.urlSerializer.parse(t)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,t)}return i}isActive(t,i){let r;if(r=!0===i?{...fS}:!1===i?{...FD}:i,Ua(t))return ov(this.currentUrlTree,t,r);const o=this.parseUrl(t);return ov(this.currentUrlTree,o,r)}removeEmptyProps(t){return Object.keys(t).reduce((i,r)=>{const o=t[r];return null!=o&&(i[r]=o),i},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new $a(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,i,r,o,u){if(this.disposed)return Promise.resolve(!1);let h,g,y;u?(h=u.resolve,g=u.reject,y=u.promise):y=new Promise((A,F)=>{h=A,g=F});const C=++this.navigationId;let I;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(r=this.location.getState()),I=r&&r.\u0275routerPageId?r.\u0275routerPageId:o.replaceUrl||o.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):I=0,this.setTransition({id:C,targetPageId:I,source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:o,resolve:h,reject:g,promise:y,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),y.catch(A=>Promise.reject(A))}setBrowserUrl(t,i){const r=this.urlSerializer.serialize(t),o={...i.extras.state,...this.generateNgRouterState(i.id,i.targetPageId)};this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl?this.location.replaceState(r,"",o):this.location.go(r,"",o)}restoreHistory(t,i=!1){if("computed"===this.canceledNavigationResolution){const r=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===r?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===r&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(r)}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,i,r){const o=new Td(t.id,this.serializeUrl(t.extractedUrl),i,r);this.triggerEvent(o),t.resolve(!1)}generateNgRouterState(t,i){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}}return n.\u0275fac=function(t){l.$Z()},n.\u0275prov=l.Yz7({token:n,factory:function(){return bm()},providedIn:"root"}),n})();function wm(n){return"imperative"!==n}class VD{}let _S=(()=>{class n{constructor(t,i,r,o,u){this.router=t,this.injector=r,this.preloadingStrategy=o,this.loader=u}setUpPreloading(){this.subscription=this.router.events.pipe(gi(t=>t instanceof $a),Ds(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,i){const r=[];for(const o of i){o.providers&&!o._injector&&(o._injector=(0,l.MMx)(o.providers,t,`Route: ${o.path}`));const u=o._injector??t,h=o._loadedInjector??u;o.loadChildren&&!o._loadedRoutes&&void 0===o.canLoad||o.loadComponent&&!o._loadedComponent?r.push(this.preloadConfig(u,o)):(o.children||o._loadedRoutes)&&r.push(this.processRoutes(h,o.children??o._loadedRoutes))}return(0,Pn.D)(r).pipe((0,zc.J)())}preloadConfig(t,i){return this.preloadingStrategy.preload(i,()=>{let r;r=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(t,i):bt(null);const o=r.pipe((0,Pi.z)(u=>null===u?bt(void 0):(i._loadedRoutes=u.routes,i._loadedInjector=u.injector,this.processRoutes(u.injector??t,u.routes))));if(i.loadComponent&&!i._loadedComponent){const u=this.loader.loadComponent(i);return(0,Pn.D)([o,u]).pipe((0,zc.J)())}return o})}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(mi),l.LFG(l.Sil),l.LFG(l.lqb),l.LFG(VD),l.LFG(hu))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Ul=new l.OlP("");let pa=(()=>{class n{constructor(t,i,r={}){this.router=t,this.viewportScroller=i,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Rl?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof $a&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof wo&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,i){this.router.triggerEvent(new wo(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){l.$Z()},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();function qf(n,e){return{\u0275kind:n,\u0275providers:e}}function Cm(n){return[{provide:Vl,multi:!0,useValue:n}]}function Fv(){const n=(0,l.f3M)(l.zs3);return e=>{const t=n.get(l.z2F);if(e!==t.components[0])return;const i=n.get(mi),r=n.get(vS);1===n.get(Em)&&i.initialNavigation(),n.get(BD,null,l.XFs.Optional)?.setUpPreloading(),n.get(Ul,null,l.XFs.Optional)?.init(),i.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.unsubscribe())}}const vS=new l.OlP("",{factory:()=>new Wn.x}),Em=new l.OlP("",{providedIn:"root",factory:()=>1});const BD=new l.OlP("");function Co(n){return qf(0,[{provide:BD,useExisting:_S},{provide:VD,useExisting:n}])}const jD=new l.OlP("ROUTER_FORROOT_GUARD"),DS=[Re,{provide:Sf,useClass:Qc},{provide:mi,useFactory:bm},uu,{provide:Do,useFactory:function yS(n){return n.routerState.root},deps:[mi]},hu];function CS(){return new l.PXZ("Router",mi)}let Im=(()=>{class n{constructor(t){}static forRoot(t,i){return{ngModule:n,providers:[DS,[],Cm(t),{provide:jD,useFactory:$t,deps:[[mi,new l.FiY,new l.tp0]]},{provide:Ll,useValue:i||{}},i?.useHash?{provide:be,useClass:lt}:{provide:be,useClass:pt},{provide:Ul,useFactory:()=>{const n=(0,l.f3M)(mi),e=(0,l.f3M)(fl),t=(0,l.f3M)(Ll);return t.scrollOffset&&e.setOffset(t.scrollOffset),new pa(n,e,t)}},i?.preloadingStrategy?Co(i.preloadingStrategy).\u0275providers:[],{provide:l.PXZ,multi:!0,useFactory:CS},i?.initialNavigation?HD(i):[],[{provide:Lv,useFactory:Fv},{provide:l.tb,multi:!0,useExisting:Lv}]]}}static forChild(t){return{ngModule:n,providers:[Cm(t)]}}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(jD,8))},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[p]}),n})();function $t(n){return"guarded"}function HD(n){return["disabled"===n.initialNavigation?qf(3,[{provide:l.ip1,multi:!0,useFactory:()=>{const e=(0,l.f3M)(mi);return()=>{e.setUpLocationChangeListener()}}},{provide:Em,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?qf(2,[{provide:Em,useValue:0},{provide:l.ip1,multi:!0,deps:[l.zs3],useFactory:e=>{const t=e.get(G,Promise.resolve());let i=!1;return()=>t.then(()=>new Promise(o=>{const u=e.get(mi),h=e.get(vS);(function r(o){e.get(mi).events.pipe(gi(h=>h instanceof $a||h instanceof Td||h instanceof rm),(0,at.U)(h=>h instanceof $a||h instanceof Td&&(0===h.code||1===h.code)&&null),gi(h=>null!==h),cn(1)).subscribe(()=>{o()})})(()=>{o(!0),i=!0}),u.afterPreactivation=()=>(o(!0),i||h.closed?bt(void 0):h),u.initialNavigation()}))}}]).\u0275providers:[]]}const Lv=new l.OlP("");let $D=(()=>{class n{constructor(){this.title="My first AGM project",this.lat=51.678418,this.lng=7.809007}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-main-screen"]],decls:21,vars:0,consts:[[1,"main"],["src","https://images.unsplash.com/photo-1507525428034-b723cf961d3e?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxleHBsb3JlLWZlZWR8MXx8fGVufDB8fHx8&w=1000&q=80","alt","beach",1,"background"],["src","assets/logo.png","alt","logo",1,"logo"],[1,"contact-and-map-container"],[1,"contact-and-map"],[1,"contact"],[1,"map"],["src","https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2560.9742555779467!2d19.91040951588856!3d50.06804377942448!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x47165ba4c2a49e97%3A0xc4bef8eb0fcc3739!2sD%2017%2C%20Kawiory%2021%2C%2030-055%20Krak%C3%B3w!5e0!3m2!1sen!2spl!4v1670253905653!5m2!1sen!2spl","width","600","height","450","allowfullscreen","","loading","lazy","referrerpolicy","no-referrer-when-downgrade",2,"border","0"]],template:function(t,i){1&t&&(l.TgZ(0,"body")(1,"div",0),l._UZ(2,"img",1)(3,"img",2),l.qZA(),l.TgZ(4,"div",3)(5,"div",4)(6,"div",5)(7,"h3"),l._uU(8,"Contact"),l.qZA(),l.TgZ(9,"p"),l._uU(10,"Phone: 123-456-7890"),l.qZA(),l.TgZ(11,"p"),l._uU(12,"Email: driptrip@gmail.com"),l.qZA(),l.TgZ(13,"h3"),l._uU(14,"Address"),l.qZA(),l.TgZ(15,"p"),l._uU(16,"Kawiory 21"),l.qZA(),l.TgZ(17,"p"),l._uU(18,"30-055 Krak\xf3w"),l.qZA()(),l.TgZ(19,"div",6),l._UZ(20,"iframe",7),l.qZA()()()())},styles:["body[_ngcontent-%COMP%]{width:100%;height:300%;position:relative}.main[_ngcontent-%COMP%]{width:100vw;height:100vh;position:relative}.background[_ngcontent-%COMP%]{object-fit:cover;width:100vw;height:100vh;animation:slideDown 2s ease-out;position:absolute;top:0%;filter:blur(10px)}.logo[_ngcontent-%COMP%]{position:absolute;top:45%;left:50%;transform:translate(-50%,-50%);animation:show 4s ease}.trip-carousel[_ngcontent-%COMP%]{height:100vh;width:100vw}.contact-and-map-container[_ngcontent-%COMP%]{height:100vh;width:100vw;background-color:#0093e9;background-image:linear-gradient(315deg,#0093E9 0%,#80D0C7 56%)}.contact-and-map[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center;height:100%}.contact[_ngcontent-%COMP%]{margin:50px;font-size:1.5rem;color:#fff}.contact[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:15px;margin-top:20px}.contact[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:5px}@keyframes slideDown{0%{top:-100%;opacity:0;filter:blur(0px)}50%{top:0%;opacity:1;filter:blur(0px)}to{filter:blur(10px)}}@keyframes show{0%{opacity:0}50%{opacity:0}to{opacity:1}}"]}),n})();var ge=R(5861),SS=R(930),Tm=R(4986),Vv=R(6451),AS=R(3099);function Ud(n,e=fo.y){return n=n??WD,(0,Ci.e)((t,i)=>{let r,o=!0;t.subscribe((0,ti.x)(i,u=>{const h=e(u);(o||!n(r,h))&&(o=!1,r=h,i.next(u))}))})}function WD(n,e){return n===e}var ga=R(5032);function Sm(...n){const e=(0,Sr.jO)(n);return(0,Ci.e)((t,i)=>{const r=n.length,o=new Array(r);let u=n.map(()=>!1),h=!1;for(let g=0;g<r;g++)(0,po.Xf)(n[g]).subscribe((0,ti.x)(i,y=>{o[g]=y,!h&&!u[g]&&(u[g]=!0,(h=u.every(fo.y))&&(u=null))},ga.Z));t.subscribe((0,ti.x)(i,g=>{if(h){const y=[g,...o];i.next(e?e(...y):y)}}))})}var qn=R(462),Gr=R(2011),NS=(R(9169),R(3942)),Bl=R(4859),Eo=R(9681),k=R(2090),ma=R(1877);const qD="@firebase/database";let Bv="";function jv(n){Bv=n}class Am{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,k.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,k.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class xS{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,k.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const Hv=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Am(e)}}catch{}return new xS},gu=Hv("localStorage"),Gv=Hv("sessionStorage"),Bd=new ma.Yd("@firebase/database"),zD=function(){let n=1;return function(){return n++}}(),KD=function(n){const e=(0,k.dS)(n),t=new k.gQ;t.update(e);const i=t.digest();return k.US.encodeByteArray(i)},jd=function(...n){let e="";for(let t=0;t<n.length;t++){const i=n[t];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?e+=jd.apply(null,i):e+="object"==typeof i?(0,k.Wl)(i):i,e+=" "}return e};let mu=null,$v=!0;const Zv=function(n,e){(0,k.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Bd.logLevel=ma.in.VERBOSE,mu=Bd.log.bind(Bd),e&&Gv.set("logging_enabled",!0)):"function"==typeof n?mu=n:(mu=null,Gv.remove("logging_enabled"))},ji=function(...n){if(!0===$v&&($v=!1,null===mu&&!0===Gv.get("logging_enabled")&&Zv(!0)),mu){const e=jd.apply(null,n);mu(e)}},Nm=function(n){return function(...e){ji(n,...e)}},Kf=function(...n){const e="FIREBASE INTERNAL ERROR: "+jd(...n);Bd.error(e)},_a=function(...n){const e=`FIREBASE FATAL ERROR: ${jd(...n)}`;throw Bd.error(e),new Error(e)},$r=function(...n){const e="FIREBASE WARNING: "+jd(...n);Bd.warn(e)},Yf=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Io="[MIN_NAME]",Yi="[MAX_NAME]",jl=function(n,e){if(n===e)return 0;if(n===Io||e===Yi)return-1;if(e===Io||n===Yi)return 1;{const t=Pm(n),i=Pm(e);return null!==t?null!==i?t-i==0?n.length-e.length:t-i:-1:null!==i?1:n<e?-1:1}},MS=function(n,e){return n===e?0:n<e?-1:1},_u=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,k.Wl)(e))},To=function(n){if("object"!=typeof n||null===n)return(0,k.Wl)(n);const e=[];for(const i in n)e.push(i);e.sort();let t="{";for(let i=0;i<e.length;i++)0!==i&&(t+=","),t+=(0,k.Wl)(e[i]),t+=":",t+=To(n[e[i]]);return t+="}",t},xm=function(n,e){const t=n.length;if(t<=e)return[n];const i=[];for(let r=0;r<t;r+=e)i.push(n.substring(r,r+e>t?t:r+e));return i};function Qi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const Mm=function(n){(0,k.hu)(!Yf(n),"Invalid JSON number");const i=1023;let r,o,u,h,g;0===n?(o=0,u=0,r=1/n==-1/0?1:0):(r=n<0,(n=Math.abs(n))>=Math.pow(2,1-i)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),i),o=h+i,u=Math.round(n*Math.pow(2,52-h)-Math.pow(2,52))):(o=0,u=Math.round(n/Math.pow(2,-1074))));const y=[];for(g=52;g;g-=1)y.push(u%2?1:0),u=Math.floor(u/2);for(g=11;g;g-=1)y.push(o%2?1:0),o=Math.floor(o/2);y.push(r?1:0),y.reverse();const C=y.join("");let I="";for(g=0;g<64;g+=8){let A=parseInt(C.substr(g,8),2).toString(16);1===A.length&&(A="0"+A),I+=A}return I.toLowerCase()},Om=new RegExp("^-?(0*)\\d{1,10}$"),Pm=function(n){if(Om.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},Hl=function(n){try{n()}catch(e){setTimeout(()=>{throw $r("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},Qf=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class OS{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(i=>this.appCheck=i)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){$r(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class RS{constructor(e,t,i){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(ji("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',$r(e)}}let Jf=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const zv=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,FS="websocket",LS="long_polling";class tC{constructor(e,t,i,r,o=!1,u="",h=!1){this.secure=t,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=o,this.persistenceKey=u,this.includeNamespaceInQueryParams=h,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=gu.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&gu.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function VS(n,e,t){let i;if((0,k.hu)("string"==typeof e,"typeof type must == string"),(0,k.hu)("object"==typeof t,"typeof params must == object"),e===FS)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==LS)throw new Error("Unknown connection type: "+e);i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function yP(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const r=[];return Qi(t,(o,u)=>{r.push(o+"="+u)}),i+r.join("&")}class vP{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,k.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,k.p$)(this.counters_)}}const nC={},iC={};function rC(n){const e=n.toString();return nC[e]||(nC[e]=new vP),nC[e]}class Kv{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&Hl(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class ya{constructor(e,t,i,r,o,u,h){this.connId=e,this.repoInfo=t,this.applicationId=i,this.appCheckToken=r,this.authToken=o,this.transportSessionId=u,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Nm(e),this.stats_=rC(t),this.urlFn=g=>(this.appCheckToken&&(g.ac=this.appCheckToken),VS(t,LS,g))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Kv(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,k.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Zd((...o)=>{const[u,h,g,y,C]=o;if(this.incrementIncomingBytes_(o),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===u)this.id=h,this.password=g;else{if("close"!==u)throw new Error("Unrecognized command received: "+u);h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_()}},(...o)=>{const[u,h]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(u,h)},()=>{this.onClosed_()},this.urlFn);const i={start:"t"};i.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(i.cb=this.scriptTagHolder.uniqueCallbackIdentifier),i.v="5",this.transportSessionId&&(i.s=this.transportSessionId),this.lastSessionId&&(i.ls=this.lastSessionId),this.applicationId&&(i.p=this.applicationId),this.appCheckToken&&(i.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&zv.test(location.hostname)&&(i.r="f");const r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){ya.forceAllow_=!0}static forceDisallow(){ya.forceDisallow_=!0}static isAvailable(){return!((0,k.Yr)()||!ya.forceAllow_&&(ya.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,k.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const i=(0,k.h$)(t),r=xm(i,1840);for(let o=0;o<r.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[o]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,k.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const i={dframe:"t"};i.id=e,i.pw=t,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,k.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class Zd{constructor(e,t,i,r){if(this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,k.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=zD(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=Zd.createIFrame_();let o="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(o='<script>document.domain="'+document.domain+'";<\/script>');const u="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(u),this.myIFrame.doc.close()}catch(h){ji("frame writing exception"),h.stack&&ji(h.stack),ji(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||ji("No IE domain setting required")}catch{const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+i.length<=1870;){const u=this.pendingSegs.shift();i=i+"&seg"+r+"="+u.seg+"&ts"+r+"="+u.ts+"&d"+r+"="+u.d,r++}return t+=i,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,i){this.pendingSegs.push({seg:e,ts:t,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const i=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(i,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(r),i()})}addTag(e,t){(0,k.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const r=i.readyState;(!r||"loaded"===r||"complete"===r)&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),t())},i.onerror=()=>{ji("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}let Wd=null;typeof MozWebSocket<"u"?Wd=MozWebSocket:typeof WebSocket<"u"&&(Wd=WebSocket);let $l=(()=>{class n{constructor(t,i,r,o,u,h,g){this.connId=t,this.applicationId=r,this.appCheckToken=o,this.authToken=u,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Nm(this.connId),this.stats_=rC(i),this.connURL=n.connectionURL_(i,h,g,o,r),this.nodeAdmin=i.nodeAdmin}static connectionURL_(t,i,r,o,u){const h={v:"5"};return!(0,k.Yr)()&&typeof location<"u"&&location.hostname&&zv.test(location.hostname)&&(h.r="f"),i&&(h.s=i),r&&(h.ls=r),o&&(h.ac=o),u&&(h.p=u),VS(t,FS,h)}open(t,i){this.onDisconnect=i,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,gu.set("previous_websocket_failure",!0);try{let r;if((0,k.Yr)()){r={headers:{"User-Agent":`Firebase/5/${Bv}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);const u=process.env,h=0===this.connURL.indexOf("wss://")?u.HTTPS_PROXY||u.https_proxy:u.HTTP_PROXY||u.http_proxy;h&&(r.proxy={origin:h})}this.mySock=new Wd(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const o=r.message||r.data;return o&&this.log_(o),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const o=r.message||r.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const r=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);r&&r.length>1&&parseFloat(r[1])<4.4&&(t=!0)}return!t&&null!==Wd&&!n.forceDisallow_}static previouslyFailed(){return gu.isInMemoryStorage||!0===gu.get("previous_websocket_failure")}markConnectionHealthy(){gu.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const i=this.frames.join("");this.frames=null;const r=(0,k.cI)(i);this.onMessage(r)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,k.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const i=Number(t);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const i=t.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(i);else{const r=this.extractFrameCount_(i);null!==r&&this.appendFrame_(r)}}send(t){this.resetKeepAlive();const i=(0,k.Wl)(t);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const r=xm(i,16384);r.length>1&&this.sendString_(String(r.length));for(let o=0;o<r.length;o++)this.sendString_(r[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),Jv=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[ya,$l]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const i=$l&&$l.isAvailable();let r=i&&!$l.previouslyFailed();if(t.webSocketOnly&&(i||$r("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[$l];else{const o=this.transports_=[];for(const u of n.ALL_TRANSPORTS)u&&u.isAvailable()&&o.push(u);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class Vm{constructor(e,t,i,r,o,u,h,g,y,C){this.id=e,this.repoInfo_=t,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=o,this.onMessage_=u,this.onReady_=h,this.onDisconnect_=g,this.onKill_=y,this.lastSessionId=C,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Nm("c:"+this.id+":"),this.transportManager_=new Jv(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,i)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=Qf(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=_u("t",e),i=_u("d",e);if("c"===t)this.onSecondaryControl_(i);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(i)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=_u("t",e),i=_u("d",e);"c"===t?this.onControl_(i):"d"===t&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=_u("t",e);if("d"in e){const i=e.d;if("h"===t)this.onHandshake_(i);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(i):"r"===t?this.onReset_(i):"e"===t?Kf("Server Error: "+i):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Kf("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,i=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==i&&$r("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,i),Qf(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Qf(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(gu.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class n0{put(e,t,i,r){}merge(e,t,i,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,i){}onDisconnectMerge(e,t,i){}onDisconnectCancel(e,t){}reportStats(e){}}class _C{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,k.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,t)}}on(e,t,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:i});const r=this.getInitialEvent(e);r&&t.apply(i,r)}off(e,t,i){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let o=0;o<r.length;o++)if(r[o].callback===t&&(!i||i===r[o].context))return void r.splice(o,1)}validateEventType_(e){(0,k.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class Um extends _C{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,k.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Um}getInitialEvent(e){return(0,k.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class xn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function vn(){return new xn("")}function on(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Zl(n){return n.pieces_.length-n.pieceNum_}function Ln(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new xn(n.pieces_,e)}function Bm(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function us(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function jm(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new xn(e,0)}function ui(n,e){const t=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)t.push(n.pieces_[i]);if(e instanceof xn)for(let i=e.pieceNum_;i<e.pieces_.length;i++)t.push(e.pieces_[i]);else{const i=e.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&t.push(i[r])}return new xn(t,0)}function an(n){return n.pieceNum_>=n.pieces_.length}function ds(n,e){const t=on(n),i=on(e);if(null===t)return e;if(t===i)return ds(Ln(n),Ln(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function vC(n,e){const t=us(n,0),i=us(e,0);for(let r=0;r<t.length&&r<i.length;r++){const o=jl(t[r],i[r]);if(0!==o)return o}return t.length===i.length?0:t.length<i.length?-1:1}function s0(n,e){if(Zl(n)!==Zl(e))return!1;for(let t=n.pieceNum_,i=e.pieceNum_;t<=n.pieces_.length;t++,i++)if(n.pieces_[t]!==e.pieces_[i])return!1;return!0}function Qs(n,e){let t=n.pieceNum_,i=e.pieceNum_;if(Zl(n)>Zl(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[i])return!1;++t,++i}return!0}class zS{constructor(e,t){this.errorPrefix_=t,this.parts_=us(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=(0,k.ug)(this.parts_[i]);bC(this)}}function bC(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+va(n))}function va(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class tp extends _C{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new tp}getInitialEvent(e){return(0,k.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Wl=1e3;let yu,ql=(()=>{class n extends n0{constructor(t,i,r,o,u,h,g,y){if(super(),this.repoInfo_=t,this.applicationId_=i,this.onDataUpdate_=r,this.onConnectStatus_=o,this.onServerInfoUpdate_=u,this.authTokenProvider_=h,this.appCheckTokenProvider_=g,this.authOverride_=y,this.id=n.nextPersistentConnectionId_++,this.log_=Nm("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Wl,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,y&&!(0,k.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");tp.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&Um.getInstance().on("online",this.onOnline_,this)}sendRequest(t,i,r){const o=++this.requestNumber_,u={r:o,a:t,b:i};this.log_((0,k.Wl)(u)),(0,k.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(u),r&&(this.requestCBHash_[o]=r)}get(t){this.initConnection_();const i=new k.BH,r={p:t._path.toString(),q:t._queryObject};return this.outstandingGets_.push({action:"g",request:r,onComplete:h=>{const g=h.d;"ok"===h.s?i.resolve(g):i.reject(g)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),i.promise}listen(t,i,r,o){this.initConnection_();const u=t._queryIdentifier,h=t._path.toString();this.log_("Listen called for "+h+" "+u),this.listens.has(h)||this.listens.set(h,new Map),(0,k.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,k.hu)(!this.listens.get(h).has(u),"listen() called twice for same path/queryId.");const g={onComplete:o,hashFn:i,query:t,tag:r};this.listens.get(h).set(u,g),this.connected_&&this.sendListen_(g)}sendGet_(t){const i=this.outstandingGets_[t];this.sendRequest("g",i.request,r=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(r)})}sendListen_(t){const i=t.query,r=i._path.toString(),o=i._queryIdentifier;this.log_("Listen on "+r+" for "+o);const u={p:r};t.tag&&(u.q=i._queryObject,u.t=t.tag),u.h=t.hashFn(),this.sendRequest("q",u,g=>{const y=g.d,C=g.s;n.warnOnListenWarnings_(y,i),(this.listens.get(r)&&this.listens.get(r).get(o))===t&&(this.log_("listen response",g),"ok"!==C&&this.removeListen_(r,o),t.onComplete&&t.onComplete(C,y))})}static warnOnListenWarnings_(t,i){if(t&&"object"==typeof t&&(0,k.r3)(t,"w")){const r=(0,k.DV)(t,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const o='".indexOn": "'+i._queryParams.getIndex().toString()+'"',u=i._path.toString();$r(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${u} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,k.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,i=(0,k.w9)(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(i,r,o=>{const u=o.s,h=o.d||"error";this.authToken_===t&&("ok"===u?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(u,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const i=t.s,r=t.d||"error";"ok"===i?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,r)})}unlisten(t,i){const r=t._path.toString(),o=t._queryIdentifier;this.log_("Unlisten called for "+r+" "+o),(0,k.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,o)&&this.connected_&&this.sendUnlisten_(r,o,t._queryObject,i)}sendUnlisten_(t,i,r,o){this.log_("Unlisten on "+t+" for "+i);const u={p:t};o&&(u.q=r,u.t=o),this.sendRequest("n",u)}onDisconnectPut(t,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,i,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:i,onComplete:r})}onDisconnectMerge(t,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,i,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:i,onComplete:r})}onDisconnectCancel(t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(t,i,r,o){const u={p:i,d:r};this.log_("onDisconnect "+t,u),this.sendRequest(t,u,h=>{o&&setTimeout(()=>{o(h.s,h.d)},Math.floor(0))})}put(t,i,r,o){this.putInternal("p",t,i,r,o)}merge(t,i,r,o){this.putInternal("m",t,i,r,o)}putInternal(t,i,r,o,u){this.initConnection_();const h={p:i,d:r};void 0!==u&&(h.h=u),this.outstandingPuts_.push({action:t,request:h,onComplete:o}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+i)}sendPut_(t){const i=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,o=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(i,r,u=>{this.log_(i+" response",u),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),o&&o(u.s,u.d)})}reportStats(t){if(this.connected_){const i={c:t};this.log_("reportStats",i),this.sendRequest("s",i,r=>{"ok"!==r.s&&this.log_("reportStats","Error sending stats: "+r.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,k.Wl)(t));const i=t.r,r=this.requestCBHash_[i];r&&(delete this.requestCBHash_[i],r(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,i){this.log_("handleServerMessage",t,i),"d"===t?this.onDataUpdate_(i.p,i.d,!1,i.t):"m"===t?this.onDataUpdate_(i.p,i.d,!0,i.t):"c"===t?this.onListenRevoked_(i.p,i.q):"ac"===t?this.onAuthRevoked_(i.s,i.d):"apc"===t?this.onAppCheckRevoked_(i.s,i.d):"sd"===t?this.onSecurityDebugPacket_(i):Kf("Unrecognized action received from server: "+(0,k.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,k.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Wl,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Wl,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Wl),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let i=Math.max(0,this.reconnectDelay_-t);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,ge.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const i=t.onDataMessage_.bind(t),r=t.onReady_.bind(t),o=t.onRealtimeDisconnect_.bind(t),u=t.id+":"+n.nextConnectionId_++,h=t.lastSessionId;let g=!1,y=null;const C=function(){y?y.close():(g=!0,o())};t.realtime_={close:C,sendRequest:function(F){(0,k.hu)(y,"sendRequest call when we're not connected not allowed."),y.sendRequest(F)}};const A=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[F,Z]=yield Promise.all([t.authTokenProvider_.getToken(A),t.appCheckTokenProvider_.getToken(A)]);g?ji("getToken() completed but was canceled"):(ji("getToken() completed. Creating connection."),t.authToken_=F&&F.accessToken,t.appCheckToken_=Z&&Z.token,y=new Vm(u,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,i,r,o,ee=>{$r(ee+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},h))}catch(F){t.log_("Failed to get token: "+F),g||(t.repoInfo_.nodeAdmin&&$r(F),C())}}})()}interrupt(t){ji("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){ji("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,k.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Wl,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const i=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const i=this.outstandingPuts_[t];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,i){let r;r=i?i.map(u=>To(u)).join("$"):"default";const o=this.removeListen_(t,r);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(t,i){const r=new xn(t).toString();let o;if(this.listens.has(r)){const u=this.listens.get(r);o=u.get(i),u.delete(i),0===u.size&&this.listens.delete(r)}else o=void 0;return o}onAuthRevoked_(t,i){ji("Auth token revoked: "+t+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,i){ji("App check token revoked: "+t+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const i of t.values())this.sendListen_(i);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let i="js";(0,k.Yr)()&&(i=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+i+"."+Bv.replace(/\./g,"-")]=1,(0,k.uI)()?t["framework.cordova"]=1:(0,k.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=Um.getInstance().currentlyOnline();return(0,k.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class en{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new en(e,t)}}class Js{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const i=new en(Io,e),r=new en(Io,t);return 0!==this.compare(i,r)}minPost(){return en.MIN}}class np extends Js{static get __EMPTY_NODE(){return yu}static set __EMPTY_NODE(e){yu=e}compare(e,t){return jl(e.name,t.name)}isDefinedOn(e){throw(0,k.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return en.MIN}maxPost(){return new en(Yi,yu)}makePost(e,t){return(0,k.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new en(e,yu)}toString(){return".key"}}const hs=new np;class Gm{constructor(e,t,i,r,o=null){this.isReverse_=r,this.resultGenerator_=o,this.nodeStack_=[];let u=1;for(;!e.isEmpty();)if(u=t?i(e.key,t):1,r&&(u*=-1),u<0)e=this.isReverse_?e.left:e.right;else{if(0===u){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let l0,Is=(()=>{class n{constructor(t,i,r,o,u){this.key=t,this.value=i,this.color=r??n.RED,this.left=o??fs.EMPTY_NODE,this.right=u??fs.EMPTY_NODE}copy(t,i,r,o,u){return new n(t??this.key,i??this.value,r??this.color,o??this.left,u??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,i,r){let o=this;const u=r(t,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(t,i,r),null):0===u?o.copy(null,i,null,null,null):o.copy(null,null,null,null,o.right.insert(t,i,r)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return fs.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,i){let r,o;if(r=this,i(t,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(t,i),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),0===i(t,r.key)){if(r.right.isEmpty())return fs.EMPTY_NODE;o=r.right.min_(),r=r.copy(o.key,o.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(t,i))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,i)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class fs{constructor(e,t=fs.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new fs(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Is.BLACK,null,null))}remove(e){return new fs(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Is.BLACK,null,null))}get(e){let t,i=this.root_;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),0===t)return i.value;t<0?i=i.left:t>0&&(i=i.right)}return null}getPredecessorKey(e){let t,i=this.root_,r=null;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),0===t){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}t<0?i=i.left:t>0&&(r=i,i=i.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Gm(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Gm(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Gm(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Gm(this.root_,null,this.comparator_,!0,e)}}function YS(n,e){return jl(n.name,e.name)}function vu(n,e){return jl(n,e)}fs.EMPTY_NODE=new class CC{copy(e,t,i,r,o){return this}insert(e,t,i){return new Is(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const EC=function(n){return"number"==typeof n?"number:"+Mm(n):"string:"+n},QS=function(n){if(n.isLeafNode()){const e=n.val();(0,k.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,k.r3)(e,".sv"),"Priority must be a string or number.")}else(0,k.hu)(n===l0||n.isEmpty(),"priority of unexpected type.");(0,k.hu)(n===l0||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let IC,TC,c0,qd=(()=>{class n{constructor(t,i=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=i,this.lazyHash_=null,(0,k.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),QS(this.priorityNode_)}static set __childrenNodeConstructor(t){IC=t}static get __childrenNodeConstructor(){return IC}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return an(t)?this:".priority"===on(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,i){return null}updateImmediateChild(t,i){return".priority"===t?this.updatePriority(i):i.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,i).updatePriority(this.priorityNode_)}updateChild(t,i){const r=on(t);return null===r?i:i.isEmpty()&&".priority"!==r?this:((0,k.hu)(".priority"!==r||1===Zl(t),".priority must be the last token in a path"),this.updateImmediateChild(r,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Ln(t),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,i){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+EC(this.priorityNode_.val())+":");const i=typeof this.value_;t+=i+":",t+="number"===i?Mm(this.value_):this.value_,this.lazyHash_=KD(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,k.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const i=typeof t.value_,r=typeof this.value_,o=n.VALUE_TYPE_ORDER.indexOf(i),u=n.VALUE_TYPE_ORDER.indexOf(r);return(0,k.hu)(o>=0,"Unknown leaf type: "+i),(0,k.hu)(u>=0,"Unknown leaf type: "+r),o===u?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:u-o}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const i=t;return this.value_===i.value_&&this.priorityNode_.equals(i.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const zn=new class d0 extends Js{compare(e,t){const i=e.node.getPriority(),r=t.node.getPriority(),o=i.compareTo(r);return 0===o?jl(e.name,t.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return en.MIN}maxPost(){return new en(Yi,new qd("[PRIORITY-POST]",c0))}makePost(e,t){const i=TC(e);return new en(t,new qd("[PRIORITY-POST]",i))}toString(){return".priority"}},XS=Math.log(2);class eA{constructor(e){this.count=parseInt(Math.log(e+1)/XS,10),this.current_=this.count-1;const r=(o=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&r}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const $m=function(n,e,t,i){n.sort(e);const r=function(g,y){const C=y-g;let I,A;if(0===C)return null;if(1===C)return I=n[g],A=t?t(I):I,new Is(A,I.node,Is.BLACK,null,null);{const F=parseInt(C/2,10)+g,Z=r(g,F),ee=r(F+1,y);return I=n[F],A=t?t(I):I,new Is(A,I.node,Is.BLACK,Z,ee)}},h=function(g){let y=null,C=null,I=n.length;const A=function(Z,ee){const ce=I-Z,Ze=I;I-=Z;const We=r(ce+1,Ze),rt=n[ce],Je=t?t(rt):rt;F(new Is(Je,rt.node,ee,null,We))},F=function(Z){y?(y.left=Z,y=Z):(C=Z,y=Z)};for(let Z=0;Z<g.count;++Z){const ee=g.nextBitIsOne(),ce=Math.pow(2,g.count-(Z+1));ee?A(ce,Is.BLACK):(A(ce,Is.BLACK),A(ce,Is.RED))}return C}(new eA(n.length));return new fs(i||e,h)};let h0;const zd={};class Xs{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,k.hu)(zd&&zn,"ChildrenNode.ts has not been loaded"),h0=h0||new Xs({".priority":zd},{".priority":zn}),h0}get(e){const t=(0,k.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof fs?t:null}hasIndex(e){return(0,k.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,k.hu)(e!==hs,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let r=!1;const o=t.getIterator(en.Wrap);let h,u=o.getNext();for(;u;)r=r||e.isDefinedOn(u.node),i.push(u),u=o.getNext();h=r?$m(i,e.getCompare()):zd;const g=e.toString(),y=Object.assign({},this.indexSet_);y[g]=e;const C=Object.assign({},this.indexes_);return C[g]=h,new Xs(C,y)}addToIndexes(e,t){const i=(0,k.UI)(this.indexes_,(r,o)=>{const u=(0,k.DV)(this.indexSet_,o);if((0,k.hu)(u,"Missing index implementation for "+o),r===zd){if(u.isDefinedOn(e.node)){const h=[],g=t.getIterator(en.Wrap);let y=g.getNext();for(;y;)y.name!==e.name&&h.push(y),y=g.getNext();return h.push(e),$m(h,u.getCompare())}return zd}{const h=t.get(e.name);let g=r;return h&&(g=g.remove(new en(e.name,h))),g.insert(e,e.node)}});return new Xs(i,this.indexSet_)}removeFromIndexes(e,t){const i=(0,k.UI)(this.indexes_,r=>{if(r===zd)return r;{const o=t.get(e.name);return o?r.remove(new en(e.name,o)):r}});return new Xs(i,this.indexSet_)}}let So,Kt=(()=>{class n{constructor(t,i,r){this.children_=t,this.priorityNode_=i,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&QS(this.priorityNode_),this.children_.isEmpty()&&(0,k.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return So||(So=new n(new fs(vu),null,Xs.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||So}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const i=this.children_.get(t);return null===i?So:i}}getChild(t){const i=on(t);return null===i?this:this.getImmediateChild(i).getChild(Ln(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,i){if((0,k.hu)(i,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(i);{const r=new en(t,i);let o,u;i.isEmpty()?(o=this.children_.remove(t),u=this.indexMap_.removeFromIndexes(r,this.children_)):(o=this.children_.insert(t,i),u=this.indexMap_.addToIndexes(r,this.children_));const h=o.isEmpty()?So:this.priorityNode_;return new n(o,h,u)}}updateChild(t,i){const r=on(t);if(null===r)return i;{(0,k.hu)(".priority"!==on(t)||1===Zl(t),".priority must be the last token in a path");const o=this.getImmediateChild(r).updateChild(Ln(t),i);return this.updateImmediateChild(r,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const i={};let r=0,o=0,u=!0;if(this.forEachChild(zn,(h,g)=>{i[h]=g.val(t),r++,u&&n.INTEGER_REGEXP_.test(h)?o=Math.max(o,Number(h)):u=!1}),!t&&u&&o<2*r){const h=[];for(const g in i)h[g]=i[g];return h}return t&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+EC(this.getPriority().val())+":"),this.forEachChild(zn,(i,r)=>{const o=r.hash();""!==o&&(t+=":"+i+":"+o)}),this.lazyHash_=""===t?"":KD(t)}return this.lazyHash_}getPredecessorChildName(t,i,r){const o=this.resolveIndex_(r);if(o){const u=o.getPredecessorKey(new en(t,i));return u?u.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const i=this.resolveIndex_(t);if(i){const r=i.minKey();return r&&r.name}return this.children_.minKey()}getFirstChild(t){const i=this.getFirstChildName(t);return i?new en(i,this.children_.get(i)):null}getLastChildName(t){const i=this.resolveIndex_(t);if(i){const r=i.maxKey();return r&&r.name}return this.children_.maxKey()}getLastChild(t){const i=this.getLastChildName(t);return i?new en(i,this.children_.get(i)):null}forEachChild(t,i){const r=this.resolveIndex_(t);return r?r.inorderTraversal(o=>i(o.name,o.node)):this.children_.inorderTraversal(i)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,i){const r=this.resolveIndex_(i);if(r)return r.getIteratorFrom(t,o=>o);{const o=this.children_.getIteratorFrom(t.name,en.Wrap);let u=o.peek();for(;null!=u&&i.compare(u,t)<0;)o.getNext(),u=o.peek();return o}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,i){const r=this.resolveIndex_(i);if(r)return r.getReverseIteratorFrom(t,o=>o);{const o=this.children_.getReverseIteratorFrom(t.name,en.Wrap);let u=o.peek();for(;null!=u&&i.compare(u,t)>0;)o.getNext(),u=o.peek();return o}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===rp?-1:0}withIndex(t){if(t===hs||this.indexMap_.hasIndex(t))return this;{const i=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,i)}}isIndexed(t){return t===hs||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const i=t;if(this.getPriority().equals(i.getPriority())){if(this.children_.count()===i.children_.count()){const r=this.getIterator(zn),o=i.getIterator(zn);let u=r.getNext(),h=o.getNext();for(;u&&h;){if(u.name!==h.name||!u.node.equals(h.node))return!1;u=r.getNext(),h=o.getNext()}return null===u&&null===h}return!1}return!1}}resolveIndex_(t){return t===hs?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const rp=new class ip extends Kt{constructor(){super(new fs(vu),Kt.EMPTY_NODE,Xs.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Kt.EMPTY_NODE}isEmpty(){return!1}};function ni(n,e=null){if(null===n)return Kt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,k.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new qd(n,ni(e));if(n instanceof Array){let t=Kt.EMPTY_NODE;return Qi(n,(i,r)=>{if((0,k.r3)(n,i)&&"."!==i.substring(0,1)){const o=ni(r);(o.isLeafNode()||!o.isEmpty())&&(t=t.updateImmediateChild(i,o))}}),t.updatePriority(ni(e))}{const t=[];let i=!1;if(Qi(n,(u,h)=>{if("."!==u.substring(0,1)){const g=ni(h);g.isEmpty()||(i=i||!g.getPriority().isEmpty(),t.push(new en(u,g)))}}),0===t.length)return Kt.EMPTY_NODE;const o=$m(t,YS,u=>u.name,vu);if(i){const u=$m(t,zn.getCompare());return new Kt(o,ni(e),new Xs({".priority":u},{".priority":zn}))}return new Kt(o,ni(e),Xs.Default)}}Object.defineProperties(en,{MIN:{value:new en(Io,Kt.EMPTY_NODE)},MAX:{value:new en(Yi,rp)}}),np.__EMPTY_NODE=Kt.EMPTY_NODE,qd.__childrenNodeConstructor=Kt,function CP(n){l0=n}(rp),function JS(n){c0=n}(rp),function u0(n){TC=n}(ni);class f0 extends Js{constructor(e){super(),this.indexPath_=e,(0,k.hu)(!an(e)&&".priority"!==on(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const i=this.extractChild(e.node),r=this.extractChild(t.node),o=i.compareTo(r);return 0===o?jl(e.name,t.name):o}makePost(e,t){const i=ni(e),r=Kt.EMPTY_NODE.updateChild(this.indexPath_,i);return new en(t,r)}maxPost(){const e=Kt.EMPTY_NODE.updateChild(this.indexPath_,rp);return new en(Yi,e)}toString(){return us(this.indexPath_,0).join("/")}}const bu=new class ba extends Js{compare(e,t){const i=e.node.compareTo(t.node);return 0===i?jl(e.name,t.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return en.MIN}maxPost(){return en.MAX}makePost(e,t){const i=ni(e);return new en(t,i)}toString(){return".value"}};function _r(n){return{type:"value",snapshotNode:n}}function eo(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function zl(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function Mr(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class Kl{constructor(e){this.index_=e}updateChild(e,t,i,r,o,u){(0,k.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=e.getImmediateChild(t);return h.getChild(r).equals(i.getChild(r))&&h.isEmpty()===i.isEmpty()||(null!=u&&(i.isEmpty()?e.hasChild(t)?u.trackChildChange(zl(t,h)):(0,k.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?u.trackChildChange(eo(t,i)):u.trackChildChange(Mr(t,i,h))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(t,i).withIndex(this.index_)}updateFullNode(e,t,i){return null!=i&&(e.isLeafNode()||e.forEachChild(zn,(r,o)=>{t.hasChild(r)||i.trackChildChange(zl(r,o))}),t.isLeafNode()||t.forEachChild(zn,(r,o)=>{if(e.hasChild(r)){const u=e.getImmediateChild(r);u.equals(o)||i.trackChildChange(Mr(r,o,u))}else i.trackChildChange(eo(r,o))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Kt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class wa{constructor(e){this.indexedFilter_=new Kl(e.getIndex()),this.index_=e.getIndex(),this.startPost_=wa.getStartPost_(e),this.endPost_=wa.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,i=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&i}updateChild(e,t,i,r,o,u){return this.matches(new en(t,i))||(i=Kt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,i,r,o,u)}updateFullNode(e,t,i){t.isLeafNode()&&(t=Kt.EMPTY_NODE);let r=t.withIndex(this.index_);r=r.updatePriority(Kt.EMPTY_NODE);const o=this;return t.forEachChild(zn,(u,h)=>{o.matches(new en(u,h))||(r=r.updateImmediateChild(u,Kt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class Kd{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const i=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=t=>{const i=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new wa(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,i,r,o,u){return this.rangedFilter_.matches(new en(t,i))||(i=Kt.EMPTY_NODE),e.getImmediateChild(t).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,i,r,o,u):this.fullLimitUpdateChild_(e,t,i,o,u)}updateFullNode(e,t,i){let r;if(t.isLeafNode()||t.isEmpty())r=Kt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let o;r=Kt.EMPTY_NODE.withIndex(this.index_),o=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let u=0;for(;o.hasNext()&&u<this.limit_;){const h=o.getNext();if(this.withinDirectionalStart(h)){if(!this.withinDirectionalEnd(h))break;r=r.updateImmediateChild(h.name,h.node),u++}}}else{let o;r=t.withIndex(this.index_),r=r.updatePriority(Kt.EMPTY_NODE),o=this.reverse_?r.getReverseIterator(this.index_):r.getIterator(this.index_);let u=0;for(;o.hasNext();){const h=o.getNext();u<this.limit_&&this.withinDirectionalStart(h)&&this.withinDirectionalEnd(h)?u++:r=r.updateImmediateChild(h.name,Kt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,i,r,o){let u;if(this.reverse_){const I=this.index_.getCompare();u=(A,F)=>I(F,A)}else u=this.index_.getCompare();const h=e;(0,k.hu)(h.numChildren()===this.limit_,"");const g=new en(t,i),y=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),C=this.rangedFilter_.matches(g);if(h.hasChild(t)){const I=h.getImmediateChild(t);let A=r.getChildAfterChild(this.index_,y,this.reverse_);for(;null!=A&&(A.name===t||h.hasChild(A.name));)A=r.getChildAfterChild(this.index_,A,this.reverse_);const F=null==A?1:u(A,g);if(C&&!i.isEmpty()&&F>=0)return o?.trackChildChange(Mr(t,i,I)),h.updateImmediateChild(t,i);{o?.trackChildChange(zl(t,I));const ee=h.updateImmediateChild(t,Kt.EMPTY_NODE);return null!=A&&this.rangedFilter_.matches(A)?(o?.trackChildChange(eo(A.name,A.node)),ee.updateImmediateChild(A.name,A.node)):ee}}return i.isEmpty()?e:C&&u(y,g)>=0?(null!=o&&(o.trackChildChange(zl(y.name,y.node)),o.trackChildChange(eo(t,i))),h.updateImmediateChild(t,i).updateImmediateChild(y.name,Kt.EMPTY_NODE)):e}}class Qa{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=zn}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,k.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,k.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Io}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,k.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,k.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Yi}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,k.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===zn}copy(){const e=new Qa;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Yl(n,e,t){const i=n.copy();return i.startSet_=!0,void 0===e&&(e=null),i.indexStartValue_=e,null!=t?(i.startNameSet_=!0,i.indexStartName_=t):(i.startNameSet_=!1,i.indexStartName_=""),i}function Zm(n,e,t){const i=n.copy();return i.endSet_=!0,void 0===e&&(e=null),i.indexEndValue_=e,void 0!==t?(i.endNameSet_=!0,i.indexEndName_=t):(i.endNameSet_=!1,i.indexEndName_=""),i}function sp(n,e){const t=n.copy();return t.index_=e,t}function g0(n){const e={};if(n.isDefault())return e;let t;if(n.index_===zn?t="$priority":n.index_===bu?t="$value":n.index_===hs?t="$key":((0,k.hu)(n.index_ instanceof f0,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,k.Wl)(t),n.startSet_){const i=n.startAfterSet_?"startAfter":"startAt";e[i]=(0,k.Wl)(n.indexStartValue_),n.startNameSet_&&(e[i]+=","+(0,k.Wl)(n.indexStartName_))}if(n.endSet_){const i=n.endBeforeSet_?"endBefore":"endAt";e[i]=(0,k.Wl)(n.indexEndValue_),n.endNameSet_&&(e[i]+=","+(0,k.Wl)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function m0(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==zn&&(e.i=n.index_.toString()),e}class op extends n0{constructor(e,t,i,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=Nm("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,k.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,i,r){const o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);const u=op.getListenId_(e,i),h={};this.listens_[u]=h;const g=g0(e._queryParams);this.restRequest_(o+".json",g,(y,C)=>{let I=C;if(404===y&&(I=null,y=null),null===y&&this.onDataUpdate_(o,I,!1,i),(0,k.DV)(this.listens_,u)===h){let A;A=y?401===y?"permission_denied":"rest_error:"+y:"ok",r(A,null)}})}unlisten(e,t){const i=op.getListenId_(e,t);delete this.listens_[i]}get(e){const t=g0(e._queryParams),i=e._path.toString(),r=new k.BH;return this.restRequest_(i+".json",t,(o,u)=>{let h=u;404===o&&(h=null,o=null),null===o?(this.onDataUpdate_(i,h,!1,null),r.resolve(h)):r.reject(new Error(h))}),r.promise}refreshAuthToken(e){}restRequest_(e,t={},i){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,o])=>{r&&r.accessToken&&(t.auth=r.accessToken),o&&o.token&&(t.ac=o.token);const u=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,k.xO)(t);this.log_("Sending REST request for "+u);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(i&&4===h.readyState){this.log_("REST Response for "+u+" received. status:",h.status,"response:",h.responseText);let g=null;if(h.status>=200&&h.status<300){try{g=(0,k.cI)(h.responseText)}catch{$r("Failed to parse JSON response for "+u+": "+h.responseText)}i(null,g)}else 401!==h.status&&404!==h.status&&$r("Got unsuccessful REST response for "+u+" Status: "+h.status),i(h.status);i=null}},h.open("GET",u,!0),h.send()})}}class AC{constructor(){this.rootNode_=Kt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function ap(){return{value:null,children:new Map}}function wu(n,e,t){if(an(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const i=on(e);n.children.has(i)||n.children.set(i,ap()),wu(n.children.get(i),e=Ln(e),t)}}function _0(n,e){if(an(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(zn,(i,r)=>{wu(n,new xn(i),r)}),_0(n,e)}}if(n.children.size>0){const t=on(e);return e=Ln(e),n.children.has(t)&&_0(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function y0(n,e,t){null!==n.value?t(e,n.value):function NC(n,e){n.children.forEach((t,i)=>{e(i,t)})}(n,(i,r)=>{y0(r,new xn(e.toString()+"/"+i),t)})}class nA{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Qi(this.last_,(i,r)=>{t[i]=t[i]-r}),this.last_=e,t}}class iA{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new nA(e);const i=1e4+2e4*Math.random();Qf(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),t={};let i=!1;Qi(e,(r,o)=>{o>0&&(0,k.r3)(this.statsToReport_,r)&&(t[r]=o,i=!0)}),i&&this.server_.reportStats(t),Qf(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Zr=(()=>{return(n=Zr||(Zr={}))[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",Zr;var n})();function D0(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class th{constructor(e,t,i){this.path=e,this.affectedTree=t,this.revert=i,this.type=Zr.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(an(this.path)){if(null!=this.affectedTree.value)return(0,k.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new xn(e));return new th(vn(),t,this.revert)}}return(0,k.hu)(on(this.path)===e,"operationForChild called for unrelated child."),new th(Ln(this.path),this.affectedTree,this.revert)}}class Du{constructor(e,t){this.source=e,this.path=t,this.type=Zr.LISTEN_COMPLETE}operationForChild(e){return an(this.path)?new Du(this.source,vn()):new Du(this.source,Ln(this.path))}}class Ql{constructor(e,t,i){this.source=e,this.path=t,this.snap=i,this.type=Zr.OVERWRITE}operationForChild(e){return an(this.path)?new Ql(this.source,vn(),this.snap.getImmediateChild(e)):new Ql(this.source,Ln(this.path),this.snap)}}class Cu{constructor(e,t,i){this.source=e,this.path=t,this.children=i,this.type=Zr.MERGE}operationForChild(e){if(an(this.path)){const t=this.children.subtree(new xn(e));return t.isEmpty()?null:t.value?new Ql(this.source,vn(),t.value):new Cu(this.source,vn(),t)}return(0,k.hu)(on(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Cu(this.source,Ln(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Da{constructor(e,t,i){this.node_=e,this.fullyInitialized_=t,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(an(e))return this.isFullyInitialized()&&!this.filtered_;const t=on(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class xC{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Eu(n,e,t,i,r,o){const u=i.filter(h=>h.type===t);u.sort((h,g)=>function rA(n,e,t){if(null==e.childName||null==t.childName)throw(0,k.g5)("Should only compare child_ events.");const i=new en(e.childName,e.snapshotNode),r=new en(t.childName,t.snapshotNode);return n.index_.compare(i,r)}(n,h,g)),u.forEach(h=>{const g=function OC(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,h,o);r.forEach(y=>{y.respondsTo(h.type)&&e.push(y.createEvent(g,n.query_))})})}function cp(n,e){return{eventCache:n,serverCache:e}}function nh(n,e,t,i){return cp(new Da(e,t,i),n.serverCache)}function C0(n,e,t,i){return cp(n.eventCache,new Da(e,t,i))}function up(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Iu(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let Wm;class Vn{constructor(e,t=(()=>(Wm||(Wm=new fs(MS)),Wm))()){this.value=e,this.children=t}static fromObject(e){let t=new Vn(null);return Qi(e,(i,r)=>{t=t.set(new xn(i),r)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:vn(),value:this.value};if(an(e))return null;{const i=on(e),r=this.children.get(i);if(null!==r){const o=r.findRootMostMatchingPathAndValue(Ln(e),t);return null!=o?{path:ui(new xn(i),o.path),value:o.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(an(e))return this;{const t=on(e),i=this.children.get(t);return null!==i?i.subtree(Ln(e)):new Vn(null)}}set(e,t){if(an(e))return new Vn(t,this.children);{const i=on(e),o=(this.children.get(i)||new Vn(null)).set(Ln(e),t),u=this.children.insert(i,o);return new Vn(this.value,u)}}remove(e){if(an(e))return this.children.isEmpty()?new Vn(null):new Vn(null,this.children);{const t=on(e),i=this.children.get(t);if(i){const r=i.remove(Ln(e));let o;return o=r.isEmpty()?this.children.remove(t):this.children.insert(t,r),null===this.value&&o.isEmpty()?new Vn(null):new Vn(this.value,o)}return this}}get(e){if(an(e))return this.value;{const t=on(e),i=this.children.get(t);return i?i.get(Ln(e)):null}}setTree(e,t){if(an(e))return t;{const i=on(e),o=(this.children.get(i)||new Vn(null)).setTree(Ln(e),t);let u;return u=o.isEmpty()?this.children.remove(i):this.children.insert(i,o),new Vn(this.value,u)}}fold(e){return this.fold_(vn(),e)}fold_(e,t){const i={};return this.children.inorderTraversal((r,o)=>{i[r]=o.fold_(ui(e,r),t)}),t(e,this.value,i)}findOnPath(e,t){return this.findOnPath_(e,vn(),t)}findOnPath_(e,t,i){const r=!!this.value&&i(t,this.value);if(r)return r;if(an(e))return null;{const o=on(e),u=this.children.get(o);return u?u.findOnPath_(Ln(e),ui(t,o),i):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,vn(),t)}foreachOnPath_(e,t,i){if(an(e))return this;{this.value&&i(t,this.value);const r=on(e),o=this.children.get(r);return o?o.foreachOnPath_(Ln(e),ui(t,r),i):new Vn(null)}}foreach(e){this.foreach_(vn(),e)}foreach_(e,t){this.children.inorderTraversal((i,r)=>{r.foreach_(ui(e,i),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,i)=>{i.value&&e(t,i.value)})}}class ps{constructor(e){this.writeTree_=e}static empty(){return new ps(new Vn(null))}}function ih(n,e,t){if(an(e))return new ps(new Vn(t));{const i=n.writeTree_.findRootMostValueAndPath(e);if(null!=i){const r=i.path;let o=i.value;const u=ds(r,e);return o=o.updateChild(u,t),new ps(n.writeTree_.set(r,o))}{const r=new Vn(t),o=n.writeTree_.setTree(e,r);return new ps(o)}}}function qm(n,e,t){let i=n;return Qi(t,(r,o)=>{i=ih(i,ui(e,r),o)}),i}function E0(n,e){if(an(e))return ps.empty();{const t=n.writeTree_.setTree(e,new Vn(null));return new ps(t)}}function zm(n,e){return null!=Jl(n,e)}function Jl(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(ds(t.path,e)):null}function I0(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(zn,(i,r)=>{e.push(new en(i,r))}):n.writeTree_.children.inorderTraversal((i,r)=>{null!=r.value&&e.push(new en(i,r.value))}),e}function Ja(n,e){if(an(e))return n;{const t=Jl(n,e);return new ps(null!=t?new Vn(t):n.writeTree_.subtree(e))}}function Km(n){return n.writeTree_.isEmpty()}function dp(n,e){return PC(vn(),n.writeTree_,e)}function PC(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let i=null;return e.children.inorderTraversal((r,o)=>{".priority"===r?((0,k.hu)(null!==o.value,"Priority writes must always be leaf nodes"),i=o.value):t=PC(ui(n,r),o,t)}),!t.getChild(n).isEmpty()&&null!==i&&(t=t.updateChild(ui(n,".priority"),i)),t}}function Ym(n,e){return Ao(e,n)}function oA(n,e){if(n.snap)return Qs(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Qs(ui(n.path,t),e))return!0;return!1}function LC(n){return n.visible}function VC(n,e,t){let i=ps.empty();for(let r=0;r<n.length;++r){const o=n[r];if(e(o)){const u=o.path;let h;if(o.snap)Qs(t,u)?(h=ds(t,u),i=ih(i,h,o.snap)):Qs(u,t)&&(h=ds(u,t),i=ih(i,vn(),o.snap.getChild(h)));else{if(!o.children)throw(0,k.g5)("WriteRecord should have .snap or .children");if(Qs(t,u))h=ds(t,u),i=qm(i,h,o.children);else if(Qs(u,t))if(h=ds(u,t),an(h))i=qm(i,vn(),o.children);else{const g=(0,k.DV)(o.children,on(h));if(g){const y=g.getChild(Ln(h));i=ih(i,vn(),y)}}}}}return i}function T0(n,e,t,i,r){if(i||r){const o=Ja(n.visibleWrites,e);return!r&&Km(o)?t:r||null!=t||zm(o,vn())?dp(VC(n.allWrites,function(y){return(y.visible||r)&&(!i||!~i.indexOf(y.writeId))&&(Qs(y.path,e)||Qs(e,y.path))},e),t||Kt.EMPTY_NODE):null}{const o=Jl(n.visibleWrites,e);if(null!=o)return o;{const u=Ja(n.visibleWrites,e);return Km(u)?t:null!=t||zm(u,vn())?dp(u,t||Kt.EMPTY_NODE):null}}}function hp(n,e,t,i){return T0(n.writeTree,n.treePath,e,t,i)}function jC(n,e){return function UC(n,e,t){let i=Kt.EMPTY_NODE;const r=Jl(n.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(zn,(o,u)=>{i=i.updateImmediateChild(o,u)}),i;if(t){const o=Ja(n.visibleWrites,e);return t.forEachChild(zn,(u,h)=>{const g=dp(Ja(o,new xn(u)),h);i=i.updateImmediateChild(u,g)}),I0(o).forEach(u=>{i=i.updateImmediateChild(u.name,u.node)}),i}return I0(Ja(n.visibleWrites,e)).forEach(u=>{i=i.updateImmediateChild(u.name,u.node)}),i}(n.writeTree,n.treePath,e)}function Qm(n,e,t,i){return function rh(n,e,t,i,r){(0,k.hu)(i||r,"Either existingEventSnap or existingServerSnap must exist");const o=ui(e,t);if(zm(n.visibleWrites,o))return null;{const u=Ja(n.visibleWrites,o);return Km(u)?r.getChild(t):dp(u,r.getChild(t))}}(n.writeTree,n.treePath,e,t,i)}function sh(n,e){return function cA(n,e){return Jl(n.visibleWrites,e)}(n.writeTree,ui(n.treePath,e))}function S0(n,e,t){return function lA(n,e,t,i){const r=ui(e,t),o=Jl(n.visibleWrites,r);return null!=o?o:i.isCompleteForChild(t)?dp(Ja(n.visibleWrites,r),i.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function A0(n,e){return Ao(ui(n.treePath,e),n.writeTree)}function Ao(n,e){return{treePath:n,writeTree:e}}class No{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,i=e.childName;(0,k.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,k.hu)(".priority"!==i,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(i);if(r){const o=r.type;if("child_added"===t&&"child_removed"===o)this.changeMap.set(i,Mr(i,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===o)this.changeMap.delete(i);else if("child_removed"===t&&"child_changed"===o)this.changeMap.set(i,zl(i,r.oldSnap));else if("child_changed"===t&&"child_added"===o)this.changeMap.set(i,eo(i,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==o)throw(0,k.g5)("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(i,Mr(i,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}const N0=new class xo{getCompleteChild(e){return null}getChildAfterChild(e,t,i){return null}};class Jm{constructor(e,t,i=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=i}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const i=null!=this.optCompleteServerCache_?new Da(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return S0(this.writes_,e,i)}}getChildAfterChild(e,t,i){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Iu(this.viewCache_),o=function Ca(n,e,t,i,r,o){return function BC(n,e,t,i,r,o,u){let h;const g=Ja(n.visibleWrites,e),y=Jl(g,vn());if(null!=y)h=y;else{if(null==t)return[];h=dp(g,t)}if(h=h.withIndex(u),h.isEmpty()||h.isLeafNode())return[];{const C=[],I=u.getCompare(),A=o?h.getReverseIteratorFrom(i,u):h.getIteratorFrom(i,u);let F=A.getNext();for(;F&&C.length<r;)0!==I(F,i)&&C.push(F),F=A.getNext();return C}}(n.writeTree,n.treePath,e,t,i,r,o)}(this.writes_,r,t,1,i,e);return 0===o.length?null:o[0]}}function Xm(n,e,t,i,r,o){const u=e.eventCache;if(null!=sh(i,t))return e;{let h,g;if(an(t))if((0,k.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const y=Iu(e),I=jC(i,y instanceof Kt?y:Kt.EMPTY_NODE);h=n.filter.updateFullNode(e.eventCache.getNode(),I,o)}else{const y=hp(i,Iu(e));h=n.filter.updateFullNode(e.eventCache.getNode(),y,o)}else{const y=on(t);if(".priority"===y){(0,k.hu)(1===Zl(t),"Can't have a priority with additional path components");const C=u.getNode();g=e.serverCache.getNode();const I=Qm(i,t,C,g);h=null!=I?n.filter.updatePriority(C,I):u.getNode()}else{const C=Ln(t);let I;if(u.isCompleteForChild(y)){g=e.serverCache.getNode();const A=Qm(i,t,u.getNode(),g);I=null!=A?u.getNode().getImmediateChild(y).updateChild(C,A):u.getNode().getImmediateChild(y)}else I=S0(i,y,e.serverCache);h=null!=I?n.filter.updateChild(u.getNode(),y,I,C,r,o):u.getNode()}}return nh(e,h,u.isFullyInitialized()||an(t),n.filter.filtersNodes())}}function Xl(n,e,t,i,r,o,u,h){const g=e.serverCache;let y;const C=u?n.filter:n.filter.getIndexedFilter();if(an(t))y=C.updateFullNode(g.getNode(),i,null);else if(C.filtersNodes()&&!g.isFiltered()){const F=g.getNode().updateChild(t,i);y=C.updateFullNode(g.getNode(),F,null)}else{const F=on(t);if(!g.isCompleteForPath(t)&&Zl(t)>1)return e;const Z=Ln(t),ce=g.getNode().getImmediateChild(F).updateChild(Z,i);y=".priority"===F?C.updatePriority(g.getNode(),ce):C.updateChild(g.getNode(),F,ce,Z,N0,null)}const I=C0(e,y,g.isFullyInitialized()||an(t),C.filtersNodes());return Xm(n,I,t,r,new Jm(r,I,o),h)}function x0(n,e,t,i,r,o,u){const h=e.eventCache;let g,y;const C=new Jm(r,e,o);if(an(t))y=n.filter.updateFullNode(e.eventCache.getNode(),i,u),g=nh(e,y,!0,n.filter.filtersNodes());else{const I=on(t);if(".priority"===I)y=n.filter.updatePriority(e.eventCache.getNode(),i),g=nh(e,y,h.isFullyInitialized(),h.isFiltered());else{const A=Ln(t),F=h.getNode().getImmediateChild(I);let Z;if(an(A))Z=i;else{const ee=C.getCompleteChild(I);Z=null!=ee?".priority"===Bm(A)&&ee.getChild(jm(A)).isEmpty()?ee:ee.updateChild(A,i):Kt.EMPTY_NODE}g=F.equals(Z)?e:nh(e,n.filter.updateChild(h.getNode(),I,Z,A,C,u),h.isFullyInitialized(),n.filter.filtersNodes())}}return g}function M0(n,e){return n.eventCache.isCompleteForChild(e)}function O0(n,e,t){return t.foreach((i,r)=>{e=e.updateChild(i,r)}),e}function e_(n,e,t,i,r,o,u,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let y,g=e;y=an(t)?i:new Vn(null).setTree(t,i);const C=e.serverCache.getNode();return y.children.inorderTraversal((I,A)=>{if(C.hasChild(I)){const Z=O0(0,e.serverCache.getNode().getImmediateChild(I),A);g=Xl(n,g,new xn(I),Z,r,o,u,h)}}),y.children.inorderTraversal((I,A)=>{const F=!e.serverCache.isCompleteForChild(I)&&null===A.value;if(!C.hasChild(I)&&!F){const ee=O0(0,e.serverCache.getNode().getImmediateChild(I),A);g=Xl(n,g,new xn(I),ee,r,o,u,h)}}),g}class GC{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const i=this.query_._queryParams,r=new Kl(i.getIndex()),o=function Yd(n){return n.loadsAllData()?new Kl(n.getIndex()):n.hasLimit()?new Kd(n):new wa(n)}(i);this.processor_=function dA(n){return{filter:n}}(o);const u=t.serverCache,h=t.eventCache,g=r.updateFullNode(Kt.EMPTY_NODE,u.getNode(),null),y=o.updateFullNode(Kt.EMPTY_NODE,h.getNode(),null),C=new Da(g,u.isFullyInitialized(),r.filtersNodes()),I=new Da(y,h.isFullyInitialized(),o.filtersNodes());this.viewCache_=cp(I,C),this.eventGenerator_=new xC(this.query_)}get query(){return this.query_}}function P0(n,e){const t=Iu(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!an(e)&&!t.getImmediateChild(on(e)).isEmpty())?t.getChild(e):null}function k0(n){return 0===n.eventRegistrations_.length}function L0(n,e,t){const i=[];if(t){(0,k.hu)(null==e,"A cancel should cancel all event registrations.");const r=n.query._path;n.eventRegistrations_.forEach(o=>{const u=o.createCancelEvent(t,r);u&&i.push(u)})}if(e){let r=[];for(let o=0;o<n.eventRegistrations_.length;++o){const u=n.eventRegistrations_[o];if(u.matches(e)){if(e.hasAnyCallback()){r=r.concat(n.eventRegistrations_.slice(o+1));break}}else r.push(u)}n.eventRegistrations_=r}else n.eventRegistrations_=[];return i}function V0(n,e,t,i){e.type===Zr.MERGE&&null!==e.source.queryId&&((0,k.hu)(Iu(n.viewCache_),"We should always have a full cache before handling merges"),(0,k.hu)(up(n.viewCache_),"Missing event cache, even though we have a server cache"));const r=n.viewCache_,o=function fA(n,e,t,i,r){const o=new No;let u,h;if(t.type===Zr.OVERWRITE){const y=t;y.source.fromUser?u=x0(n,e,y.path,y.snap,i,r,o):((0,k.hu)(y.source.fromServer,"Unknown source."),h=y.source.tagged||e.serverCache.isFiltered()&&!an(y.path),u=Xl(n,e,y.path,y.snap,i,r,h,o))}else if(t.type===Zr.MERGE){const y=t;y.source.fromUser?u=function gA(n,e,t,i,r,o,u){let h=e;return i.foreach((g,y)=>{const C=ui(t,g);M0(e,on(C))&&(h=x0(n,h,C,y,r,o,u))}),i.foreach((g,y)=>{const C=ui(t,g);M0(e,on(C))||(h=x0(n,h,C,y,r,o,u))}),h}(n,e,y.path,y.children,i,r,o):((0,k.hu)(y.source.fromServer,"Unknown source."),h=y.source.tagged||e.serverCache.isFiltered(),u=e_(n,e,y.path,y.children,i,r,h,o))}else if(t.type===Zr.ACK_USER_WRITE){const y=t;u=y.revert?function HC(n,e,t,i,r,o){let u;if(null!=sh(i,t))return e;{const h=new Jm(i,e,r),g=e.eventCache.getNode();let y;if(an(t)||".priority"===on(t)){let C;if(e.serverCache.isFullyInitialized())C=hp(i,Iu(e));else{const I=e.serverCache.getNode();(0,k.hu)(I instanceof Kt,"serverChildren would be complete if leaf node"),C=jC(i,I)}y=n.filter.updateFullNode(g,C,o)}else{const C=on(t);let I=S0(i,C,e.serverCache);null==I&&e.serverCache.isCompleteForChild(C)&&(I=g.getImmediateChild(C)),y=null!=I?n.filter.updateChild(g,C,I,Ln(t),h,o):e.eventCache.getNode().hasChild(C)?n.filter.updateChild(g,C,Kt.EMPTY_NODE,Ln(t),h,o):g,y.isEmpty()&&e.serverCache.isFullyInitialized()&&(u=hp(i,Iu(e)),u.isLeafNode()&&(y=n.filter.updateFullNode(y,u,o)))}return u=e.serverCache.isFullyInitialized()||null!=sh(i,vn()),nh(e,y,u,n.filter.filtersNodes())}}(n,e,y.path,i,r,o):function t_(n,e,t,i,r,o,u){if(null!=sh(r,t))return e;const h=e.serverCache.isFiltered(),g=e.serverCache;if(null!=i.value){if(an(t)&&g.isFullyInitialized()||g.isCompleteForPath(t))return Xl(n,e,t,g.getNode().getChild(t),r,o,h,u);if(an(t)){let y=new Vn(null);return g.getNode().forEachChild(hs,(C,I)=>{y=y.set(new xn(C),I)}),e_(n,e,t,y,r,o,h,u)}return e}{let y=new Vn(null);return i.foreach((C,I)=>{const A=ui(t,C);g.isCompleteForPath(A)&&(y=y.set(C,g.getNode().getChild(A)))}),e_(n,e,t,y,r,o,h,u)}}(n,e,y.path,y.affectedTree,i,r,o)}else{if(t.type!==Zr.LISTEN_COMPLETE)throw(0,k.g5)("Unknown operation type: "+t.type);u=function mA(n,e,t,i,r){const o=e.serverCache;return Xm(n,C0(e,o.getNode(),o.isFullyInitialized()||an(t),o.isFiltered()),t,i,N0,r)}(n,e,t.path,i,o)}const g=o.getChanges();return function pA(n,e,t){const i=e.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),o=up(n);(t.length>0||!n.eventCache.isFullyInitialized()||r&&!i.getNode().equals(o)||!i.getNode().getPriority().equals(o.getPriority()))&&t.push(_r(up(e)))}}(e,u,g),{viewCache:u,changes:g}}(n.processor_,r,e,t,i);return function hA(n,e){(0,k.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,k.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,o.viewCache),(0,k.hu)(o.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=o.viewCache,U0(n,o.changes,o.viewCache.eventCache.getNode(),null)}function U0(n,e,t,i){return function MC(n,e,t,i){const r=[],o=[];return e.forEach(u=>{"child_changed"===u.type&&n.index_.indexedValueChanged(u.oldSnap,u.snapshotNode)&&o.push(function p0(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(u.childName,u.snapshotNode))}),Eu(n,r,"child_removed",e,i,t),Eu(n,r,"child_added",e,i,t),Eu(n,r,"child_moved",o,i,t),Eu(n,r,"child_changed",e,i,t),Eu(n,r,"value",e,i,t),r}(n.eventGenerator_,e,t,i?[i]:n.eventRegistrations_)}let fp,r_;class ZC{constructor(){this.views=new Map}}function B0(n,e,t,i){const r=e.source.queryId;if(null!==r){const o=n.views.get(r);return(0,k.hu)(null!=o,"SyncTree gave us an op for an invalid query."),V0(o,e,t,i)}{let o=[];for(const u of n.views.values())o=o.concat(V0(u,e,t,i));return o}}function WC(n,e,t,i,r){const u=n.views.get(e._queryIdentifier);if(!u){let h=hp(t,r?i:null),g=!1;h?g=!0:i instanceof Kt?(h=jC(t,i),g=!1):(h=Kt.EMPTY_NODE,g=!1);const y=cp(new Da(h,g,!1),new Da(i,r,!1));return new GC(e,y)}return u}function qC(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function ec(n,e){let t=null;for(const i of n.views.values())t=t||P0(i,e);return t}function zC(n,e){return e._queryParams.loadsAllData()?i_(n):n.views.get(e._queryIdentifier)}function KC(n,e){return null!=zC(n,e)}function tc(n){return null!=i_(n)}function i_(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let EA=1;class j0{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Vn(null),this.pendingWriteTree_=function uA(){return{visibleWrites:ps.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function s_(n,e,t,i,r){return function kC(n,e,t,i,r){(0,k.hu)(i>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),n.allWrites.push({path:e,snap:t,writeId:i,visible:r}),r&&(n.visibleWrites=ih(n.visibleWrites,e,t)),n.lastWriteId=i}(n.pendingWriteTree_,e,t,i,r),r?Mo(n,new Ql({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Xa(n,e,t=!1){const i=function Ji(n,e){for(let t=0;t<n.allWrites.length;t++){const i=n.allWrites[t];if(i.writeId===e)return i}return null}(n.pendingWriteTree_,e);if(function FC(n,e){const t=n.allWrites.findIndex(h=>h.writeId===e);(0,k.hu)(t>=0,"removeWrite called with nonexistent writeId.");const i=n.allWrites[t];n.allWrites.splice(t,1);let r=i.visible,o=!1,u=n.allWrites.length-1;for(;r&&u>=0;){const h=n.allWrites[u];h.visible&&(u>=t&&oA(h,i.path)?r=!1:Qs(i.path,h.path)&&(o=!0)),u--}return!!r&&(o?(function aA(n){n.visibleWrites=VC(n.allWrites,LC,vn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(i.snap?n.visibleWrites=E0(n.visibleWrites,i.path):Qi(i.children,g=>{n.visibleWrites=E0(n.visibleWrites,ui(i.path,g))}),!0))}(n.pendingWriteTree_,e)){let o=new Vn(null);return null!=i.snap?o=o.set(vn(),!0):Qi(i.children,u=>{o=o.set(new xn(u),!0)}),Mo(n,new th(i.path,o,t))}return[]}function oh(n,e,t){return Mo(n,new Ql({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function pp(n,e,t,i,r=!1){const o=e._path,u=n.syncPointTree_.get(o);let h=[];if(u&&("default"===e._queryIdentifier||KC(u,e))){const g=function wA(n,e,t,i){const r=e._queryIdentifier,o=[];let u=[];const h=tc(n);if("default"===r)for(const[g,y]of n.views.entries())u=u.concat(L0(y,t,i)),k0(y)&&(n.views.delete(g),y.query._queryParams.loadsAllData()||o.push(y.query));else{const g=n.views.get(r);g&&(u=u.concat(L0(g,t,i)),k0(g)&&(n.views.delete(r),g.query._queryParams.loadsAllData()||o.push(g.query)))}return h&&!tc(n)&&o.push(new(function yA(){return(0,k.hu)(fp,"Reference.ts has not been loaded"),fp}())(e._repo,e._path)),{removed:o,events:u}}(u,e,t,i);(function vA(n){return 0===n.views.size})(u)&&(n.syncPointTree_=n.syncPointTree_.remove(o));const y=g.removed;if(h=g.events,!r){const C=-1!==y.findIndex(A=>A._queryParams.loadsAllData()),I=n.syncPointTree_.findOnPath(o,(A,F)=>tc(F));if(C&&!I){const A=n.syncPointTree_.subtree(o);if(!A.isEmpty()){const F=function AA(n){return n.fold((e,t,i)=>{if(t&&tc(t))return[i_(t)];{let r=[];return t&&(r=qC(t)),Qi(i,(o,u)=>{r=r.concat(u)}),r}})}(A);for(let Z=0;Z<F.length;++Z){const ee=F[Z],ce=ee.query,Ze=SA(n,ee);n.listenProvider_.startListening(mp(ce),ah(n,ce),Ze.hashFn,Ze.onComplete)}}}!I&&y.length>0&&!i&&(C?n.listenProvider_.stopListening(mp(e),null):y.forEach(A=>{const F=n.queryToTagMap.get(gp(A));n.listenProvider_.stopListening(mp(A),F)}))}!function lh(n,e){for(let t=0;t<e.length;++t){const i=e[t];if(!i._queryParams.loadsAllData()){const r=gp(i),o=n.queryToTagMap.get(r);n.queryToTagMap.delete(r),n.tagToQueryMap.delete(o)}}}(n,y)}return h}function o_(n,e,t,i){const r=t1(n,i);if(null!=r){const o=Rt(r),u=o.path,h=o.queryId,g=ds(u,e);return H0(n,u,new Ql(D0(h),g,t))}return[]}function el(n,e,t,i=!1){const r=e._path;let o=null,u=!1;n.syncPointTree_.foreachOnPath(r,(A,F)=>{const Z=ds(A,r);o=o||ec(F,Z),u=u||tc(F)});let g,h=n.syncPointTree_.get(r);h?(u=u||tc(h),o=o||ec(h,vn())):(h=new ZC,n.syncPointTree_=n.syncPointTree_.set(r,h)),null!=o?g=!0:(g=!1,o=Kt.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((F,Z)=>{const ee=ec(Z,vn());ee&&(o=o.updateImmediateChild(F,ee))}));const y=KC(h,e);if(!y&&!e._queryParams.loadsAllData()){const A=gp(e);(0,k.hu)(!n.queryToTagMap.has(A),"View does not exist, but we have a tag");const F=function NA(){return EA++}();n.queryToTagMap.set(A,F),n.tagToQueryMap.set(F,A)}let I=function bA(n,e,t,i,r,o){const u=WC(n,e,i,r,o);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,u),function F0(n,e){n.eventRegistrations_.push(e)}(u,t),function $C(n,e){const t=n.viewCache_.eventCache,i=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(zn,(o,u)=>{i.push(eo(o,u))}),t.isFullyInitialized()&&i.push(_r(t.getNode())),U0(n,i,t.getNode(),e)}(u,t)}(h,e,t,Ym(n.pendingWriteTree_,r),o,g);if(!y&&!u&&!i){const A=zC(h,e);I=I.concat(function c_(n,e,t){const i=e._path,r=ah(n,e),o=SA(n,t),u=n.listenProvider_.startListening(mp(e),r,o.hashFn,o.onComplete),h=n.syncPointTree_.subtree(i);if(r)(0,k.hu)(!tc(h.value),"If we're adding a query, it shouldn't be shadowed");else{const g=h.fold((y,C,I)=>{if(!an(y)&&C&&tc(C))return[i_(C).query];{let A=[];return C&&(A=A.concat(qC(C).map(F=>F.query))),Qi(I,(F,Z)=>{A=A.concat(Z)}),A}});for(let y=0;y<g.length;++y){const C=g[y];n.listenProvider_.stopListening(mp(C),ah(n,C))}}return u}(n,e,A))}return I}function a_(n,e,t){const r=n.pendingWriteTree_,o=n.syncPointTree_.findOnPath(e,(u,h)=>{const y=ec(h,ds(u,e));if(y)return y});return T0(r,e,o,t,!0)}function Mo(n,e){return TA(e,n.syncPointTree_,null,Ym(n.pendingWriteTree_,vn()))}function TA(n,e,t,i){if(an(n.path))return l_(n,e,t,i);{const r=e.get(vn());null==t&&null!=r&&(t=ec(r,vn()));let o=[];const u=on(n.path),h=n.operationForChild(u),g=e.children.get(u);if(g&&h){const y=t?t.getImmediateChild(u):null,C=A0(i,u);o=o.concat(TA(h,g,y,C))}return r&&(o=o.concat(B0(r,n,i,t))),o}}function l_(n,e,t,i){const r=e.get(vn());null==t&&null!=r&&(t=ec(r,vn()));let o=[];return e.children.inorderTraversal((u,h)=>{const g=t?t.getImmediateChild(u):null,y=A0(i,u),C=n.operationForChild(u);C&&(o=o.concat(l_(C,h,g,y)))}),r&&(o=o.concat(B0(r,n,i,t))),o}function SA(n,e){const t=e.query,i=ah(n,t);return{hashFn:()=>(function R0(n){return n.viewCache_.serverCache.getNode()}(e)||Kt.EMPTY_NODE).hash(),onComplete:r=>{if("ok"===r)return i?function XC(n,e,t){const i=t1(n,t);if(i){const r=Rt(i),o=r.path,u=r.queryId,h=ds(o,e);return H0(n,o,new Du(D0(u),h))}return[]}(n,t._path,i):function JC(n,e){return Mo(n,new Du({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const o=function mP(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const i=new Error(n+" at "+e._path.toString()+": "+t);return i.code=n.toUpperCase(),i}(r,t);return pp(n,t,null,o)}}}}function ah(n,e){const t=gp(e);return n.queryToTagMap.get(t)}function gp(n){return n._path.toString()+"$"+n._queryIdentifier}function t1(n,e){return n.tagToQueryMap.get(e)}function Rt(n){const e=n.indexOf("$");return(0,k.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new xn(n.substr(0,e))}}function H0(n,e,t){const i=n.syncPointTree_.get(e);return(0,k.hu)(i,"Missing sync point for query tag that we're tracking"),B0(i,t,Ym(n.pendingWriteTree_,e),null)}function mp(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function CA(){return(0,k.hu)(r_,"Reference.ts has not been loaded"),r_}())(n._repo,n._path):n}class ch{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new ch(t)}node(){return this.node_}}class di{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=ui(this.path_,e);return new di(this.syncTree_,t)}node(){return a_(this.syncTree_,this.path_)}}const G0=function(n,e,t){return n&&"object"==typeof n?((0,k.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?n1(n[".sv"],e,t):"object"==typeof n[".sv"]?xA(n[".sv"],e):void(0,k.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},n1=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,k.hu)(!1,"Unexpected server value: "+n)},xA=function(n,e,t){n.hasOwnProperty("increment")||(0,k.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const i=n.increment;"number"!=typeof i&&(0,k.hu)(!1,"Unexpected increment value: "+i);const r=e.node();if((0,k.hu)(null!==r&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const u=r.getValue();return"number"!=typeof u?i:u+i},$0=function(n,e,t,i){return d_(e,new di(t,n),i)},u_=function(n,e,t){return d_(n,new ch(e),t)};function d_(n,e,t){const i=n.getPriority().val(),r=G0(i,e.getImmediateChild(".priority"),t);let o;if(n.isLeafNode()){const u=n,h=G0(u.getValue(),e,t);return h!==u.getValue()||r!==u.getPriority().val()?new qd(h,ni(r)):n}{const u=n;return o=u,r!==u.getPriority().val()&&(o=o.updatePriority(new qd(r))),u.forEachChild(zn,(h,g)=>{const y=d_(g,e.getImmediateChild(h),t);y!==g&&(o=o.updateImmediateChild(h,y))}),o}}class h_{constructor(e="",t=null,i={children:{},childCount:0}){this.name=e,this.parent=t,this.node=i}}function f_(n,e){let t=e instanceof xn?e:new xn(e),i=n,r=on(t);for(;null!==r;){const o=(0,k.DV)(i.node.children,r)||{children:{},childCount:0};i=new h_(r,i,o),t=Ln(t),r=on(t)}return i}function Tu(n){return n.node.value}function Z0(n,e){n.node.value=e,m_(n)}function uh(n){return n.node.childCount>0}function p_(n,e){Qi(n.node.children,(t,i)=>{e(new h_(t,n,i))})}function i1(n,e,t,i){t&&!i&&e(n),p_(n,r=>{i1(r,e,!0,i)}),t&&i&&e(n)}function dh(n){return new xn(null===n.parent?n.name:dh(n.parent)+"/"+n.name)}function m_(n){null!==n.parent&&function r1(n,e,t){const i=function MA(n){return void 0===Tu(n)&&!uh(n)}(t),r=(0,k.r3)(n.node.children,e);i&&r?(delete n.node.children[e],n.node.childCount--,m_(n)):!i&&!r&&(n.node.children[e]=t.node,n.node.childCount++,m_(n))}(n.parent,n.name,n)}const OA=/[\[\].#$\/\u0000-\u001F\u007F]/,_p=/[\[\].#$\u0000-\u001F\u007F]/,Su=10485760,__=function(n){return"string"==typeof n&&0!==n.length&&!OA.test(n)},s1=function(n){return"string"==typeof n&&0!==n.length&&!_p.test(n)},hh=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!Yf(n)||n&&"object"==typeof n&&(0,k.r3)(n,".sv")},Oo=function(n,e,t,i){i&&void 0===e||fh((0,k.gK)(n,"value"),e,t)},fh=function(n,e,t){const i=t instanceof xn?new zS(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+va(i));if("function"==typeof e)throw new Error(n+"contains a function "+va(i)+" with contents = "+e.toString());if(Yf(e))throw new Error(n+"contains "+e.toString()+" "+va(i));if("string"==typeof e&&e.length>Su/3&&(0,k.ug)(e)>Su)throw new Error(n+"contains a string greater than "+Su+" utf8 bytes "+va(i)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let r=!1,o=!1;if(Qi(e,(u,h)=>{if(".value"===u)r=!0;else if(".priority"!==u&&".sv"!==u&&(o=!0,!__(u)))throw new Error(n+" contains an invalid key ("+u+") "+va(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function o0(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,k.ug)(e),bC(n)})(i,u),fh(n,h,i),function KS(n){const e=n.parts_.pop();n.byteLength_-=(0,k.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(i)}),r&&o)throw new Error(n+' contains ".value" child '+va(i)+" in addition to actual children.")}},W0=function(n,e,t,i){if(i&&void 0===e)return;const r=(0,k.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(r+" must be an object containing the children to replace.");const o=[];Qi(e,(u,h)=>{const g=new xn(u);if(fh(r,h,ui(t,g)),".priority"===Bm(g)&&!hh(h))throw new Error(r+"contains an invalid value for '"+g.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(g)}),function(n,e){let t,i;for(t=0;t<e.length;t++){i=e[t];const o=us(i);for(let u=0;u<o.length;u++)if((".priority"!==o[u]||u!==o.length-1)&&!__(o[u]))throw new Error(n+"contains an invalid key ("+o[u]+") in path "+i.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(vC);let r=null;for(t=0;t<e.length;t++){if(i=e[t],null!==r&&Qs(r,i))throw new Error(n+"contains a path "+r.toString()+" that is ancestor of another path "+i.toString());r=i}}(r,o)},q0=function(n,e,t){if(!t||void 0!==e){if(Yf(e))throw new Error((0,k.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!hh(e))throw new Error((0,k.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},yp=function(n,e,t,i){if(!(i&&void 0===t||__(t)))throw new Error((0,k.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},y_=function(n,e,t,i){if(!(i&&void 0===t||s1(t)))throw new Error((0,k.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Ro=function(n,e){if(".info"===on(e))throw new Error(n+" failed = Can't modify data under /.info/")},kA=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!__(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),s1(n)}(t))throw new Error((0,k.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class o1{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Au(n,e){let t=null;for(let i=0;i<e.length;i++){const r=e[i],o=r.getPath();null!==t&&!s0(o,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:o}),t.events.push(r)}t&&n.eventLists_.push(t)}function a1(n,e,t){Au(n,t),z0(n,i=>s0(i,e))}function Ts(n,e,t){Au(n,t),z0(n,i=>Qs(i,e)||Qs(e,i))}function z0(n,e){n.recursionDepth_++;let t=!0;for(let i=0;i<n.eventLists_.length;i++){const r=n.eventLists_[i];r&&(e(r.path)?(vp(n.eventLists_[i]),n.eventLists_[i]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function vp(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const i=t.getEventRunner();mu&&ji("event: "+t.toString()),Hl(i)}}}const l1="repo_interrupt";class LA{constructor(e,t,i,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new o1,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=ap(),this.transactionQueueTree_=new h_,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function c1(n){const t=n.infoData_.getNode(new xn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function ph(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:c1(n)})}function u1(n,e,t,i,r){n.dataUpdateCount++;const o=new xn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let u=[];if(r)if(i){const g=(0,k.UI)(t,y=>ni(y));u=function e1(n,e,t,i){const r=t1(n,i);if(r){const o=Rt(r),u=o.path,h=o.queryId,g=ds(u,e),y=Vn.fromObject(t);return H0(n,u,new Cu(D0(h),g,y))}return[]}(n.serverSyncTree_,o,g,r)}else{const g=ni(t);u=o_(n.serverSyncTree_,o,g,r)}else if(i){const g=(0,k.UI)(t,y=>ni(y));u=function QC(n,e,t){const i=Vn.fromObject(t);return Mo(n,new Cu({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,o,g)}else{const g=ni(t);u=oh(n.serverSyncTree_,o,g)}let h=o;u.length>0&&(h=gh(n,o)),Ts(n.eventQueue_,h,u)}function d1(n,e){K0(n,"connected",e),!1===e&&function h1(n){nc(n,"onDisconnectEvents");const e=ph(n),t=ap();y0(n.onDisconnect_,vn(),(r,o)=>{const u=$0(r,o,n.serverSyncTree_,e);wu(t,r,u)});let i=[];y0(t,vn(),(r,o)=>{i=i.concat(oh(n.serverSyncTree_,r,o));const u=D_(n,r);gh(n,u)}),n.onDisconnect_=ap(),Ts(n.eventQueue_,vn(),i)}(n)}function K0(n,e,t){const i=new xn("/.info/"+e),r=ni(t);n.infoData_.updateSnapshot(i,r);const o=oh(n.infoSyncTree_,i,r);Ts(n.eventQueue_,i,o)}function wp(n){return n.nextWriteId_++}function v_(n,e,t,i,r){nc(n,"set",{path:e.toString(),value:t,priority:i});const o=ph(n),u=ni(t,i),h=a_(n.serverSyncTree_,e),g=u_(u,h,o),y=wp(n),C=s_(n.serverSyncTree_,e,g,y,!0);Au(n.eventQueue_,C),n.server_.put(e.toString(),u.val(!0),(A,F)=>{const Z="ok"===A;Z||$r("set at "+e+" failed: "+A);const ee=Xa(n.serverSyncTree_,y,!Z);Ts(n.eventQueue_,e,ee),ic(0,r,A,F)});const I=D_(n,e);gh(n,I),Ts(n.eventQueue_,I,[])}function jA(n,e,t){n.server_.onDisconnectCancel(e.toString(),(i,r)=>{"ok"===i&&_0(n.onDisconnect_,e),ic(0,t,i,r)})}function b_(n,e,t,i){const r=ni(t);n.server_.onDisconnectPut(e.toString(),r.val(!0),(o,u)=>{"ok"===o&&wu(n.onDisconnect_,e,r),ic(0,i,o,u)})}function Y0(n,e,t){let i;i=".info"===on(e._path)?pp(n.infoSyncTree_,e,t):pp(n.serverSyncTree_,e,t),a1(n.eventQueue_,e._path,i)}function g1(n){n.persistentConnection_&&n.persistentConnection_.interrupt(l1)}function nc(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),ji(t,...e)}function ic(n,e,t,i){e&&Hl(()=>{if("ok"===t)e(null);else{const r=(t||"error").toUpperCase();let o=r;i&&(o+=": "+i);const u=new Error(o);u.code=r,e(u)}})}function Q0(n,e,t){return a_(n.serverSyncTree_,e,t)||Kt.EMPTY_NODE}function w_(n,e=n.transactionQueueTree_){if(e||Dp(n,e),Tu(e)){const t=y1(n,e);(0,k.hu)(t.length>0,"Sending zero length transaction queue"),t.every(r=>0===r.status)&&function $A(n,e,t){const i=t.map(y=>y.currentWriteId),r=Q0(n,e,i);let o=r;const u=r.hash();for(let y=0;y<t.length;y++){const C=t[y];(0,k.hu)(0===C.status,"tryToSendTransactionQueue_: items in queue should all be run."),C.status=1,C.retryCount++;const I=ds(e,C.path);o=o.updateChild(I,C.currentOutputSnapshotRaw)}const h=o.val(!0),g=e;n.server_.put(g.toString(),h,y=>{nc(n,"transaction put response",{path:g.toString(),status:y});let C=[];if("ok"===y){const I=[];for(let A=0;A<t.length;A++)t[A].status=2,C=C.concat(Xa(n.serverSyncTree_,t[A].currentWriteId)),t[A].onComplete&&I.push(()=>t[A].onComplete(null,!0,t[A].currentOutputSnapshotResolved)),t[A].unwatcher();Dp(n,f_(n.transactionQueueTree_,e)),w_(n,n.transactionQueueTree_),Ts(n.eventQueue_,e,C);for(let A=0;A<I.length;A++)Hl(I[A])}else{if("datastale"===y)for(let I=0;I<t.length;I++)t[I].status=3===t[I].status?4:0;else{$r("transaction at "+g.toString()+" failed: "+y);for(let I=0;I<t.length;I++)t[I].status=4,t[I].abortReason=y}gh(n,e)}},u)}(n,dh(e),t)}else uh(e)&&p_(e,t=>{w_(n,t)})}function gh(n,e){const t=_1(n,e),i=dh(t);return function ZA(n,e,t){if(0===e.length)return;const i=[];let r=[];const u=e.filter(h=>0===h.status).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const g=e[h],y=ds(t,g.path);let I,C=!1;if((0,k.hu)(null!==y,"rerunTransactionsUnderNode_: relativePath should not be null."),4===g.status)C=!0,I=g.abortReason,r=r.concat(Xa(n.serverSyncTree_,g.currentWriteId,!0));else if(0===g.status)if(g.retryCount>=25)C=!0,I="maxretry",r=r.concat(Xa(n.serverSyncTree_,g.currentWriteId,!0));else{const A=Q0(n,g.path,u);g.currentInputSnapshot=A;const F=e[h].update(A.val());if(void 0!==F){fh("transaction failed: Data returned ",F,g.path);let Z=ni(F);"object"==typeof F&&null!=F&&(0,k.r3)(F,".priority")||(Z=Z.updatePriority(A.getPriority()));const ce=g.currentWriteId,Ze=ph(n),We=u_(Z,A,Ze);g.currentOutputSnapshotRaw=Z,g.currentOutputSnapshotResolved=We,g.currentWriteId=wp(n),u.splice(u.indexOf(ce),1),r=r.concat(s_(n.serverSyncTree_,g.path,We,g.currentWriteId,g.applyLocally)),r=r.concat(Xa(n.serverSyncTree_,ce,!0))}else C=!0,I="nodata",r=r.concat(Xa(n.serverSyncTree_,g.currentWriteId,!0))}Ts(n.eventQueue_,t,r),r=[],C&&(e[h].status=2,setTimeout(e[h].unwatcher,Math.floor(0)),e[h].onComplete&&i.push("nodata"===I?()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot):()=>e[h].onComplete(new Error(I),!1,null)))}Dp(n,n.transactionQueueTree_);for(let h=0;h<i.length;h++)Hl(i[h]);w_(n,n.transactionQueueTree_)}(n,y1(n,t),i),i}function _1(n,e){let t,i=n.transactionQueueTree_;for(t=on(e);null!==t&&void 0===Tu(i);)i=f_(i,t),t=on(e=Ln(e));return i}function y1(n,e){const t=[];return v1(n,e,t),t.sort((i,r)=>i.order-r.order),t}function v1(n,e,t){const i=Tu(e);if(i)for(let r=0;r<i.length;r++)t.push(i[r]);p_(e,r=>{v1(n,r,t)})}function Dp(n,e){const t=Tu(e);if(t){let i=0;for(let r=0;r<t.length;r++)2!==t[r].status&&(t[i]=t[r],i++);t.length=i,Z0(e,t.length>0?t:void 0)}p_(e,i=>{Dp(n,i)})}function D_(n,e){const t=dh(_1(n,e)),i=f_(n.transactionQueueTree_,e);return function g_(n,e,t){let i=t?n:n.parent;for(;null!==i;){if(e(i))return!0;i=i.parent}}(i,r=>{C_(n,r)}),C_(n,i),i1(i,r=>{C_(n,r)}),t}function C_(n,e){const t=Tu(e);if(t){const i=[];let r=[],o=-1;for(let u=0;u<t.length;u++)3===t[u].status||(1===t[u].status?((0,k.hu)(o===u-1,"All SENT items should be at beginning of queue."),o=u,t[u].status=3,t[u].abortReason="set"):((0,k.hu)(0===t[u].status,"Unexpected transaction status in abort"),t[u].unwatcher(),r=r.concat(Xa(n.serverSyncTree_,t[u].currentWriteId,!0)),t[u].onComplete&&i.push(t[u].onComplete.bind(null,new Error("set"),!1,null))));-1===o?Z0(e,void 0):t.length=o+1,Ts(n.eventQueue_,dh(e),r);for(let u=0;u<i.length;u++)Hl(i[u])}}const E_=function(n,e){const t=qA(n),i=t.namespace;return"firebase.com"===t.domain&&_a(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||"undefined"===i)&&"localhost"!==t.domain&&_a("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&$r("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new tC(t.host,t.secure,i,"ws"===t.scheme||"wss"===t.scheme,e,"",i!==t.subdomain),path:new xn(t.pathString)}},qA=function(n){let e="",t="",i="",r="",o="",u=!0,h="https",g=443;if("string"==typeof n){let y=n.indexOf("//");y>=0&&(h=n.substring(0,y-1),n=n.substring(y+2));let C=n.indexOf("/");-1===C&&(C=n.length);let I=n.indexOf("?");-1===I&&(I=n.length),e=n.substring(0,Math.min(C,I)),C<I&&(r=function WA(n){let e="";const t=n.split("/");for(let i=0;i<t.length;i++)if(t[i].length>0){let r=t[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}e+="/"+r}return e}(n.substring(C,I)));const A=function J0(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const i=t.split("=");2===i.length?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):$r(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,I)));y=e.indexOf(":"),y>=0?(u="https"===h||"wss"===h,g=parseInt(e.substring(y+1),10)):y=e.length;const F=e.slice(0,y);if("localhost"===F.toLowerCase())t="localhost";else if(F.split(".").length<=2)t=F;else{const Z=e.indexOf(".");i=e.substring(0,Z).toLowerCase(),t=e.substring(Z+1),o=i}"ns"in A&&(o=A.ns)}return{host:e,port:g,domain:t,subdomain:i,secure:u,scheme:h,pathString:r,namespace:o}},b1="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",X0=function(){let n=0;const e=[];return function(t){const i=t===n;let r;n=t;const o=new Array(8);for(r=7;r>=0;r--)o[r]=b1.charAt(t%64),t=Math.floor(t/64);(0,k.hu)(0===t,"Cannot push at time == 0");let u=o.join("");if(i){for(r=11;r>=0&&63===e[r];r--)e[r]=0;e[r]++}else for(r=0;r<12;r++)e[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)u+=b1.charAt(e[r]);return(0,k.hu)(20===u.length,"nextPushId: Length should be 20."),u}}();class I_{constructor(e,t,i,r){this.eventType=e,this.eventRegistration=t,this.snapshot=i,this.prevName=r}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,k.Wl)(this.snapshot.exportVal())}}class eb{constructor(e,t,i){this.eventRegistration=e,this.error=t,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class Cp{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,k.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class w1{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new k.BH;return jA(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Ro("OnDisconnect.remove",this._path);const e=new k.BH;return b_(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Ro("OnDisconnect.set",this._path),Oo("OnDisconnect.set",e,this._path,!1);const t=new k.BH;return b_(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Ro("OnDisconnect.setWithPriority",this._path),Oo("OnDisconnect.setWithPriority",e,this._path,!1),q0("OnDisconnect.setWithPriority",t,!1);const i=new k.BH;return function HA(n,e,t,i,r){const o=ni(t,i);n.server_.onDisconnectPut(e.toString(),o.val(!0),(u,h)=>{"ok"===u&&wu(n.onDisconnect_,e,o),ic(0,r,u,h)})}(this._repo,this._path,e,t,i.wrapCallback(()=>{})),i.promise}update(e){Ro("OnDisconnect.update",this._path),W0("OnDisconnect.update",e,this._path,!1);const t=new k.BH;return function f1(n,e,t,i){if((0,k.xb)(t))return ji("onDisconnect().update() called with empty data.  Don't do anything."),void ic(0,i,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(r,o)=>{"ok"===r&&Qi(t,(u,h)=>{const g=ni(h);wu(n.onDisconnect_,ui(e,u),g)}),ic(0,i,r,o)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class gs{constructor(e,t,i,r){this._repo=e,this._path=t,this._queryParams=i,this._orderByCalled=r}get key(){return an(this._path)?null:Bm(this._path)}get ref(){return new yr(this._repo,this._path)}get _queryIdentifier(){const e=m0(this._queryParams),t=To(e);return"{}"===t?"default":t}get _queryObject(){return m0(this._queryParams)}isEqual(e){if(!((e=(0,k.m9)(e))instanceof gs))return!1;const t=this._repo===e._repo,i=s0(this._path,e._path);return t&&i&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function qS(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function mh(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function rc(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===hs){const i="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",r="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Io)throw new Error(i);if("string"!=typeof e)throw new Error(r)}if(n.hasEnd()){if(n.getIndexEndName()!==Yi)throw new Error(i);if("string"!=typeof t)throw new Error(r)}}else if(n.getIndex()===zn){if(null!=e&&!hh(e)||null!=t&&!hh(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,k.hu)(n.getIndex()instanceof f0||n.getIndex()===bu,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Ep(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class yr extends gs{constructor(e,t){super(e,t,new Qa,!1)}get parent(){const e=jm(this._path);return null===e?null:new yr(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class sc{constructor(e,t,i){this._node=e,this.ref=t,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new xn(e),i=oc(this.ref,e);return new sc(this._node.getChild(t),i,zn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(i,r)=>e(new sc(r,oc(this.ref,i),zn)))}hasChild(e){const t=new xn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function D1(n,e){return(n=(0,k.m9)(n))._checkNotDeleted("ref"),void 0!==e?oc(n._root,e):n._root}function zA(n,e){(n=(0,k.m9)(n))._checkNotDeleted("refFromURL");const t=E_(e,n._repo.repoInfo_.nodeAdmin);kA("refFromURL",t);const i=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&i.host!==n._repo.repoInfo_.host&&_a("refFromURL: Host name does not match the current database: (found "+i.host+" but expected "+n._repo.repoInfo_.host+")"),D1(n,t.path.toString())}function oc(n,e){return null===on((n=(0,k.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),y_("child","path",t,!1)):y_("child","path",e,!1),new yr(n._repo,ui(n._path,e));var t}function nb(n,e){n=(0,k.m9)(n),Ro("set",n._path),Oo("set",e,n._path,!1);const t=new k.BH;return v_(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function I1(n,e){W0("update",e,n._path,!1);const t=new k.BH;return function BA(n,e,t,i){nc(n,"update",{path:e.toString(),value:t});let r=!0;const o=ph(n),u={};if(Qi(t,(h,g)=>{r=!1,u[h]=$0(ui(e,h),ni(g),n.serverSyncTree_,o)}),r)ji("update() called with empty data.  Don't do anything."),ic(0,i,"ok",void 0);else{const h=wp(n),g=function YC(n,e,t,i){!function sA(n,e,t,i){(0,k.hu)(i>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:i,visible:!0}),n.visibleWrites=qm(n.visibleWrites,e,t),n.lastWriteId=i}(n.pendingWriteTree_,e,t,i);const r=Vn.fromObject(t);return Mo(n,new Cu({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,e,u,h);Au(n.eventQueue_,g),n.server_.merge(e.toString(),t,(y,C)=>{const I="ok"===y;I||$r("update at "+e+" failed: "+y);const A=Xa(n.serverSyncTree_,h,!I),F=A.length>0?gh(n,e):e;Ts(n.eventQueue_,F,A),ic(0,i,y,C)}),Qi(t,y=>{const C=D_(n,ui(e,y));gh(n,C)}),Ts(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function T1(n){n=(0,k.m9)(n);const e=new Cp(()=>{}),t=new _h(e);return function UA(n,e,t){const i=function IA(n,e){const t=e._path;let i=null;n.syncPointTree_.foreachOnPath(t,(y,C)=>{const I=ds(y,t);i=i||ec(C,I)});let r=n.syncPointTree_.get(t);r?i=i||ec(r,vn()):(r=new ZC,n.syncPointTree_=n.syncPointTree_.set(t,r));const o=null!=i,u=o?new Da(i,!0,!1):null;return function n_(n){return up(n.viewCache_)}(WC(r,e,Ym(n.pendingWriteTree_,e._path),o?u.getNode():Kt.EMPTY_NODE,o))}(n.serverSyncTree_,e);return null!=i?Promise.resolve(i):n.server_.get(e).then(r=>{const o=ni(r).withIndex(e._queryParams.getIndex());let u;if(el(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())u=oh(n.serverSyncTree_,e._path,o);else{const h=ah(n.serverSyncTree_,e);u=o_(n.serverSyncTree_,e._path,o,h)}return Ts(n.eventQueue_,e._path,u),pp(n.serverSyncTree_,e,t,null,!0),o},r=>(nc(n,"get for query "+(0,k.Wl)(e)+" failed: "+r),Promise.reject(new Error(r))))}(n._repo,n,t).then(i=>new sc(i,new yr(n._repo,n._path),n._queryParams.getIndex()))}class _h{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const i=t._queryParams.getIndex();return new I_("value",this,new sc(e.snapshotNode,new yr(t._repo,t._path),i))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new eb(this,e,t):null}matches(e){return e instanceof _h&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Ip{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new eb(this,e,t):null}createEvent(e,t){(0,k.hu)(null!=e.childName,"Child events should have a childName.");const i=oc(new yr(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new I_(e.type,this,new sc(e.snapshotNode,i,r),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof Ip&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Tp(n,e,t,i,r){let o;if("object"==typeof i&&(o=void 0,r=i),"function"==typeof i&&(o=i),r&&r.onlyOnce){const g=t,y=(C,I)=>{Y0(n._repo,n,h),g(C,I)};y.userCallback=t.userCallback,y.context=t.context,t=y}const u=new Cp(t,o||void 0),h="value"===e?new _h(u):new Ip(e,u);return function p1(n,e,t){let i;i=".info"===on(e._path)?el(n.infoSyncTree_,e,t):el(n.serverSyncTree_,e,t),a1(n.eventQueue_,e._path,i)}(n._repo,n,h),()=>Y0(n._repo,n,h)}function rb(n,e,t,i){return Tp(n,"value",e,t,i)}function S1(n,e,t,i){return Tp(n,"child_added",e,t,i)}function A1(n,e,t,i){return Tp(n,"child_changed",e,t,i)}function sb(n,e,t,i){return Tp(n,"child_moved",e,t,i)}function YA(n,e,t,i){return Tp(n,"child_removed",e,t,i)}function ob(n,e,t){let i=null;const r=t?new Cp(t):null;"value"===e?i=new _h(r):e&&(i=new Ip(e,r)),Y0(n._repo,n,i)}class Po{}class N1 extends Po{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Oo("endAt",this._value,e._path,!0);const t=Zm(e._queryParams,this._value,this._key);if(Ep(t),rc(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new gs(e._repo,e._path,t,e._orderByCalled)}}class SP extends Po{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Oo("endBefore",this._value,e._path,!1);const t=function SC(n,e,t){let i;return i=Zm(n,e,n.index_===hs||t?t:Io),i.endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if(Ep(t),rc(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new gs(e._repo,e._path,t,e._orderByCalled)}}class x1 extends Po{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Oo("startAt",this._value,e._path,!0);const t=Yl(e._queryParams,this._value,this._key);if(Ep(t),rc(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new gs(e._repo,e._path,t,e._orderByCalled)}}class M1 extends Po{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Oo("startAfter",this._value,e._path,!1);const t=function Xd(n,e,t){let i;return i=Yl(n,e,n.index_===hs||t?t:Yi),i.startAfterSet_=!0,i}(e._queryParams,this._value,this._key);if(Ep(t),rc(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new gs(e._repo,e._path,t,e._orderByCalled)}}class R1 extends Po{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new gs(e._repo,e._path,function Qd(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class eN extends Po{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new gs(e._repo,e._path,function Jd(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class nN extends Po{constructor(e){super(),this._path=e}_apply(e){mh(e,"orderByChild");const t=new xn(this._path);if(an(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const i=new f0(t),r=sp(e._queryParams,i);return rc(r),new gs(e._repo,e._path,r,!0)}}class rN extends Po{_apply(e){mh(e,"orderByKey");const t=sp(e._queryParams,hs);return rc(t),new gs(e._repo,e._path,t,!0)}}class P1 extends Po{_apply(e){mh(e,"orderByPriority");const t=sp(e._queryParams,zn);return rc(t),new gs(e._repo,e._path,t,!0)}}class F1 extends Po{_apply(e){mh(e,"orderByValue");const t=sp(e._queryParams,bu);return rc(t),new gs(e._repo,e._path,t,!0)}}class V1 extends Po{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(Oo("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new N1(this._value,this._key)._apply(new x1(this._value,this._key)._apply(e))}}function ko(n,...e){let t=(0,k.m9)(n);for(const i of e)t=i._apply(t);return t}(function _A(n){(0,k.hu)(!fp,"__referenceConstructor has already been defined"),fp=n})(yr),function DA(n){(0,k.hu)(!r_,"__referenceConstructor has already been defined"),r_=n}(yr);const T_={};function j1(n,e,t,i,r){let o=i||n.options.databaseURL;void 0===o&&(n.options.projectId||_a("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ji("Using default host for project ",n.options.projectId),o=`${n.options.projectId}-default-rtdb.firebaseio.com`);let g,y,u=E_(o,r),h=u.repoInfo;typeof process<"u"&&process.env&&(y=process.env.FIREBASE_DATABASE_EMULATOR_HOST),y?(g=!0,o=`http://${y}?ns=${h.namespace}`,u=E_(o,r),h=u.repoInfo):g=!u.repoInfo.secure;const C=r&&g?new Jf(Jf.OWNER):new RS(n.name,n.options,e);kA("Invalid Firebase Database URL",u),an(u.path)||_a("Database URL must point to the root of a Firebase Database (not including a child path).");const I=function Ap(n,e,t,i){let r=T_[e.name];r||(r={},T_[e.name]=r);let o=r[n.toURLString()];return o&&_a("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new LA(n,false,t,i),r[n.toURLString()]=o,o}(h,n,C,new OS(n.name,t));return new ab(I,n)}class ab{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function VA(n,e,t){if(n.stats_=rC(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new op(n.repoInfo_,(i,r,o,u)=>{u1(n,i,r,o,u)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>d1(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,k.Wl)(t)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new ql(n.repoInfo_,e,(i,r,o,u)=>{u1(n,i,r,o,u)},i=>{d1(n,i)},i=>{!function bp(n,e){Qi(e,(t,i)=>{K0(n,t,i)})}(n,i)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=function Gl(n,e){const t=n.toString();return iC[t]||(iC[t]=e()),iC[t]}(n.repoInfo_,()=>new iA(n.stats_,n.server_)),n.infoData_=new AC,n.infoSyncTree_=new j0({startListening:(i,r,o,u)=>{let h=[];const g=n.infoData_.getNode(i._path);return g.isEmpty()||(h=oh(n.infoSyncTree_,i._path,g),setTimeout(()=>{u("ok")},0)),h},stopListening:()=>{}}),K0(n,"connected",!1),n.serverSyncTree_=new j0({startListening:(i,r,o,u)=>(n.server_.listen(i,o,r,(h,g)=>{const y=u(h,g);Ts(n.eventQueue_,i._path,y)}),[]),stopListening:(i,r)=>{n.server_.unlisten(i,r)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new yr(this._repo,vn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function oN(n,e){const t=T_[e];(!t||t[n.key]!==n)&&_a(`Database ${e}(${n.repoInfo_}) has already been deleted.`),g1(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&_a("Cannot call "+e+" on a deleted database.")}}function Fo(){Jv.IS_TRANSPORT_INITIALIZED&&$r("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function lN(){Fo(),ya.forceDisallow()}function lb(){Fo(),$l.forceDisallow(),ya.forceAllow()}function A_(n,e){Zv(n,e)}const dN={".sv":"timestamp"};class $1{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}ql.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},ql.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function N_(n){jv(Eo.SDK_VERSION),(0,Eo._registerComponent)(new Bl.wA("database",(e,{instanceIdentifier:t})=>j1(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Eo.registerVersion)(qD,"0.14.0",n),(0,Eo.registerVersion)(qD,"0.14.0","esm2017")}();const ub=new ma.Yd("@firebase/database-compat"),x_=function(n){ub.warn("FIREBASE WARNING: "+n)};class hb{constructor(e){this._delegate=e}cancel(e){(0,k.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,k.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),i=>e(i)),t}remove(e){(0,k.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,k.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),i=>e(i)),t}set(e,t){(0,k.Dv)("OnDisconnect.set",1,2,arguments.length),(0,k.Wj)("OnDisconnect.set","onComplete",t,!0);const i=this._delegate.set(e);return t&&i.then(()=>t(null),r=>t(r)),i}setWithPriority(e,t,i){(0,k.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,k.Wj)("OnDisconnect.setWithPriority","onComplete",i,!0);const r=this._delegate.setWithPriority(e,t);return i&&r.then(()=>i(null),o=>i(o)),r}update(e,t){if((0,k.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const r={};for(let o=0;o<e.length;++o)r[""+o]=e[o];e=r,x_("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,k.Wj)("OnDisconnect.update","onComplete",t,!0);const i=this._delegate.update(e);return t&&i.then(()=>t(null),r=>t(r)),i}}class gN{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,k.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class ac{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,k.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,k.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,k.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,k.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,k.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),y_("DataSnapshot.child","path",e,!1),new ac(this._database,this._delegate.child(e))}hasChild(e){return(0,k.Dv)("DataSnapshot.hasChild",1,1,arguments.length),y_("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,k.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,k.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,k.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new ac(this._database,t)))}hasChildren(){return(0,k.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,k.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,k.Dv)("DataSnapshot.ref",0,0,arguments.length),new Ss(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class vr{constructor(e,t){this.database=e,this._delegate=t}on(e,t,i,r){var o;(0,k.Dv)("Query.on",2,4,arguments.length),(0,k.Wj)("Query.on","callback",t,!1);const u=vr.getCancelAndContextArgs_("Query.on",i,r),h=(y,C)=>{t.call(u.context,new ac(this.database,y),C)};h.userCallback=t,h.context=u.context;const g=null===(o=u.cancel)||void 0===o?void 0:o.bind(u.context);switch(e){case"value":return rb(this._delegate,h,g),t;case"child_added":return S1(this._delegate,h,g),t;case"child_removed":return YA(this._delegate,h,g),t;case"child_changed":return A1(this._delegate,h,g),t;case"child_moved":return sb(this._delegate,h,g),t;default:throw new Error((0,k.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,i){if((0,k.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,k.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,k.Wj)("Query.off","callback",t,!0),(0,k.lb)("Query.off","context",i,!0),t){const r=()=>{};r.userCallback=t,r.context=i,ob(this._delegate,e,r)}else ob(this._delegate,e)}get(){return T1(this._delegate).then(e=>new ac(this.database,e))}once(e,t,i,r){(0,k.Dv)("Query.once",1,4,arguments.length),(0,k.Wj)("Query.once","callback",t,!0);const o=vr.getCancelAndContextArgs_("Query.once",i,r),u=new k.BH,h=(y,C)=>{const I=new ac(this.database,y);t&&t.call(o.context,I,C),u.resolve(I)};h.userCallback=t,h.context=o.context;const g=y=>{o.cancel&&o.cancel.call(o.context,y),u.reject(y)};switch(e){case"value":rb(this._delegate,h,g,{onlyOnce:!0});break;case"child_added":S1(this._delegate,h,g,{onlyOnce:!0});break;case"child_removed":YA(this._delegate,h,g,{onlyOnce:!0});break;case"child_changed":A1(this._delegate,h,g,{onlyOnce:!0});break;case"child_moved":sb(this._delegate,h,g,{onlyOnce:!0});break;default:throw new Error((0,k.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return u.promise}limitToFirst(e){return(0,k.Dv)("Query.limitToFirst",1,1,arguments.length),new vr(this.database,ko(this._delegate,function XA(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new R1(n)}(e)))}limitToLast(e){return(0,k.Dv)("Query.limitToLast",1,1,arguments.length),new vr(this.database,ko(this._delegate,function tN(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new eN(n)}(e)))}orderByChild(e){return(0,k.Dv)("Query.orderByChild",1,1,arguments.length),new vr(this.database,ko(this._delegate,function iN(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return y_("orderByChild","path",n,!1),new nN(n)}(e)))}orderByKey(){return(0,k.Dv)("Query.orderByKey",0,0,arguments.length),new vr(this.database,ko(this._delegate,function Sp(){return new rN}()))}orderByPriority(){return(0,k.Dv)("Query.orderByPriority",0,0,arguments.length),new vr(this.database,ko(this._delegate,function k1(){return new P1}()))}orderByValue(){return(0,k.Dv)("Query.orderByValue",0,0,arguments.length),new vr(this.database,ko(this._delegate,function L1(){return new F1}()))}startAt(e=null,t){return(0,k.Dv)("Query.startAt",0,2,arguments.length),new vr(this.database,ko(this._delegate,function JA(n=null,e){return yp("startAt","key",e,!0),new x1(n,e)}(e,t)))}startAfter(e=null,t){return(0,k.Dv)("Query.startAfter",0,2,arguments.length),new vr(this.database,ko(this._delegate,function O1(n,e){return yp("startAfter","key",e,!0),new M1(n,e)}(e,t)))}endAt(e=null,t){return(0,k.Dv)("Query.endAt",0,2,arguments.length),new vr(this.database,ko(this._delegate,function TP(n,e){return yp("endAt","key",e,!0),new N1(n,e)}(e,t)))}endBefore(e=null,t){return(0,k.Dv)("Query.endBefore",0,2,arguments.length),new vr(this.database,ko(this._delegate,function QA(n,e){return yp("endBefore","key",e,!0),new SP(n,e)}(e,t)))}equalTo(e,t){return(0,k.Dv)("Query.equalTo",1,2,arguments.length),new vr(this.database,ko(this._delegate,function U1(n,e){return yp("equalTo","key",e,!0),new V1(n,e)}(e,t)))}toString(){return(0,k.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,k.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,k.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof vr))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,i){const r={cancel:void 0,context:void 0};if(t&&i)r.cancel=t,(0,k.Wj)(e,"cancel",r.cancel,!0),r.context=i,(0,k.lb)(e,"context",r.context,!0);else if(t)if("object"==typeof t&&null!==t)r.context=t;else{if("function"!=typeof t)throw new Error((0,k.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=t}return r}get ref(){return new Ss(this.database,new yr(this._delegate._repo,this._delegate._path))}}class Ss extends vr{constructor(e,t){super(e,new gs(t._repo,t._path,new Qa,!1)),this.database=e,this._delegate=t}getKey(){return(0,k.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,k.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new Ss(this.database,oc(this._delegate,e))}getParent(){(0,k.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new Ss(this.database,e):null}getRoot(){return(0,k.Dv)("Reference.root",0,0,arguments.length),new Ss(this.database,this._delegate.root)}set(e,t){(0,k.Dv)("Reference.set",1,2,arguments.length),(0,k.Wj)("Reference.set","onComplete",t,!0);const i=nb(this._delegate,e);return t&&i.then(()=>t(null),r=>t(r)),i}update(e,t){if((0,k.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const r={};for(let o=0;o<e.length;++o)r[""+o]=e[o];e=r,x_("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Ro("Reference.update",this._delegate._path),(0,k.Wj)("Reference.update","onComplete",t,!0);const i=I1(this._delegate,e);return t&&i.then(()=>t(null),r=>t(r)),i}setWithPriority(e,t,i){(0,k.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,k.Wj)("Reference.setWithPriority","onComplete",i,!0);const r=function ib(n,e,t){if(Ro("setWithPriority",n._path),Oo("setWithPriority",e,n._path,!1),q0("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const i=new k.BH;return v_(n._repo,n._path,e,t,i.wrapCallback(()=>{})),i.promise}(this._delegate,e,t);return i&&r.then(()=>i(null),o=>i(o)),r}remove(e){(0,k.Dv)("Reference.remove",0,1,arguments.length),(0,k.Wj)("Reference.remove","onComplete",e,!0);const t=function tb(n){return Ro("remove",n._path),nb(n,null)}(this._delegate);return e&&t.then(()=>e(null),i=>e(i)),t}transaction(e,t,i){(0,k.Dv)("Reference.transaction",1,3,arguments.length),(0,k.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,k.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,i){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,k.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,i);const r=function cb(n,e,t){var i;if(n=(0,k.m9)(n),Ro("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const r=null===(i=t?.applyLocally)||void 0===i||i,o=new k.BH,h=rb(n,()=>{});return function m1(n,e,t,i,r,o){nc(n,"transaction on "+e);const u={path:e,update:t,onComplete:i,status:null,order:zD(),applyLocally:o,retryCount:0,unwatcher:r,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},h=Q0(n,e,void 0);u.currentInputSnapshot=h;const g=u.update(h.val());if(void 0===g)u.unwatcher(),u.currentOutputSnapshotRaw=null,u.currentOutputSnapshotResolved=null,u.onComplete&&u.onComplete(null,!1,u.currentInputSnapshot);else{fh("transaction failed: Data returned ",g,u.path),u.status=0;const y=f_(n.transactionQueueTree_,e),C=Tu(y)||[];let I;C.push(u),Z0(y,C),"object"==typeof g&&null!==g&&(0,k.r3)(g,".priority")?(I=(0,k.DV)(g,".priority"),(0,k.hu)(hh(I),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):I=(a_(n.serverSyncTree_,e)||Kt.EMPTY_NODE).getPriority().val();const A=ph(n),F=ni(g,I),Z=u_(F,h,A);u.currentOutputSnapshotRaw=F,u.currentOutputSnapshotResolved=Z,u.currentWriteId=wp(n);const ee=s_(n.serverSyncTree_,e,Z,u.currentWriteId,u.applyLocally);Ts(n.eventQueue_,e,ee),w_(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(g,y,C)=>{let I=null;g?o.reject(g):(I=new sc(C,new yr(n._repo,n._path),zn),o.resolve(new $1(y,I)))},h,r),o.promise}(this._delegate,e,{applyLocally:i}).then(o=>new gN(o.committed,new ac(this.database,o.snapshot)));return t&&r.then(o=>t(null,o.committed,o.snapshot),o=>t(o,!1,null)),r}setPriority(e,t){(0,k.Dv)("Reference.setPriority",1,2,arguments.length),(0,k.Wj)("Reference.setPriority","onComplete",t,!0);const i=function E1(n,e){n=(0,k.m9)(n),Ro("setPriority",n._path),q0("setPriority",e,!1);const t=new k.BH;return v_(n._repo,ui(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&i.then(()=>t(null),r=>t(r)),i}push(e,t){(0,k.Dv)("Reference.push",0,2,arguments.length),(0,k.Wj)("Reference.push","onComplete",t,!0);const i=function KA(n,e){n=(0,k.m9)(n),Ro("push",n._path),Oo("push",e,n._path,!0);const t=c1(n._repo),i=X0(t),r=oc(n,i),o=oc(n,i);let u;return u=null!=e?nb(o,e).then(()=>o):Promise.resolve(o),r.then=u.then.bind(u),r.catch=u.then.bind(u,void 0),r}(this._delegate,e),r=i.then(u=>new Ss(this.database,u));t&&r.then(()=>t(null),u=>t(u));const o=new Ss(this.database,i);return o.then=r.then.bind(r),o.catch=r.catch.bind(r,void 0),o}onDisconnect(){return Ro("Reference.onDisconnect",this._delegate._path),new hb(new w1(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class yh{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:lN,forceLongPolling:lb}}useEmulator(e,t,i={}){!function H1(n,e,t,i={}){(n=(0,k.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&_a("Cannot call useEmulator() after instance has already been initialized.");const r=n._repoInternal;let o;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&_a('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new Jf(Jf.OWNER);else if(i.mockUserToken){const u="string"==typeof i.mockUserToken?i.mockUserToken:(0,k.Sg)(i.mockUserToken,n.app.options.projectId);o=new Jf(u)}!function sN(n,e,t,i){n.repoInfo_=new tC(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),i&&(n.authTokenProvider_=i)}(r,e,t,o)}(this._delegate,e,t,i)}ref(e){if((0,k.Dv)("database.ref",0,1,arguments.length),e instanceof Ss){const t=zA(this._delegate,e.toString());return new Ss(this,t)}{const t=D1(this._delegate,e);return new Ss(this,t)}}refFromURL(e){(0,k.Dv)("database.refFromURL",1,1,arguments.length);const i=zA(this._delegate,e);return new Ss(this,i)}goOffline(){return(0,k.Dv)("database.goOffline",0,0,arguments.length),function cN(n){(n=(0,k.m9)(n))._checkNotDeleted("goOffline"),g1(n._repo)}(this._delegate)}goOnline(){return(0,k.Dv)("database.goOnline",0,0,arguments.length),function uN(n){(n=(0,k.m9)(n))._checkNotDeleted("goOnline"),function GA(n){n.persistentConnection_&&n.persistentConnection_.resume(l1)}(n._repo)}(this._delegate)}}yh.ServerValue={TIMESTAMP:function hN(){return dN}(),increment:n=>function G1(n){return{".sv":{increment:n}}}(n)};var W1=Object.freeze({__proto__:null,initStandalone:function fb({app:n,url:e,version:t,customAuthImpl:i,namespace:r,nodeAdmin:o=!1}){jv(t);const u=new Bl.zt("auth-internal",new Bl.H0("database-standalone"));return u.setComponent(new Bl.wA("auth-internal",()=>i,"PRIVATE")),{instance:new yh(j1(n,u,void 0,e,o),n),namespace:r}}});const q1=yh.ServerValue;!function z1(n){n.INTERNAL.registerComponent(new Bl.wA("database-compat",(e,{instanceIdentifier:t})=>{const i=e.getProvider("app-compat").getImmediate(),r=e.getProvider("database").getImmediate({identifier:t});return new yh(r,i)},"PUBLIC").setServiceProps({Reference:Ss,Query:vr,Database:yh,DataSnapshot:ac,enableLogging:A_,INTERNAL:W1,ServerValue:q1}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.3.0")}(NS.Z);var Np=R(5363),mN=R(6063);class K1 extends Wn.x{constructor(e=1/0,t=1/0,i=mN.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:o,_windowTime:u}=this;t||(i.push(e),!r&&i.push(o.now()+u)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:i,_buffer:r}=this,o=r.slice();for(let u=0;u<o.length&&!e.closed;u+=i?1:2)e.next(o[u]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:i,_infiniteTimeWindow:r}=this,o=(r?1:2)*e;if(e<1/0&&o<i.length&&i.splice(0,i.length-o),!r){const u=t.now();let h=0;for(let g=1;g<i.length&&i[g]<=u;g+=2)h=g;h&&i.splice(0,h+1)}}}function pb(n,e,t){let i,r=!1;return n&&"object"==typeof n?({bufferSize:i=1/0,windowTime:e=1/0,refCount:r=!1,scheduler:t}=n):i=n??1/0,(0,AS.B)({connector:()=>new K1(i,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}function Y1(n,e){return(0,Hr.m)(e)?li(()=>n,e):li(()=>n)}var M_=R(9468),O_=R(259);const R_=new Map,gb={activated:!1,tokenObservers:[]},P_={initialized:!1,enabled:!1};function Xi(n){return R_.get(n)||Object.assign({},gb)}function Mp(){return P_}class VP{constructor(e,t,i,r,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=r,r>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ge.Z)(function*(){t.stop();try{t.pending=new k.BH,yield function wN(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new k.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(i){t.retryPolicy(i)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Wr=new k.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function nE(n){if(!Xi(n).activated)throw Wr.create("use-before-activation",{appName:n.name})}function vb(n,e){return L_.apply(this,arguments)}function L_(){return(L_=(0,ge.Z)(function*({url:n,body:e},t){const i={"Content-Type":"application/json"},r=t.getImmediate({optional:!0});if(r){const I=yield r.getHeartbeatsHeader();I&&(i["X-Firebase-Client"]=I)}const o={method:"POST",body:JSON.stringify(e),headers:i};let u,h;try{u=yield fetch(n,o)}catch(I){throw Wr.create("fetch-network-error",{originalErrorMessage:I?.message})}if(200!==u.status)throw Wr.create("fetch-status-error",{httpStatus:u.status});try{h=yield u.json()}catch(I){throw Wr.create("fetch-parse-error",{originalErrorMessage:I?.message})}const g=h.ttl.match(/^([\d.]+)(s)$/);if(!g||!g[2]||isNaN(Number(g[1])))throw Wr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${h.ttl}`});const y=1e3*Number(g[1]),C=Date.now();return{token:h.token,expireTimeMillis:C+y,issuedAtTimeMillis:C}})).apply(this,arguments)}function CN(n,e){const{projectId:t,appId:i,apiKey:r}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${i}:exchangeDebugToken?key=${r}`,body:{debug_token:e}}}const wh="firebase-app-check-store";let Rp=null;function wb(){return Rp||(Rp=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=i=>{n(i.target.result)},t.onerror=i=>{var r;e(Wr.create("storage-open",{originalErrorMessage:null===(r=i.target.error)||void 0===r?void 0:r.message}))},t.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(wh,{keyPath:"compositeKey"})}}catch(t){e(Wr.create("storage-open",{originalErrorMessage:t?.message}))}}),Rp)}function oE(){return(oE=(0,ge.Z)(function*(n,e){const i=(yield wb()).transaction(wh,"readwrite"),o=i.objectStore(wh).put({compositeKey:n,value:e});return new Promise((u,h)=>{o.onsuccess=g=>{u()},i.onerror=g=>{var y;h(Wr.create("storage-set",{originalErrorMessage:null===(y=g.target.error)||void 0===y?void 0:y.message}))}})})).apply(this,arguments)}const V_=new ma.Yd("@firebase/app-check");function Dh(n,e){return(0,k.hl)()?function TN(n,e){return function SN(n,e){return oE.apply(this,arguments)}(function NN(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{V_.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function Pp(){return Mp().enabled}function Db(){return B_.apply(this,arguments)}function B_(){return(B_=(0,ge.Z)(function*(){const n=Mp();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Cb={error:"UNKNOWN_ERROR"};function cE(n){return k.US.encodeString(JSON.stringify(n),!1)}function j_(n){return H_.apply(this,arguments)}function H_(){return(H_=(0,ge.Z)(function*(n,e=!1){const t=n.app;nE(t);const i=Xi(t);let o,r=i.token;if(r&&!Ch(r)&&(i.token=void 0,r=void 0),!r){const g=yield i.cachedTokenPromise;g&&(Ch(g)?r=g:yield Dh(t,void 0))}if(!e&&r&&Ch(r))return{token:r.token};let h,u=!1;if(Pp()){i.exchangeTokenPromise||(i.exchangeTokenPromise=vb(CN(t,yield Db()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),u=!0);const g=yield i.exchangeTokenPromise;return yield Dh(t,g),i.token=g,{token:g.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),u=!0),r=yield Xi(t).exchangeTokenPromise}catch(g){"appCheck/throttled"===g.code?V_.warn(g.message):V_.error(g),o=g}return r?o?h=Ch(r)?{token:r.token,internalError:o}:MN(o):(h={token:r.token},i.token=r,yield Dh(t,r)):h=MN(o),u&&kp(t,h),h})).apply(this,arguments)}function dE(n,e){const t=Xi(n),i=t.tokenObservers.filter(r=>r.next!==e);0===i.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=i}function hE(n){const{app:e}=n,t=Xi(e);let i=t.tokenRefresher;i||(i=function xN(n){const{app:e}=n;return new VP((0,ge.Z)(function*(){let i;if(i=Xi(e).token?yield j_(n,!0):yield j_(n),i.error)throw i.error;if(i.internalError)throw i.internalError}),()=>!0,()=>{const t=Xi(e);if(t.token){let i=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return i=Math.min(i,t.token.expireTimeMillis-3e5),Math.max(0,i-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=i),!i.isRunning()&&t.isTokenAutoRefreshEnabled&&i.start()}function kp(n,e){const t=Xi(n).tokenObservers;for(const i of t)try{"EXTERNAL"===i.type&&null!=e.error?i.error(e.error):i.next(e)}catch{}}function Ch(n){return n.expireTimeMillis-Date.now()>0}function MN(n){return{token:cE(Cb),error:n}}class $P{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Xi(this.app);for(const t of e)dE(this.app,t.next);return Promise.resolve()}}const Z_="app-check-internal";!function lc(){(0,Eo._registerComponent)(new Bl.wA("app-check",n=>function ZP(n,e){return new $P(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(Z_).initialize()})),(0,Eo._registerComponent)(new Bl.wA(Z_,n=>function ON(n){return{getToken:e=>j_(n,e),addTokenListener:e=>function uE(n,e,t,i){const{app:r}=n,o=Xi(r);if(o.tokenObservers=[...o.tokenObservers,{next:t,error:i,type:e}],o.token&&Ch(o.token)){const h=o.token;Promise.resolve().then(()=>{t({token:h.token}),hE(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>hE(n))}(n,"INTERNAL",e),removeTokenListener:e=>dE(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Eo.registerVersion)("@firebase/app-check","0.6.0")}();class io{constructor(){return(0,qn.vb)("app-check")}}typeof window<"u"&&window;var wE=R(9260);const W_=new l.OlP("angularfire2.auth.use-emulator"),Eh=new l.OlP("angularfire2.auth.settings"),Ih=new l.OlP("angularfire2.auth.tenant-id"),q_=new l.OlP("angularfire2.auth.langugage-code"),Ab=new l.OlP("angularfire2.auth.use-device-language"),z_=new l.OlP("angularfire.auth.persistence"),K_=(n,e,t,i,r,o,u,h)=>(0,Gr.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const g=e.runOutsideAngular(()=>n.auth());if(t&&g.useEmulator(...t),i&&(g.tenantId=i),g.languageCode=r,o&&g.useDeviceLanguage(),u)for(const[y,C]of Object.entries(u))g.settings[y]=C;return h&&g.setPersistence(h),g},[t,i,r,o,u,h]);let qr=(()=>{class n{constructor(t,i,r,o,u,h,g,y,C,I,A,F){const Z=new Wn.x,ee=bt(void 0).pipe((0,Np.Q)(u.outsideAngular),li(()=>o.runOutsideAngular(()=>Promise.resolve().then(R.bind(R,9169)))),(0,at.U)(()=>(0,Gr.on)(t,o,i)),(0,at.U)(ce=>K_(ce,o,h,y,C,I,g,A)),pb({bufferSize:1,refCount:!1}));if(cr(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=bt(null);else{ee.pipe(ss()).subscribe();const Ze=ee.pipe(li(Je=>Je.getRedirectResult().then(Xe=>Xe,()=>null)),qn.iC,pb({bufferSize:1,refCount:!1})),We=ee.pipe(li(Je=>new ai.y(Xe=>({unsubscribe:o.runOutsideAngular(()=>Je.onAuthStateChanged(ct=>Xe.next(ct),ct=>Xe.error(ct),()=>Xe.complete()))})))),rt=ee.pipe(li(Je=>new ai.y(Xe=>({unsubscribe:o.runOutsideAngular(()=>Je.onIdTokenChanged(ct=>Xe.next(ct),ct=>Xe.error(ct),()=>Xe.complete()))}))));this.authState=Ze.pipe(Y1(We),(0,M_.R)(u.outsideAngular),(0,Np.Q)(u.insideAngular)),this.user=Ze.pipe(Y1(rt),(0,M_.R)(u.outsideAngular),(0,Np.Q)(u.insideAngular)),this.idToken=this.user.pipe(li(Je=>Je?(0,Pn.D)(Je.getIdToken()):bt(null))),this.idTokenResult=this.user.pipe(li(Je=>Je?(0,Pn.D)(Je.getIdTokenResult()):bt(null))),this.credential=(0,Vv.T)(Ze,Z,this.authState.pipe(gi(Je=>!Je))).pipe((0,at.U)(Je=>Je?.user?Je:null),(0,M_.R)(u.outsideAngular),(0,Np.Q)(u.insideAngular))}return(0,Gr.pX)(this,ee,o,{spy:{apply:(ce,Ze,We)=>{(ce.startsWith("signIn")||ce.startsWith("createUser"))&&We.then(rt=>Z.next(rt))}}})}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Gr.Dh),l.LFG(Gr.xv,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(qn.HU),l.LFG(W_,8),l.LFG(Eh,8),l.LFG(Ih,8),l.LFG(q_,8),l.LFG(Ab,8),l.LFG(z_,8),l.LFG(io,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function Nb(n){return null==n}function CE(n){return"function"==typeof n.set}function EE(n,e){return CE(e)?e:n.ref(e)}function IE(n,e){if(function QP(n){return"string"==typeof n}(n))return e.stringCase();if(CE(n))return e.firebaseCase();if(function JP(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function Y_(n,e,t="on",i=Tm.z){return new ai.y(r=>{let o=null;return o=n[t](e,(u,h)=>{i.schedule(()=>{r.next({snapshot:u,prevKey:h})}),"once"===t&&i.schedule(()=>r.complete())},u=>{i.schedule(()=>r.error(u))}),"on"===t?{unsubscribe(){null!=o&&n.off(e,o)}}:{unsubscribe(){}}}).pipe((0,at.U)(r=>{const{snapshot:o,prevKey:u}=r;let h=null;return o.exists()&&(h=o.key),{type:e,payload:o,prevKey:u,key:h}}),(0,AS.B)())}function QN(n,e){const t=n.length;for(let i=0;i<t;i++)if(n[i].payload.key===e)return i;return-1}function tk(n,e){const{payload:t,prevKey:i,key:r}=e,o=QN(n,r),u=function ek(n,e){if(Nb(e))return 0;{const t=QN(n,e);return-1===t?n.length:t+1}}(n,i);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let h=null;e.payload.forEach(g=>{const y={payload:g,type:"value",prevKey:h,key:g.key};return h=g.key,n=[...n,y],!1})}return n;case"child_added":if(o>-1){const h=n[o-1];(h&&h.key||null)!==i&&(n=n.filter(g=>g.payload.key!==t.key)).splice(u,0,e)}else{if(null==i)return[e,...n];(n=n.slice()).splice(u,0,e)}return n;case"child_removed":return n.filter(h=>h.payload.key!==t.key);case"child_changed":return n.map(h=>h.payload.key===r?e:h);case"child_moved":if(o>-1){const h=n.splice(o,1)[0];return(n=n.slice()).splice(u,0,h),n}return n;default:return n}}function TE(n){return(Nb(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function Vp(n,e,t){return function XP(n,e,t){return Y_(n,"value","once",t).pipe(li(i=>{const r=[bt(i)];return e.forEach(o=>r.push(Y_(n,o,"on",t))),(0,Vv.T)(...r).pipe(mo(tk,[]))}),Ud())}(n,e=TE(e),t)}function SE(n,e,t){const i=(e=TE(e)).map(r=>Y_(n,r,"on",t));return(0,Vv.T)(...i)}function xb(n,e){return function(i,r){return IE(i,{stringCase:()=>n.child(i)[e](r),firebaseCase:()=>i[e](r),snapshotCase:()=>i.ref[e](r)})}}function Mb(n){return function(t){return t?IE(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function NE(n,e){return function(){return Y_(n,"value","on",e)}}const Pb=new l.OlP("angularfire2.realtimeDatabaseURL"),Q_=new l.OlP("angularfire2.database.use-emulator");let nk=(()=>{class n{constructor(t,i,r,o,u,h,g,y,C,I,A,F,Z,ee,ce){this.schedulers=h;const Ze=g,We=(0,Gr.on)(t,u,i);y&&K_(We,u,C,A,F,Z,I,ee),this.database=(0,Gr.cc)(`${We.name}.database.${r}`,"AngularFireDatabase",We.name,()=>{const rt=u.runOutsideAngular(()=>We.database(r||void 0));return Ze&&rt.useEmulator(...Ze),rt},[Ze])}list(t,i){const r=this.schedulers.ngZone.runOutsideAngular(()=>EE(this.database,t));let o=r;return i&&(o=i(r)),function Ob(n,e){const t=e.schedulers.outsideAngular,i=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:xb(i,"update"),set:xb(i,"set"),push:r=>i.push(r),remove:Mb(i),snapshotChanges:r=>Vp(n,r,t).pipe(qn.iC),stateChanges:r=>SE(n,r,t).pipe(qn.iC),auditTrail:r=>function JN(n,e,t){return function Nu(n,e,t){return function AE(n,e){return Y_(n,"value","on",e).pipe((0,at.U)(t=>{let i;return t.payload.forEach(r=>(i=r.key,!1)),{data:t,lastKeyToLoad:i}}))}(n,t).pipe(Sm(e),(0,at.U)(([r,o])=>{const u=r.lastKeyToLoad,h=o.map(g=>g.key);return{actions:o,lastKeyToLoad:u,loadedKeys:h}}),function Uv(n){return(0,Ci.e)((e,t)=>{let i=!1,r=0;e.subscribe((0,ti.x)(t,o=>(i||(i=!n(o,r++)))&&t.next(o)))})}(r=>-1===r.loadedKeys.indexOf(r.lastKeyToLoad)),(0,at.U)(r=>r.actions))}(n,SE(n,e).pipe(mo((r,o)=>[...r,o],[])),t)}(n,r,t).pipe(qn.iC),valueChanges:(r,o)=>Vp(n,r,t).pipe((0,at.U)(h=>h.map(g=>o&&o.idField?Object.assign(Object.assign({},g.payload.val()),{[o.idField]:g.key}):g.payload.val())),qn.iC)}}(o,this)}object(t){return function Rb(n,e){return{query:n,snapshotChanges:()=>NE(n,e.schedulers.outsideAngular)().pipe(qn.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>NE(n,e.schedulers.outsideAngular)().pipe(qn.iC,(0,at.U)(i=>i.payload.exists()?i.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>EE(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Gr.Dh),l.LFG(Gr.xv,8),l.LFG(Pb,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(qn.HU),l.LFG(Q_,8),l.LFG(qr,8),l.LFG(W_,8),l.LFG(Eh,8),l.LFG(Ih,8),l.LFG(q_,8),l.LFG(Ab,8),l.LFG(z_,8),l.LFG(io,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),zr=(()=>{class n{constructor(t,i){this.db=t,this.auth=i,this.trips=t.list("trips").valueChanges(),this.db.list("trips",r=>r.orderByChild("id").limitToLast(1)).valueChanges().subscribe(r=>{this.nextId=r[0]?.id+1})}getTrips(){return this.trips}addTrip(t){this.db.list("trips").set(t.id.toString(),t)}removeTrip(t){this.db.list("trips").snapshotChanges().pipe(ss()).subscribe(i=>{for(let r of i)if(r.payload.val().id===t){this.db.list("trips").remove(r.payload.key);break}})}modifyTrip(t){this.db.list("trips").snapshotChanges().pipe(ss()).subscribe(i=>{for(let r of i)if(r.payload.val().id===t.id){this.db.list("trips").update(r.payload.key,t);break}})}addReview(t,i){this.db.list("trips").snapshotChanges().pipe(ss()).subscribe(r=>{for(let o of r)if(o.payload.val().id===t.id){this.db.list("trips/"+o.payload.key+"/reviews").set(t.reviews.length.toString(),i),console.log("trips/"+o.payload.key+"/reviews");break}})}getNextId(){return this.nextId}getUsers(){return this.db.list("users").snapshotChanges()}getRoles(t){var i=this;return(0,ge.Z)(function*(){return function ZD(n,e){const t="object"==typeof e;return new Promise((i,r)=>{const o=new SS.Hp({next:u=>{i(u),o.unsubscribe()},error:r,complete:()=>{t?i(e.defaultValue):r(new Cl)}});n.subscribe(o)})}(i.db.object("/users/"+t+"/roles").valueChanges())})()}addUser(t){this.db.list("users/").set(t.uid,t)}getUser(t){return this.db.object("users/"+t).valueChanges()}changeUserRoles(t,i){this.db.list("users/"+t).update("roles",i)}getOrderHistoryOf(t){return this.db.list("users/"+t+"/orders").valueChanges()}getOrderHistory(){var t=this;return(0,ge.Z)(function*(){t.auth.currentUser.then(i=>i?t.db.list("users/"+i.uid+"/orders").valueChanges():new ai.y)})()}getCart(t){return this.db.list("users/"+t+"/cart").valueChanges()}updateCart(t,i){this.db.list("users/"+t).update("cart",i)}getLastTripId(){return this.db.list("trips",t=>t.orderByChild("id").limitToLast(1)).valueChanges()}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(nk),l.LFG(qr))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class XN{constructor(e){this.uid=e.uid,this.email=e.email,this.firstName=e.firstName,this.lastName=e.lastName,this.photoURL=e.photoURL,this.history=[],this.cart=[],this.roles=null!=e.roles?e.roles:{guest:!0,client:!0,admin:!1,manager:!1,banned:!1}}}let As=(()=>{class n{constructor(t,i,r){var o=this;this.auth=t,this.db=i,this.router=r,this.userRoles={guest:!0,client:!1,admin:!1,manager:!1,banned:!1},this.persistence="local",this.rolesFetched=!1,t.authState.subscribe(function(){var u=(0,ge.Z)(function*(h){if(h){o.userData=h;const g=yield o.db.getRoles(h?.uid);o.userRoles=g,console.log(o.userRoles)}else o.userRoles={guest:!0,admin:!1,manager:!1,client:!1,banned:!1};o.rolesFetched=!0});return function(h){return u.apply(this,arguments)}}())}signIn(t,i){var r=this;return(0,ge.Z)(function*(){return yield r.auth.setPersistence(r.persistence),yield r.auth.signInWithEmailAndPassword(t,i).then(o=>{r.router.navigate(["home"]).catch(u=>{window.alert(u.message)})})})()}signUp(t,i,r,o){var u=this;return(0,ge.Z)(function*(){return yield u.auth.createUserWithEmailAndPassword(t,i).then(h=>{null!=h.user&&(u.db.addUser({uid:h.user.uid,email:t,firstName:r,lastName:o,roles:{guest:!0,client:!0,admin:!1,manager:!1,banned:!1},history:[""],cart:[""],photoURL:""}),u.router.navigate(["home"]))})})()}signOut(){var t=this;return(0,ge.Z)(function*(){yield t.auth.signOut(),window.location.reload(),t.router.navigate(["home"])})()}getCurrentUserUID(){let t;return this.auth.onAuthStateChanged(i=>i?(this.db.getUsers().subscribe(o=>{for(let u of o)if(u.payload.key==i.uid){let h=new XN(u.payload.val());h.uid=u.payload.key||"undefined",t=h}}),t):null),this.userData}getAuthenticated(){return this.auth.authState}isLoggedIn(){return null!=this.userData}isLoggednInWithRedirect(){return null!=this.userData||(this.router.navigate(["home"]),!1)}getUID(){return this.userData}isFetched(){var t=this;return(0,ge.Z)(function*(){return new Promise(i=>{const r=setInterval(()=>{t.rolesFetched&&(clearInterval(r),i("Condition fulfilled"))},100)})})()}isAdmin(){var t=this;return(0,ge.Z)(function*(){return yield t.isFetched(),t.userRoles.admin||t.router.navigate(["home"]),t.userRoles.admin})()}isManager(){var t=this;return(0,ge.Z)(function*(){return yield t.isFetched(),t.userRoles.manager||t.router.navigate(["home"]),t.userRoles.manager})()}isMaster(){var t=this;return(0,ge.Z)(function*(){return yield t.isFetched(),!t.userRoles.admin&&!t.userRoles.manager&&t.router.navigate(["home"]),t.userRoles.admin||t.userRoles.manager})()}isClient(){var t=this;return(0,ge.Z)(function*(){return yield t.isFetched(),t.userRoles.client||t.router.navigate(["home"]),t.userRoles.client})()}isBanned(){var t=this;return(0,ge.Z)(function*(){return yield t.isFetched(),t.userRoles.banned})()}changePersistence(t){var i=this;return(0,ge.Z)(function*(){i.persistence=t,i.auth.setPersistence(i.persistence)})()}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(qr),l.LFG(zr),l.LFG(mi))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Up=(()=>{class n{constructor(t,i,r){this.db=t,this.auth=i,this.cartData=[],this.tripData=[],this.cart=[],this.uid="",r.authState.subscribe(o=>{null!=o&&this.db.getCart(o?.uid).subscribe(u=>{this.cartData=u,this.uid=o?.uid,console.log(this.cartData)})})}setBasketData(t,i){this.cartData[i]=t}getBasketData(){return this.cartData}addTripToCart(t){for(let i=0;i<this.cart.length;i++)this.cart[i].id==t.id&&(this.cart[i].places++,console.log(this.cart[i].places),this.db.updateCart(this.uid,this.cart));t.places=1,this.cart.push(t)}removeTripFromCart(t){this.cart.filter(i=>i.id==t)&&(this.cart.filter(i=>i.id==t)[0].places--,0==this.cart.filter(i=>i.id==t)[0].places&&(this.cart=this.cart.filter(i=>i.id!=t)))}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(zr),l.LFG(As),l.LFG(qr))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Bp=function(n,e){return{"bi-star-fill":n,"bi-star":e}};let ex=(()=>{class n{constructor(t,i){this.db=i,this.data=[],this.index=-1,this.uid="",this.userData={},this.name="",t.authState.subscribe(r=>{null!=r&&(this.uid=r.uid,this.userData=this.db.getUser(this.uid),this.userData=this.userData.subscribe(o=>{this.name=o.firstName}))})}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(qr),l.Y36(zr))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-comment"]],inputs:{data:"data",index:"index"},decls:17,vars:23,consts:[[1,"card"],[1,"photo-section"],["src","https://thumbs.dreamstime.com/b/default-avatar-profile-icon-vector-social-media-user-image-182145777.jpg","alt","person-photo"],[1,"nickname"],[1,"stars-container"],[1,"bi","star","bi-star-fill",3,"ngClass"],[1,"bi","star","bi-star",3,"ngClass"],[1,"date-container"],[1,"text-container"],[1,"review"]],template:function(t,i){1&t&&(l.TgZ(0,"div",0)(1,"div",1),l._UZ(2,"img",2),l.TgZ(3,"h5",3),l._uU(4),l.qZA(),l.TgZ(5,"div",4)(6,"strong"),l._UZ(7,"i",5)(8,"i",5)(9,"i",5)(10,"i",5)(11,"i",6),l.qZA()(),l.TgZ(12,"div",7),l._uU(13),l.qZA()(),l.TgZ(14,"div",8)(15,"p",9),l._uU(16),l.qZA()()()),2&t&&(l.xp6(4),l.Oqu(i.name),l.xp6(3),l.Q6J("ngClass",l.WLB(8,Bp,i.data.points>=1,i.data.points<1)),l.xp6(1),l.Q6J("ngClass",l.WLB(11,Bp,i.data.points>=2,i.data.points<2)),l.xp6(1),l.Q6J("ngClass",l.WLB(14,Bp,i.data.points>=3,i.data.points<3)),l.xp6(1),l.Q6J("ngClass",l.WLB(17,Bp,i.data.points>=4,i.data.points<4)),l.xp6(1),l.Q6J("ngClass",l.WLB(20,Bp,i.data.points>=5,i.data.points<5)),l.xp6(2),l.hij(" ",i.data.date," "),l.xp6(3),l.hij(" ",i.data.text," "))},dependencies:[fn],styles:[".card[_ngcontent-%COMP%]{margin-top:25px;width:90%;margin-left:5%;display:flex;flex-direction:row;position:relative}.photo-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin:15px}img[_ngcontent-%COMP%]{border-radius:50%;height:100px;width:100px;margin-top:10px}.nickname[_ngcontent-%COMP%]{margin-top:8px;margin-bottom:0}.text-container[_ngcontent-%COMP%]{overflow:scroll}.review[_ngcontent-%COMP%]{margin-top:25px;margin-right:50px;margin-bottom:25px}.date-container[_ngcontent-%COMP%]{font-size:.5rem}.star[_ngcontent-%COMP%]{color:gold}"]}),n})(),kb=(()=>{class n{constructor(t,i){this._renderer=t,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.Qsj),l.Y36(l.SBq))},n.\u0275dir=l.lG2({type:n}),n})(),cc=(()=>{class n extends kb{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=l.n5z(n)))(i||n)}}(),n.\u0275dir=l.lG2({type:n,features:[l.qOj]}),n})();const Lo=new l.OlP("NgValueAccessor"),ME={provide:Lo,useExisting:(0,l.Gpc)(()=>tl),multi:!0},ik=new l.OlP("CompositionEventMode");let tl=(()=>{class n extends kb{constructor(t,i,r){super(t,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Fb(){const n=V()?V().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.Qsj),l.Y36(l.SBq),l.Y36(ik,8))},n.\u0275dir=l.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,i){1&t&&l.NdJ("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[l._Bn([ME]),l.qOj]}),n})();function uc(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function OE(n){return null!=n&&"number"==typeof n.length}const Kr=new l.OlP("NgValidators"),xu=new l.OlP("NgAsyncValidators"),ix=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Kn{static min(e){return function RE(n){return e=>{if(uc(e.value)||uc(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function rx(n){return e=>{if(uc(e.value)||uc(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function sx(n){return uc(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function ox(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function ax(n){return uc(n.value)||ix.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function lx(n){return e=>uc(e.value)||!OE(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function PE(n){return e=>OE(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function cx(n){if(!n)return Vb;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),i=>{if(uc(i.value))return null;const r=i.value;return e.test(r)?null:{pattern:{requiredPattern:t,actualValue:r}}}}(e)}static nullValidator(e){return null}static compose(e){return c(e)}static composeAsync(e){return f(e)}}function Vb(n){return null}function ux(n){return null!=n}function dx(n){return(0,l.QGY)(n)?(0,Pn.D)(n):n}function kE(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function hx(n,e){return e.map(t=>t(n))}function a(n){return n.map(e=>function s(n){return!n.validate}(e)?e:t=>e.validate(t))}function c(n){if(!n)return null;const e=n.filter(ux);return 0==e.length?null:function(t){return kE(hx(t,e))}}function d(n){return null!=n?c(a(n)):null}function f(n){if(!n)return null;const e=n.filter(ux);return 0==e.length?null:function(t){return function tx(...n){const e=(0,Sr.jO)(n),{args:t,keys:i}=qc(n),r=new ai.y(o=>{const{length:u}=t;if(!u)return void o.complete();const h=new Array(u);let g=u,y=u;for(let C=0;C<u;C++){let I=!1;(0,po.Xf)(t[C]).subscribe((0,ti.x)(o,A=>{I||(I=!0,y--),h[C]=A},()=>g--,void 0,()=>{(!g||!I)&&(y||o.next(i?dd(i,h):h),o.complete())}))}});return e?r.pipe(ud(e)):r}(hx(t,e).map(dx)).pipe((0,at.U)(kE))}}function m(n){return null!=n?f(a(n)):null}function b(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function D(n){return n._rawValidators}function E(n){return n._rawAsyncValidators}function T(n){return n?Array.isArray(n)?n:[n]:[]}function N(n,e){return Array.isArray(n)?n.includes(e):n===e}function L(n,e){const t=T(e);return T(n).forEach(r=>{N(t,r)||t.push(r)}),t}function q(n,e){return T(e).filter(t=>!N(n,t))}class ne{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=d(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=m(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class ve extends ne{get formDirective(){return null}get path(){return null}}class je extends ne{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Qe{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Oe=(()=>{class n extends Qe{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(je,2))},n.\u0275dir=l.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,i){2&t&&l.ekj("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[l.qOj]}),n})(),Mt=(()=>{class n extends Qe{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(ve,10))},n.\u0275dir=l.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,i){2&t&&l.ekj("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[l.qOj]}),n})();const Bb="VALID",GE="INVALID",J_="PENDING",jb="DISABLED";function px(n){return($E(n)?n.validators:n)||null}function sk(n){return Array.isArray(n)?d(n):n||null}function gx(n,e){return($E(e)?e.asyncValidators:n)||null}function ok(n){return Array.isArray(n)?m(n):n||null}function $E(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function ak(n,e,t){const i=n.controls;if(!(e?Object.keys(i):i).length)throw new l.vHH(1e3,"");if(!i[t])throw new l.vHH(1001,"")}function lk(n,e,t){n._forEachChild((i,r)=>{if(void 0===t[r])throw new l.vHH(1002,"")})}class ZE{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=sk(this._rawValidators),this._composedAsyncValidatorFn=ok(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Bb}get invalid(){return this.status===GE}get pending(){return this.status==J_}get disabled(){return this.status===jb}get enabled(){return this.status!==jb}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=sk(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=ok(e)}addValidators(e){this.setValidators(L(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(L(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(q(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(q(e,this._rawAsyncValidators))}hasValidator(e){return N(this._rawValidators,e)}hasAsyncValidator(e){return N(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=J_,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=jb,this.errors=null,this._forEachChild(i=>{i.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Bb,this._forEachChild(i=>{i.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Bb||this.status===J_)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?jb:Bb}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=J_,this._hasOwnPendingAsyncValidator=!0;const t=dx(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(e,t){const i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new l.vpe,this.statusChanges=new l.vpe}_calculateStatus(){return this._allControlsDisabled()?jb:this.errors?GE:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(J_)?J_:this._anyControlsHaveStatus(GE)?GE:Bb}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){$E(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}class Ou extends ZE{constructor(e,t,i){super(px(t),gx(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){lk(this,0,e),Object.keys(e).forEach(i=>{ak(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(i=>{const r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,r)=>{i.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>!!i._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,i]of Object.entries(this.controls))if(this.contains(t)&&e(i))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,i,r)=>((i.enabled||this.disabled)&&(t[r]=i.value),t))}_reduceChildren(e,t){let i=e;return this._forEachChild((r,o)=>{i=t(i,r,o)}),i}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class ck extends Ou{}function WE(n,e){return[...e.path,n]}function Hb(n,e){mx(n,e),e.valueAccessor.writeValue(n.value),n.disabled&&e.valueAccessor.setDisabledState?.(!0),function Cj(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&uk(n,e)})}(n,e),function Ij(n,e){const t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function Ej(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&uk(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function Dj(n,e){if(e.valueAccessor.setDisabledState){const t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function qE(n,e,t=!0){const i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),KE(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function zE(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function mx(n,e){const t=D(n);null!==e.validator?n.setValidators(b(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const i=E(n);null!==e.asyncValidator?n.setAsyncValidators(b(i,e.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const r=()=>n.updateValueAndValidity();zE(e._rawValidators,r),zE(e._rawAsyncValidators,r)}function KE(n,e){let t=!1;if(null!==n){if(null!==e.validator){const r=D(n);if(Array.isArray(r)&&r.length>0){const o=r.filter(u=>u!==e.validator);o.length!==r.length&&(t=!0,n.setValidators(o))}}if(null!==e.asyncValidator){const r=E(n);if(Array.isArray(r)&&r.length>0){const o=r.filter(u=>u!==e.asyncValidator);o.length!==r.length&&(t=!0,n.setAsyncValidators(o))}}}const i=()=>{};return zE(e._rawValidators,i),zE(e._rawAsyncValidators,i),t}function uk(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function _x(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}function yx(n,e){if(!e)return null;let t,i,r;return Array.isArray(e),e.forEach(o=>{o.constructor===tl?t=o:function Aj(n){return Object.getPrototypeOf(n.constructor)===cc}(o)?i=o:r=o}),r||i||t||null}function pk(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function gk(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const Mn=class extends ZE{constructor(e=null,t,i){super(px(t),gx(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),$E(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=gk(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){pk(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){pk(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){gk(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},Rj={provide:je,useExisting:(0,l.Gpc)(()=>bx)},yk=(()=>Promise.resolve())();let bx=(()=>{class n extends je{constructor(t,i,r,o,u){super(),this._changeDetectorRef=u,this.control=new Mn,this._registered=!1,this.update=new l.vpe,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=yx(0,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),_x(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Hb(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){yk.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const i=t.isDisabled.currentValue,r=0!==i&&(0,l.D6c)(i);yk.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?WE(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(ve,9),l.Y36(Kr,10),l.Y36(xu,10),l.Y36(Lo,10),l.Y36(l.sBO,8))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[l._Bn([Rj]),l.qOj,l.TTD]}),n})(),X_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=l.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),bk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})();const wx=new l.OlP("NgModelWithFormControlWarning"),Uj={provide:ve,useExisting:(0,l.Gpc)(()=>Th)};let Th=(()=>{class n extends ve{constructor(t,i){super(),this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new l.vpe,this._setValidators(t),this._setAsyncValidators(i)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(KE(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const i=this.form.get(t.path);return Hb(i,t),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),i}getControl(t){return this.form.get(t.path)}removeControl(t){qE(t.control||null,t,!1),function Nj(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,i){this.form.get(t.path).setValue(i)}onSubmit(t){return this.submitted=!0,function fk(n,e){n._syncPendingControls(),e.forEach(t=>{const i=t.control;"submit"===i.updateOn&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const i=t.control,r=this.form.get(t.path);i!==r&&(qE(i||null,t),(n=>n instanceof Mn)(r)&&(Hb(r,t),t.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const i=this.form.get(t.path);(function dk(n,e){mx(n,e)})(i,t),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const i=this.form.get(t.path);i&&function Tj(n,e){return KE(n,e)}(i,t)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){mx(this.form,this),this._oldForm&&KE(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(Kr,10),l.Y36(xu,10))},n.\u0275dir=l.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,i){1&t&&l.NdJ("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[l._Bn([Uj]),l.qOj,l.TTD]}),n})();const Hj={provide:je,useExisting:(0,l.Gpc)(()=>ey)};let ey=(()=>{class n extends je{constructor(t,i,r,o,u){super(),this._ngModelWarningConfig=u,this._added=!1,this.update=new l.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=yx(0,o)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),_x(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return WE(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(l.Y36(ve,13),l.Y36(Kr,10),l.Y36(xu,10),l.Y36(Lo,10),l.Y36(wx,8))},n.\u0275dir=l.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[l._Bn([Hj]),l.qOj,l.TTD]}),n})(),Fk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[bk]}),n})(),Lk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Fk]}),n})(),Vk=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:wx,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Fk]}),n})();class Sx extends ZE{constructor(e,t,i){super(px(t),gx(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,i={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(e,t={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,i={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),t&&(this.controls.splice(r,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){lk(this,0,e),e.forEach((i,r)=>{ak(this,!1,r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((i,r)=>{i.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,i)=>!!i._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,i)=>{e(t,i)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function Uk(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let r3=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new n;return t.useNonNullable=!0,t}group(t,i=null){const r=this._reduceControls(t);let o={};return Uk(i)?o=i:null!==i&&(o.validators=i.validator,o.asyncValidators=i.asyncValidator),new Ou(r,o)}record(t,i=null){const r=this._reduceControls(t);return new ck(r,i)}control(t,i,r){let o={};return this.useNonNullable?(Uk(i)?o=i:(o.validators=i,o.asyncValidators=r),new Mn(t,{...o,nonNullable:!0})):new Mn(t,i,r)}array(t,i,r){const o=t.map(u=>this._createControl(u));return new Sx(o,i,r)}_reduceControls(t){const i={};return Object.keys(t).forEach(r=>{i[r]=this._createControl(t[r])}),i}_createControl(t){return t instanceof Mn||t instanceof ZE?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:Vk}),n})();const $b=function(n,e){return{"bi-star":n,"bi-star-fill":e}};let s3=(()=>{class n{constructor(t,i){this.db=t,this.grad=-1,this.flag=!0,this.reviewTextInput="",this.uid="",i.authState.subscribe(r=>{null!=r&&(this.uid=r?.uid)})}grade(t){this.grad!=t||this.flag?(this.grad=t,this.flag=!1):(this.grad=0,this.flag=!0)}addReview(){const t=new Date,i=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),o=String(t.getDate()).padStart(2,"0");-1!=this.grad&&this.db.addReview(this.trip,{date:`${i}/${r}/${o}`,points:this.grad,text:this.reviewTextInput,uid:this.uid})}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(zr),l.Y36(qr))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-comment-form"]],inputs:{trip:["data","trip"]},decls:18,vars:23,consts:[[1,"card"],[1,"photo-section"],["src","https://thumbs.dreamstime.com/b/default-avatar-profile-icon-vector-social-media-user-image-182145777.jpg","alt","person-photo"],[1,"stars-container"],[1,"star","bi",3,"ngClass","mouseover","mouseout","click"],[1,"text-container"],[1,"title"],[1,"mb-5"],["id","exampleFormControlTextarea1","rows","5",1,"form-control",3,"ngModel","ngModelChange"],[1,"button-container"],["type","button",1,"btn","btn-grad",3,"click"]],template:function(t,i){1&t&&(l.TgZ(0,"div",0)(1,"div",1),l._UZ(2,"img",2),l.TgZ(3,"div",3)(4,"strong")(5,"i",4),l.NdJ("mouseover",function(){return!!i.flag&&(i.grad=1)})("mouseout",function(){return!!i.flag&&(i.grad=0)})("click",function(){return i.grade(1)}),l.qZA(),l.TgZ(6,"i",4),l.NdJ("mouseover",function(){return!!i.flag&&(i.grad=2)})("mouseout",function(){return!!i.flag&&(i.grad=0)})("click",function(){return i.grade(2)}),l.qZA(),l.TgZ(7,"i",4),l.NdJ("mouseover",function(){return!!i.flag&&(i.grad=3)})("mouseout",function(){return!!i.flag&&(i.grad=0)})("click",function(){return i.grade(3)}),l.qZA(),l.TgZ(8,"i",4),l.NdJ("mouseover",function(){return!!i.flag&&(i.grad=4)})("mouseout",function(){return!!i.flag&&(i.grad=0)})("click",function(){return i.grade(4)}),l.qZA(),l.TgZ(9,"i",4),l.NdJ("mouseover",function(){return!!i.flag&&(i.grad=5)})("mouseout",function(){return!!i.flag&&(i.grad=0)})("click",function(){return i.grade(5)}),l.qZA()()()(),l.TgZ(10,"div",5)(11,"h5",6),l._uU(12),l.qZA(),l.TgZ(13,"div",7)(14,"textarea",8),l.NdJ("ngModelChange",function(o){return i.reviewTextInput=o}),l.qZA()()(),l.TgZ(15,"div",9)(16,"button",10),l.NdJ("click",function(){return i.addReview()}),l._uU(17,"Add"),l.qZA()()()),2&t&&(l.xp6(5),l.Q6J("ngClass",l.WLB(8,$b,i.grad<=0,i.grad>=1)),l.xp6(1),l.Q6J("ngClass",l.WLB(11,$b,i.grad<=1,i.grad>=2)),l.xp6(1),l.Q6J("ngClass",l.WLB(14,$b,i.grad<=2,i.grad>=3)),l.xp6(1),l.Q6J("ngClass",l.WLB(17,$b,i.grad<=3,i.grad>=4)),l.xp6(1),l.Q6J("ngClass",l.WLB(20,$b,i.grad<=4,5==i.grad)),l.xp6(3),l.AsE("",null==i.trip?null:i.trip.title,", ",null==i.trip?null:i.trip.country,""),l.xp6(2),l.Q6J("ngModel",i.reviewTextInput))},dependencies:[fn,tl,Oe,bx],styles:[".card[_ngcontent-%COMP%]{margin-top:25px;width:90%;margin-left:5%;display:flex;flex-direction:row;position:relative;margin-bottom:25px}.photo-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin:40px 15px 15px}img[_ngcontent-%COMP%]{border-radius:50%;height:100px;width:100px;margin-top:10px}.nickname[_ngcontent-%COMP%]{margin-top:8px;margin-bottom:0}.text-container[_ngcontent-%COMP%]{margin-top:15px;margin-right:50px;width:100%;overflow:scroll}.review[_ngcontent-%COMP%]{margin-top:25px;margin-right:50px;margin-bottom:25px}.date-container[_ngcontent-%COMP%]{font-size:.5rem}.star[_ngcontent-%COMP%]{color:gold}.btn-grad[_ngcontent-%COMP%]{background-color:#0093e9;background-image:linear-gradient(315deg,#0093E9 0%,#80D0C7 56%);text-align:center;text-transform:uppercase;transition:.5s;background-size:200% auto;color:#fff;display:block;border:0px;padding:2px 6px;position:absolute;bottom:10px;right:10px}.btn-grad[_ngcontent-%COMP%]:hover{background-position:right center;color:#fff;text-decoration:none}.btn-grad[_ngcontent-%COMP%]:active{background-position:left center;color:#fff;text-decoration:none}#nick[_ngcontent-%COMP%]{width:80px}"]}),n})();const Zb=function(n){return{width:n}};let o3=(()=>{class n{constructor(){this.data=[],this.points=[0,0,0,0,0],this.maxOfPoints=0,this.classes=["0%","0%","0%","0%","0%"],this.mean=0}ngOnInit(){for(let t of this.data.reviews)this.points[t.points-1]++,this.maxOfPoints=Math.max(this.maxOfPoints,this.points[t.points-1]);this.classes=[(100*this.points[0]/this.maxOfPoints).toString()+"%",(100*this.points[1]/this.maxOfPoints).toString()+"%",(100*this.points[2]/this.maxOfPoints).toString()+"%",(100*this.points[3]/this.maxOfPoints).toString()+"%",(100*this.points[4]/this.maxOfPoints).toString()+"%"],this.mean=(this.points[0]+2*this.points[1]+3*this.points[2]+4*this.points[3]+5*this.points[4])/this.data.reviews.length}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-overall-review"]],inputs:{data:"data"},decls:37,vars:26,consts:[[1,"card"],[1,"overall-rating"],[1,"rating"],[1,"star","bi","bi-star-fill",2,"margin-left","0px","font-size","2.3rem"],[1,"detailed-rating"],[1,"stars","stars-5"],[1,"star","bi","bi-star-fill"],[1,"progress"],["role","progressbar","aria-label","5-star","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","bg-warning",3,"ngStyle"],[1,"stars","stars-4"],["role","progressbar","aria-label","4-star","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","bg-warning",3,"ngStyle"],[1,"stars","stars-3"],["role","progressbar","aria-label","3-star","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","bg-warning",3,"ngStyle"],[1,"stars","stars-2"],["role","progressbar","aria-label","2-star","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","bg-warning",3,"ngStyle"],[1,"stars","stars-1"],["role","progressbar","aria-label","1-star","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","bg-warning",3,"ngStyle"]],template:function(t,i){1&t&&(l.TgZ(0,"div",0)(1,"div",1)(2,"div",2),l._UZ(3,"i",3),l.TgZ(4,"h1"),l._uU(5),l.qZA()()(),l.TgZ(6,"div",4)(7,"div",5),l._uU(8," 5 "),l._UZ(9,"i",6),l.TgZ(10,"div",7)(11,"div",8),l._uU(12),l.qZA()()(),l.TgZ(13,"div",9),l._uU(14," 4 "),l._UZ(15,"i",6),l.TgZ(16,"div",7)(17,"div",10),l._uU(18),l.qZA()()(),l.TgZ(19,"div",11),l._uU(20," 3 "),l._UZ(21,"i",6),l.TgZ(22,"div",7)(23,"div",12),l._uU(24),l.qZA()()(),l.TgZ(25,"div",13),l._uU(26," 2 "),l._UZ(27,"i",6),l.TgZ(28,"div",7)(29,"div",14),l._uU(30),l.qZA()()(),l.TgZ(31,"div",15),l._uU(32," 1 "),l._UZ(33,"i",6),l.TgZ(34,"div",7)(35,"div",16),l._uU(36),l.qZA()()()()()),2&t&&(l.xp6(5),l.hij("",i.mean.toFixed(1),"/5.0"),l.xp6(6),l.Q6J("ngStyle",l.VKq(16,Zb,i.classes[4])),l.uIk("aria-valuenow",100*i.points[4]/i.maxOfPoints),l.xp6(1),l.Oqu(i.points[4]),l.xp6(5),l.Q6J("ngStyle",l.VKq(18,Zb,100*i.points[3]/i.maxOfPoints+"%")),l.uIk("aria-valuenow",100*i.points[3]/i.maxOfPoints),l.xp6(1),l.Oqu(i.points[3]),l.xp6(5),l.Q6J("ngStyle",l.VKq(20,Zb,100*i.points[2]/i.maxOfPoints+"%")),l.uIk("aria-valuenow",100*i.points[2]/i.maxOfPoints),l.xp6(1),l.Oqu(i.points[2]),l.xp6(5),l.Q6J("ngStyle",l.VKq(22,Zb,100*i.points[1]/i.maxOfPoints+"%")),l.uIk("aria-valuenow",100*i.points[1]/i.maxOfPoints),l.xp6(1),l.Oqu(i.points[1]),l.xp6(5),l.Q6J("ngStyle",l.VKq(24,Zb,100*i.points[0]/i.maxOfPoints+"%")),l.uIk("aria-valuenow",100*i.points[0]/i.maxOfPoints),l.xp6(1),l.Oqu(i.points[0]))},dependencies:[Na],styles:[".card[_ngcontent-%COMP%]{width:90%;margin-left:5%;height:200px;position:relative}.overall-rating[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;position:absolute;top:50%;left:25%;transform:translate(-50%,-50%)}.rating[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center}h1[_ngcontent-%COMP%]{font-weight:100;margin:0;font-size:5rem}.star[_ngcontent-%COMP%]{color:gold;font-size:1.3rem;margin-right:10px;margin-left:10px}.detailed-rating[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;position:absolute;top:50%;left:50%;transform:translateY(-50%)}.stars[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}.progress[_ngcontent-%COMP%]{width:380px}.progressbar[_ngcontent-%COMP%]{width:80%}.progress-bar[_ngcontent-%COMP%]{width:50%}@media screen and (max-width: 1200px){.progress[_ngcontent-%COMP%]{width:250px}}@media screen and (max-width: 992px){.progress[_ngcontent-%COMP%]{width:150px}h1[_ngcontent-%COMP%]{font-size:2.5rem}}"]}),n})();function a3(n,e){if(1&n&&(l.TgZ(0,"div",44),l._UZ(1,"app-comment",28),l.qZA()),2&n){const t=e.$implicit;l.xp6(1),l.Q6J("data",t)}}const l3=function(n,e,t){return{"bg-success":n,"bg-warning":e,"bg-danger":t}},c3=function(n){return{"width.%":n}};let Bk=(()=>{class n{constructor(t,i){this.db=t,this.cart=i,this.counter=0,this.index=-1,this.bagno="staticBackdrop",this.realIdx=-1,this.dataToPass=[],this.places=0,this.minusButton=document.getElementById("minus-button"),this.plusButton=document.getElementById("plus-button")}ngOnInit(){this.dataToPass=this.trip,this.places=this.trip.places}addPlace(){this.counter<this.trip.places?(this.places--,this.counter++):this.minusButton.disabled=!1}removePlace(){this.counter>0?(this.places++,this.counter--):this.minusButton.disabled=!0}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(zr),l.Y36(Up))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-trip-details"]],inputs:{trip:["data","trip"],index:"index"},decls:62,vars:32,consts:[["type","button","data-bs-toggle","modal",1,"btn","btn-grad"],[1,"bi","bi-info-lg"],["data-bs-keyboard","false","tabindex","10000","aria-labelledby","staticBackdropLabel","aria-hidden","true",1,"modal","modal-xl","fade",3,"id"],[1,"modal-dialog","modal-dialog-scrollable"],[1,"modal-content"],[1,"modal-header"],["id","staticBackdropLabel",1,"modal-title","fs-5"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],["data-bs-ride","true",1,"carousel","slide",3,"id"],[1,"carousel-indicators"],["type","button","data-bs-slide-to","0","aria-current","true","aria-label","Slide 1",1,"active"],["type","button","data-bs-slide-to","1","aria-label","Slide 2"],["type","button","data-bs-slide-to","2","aria-label","Slide 3"],[1,"carousel-inner"],[1,"carousel-item","active"],["alt","...",1,"d-block","w-100",3,"src"],[1,"carousel-item"],["type","button","data-bs-slide","prev",1,"carousel-control-prev"],["aria-hidden","true",1,"carousel-control-prev-icon"],[1,"visually-hidden"],["type","button","data-bs-slide","next",1,"carousel-control-next"],["aria-hidden","true",1,"carousel-control-next-icon"],[1,"name"],["id","title-country"],["id","date"],["id","description"],[1,"current-stars"],[3,"data"],[1,"comments-section"],[1,"reviews-text"],[1,"comment-form"],[1,"comments-container"],["class","comments",4,"ngFor","ngForOf"],[1,"modal-footer"],[1,"adding"],["type","button","id","minus-button",1,"btn","btn-grad","minus-button","sign-button",3,"click"],[1,"counter"],["type","button","id","plus-button",1,"btn","btn-grad","plus-button","sign-button",3,"click"],[1,"progress",2,"width","500px"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"progress-bar",3,"ngClass","ngStyle"],[1,"checkout"],[1,"price"],["type","button",1,"btn","btn-grad"],[1,"comments"]],template:function(t,i){1&t&&(l.TgZ(0,"button",0),l._UZ(1,"i",1),l.qZA(),l.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h1",6),l._uU(7),l.qZA(),l._UZ(8,"button",7),l.qZA(),l.TgZ(9,"div",8)(10,"div",9)(11,"div",10),l._UZ(12,"button",11)(13,"button",12)(14,"button",13),l.qZA(),l.TgZ(15,"div",14)(16,"div",15),l._UZ(17,"img",16),l.qZA(),l.TgZ(18,"div",17),l._UZ(19,"img",16),l.qZA(),l.TgZ(20,"div",17),l._UZ(21,"img",16),l.qZA()(),l.TgZ(22,"button",18),l._UZ(23,"span",19),l.TgZ(24,"span",20),l._uU(25,"Previous"),l.qZA()(),l.TgZ(26,"button",21),l._UZ(27,"span",22),l.TgZ(28,"span",20),l._uU(29,"Next"),l.qZA()()(),l.TgZ(30,"div",23)(31,"h1",24),l._uU(32),l.qZA()(),l.TgZ(33,"h5",25),l._uU(34),l.qZA(),l.TgZ(35,"p",26),l._uU(36),l.qZA(),l.TgZ(37,"div",27),l._UZ(38,"app-overall-review",28),l.qZA(),l.TgZ(39,"div",29)(40,"h3",30),l._uU(41,"Reviews"),l.qZA()(),l.TgZ(42,"div",31),l._UZ(43,"app-comment-form",28),l.qZA(),l.TgZ(44,"div",32),l.YNc(45,a3,2,1,"div",33),l.qZA()(),l.TgZ(46,"div",34)(47,"div",35)(48,"button",36),l.NdJ("click",function(){return i.removePlace()}),l._uU(49,"-"),l.qZA(),l.TgZ(50,"h6",37),l._uU(51),l.qZA(),l.TgZ(52,"button",38),l.NdJ("click",function(){return i.addPlace()}),l._uU(53,"+"),l.qZA()(),l.TgZ(54,"div",39)(55,"div",40),l._uU(56),l.qZA()(),l.TgZ(57,"div",41)(58,"h3",42),l._uU(59),l.qZA(),l.TgZ(60,"button",43),l._uU(61,"Add to cart"),l.qZA()()()()()()),2&t&&(l.uIk("data-bs-target","#"+i.bagno+i.index),l.xp6(2),l.Q6J("id",i.bagno+i.index),l.xp6(5),l.AsE("",i.trip.title,", ",i.trip.country,""),l.xp6(3),l.Q6J("id","carouselExampleIndicators"+i.index),l.xp6(2),l.uIk("data-bs-target","#carouselExampleIndicators"+i.index),l.xp6(1),l.uIk("data-bs-target","#carouselExampleIndicators"+i.index),l.xp6(1),l.uIk("data-bs-target","#carouselExampleIndicators"+i.index),l.xp6(3),l.Q6J("src",i.trip.image[0],l.LSH),l.xp6(2),l.Q6J("src",i.trip.image[1],l.LSH),l.xp6(2),l.Q6J("src",i.trip.image[2],l.LSH),l.xp6(1),l.uIk("data-bs-target","#carouselExampleIndicators"+i.index),l.xp6(4),l.uIk("data-bs-target","#carouselExampleIndicators"+i.index),l.xp6(6),l.AsE("",i.trip.title,", ",i.trip.country,""),l.xp6(2),l.AsE("",i.trip.dayOut," - ",i.trip.dayIn,""),l.xp6(2),l.hij(" ",i.trip.description," "),l.xp6(2),l.Q6J("data",i.trip),l.xp6(5),l.Q6J("data",i.trip),l.xp6(2),l.Q6J("ngForOf",i.trip.reviews),l.xp6(6),l.Oqu(i.counter),l.xp6(4),l.Q6J("ngClass",l.kEZ(26,l3,100*i.places/i.trip.maxPlaces>60,100*i.places/i.trip.maxPlaces>20&&100*i.places/i.trip.maxPlaces<=60,100*i.places/i.trip.maxPlaces<=20))("ngStyle",l.VKq(30,c3,100*i.places/i.trip.maxPlaces)),l.xp6(1),l.Oqu(i.places),l.xp6(3),l.hij("",i.trip.price,"$"))},dependencies:[fn,Oi,Na,ex,s3,o3],styles:[".carousel-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:400px;object-fit:cover}.carousel[_ngcontent-%COMP%]{width:60%;left:20%;margin-bottom:10px}#title-country[_ngcontent-%COMP%]{margin-left:5%;margin-bottom:3px}#date[_ngcontent-%COMP%]{margin-left:5%}#description[_ngcontent-%COMP%]{margin-left:5%;margin-right:5%}.sign-button[_ngcontent-%COMP%]{height:1.7em;width:1.7em;padding:0;margin-left:10px;margin-right:10px}.adding[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center}.counter[_ngcontent-%COMP%]{font-size:1.2em;margin-bottom:0}.btn-grad[_ngcontent-%COMP%]{background-color:#0093e9;background-image:linear-gradient(315deg,#0093E9 0%,#80D0C7 56%);text-align:center;text-transform:uppercase;transition:.5s;background-size:200% auto;color:#fff;display:block;border:0px;padding:2px 6px}.btn-grad[_ngcontent-%COMP%]:hover{background-position:right center;color:#fff;text-decoration:none}.btn-grad[_ngcontent-%COMP%]:active{background-position:left center;color:#fff;text-decoration:none}.modal-footer[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center}.checkout[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center}.price[_ngcontent-%COMP%]{margin-bottom:0;margin-right:15px}.name[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}.badge[_ngcontent-%COMP%]{margin-left:10px;display:flex;flex-direction:column;justify-content:center;height:2em}.badge[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:1.5em}.reviews-text[_ngcontent-%COMP%]{margin-left:5%;margin-top:25px}@media screen and (max-width: 1200px){.carousel[_ngcontent-%COMP%]{width:90%;left:5%}}"]}),n})();function u3(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"div",13)(1,"button",14),l.NdJ("click",function(){l.CHM(t);const r=l.oxw();return l.KtG(r.removePlace(r.trip.id))}),l._uU(2,"-"),l.qZA(),l.TgZ(3,"h6",15),l._uU(4),l.qZA(),l.TgZ(5,"button",16),l.NdJ("click",function(){l.CHM(t);const r=l.oxw();return l.KtG(r.addPlace(r.trip.id))}),l._uU(6,"+"),l.qZA()()}if(2&n){const t=l.oxw();l.xp6(4),l.Oqu(t.counter)}}function d3(n,e){if(1&n&&l._UZ(0,"app-trip-details",17),2&n){const t=l.oxw();l.Q6J("data",t.trip)("index",t.trip.id)}}let h3=(()=>{class n{constructor(t,i,r,o){this.serviceData=t,this.auth=i,this.db=o,this.cart=[],this.counter=0,this.uid="",this.mean=0,r.authState.subscribe(u=>{null!=u&&this.db.getCart(u?.uid).subscribe(h=>{this.cart=h,this.uid=u?.uid,this.counter=this.cart.find(g=>g.id==this.trip.id)?this.cart.find(g=>g.id==this.trip.id).places:0})})}ngOnInit(){this.mean=this.trip.reviews.reduce((t,i)=>t+i.points,0)/this.trip.reviews.length}addPlace(t){this.cart.find(i=>i.id==t)?this.cart.find(i=>i.id==t).places<this.trip.places&&(this.cart.find(i=>i.id==t).places++,this.db.updateCart(this.uid,this.cart)):(this.cart.push({...this.trip,places:1}),this.db.updateCart(this.uid,this.cart))}removePlace(t){this.cart.find(i=>i.id==t).places>0?(this.cart.find(i=>i.id==t).places--,this.db.updateCart(this.uid,this.cart)):this.db.updateCart(this.uid,this.cart.filter(i=>i.id!=t))}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(Up),l.Y36(As),l.Y36(qr),l.Y36(zr))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-trip2"]],inputs:{trip:"trip"},decls:17,vars:8,consts:[[1,"card"],["alt","...",1,"card-img-top",3,"src"],[1,"name"],[1,"title"],[1,"badge","rounded-pill","bg-warning",2,"padding","3px 8px","height","1.5em","margin-top","0.8em","margin-left","0.3em"],[2,"font-size","0.5em"],[1,"bi","bi-star-fill"],[1,"date"],[1,"footer"],["class","buttons",4,"ngIf"],[1,"checkout"],[1,"price"],["class","info",3,"data","index",4,"ngIf"],[1,"buttons"],["type","button","id","minus-button",1,"btn","btn-grad","minus-button","sign-button",3,"click"],[1,"counter"],["type","button","id","plus-button",1,"btn","btn-grad","plus-button","sign-button",3,"click"],[1,"info",3,"data","index"]],template:function(t,i){1&t&&(l.TgZ(0,"div",0),l._UZ(1,"img",1),l.TgZ(2,"div",2)(3,"h3",3),l._uU(4),l.qZA(),l.TgZ(5,"span",4)(6,"strong",5),l._UZ(7,"i",6),l._uU(8),l.qZA()()(),l.TgZ(9,"p",7),l._uU(10),l.qZA(),l.TgZ(11,"div",8),l.YNc(12,u3,7,1,"div",9),l.TgZ(13,"div",10)(14,"h1",11),l._uU(15),l.qZA()()(),l.YNc(16,d3,1,2,"app-trip-details",12),l.qZA()),2&t&&(l.xp6(1),l.Q6J("src",i.trip.image[0],l.LSH),l.xp6(3),l.Oqu(i.trip.title),l.xp6(4),l.hij(" ",i.mean.toFixed(1),"/5.0 "),l.xp6(2),l.AsE("",i.trip.dayOut," - ",i.trip.dayIn,""),l.xp6(2),l.Q6J("ngIf",i.auth.isLoggedIn()),l.xp6(3),l.hij("",i.trip.price,"$"),l.xp6(1),l.Q6J("ngIf",i.auth.isLoggedIn()))},dependencies:[Sn,Bk],styles:[".card[_ngcontent-%COMP%]{width:330px;height:300px;margin:15px 0 15px 5%}.card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{overflow:hidden;object-fit:cover;width:100%;height:60%}.title[_ngcontent-%COMP%]{margin-bottom:0}.name[_ngcontent-%COMP%]{width:90%;display:flex;padding:0;margin-top:5px;margin-left:22px}.country[_ngcontent-%COMP%]{opacity:.8;margin-top:0;margin-bottom:0;margin-left:12px}.date[_ngcontent-%COMP%]{font-size:.9em;margin-left:22px}.price[_ngcontent-%COMP%]{margin-bottom:0}.sign-button[_ngcontent-%COMP%]{height:1.7em;width:1.7em;padding:0;margin-left:10px;margin-right:10px}.buttons[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center}.counter[_ngcontent-%COMP%]{font-size:1.2em;margin-bottom:0}.btn-grad[_ngcontent-%COMP%]{background-color:#0093e9;background-image:linear-gradient(315deg,#0093E9 0%,#80D0C7 56%);text-align:center;text-transform:uppercase;transition:.5s;background-size:200% auto;color:#fff;box-shadow:0 0 20px #eee;display:block;border:0px}.btn-grad[_ngcontent-%COMP%]:hover{background-position:right center;color:#fff;text-decoration:none}.btn-grad[_ngcontent-%COMP%]:active{background-position:left center;color:#fff;text-decoration:none}.checkout[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center}.footer[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center;padding:0 12px 12px}.info[_ngcontent-%COMP%]{margin:0;position:absolute;top:12px;right:12px}"]}),n})();function f3(n,e){if(1&n&&(l.TgZ(0,"div",2),l._UZ(1,"app-trip2",3),l.qZA()),2&n){const t=e.$implicit;l.xp6(1),l.Q6J("trip",t)}}let p3=(()=>{class n{constructor(t,i,r){this.db=t,this.cart=i,this.auth=r,this.trips=[]}ngOnInit(){this.tripsSubscription=this.db.getTrips().subscribe(t=>{this.trips=[];for(let i of t)this.trips.push({id:i.id,title:i.title,country:i.country,dayOut:i.dayOut,dayIn:i.dayIn,price:i.price,places:i.places,maxPlaces:i.maxPlaces,image:i.image,description:i.description,reviews:i.reviews})})}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(zr),l.Y36(Up),l.Y36(As))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-trips"]],decls:3,vars:1,consts:[[1,"row","g-3","align-items-center"],["class","col-sm-12 col-md-6 col-lg-4 col-xl-3",4,"ngFor","ngForOf"],[1,"col-sm-12","col-md-6","col-lg-4","col-xl-3"],[3,"trip"]],template:function(t,i){1&t&&(l.TgZ(0,"body")(1,"div",0),l.YNc(2,f3,2,1,"div",1),l.qZA()()),2&t&&(l.xp6(2),l.Q6J("ngForOf",i.trips))},dependencies:[Oi,h3],styles:["body[_ngcontent-%COMP%]{background-color:#fff;background-image:linear-gradient(0deg,#80D0C7 0%,#ffffff 100%)}.col-md-3[_ngcontent-%COMP%]{padding:0;position:relative}app-trip-details[_ngcontent-%COMP%]{position:absolute;top:30px;right:30px}"]}),n})(),g3=(()=>{class n{constructor(){this.Data=[{id:1,title:"Hawaii Paradise",country:"Hawaii",dayOut:"2021-08-01",dayIn:"2021-08-15",price:2400,places:5,maxPlaces:5,description:"Hawaii is a state of the United States of America. It is the only state located in Oceania and the only one composed entirely of islands. It is the northernmost island group in Polynesia, occupying most of an archipelago in the central Pacific Ocean. Hawaii is the 8th-smallest, the 11th-least populous, and the 13th-least densely populated of the 50 United States. The state capital and largest city is Honolulu on the island of Oahu. The date of the state's admission to the Union is August 21, 1959.",image:["https://content.api.news/v3/images/bin/ded3be00f6965dcfa60d91c42563592d?width=1044"],reviews:[]},{id:4,title:"Safari",country:"Kenya",dayOut:"2023-08-01",dayIn:"2023-09-01",price:1800,places:12,maxPlaces:12,description:"A safari is an overland journey, usually a trip by tourists to Africa. The word is the Swahili word for journey. In the past, the trip was often a big-game hunt, but today, safari often refers to trips to observe and photograph wildlife, as well as other cultural and historical attractions. The term safari can apply to trips by tourists, but it is often applied to trips by professionals, such as photographers, naturalists, and hunters.",image:["https://media.cntraveler.com/photos/5ea883674e5fff00083ccef1/master/pass/Safari-GettyImages-143917249.jpg"],reviews:[]}]}getHistoryData(){return this.Data}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function m3(n,e){1&n&&(l.TgZ(0,"span",18),l._uU(1,"Ongoing"),l.qZA())}function _3(n,e){1&n&&(l.TgZ(0,"span",19),l._uU(1,"Ended"),l.qZA())}function y3(n,e){1&n&&(l.TgZ(0,"span",20),l._uU(1,"Future"),l.qZA())}let v3=(()=>{class n{constructor(){this.data=[],this.year=(new Date).getFullYear(),this.month=(new Date).getMonth()+1,this.day=(new Date).getDate()}getStatus(){return parseInt(this.data.dayOut.slice(0,4))>this.year?parseInt(this.data.dayIn.slice(0,4))==this.year&&parseInt(this.data.dayIn.slice(5,7))<=this.month&&parseInt(this.data.dayIn.slice(8,10))<=this.month?1:2:parseInt(this.data.dayOut.slice(0,4))<this.year?0:parseInt(this.data.dayIn.slice(5,7))<=this.month&&parseInt(this.data.dayIn.slice(8,10))<=this.month?1:parseInt(this.data.dayOut.slice(5,7))>this.month?2:parseInt(this.data.dayOut.slice(5,7))<this.month?0:parseInt(this.data.dayOut.slice(8,10))>this.day?2:parseInt(this.data.dayOut.slice(8,10))<this.day?0:1}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-history-card"]],inputs:{data:"data"},decls:23,vars:9,consts:[[1,"card"],["class","badge status ongoing",4,"ngIf"],["class","badge status ended",4,"ngIf"],["class","badge status future",4,"ngIf"],["alt","...",1,"card-img-top",3,"src"],[1,"name"],[1,"title"],[1,"badge","rounded-pill","bg-warning",2,"padding","3px 8px","height","1.5em","margin-top","0.8em","margin-left","0.3em"],[2,"font-size","0.5em"],[1,"bi","bi-star-fill"],[1,"date"],[1,"info"],[1,"footer"],[1,"checkout"],[1,"places"],[1,"place"],[1,"bi","bi-ticket-perforated"],[1,"price"],[1,"badge","status","ongoing"],[1,"badge","status","ended"],[1,"badge","status","future"]],template:function(t,i){1&t&&(l.TgZ(0,"div",0),l.YNc(1,m3,2,0,"span",1),l.YNc(2,_3,2,0,"span",2),l.YNc(3,y3,2,0,"span",3),l._UZ(4,"img",4),l.TgZ(5,"div",5)(6,"h3",6),l._uU(7),l.qZA(),l.TgZ(8,"span",7)(9,"strong",8),l._UZ(10,"i",9),l._uU(11," 3.7/5.0 "),l.qZA()()(),l.TgZ(12,"p",10),l._uU(13),l.qZA(),l._UZ(14,"app-trip-details",11),l.TgZ(15,"div",12)(16,"div",13)(17,"div",14)(18,"h1",15),l._uU(19),l.qZA(),l._UZ(20,"i",16),l.qZA(),l.TgZ(21,"h1",17),l._uU(22),l.qZA()()()()),2&t&&(l.xp6(1),l.Q6J("ngIf",1==i.getStatus()),l.xp6(1),l.Q6J("ngIf",0==i.getStatus()),l.xp6(1),l.Q6J("ngIf",2==i.getStatus()),l.xp6(1),l.Q6J("src",i.data.image,l.LSH),l.xp6(3),l.Oqu(i.data.title),l.xp6(6),l.AsE("",i.data.dayOut," - ",i.data.dayIn,""),l.xp6(6),l.hij("",i.data.places," "),l.xp6(3),l.hij("",i.data.places*i.data.price,"$"))},dependencies:[Sn,Bk],styles:[".card[_ngcontent-%COMP%]{width:330px;height:300px;margin:15px 0 15px 5%}.card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{overflow:hidden;object-fit:cover;width:100%;height:60%}.title[_ngcontent-%COMP%]{margin-bottom:0}.name[_ngcontent-%COMP%]{width:90%;display:flex;padding:0;margin-top:5px;margin-left:22px}.country[_ngcontent-%COMP%]{opacity:.8;margin-top:0;margin-bottom:0;margin-left:12px}.date[_ngcontent-%COMP%]{font-size:.9em;margin-left:22px}.price[_ngcontent-%COMP%], .place[_ngcontent-%COMP%]{margin-bottom:0}.sign-button[_ngcontent-%COMP%]{height:1.7em;width:1.7em;padding:0;margin-left:10px;margin-right:10px}.buttons[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center}.counter[_ngcontent-%COMP%]{font-size:1.2em;margin-bottom:0}.btn-grad[_ngcontent-%COMP%]{background-color:#0093e9;background-image:linear-gradient(315deg,#0093E9 0%,#80D0C7 56%);text-align:center;text-transform:uppercase;transition:.5s;background-size:200% auto;color:#fff;box-shadow:0 0 20px #eee;display:block;border:0px}.btn-grad[_ngcontent-%COMP%]:hover{background-position:right center;color:#fff;text-decoration:none}.btn-grad[_ngcontent-%COMP%]:active{background-position:left center;color:#fff;text-decoration:none}.checkout[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center;width:100%}.footer[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center;padding:0 12px}.info[_ngcontent-%COMP%]{margin:0;position:absolute;top:12px;right:12px}.status[_ngcontent-%COMP%]{padding:3px 5px;height:1.5em;position:absolute;top:5px;left:12px;margin:.8em 0 0 .3em}.ongoing[_ngcontent-%COMP%]{background-color:#0093e9}.ended[_ngcontent-%COMP%]{background-color:#bbb}.future[_ngcontent-%COMP%]{background-color:#80d0c7}.places[_ngcontent-%COMP%]{margin:0;display:flex;flex-direction:row;align-items:center;width:75px}.bi-ticket-perforated[_ngcontent-%COMP%]{font-size:2.5em;rotate:10deg;padding-top:4px;margin-left:5px}"]}),n})();function b3(n,e){if(1&n&&(l.TgZ(0,"div",2),l._UZ(1,"app-history-card",3),l.qZA()),2&n){const t=e.$implicit;l.xp6(1),l.Q6J("data",t)}}let w3=(()=>{class n{constructor(t){this.historyService=t,this.historyData=[]}ngOnInit(){this.historyData=this.historyService.getHistoryData()}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(g3))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-history"]],decls:2,vars:1,consts:[[1,"row","g-3"],["class","col-md-3",4,"ngFor","ngForOf"],[1,"col-md-3"],[3,"data"]],template:function(t,i){1&t&&(l.TgZ(0,"div",0),l.YNc(1,b3,2,1,"div",1),l.qZA()),2&t&&(l.xp6(1),l.Q6J("ngForOf",i.historyData))},dependencies:[Oi,v3]}),n})();function D3(n,e){1&n&&(l.TgZ(0,"h1",9),l._uU(1,"Wrong credentials!"),l.qZA())}let C3=(()=>{class n{constructor(t){this.auth=t,this.error=!1,this.loginForm=new Ou({login:new Mn("",[Kn.required,Kn.email]),password:new Mn("",[Kn.required,Kn.minLength(8)])})}submit(){if(!this.loginForm.valid)return void(this.error=!0);this.error=!1;let t=this.loginForm.get("login").value,i=this.loginForm.get("password").value;null!=t&&null!=i&&this.auth.signIn(t,i).catch(r=>{this.error=!0}),this.loginForm.reset()}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(As))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-login-view"]],decls:13,vars:2,consts:[[1,"card","login"],[1,"forms",3,"formGroup"],[1,"mb-3"],["for","formGroupExampleInput",1,"form-label"],["type","text","formControlName","login","id","formGroupExampleInput","placeholder","E-mail",1,"form-control"],["for","formGroupExampleInput2",1,"form-label"],["type","password","formControlName","password","id","formGroupExampleInput2","placeholder","Password",1,"form-control"],["type","submit",1,"btn","btn-grad",3,"click"],["class","error",4,"ngIf"],[1,"error"]],template:function(t,i){1&t&&(l.TgZ(0,"body")(1,"div",0)(2,"form",1)(3,"div",2)(4,"label",3),l._uU(5,"E-mail"),l.qZA(),l._UZ(6,"input",4),l.TgZ(7,"label",5),l._uU(8,"Password"),l.qZA(),l._UZ(9,"input",6),l.qZA()(),l.TgZ(10,"button",7),l.NdJ("click",function(){return i.submit()}),l._uU(11,"Log in"),l.qZA()(),l.YNc(12,D3,2,0,"h1",8),l.qZA()),2&t&&(l.xp6(2),l.Q6J("formGroup",i.loginForm),l.xp6(10),l.Q6J("ngIf",i.error))},dependencies:[Sn,X_,tl,Oe,Mt,Th,ey],styles:["body[_ngcontent-%COMP%]{height:92.7vh;width:100%;margin:0;padding:0;background-color:#fff;background-image:linear-gradient(0deg,#80D0C7 0%,#ffffff 100%)}.login[_ngcontent-%COMP%]{width:576px;height:260px;left:30%;top:20%}#formGroupExampleInput[_ngcontent-%COMP%]{margin-bottom:16px}.forms[_ngcontent-%COMP%]{margin:15px}.btn-grad[_ngcontent-%COMP%]{background-color:#0093e9;background-image:linear-gradient(315deg,#0093E9 0%,#80D0C7 56%);text-align:center;text-transform:uppercase;transition:.5s;background-size:200% auto;color:#fff;box-shadow:0 0 20px #eee;display:block;border:0px;width:20%;margin-left:40%}.btn-grad[_ngcontent-%COMP%]:hover{background-position:right center;color:#fff;text-decoration:none}.btn-grad[_ngcontent-%COMP%]:active{background-position:left center;color:#fff;text-decoration:none}.error[_ngcontent-%COMP%]{color:#fff;top:60%;position:absolute;left:50%;transform:translate(-50%,-50%)}"]}),n})(),E3=(()=>{class n{constructor(t){this.auth=t,this.error=!1,this.registerForm=new Ou({firstName:new Mn("",[Kn.required]),lastName:new Mn("",[Kn.required]),email:new Mn("",[Kn.required,Kn.email]),password:new Mn("",[Kn.required,Kn.minLength(8)])})}submit(){if(!this.registerForm.valid)return void(this.error=!0);this.error=!1;let t=this.registerForm.get("email").value,i=this.registerForm.get("password").value,r=this.registerForm.get("firstName").value,o=this.registerForm.get("lastName").value;null!=t&&null!=i&&null!=r&&null!=o&&this.auth.signUp(t,i,r,o),this.registerForm.reset()}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(As))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-register-view"]],decls:14,vars:1,consts:[[1,"card","login"],[1,"forms",3,"formGroup"],[1,"row"],[1,"col"],["type","text","placeholder","First name","aria-label","First name","formControlName","firstName",1,"form-control"],["type","text","placeholder","Last name","aria-label","Last name","formControlName","lastName",1,"form-control"],["type","text","placeholder","E-mail","aria-label","E-mail","formControlName","email",1,"form-control"],["type","password","placeholder","Password","aria-label","Password","formControlName","password",1,"form-control"],[1,"btn","btn-grad",3,"click"]],template:function(t,i){1&t&&(l.TgZ(0,"body")(1,"div",0)(2,"form",1)(3,"div",2)(4,"div",3),l._UZ(5,"input",4),l.qZA(),l.TgZ(6,"div",3),l._UZ(7,"input",5),l.qZA()(),l.TgZ(8,"div",3),l._UZ(9,"input",6),l.qZA(),l.TgZ(10,"div",3),l._UZ(11,"input",7),l.qZA(),l.TgZ(12,"button",8),l.NdJ("click",function(){return i.submit()}),l._uU(13,"Sign up"),l.qZA()()()()),2&t&&(l.xp6(2),l.Q6J("formGroup",i.registerForm))},dependencies:[X_,tl,Oe,Mt,Th,ey],styles:["body[_ngcontent-%COMP%]{height:92.7vh;width:100%;margin:0;padding:0;background-color:#fff;background-image:linear-gradient(0deg,#80D0C7 0%,#ffffff 100%)}.login[_ngcontent-%COMP%]{width:576px;height:260px;left:30%;top:20%}.forms[_ngcontent-%COMP%]{margin:25px}.btn-grad[_ngcontent-%COMP%]{background-color:#0093e9;background-image:linear-gradient(315deg,#0093E9 0%,#80D0C7 56%);text-align:center;text-transform:uppercase;transition:.5s;background-size:200% auto;color:#fff;box-shadow:0 0 20px #eee;display:block;border:0px;width:20%;margin-left:40%}.btn-grad[_ngcontent-%COMP%]:hover{background-position:right center;color:#fff;text-decoration:none}.btn-grad[_ngcontent-%COMP%]:active{background-position:left center;color:#fff;text-decoration:none}.col[_ngcontent-%COMP%]{margin-bottom:20px}"]}),n})(),I3=(()=>{class n{constructor(t,i,r){this.data=t,this.db=r,this.places=0,this.counter=0,this.cart=[],this.uid="",this.minusButton=document.getElementById("minus-button"),this.plusButton=document.getElementById("plus-button"),i.authState.subscribe(o=>{null!=o&&this.db.getCart(o?.uid).subscribe(u=>{this.cart=u,this.uid=o?.uid})})}ngOnInit(){}getAvgReview(){let t=0;for(let i of this.trip.reviews)t+=i.points;return t/this.trip.reviews.length}addPlace(t){this.cart.find(i=>i.id==t).places<this.trip.places&&(this.cart.find(i=>i.id==t).places++,this.db.updateCart(this.uid,this.cart))}removePlace(t){this.cart.find(i=>i.id==t).places>0?(this.cart.find(i=>i.id==t).places--,this.db.updateCart(this.uid,this.cart)):this.db.updateCart(this.uid,this.cart.filter(i=>i.id!=t))}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(Up),l.Y36(qr),l.Y36(zr))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-shopping-cart-card"]],inputs:{trip:"trip",places:"places"},decls:23,vars:8,consts:[[1,"card"],["alt","...",1,"card-img-top",3,"src"],[1,"name"],[1,"badge","rounded-pill","bg-warning",2,"padding","3px 5px","height","1.5em","margin-top","0.55em","margin-left","0.3em"],[2,"font-size","0.5em"],[1,"bi","bi-star-fill"],[1,"bi","bi-star-half"],[1,"bi","bi-star"],[1,"date"],["type","button","id","plus-button",1,"btn","btn-grad","plus-button","sign-button",3,"disabled","click"],["type","button","id","minus-button",1,"btn","btn-grad","minus-button","sign-button",3,"click"],[1,"counter"],[1,"price"]],template:function(t,i){1&t&&(l.TgZ(0,"div",0),l._UZ(1,"img",1),l.TgZ(2,"div",2)(3,"h4"),l._uU(4),l.qZA(),l.TgZ(5,"span",3)(6,"strong",4),l._UZ(7,"i",5)(8,"i",5)(9,"i",5)(10,"i",6)(11,"i",7),l._uU(12),l.qZA()()(),l.TgZ(13,"p",8),l._uU(14),l.qZA(),l.TgZ(15,"button",9),l.NdJ("click",function(){return i.addPlace(i.trip.id)}),l._uU(16,"+"),l.qZA(),l.TgZ(17,"button",10),l.NdJ("click",function(){return i.removePlace(i.trip.id)}),l._uU(18,"-"),l.qZA(),l.TgZ(19,"h6",11),l._uU(20),l.qZA(),l.TgZ(21,"h5",12),l._uU(22),l.qZA()()),2&t&&(l.xp6(1),l.Q6J("src",i.trip.image[0],l.LSH),l.xp6(3),l.Oqu(i.trip.title),l.xp6(8),l.hij(" ",i.getAvgReview(),"/5.0 "),l.xp6(2),l.AsE("",i.trip.dayOut," - ",i.trip.dayIn,""),l.xp6(1),l.Q6J("disabled",i.counter==(null==i.trip?null:i.trip.places)),l.xp6(5),l.Oqu(i.places),l.xp6(2),l.hij("$",i.trip.price*i.places,""))},styles:[".card[_ngcontent-%COMP%]{width:90%;height:300px;margin:15px 0 15px 5%}.card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{overflow:hidden;object-fit:cover;width:100%;height:60%}.name[_ngcontent-%COMP%]{position:absolute;top:62.5%;left:5%;width:90%;display:flex;padding:0}.country[_ngcontent-%COMP%]{position:absolute;top:60%;left:5%}.date[_ngcontent-%COMP%]{position:absolute;top:72.5%;left:5%;font-size:.9em}.sign-button[_ngcontent-%COMP%]{position:absolute;height:1.7em;width:1.7em;padding:0;bottom:5%}.plus-button[_ngcontent-%COMP%]{right:5%}.minus-button[_ngcontent-%COMP%]{left:65%}.counter[_ngcontent-%COMP%]{position:absolute;left:80%;bottom:5%;transform:translate(-50%,25%);font-size:1.2em}.price[_ngcontent-%COMP%]{position:absolute;bottom:5%;left:5%;font-size:1.5em;transform:translateY(25%)}.btn-grad[_ngcontent-%COMP%]{background-color:#0093e9;background-image:linear-gradient(315deg,#0093E9 0%,#80D0C7 56%);text-align:center;text-transform:uppercase;transition:.5s;background-size:200% auto;color:#fff;box-shadow:0 0 20px #eee;border-radius:10px;display:block;border:0px}.btn-grad[_ngcontent-%COMP%]:hover{background-position:right center;color:#fff;text-decoration:none}.btn-grad[_ngcontent-%COMP%]:active{background-position:left center;color:#fff;text-decoration:none}"]}),n})();function T3(n,e){if(1&n&&(l.TgZ(0,"div"),l._UZ(1,"app-shopping-cart-card",15),l.qZA()),2&n){const t=e.$implicit,i=l.oxw();l.xp6(1),l.Q6J("trip",i.findTrip(t.id))("places",t.places)}}const S3=function(n,e){return{"bg-danger":n,"bg-success":e}};let jk=(()=>{class n{constructor(t,i,r){this.data=t,this.db=r,this.itemsCounter=0,this.cart=[],this.cart$=[],this.trips=[],this.uid="",i.authState.subscribe(o=>{null!=o&&this.db.getCart(o?.uid).subscribe(u=>{this.cart=u,this.cart$=u,this.uid=o?.uid})}),this.db.getTrips().subscribe(o=>{this.trips=o})}ngOnInit(){}totalPrice(){let t=0;for(let i of this.cart)t+=this.findTrip(i.id).price*i.places;return t}totalPlaces(){let t=0;for(let i of this.cart)t+=i.places;return t}findTrip(t){return this.trips.filter(i=>i.id==t)[0]}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(Up),l.Y36(qr),l.Y36(zr))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-shopping-cart"]],decls:19,vars:7,consts:[["type","button","data-bs-toggle","offcanvas","data-bs-target","#cartCanvas","aria-controls","cartCanvas",1,"btn","btn-grad",2,"position","relative","margin","12px"],[1,"bi","bi-cart"],[1,"position-absolute","translate-middle","badge","rounded-pill",2,"left","0%","top","0%",3,"ngClass"],["tabindex","-1","id","cartCanvas","aria-labelledby","offcanvasExampleLabel",1,"offcanvas","offcanvas-end"],[1,"offcanvas-header"],["id","offcanvasExampleLabel",1,"offcanvas-title"],["type","button","data-bs-dismiss","offcanvas","aria-label","Close",1,"btn-close"],[1,"offcanvas-body"],[4,"ngFor","ngForOf"],[1,"offcanvas-footer"],[1,"nav","sticky-bottom"],[1,"container-fluid"],[1,"row"],[1,"total"],[1,"btn","btn-grad","checkout"],[3,"trip","places"]],template:function(t,i){1&t&&(l.TgZ(0,"button",0),l._UZ(1,"i",1),l.TgZ(2,"span",2),l._uU(3),l.qZA()(),l.TgZ(4,"div",3)(5,"div",4)(6,"h5",5),l._uU(7,"Your cart"),l.qZA(),l._UZ(8,"button",6),l.qZA(),l.TgZ(9,"div",7),l.YNc(10,T3,2,2,"div",8),l.qZA(),l.TgZ(11,"div",9)(12,"div",10)(13,"div",11)(14,"div",12)(15,"h5",13),l._uU(16),l.qZA(),l.TgZ(17,"div",14),l._uU(18,"Checkout"),l.qZA()()()()()()),2&t&&(l.xp6(2),l.Q6J("ngClass",l.WLB(4,S3,i.totalPlaces()<=10,i.totalPlaces()>10)),l.xp6(1),l.hij(" ",i.totalPlaces()," "),l.xp6(7),l.Q6J("ngForOf",i.cart),l.xp6(6),l.hij("Total: $",i.totalPrice(),""))},dependencies:[fn,Oi,I3],styles:[".nav[_ngcontent-%COMP%]{width:100%;height:60px}.row[_ngcontent-%COMP%]{width:100%;height:100%;margin:0}.container-fluid[_ngcontent-%COMP%]{padding:0}.checkout[_ngcontent-%COMP%]{width:30%;height:40px;position:absolute;right:10%;top:50%;transform:translateY(-50%)}.total[_ngcontent-%COMP%]{position:absolute;left:5%;top:50%;transform:translateY(-50%)}.offcanvas-header[_ngcontent-%COMP%]{box-shadow:0 3px 5px #b6b6b6bf}.offcanvas-footer[_ngcontent-%COMP%]{box-shadow:8px 0 5px #b6b6b6bf}.btn-grad[_ngcontent-%COMP%]{background-color:#0093e9;background-image:linear-gradient(315deg,#0093E9 0%,#80D0C7 56%);text-align:center;text-transform:uppercase;transition:.5s;background-size:200% auto;color:#fff;box-shadow:0 0 20px #eee;border-radius:10px;display:block;border:0px}.btn-grad[_ngcontent-%COMP%]:hover{background-position:right center;color:#fff;text-decoration:none}.btn-grad[_ngcontent-%COMP%]:active{background-position:left center;color:#fff;text-decoration:none}"]}),n})(),A3=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-page-not-found"]],decls:1,vars:0,consts:[["src","https://www.lifewire.com/thmb/auk-givypeTY383aFHJnpl6fQSU=/1500x0/filters:no_upscale():max_bytes(150000):strip_icc()/404-not-found-error-explained-2622936-Final-fde7be1b7e2e499c9f039d97183e7f52.jpg","alt","404"]],template:function(t,i){1&t&&l._UZ(0,"img",0)},styles:["img[_ngcontent-%COMP%]{width:100%;height:92.8vh;object-fit:cover}"]}),n})();function N3(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"ul",4)(1,"li",15),l._uU(2),l.qZA(),l.TgZ(3,"li",16),l._uU(4),l.qZA(),l.TgZ(5,"li",17)(6,"input",18),l.NdJ("change",function(r){l.CHM(t);const o=l.oxw();return l.KtG(o.onCheckboxChange(r))}),l.qZA(),l._uU(7," Admin "),l.qZA(),l.TgZ(8,"li",17)(9,"input",19),l.NdJ("change",function(r){l.CHM(t);const o=l.oxw();return l.KtG(o.onCheckboxChange(r))}),l.qZA(),l._uU(10," Manager "),l.qZA(),l.TgZ(11,"li",17)(12,"input",20),l.NdJ("change",function(r){l.CHM(t);const o=l.oxw();return l.KtG(o.onCheckboxChange(r))}),l.qZA(),l._uU(13," Banned "),l.qZA()()}if(2&n){const t=e.$implicit,i=e.index;l.xp6(2),l.Oqu(t.uid),l.xp6(2),l.Oqu(t.email),l.xp6(2),l.Q6J("checked",t.roles.admin)("id",i)("value",t.roles),l.xp6(3),l.Q6J("checked",t.roles.manager)("id",i)("value",t.roles),l.xp6(3),l.Q6J("checked",t.roles.banned)("id",i)("value",t.roles)}}let x3=(()=>{class n{constructor(t,i,r){this.auth=t,this.db=i,this.users=[],this.roles=[],this.form=r.group({selected:new Sx([])}),this.settings=r.group({persistence:new Mn("local")})}ngOnInit(){this.subscription=this.db.getUsers().subscribe(t=>{this.users=[];for(let i of t){let r=new XN(i.payload.val());r.uid=i.payload.key||"undefined",this.users.push(r)}console.log(this.users)})}onCheckboxChange(t){this.form.get("selected");let r=this.users[t.target.id].roles;r[t.target.className]=!r[t.target.className],this.db.changeUserRoles(this.users[t.target.id].uid,r)}isLocal(){return"local"==this.auth.persistence}isSession(){return"session"==this.auth.persistence}isNone(){return"none"==this.auth.persistence}setLocal(){this.auth.changePersistence("local")}setSession(){this.auth.changePersistence("session")}setNone(){this.auth.changePersistence("none")}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(As),l.Y36(zr),l.Y36(r3))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-admin-dashboard"]],decls:27,vars:6,consts:[[1,"card","persistence"],[1,"card-header"],[1,"card-body"],["novalidate","",3,"formGroup"],[1,"list-group","list-group-horizontal"],[1,"list-group-item","local"],["type","radio","value","local","id","local",3,"checked","click"],["type","radio","value","local","id","session",3,"checked","click"],["type","radio","value","local","id","none",3,"checked","click"],[1,"card"],[1,"list-group","list-group-horizontal","templates"],[1,"list-group-item","flex-fill","uid"],[1,"list-group-item","flex-fill","email"],[1,"list-group-item","flex-fill","roless"],["class","list-group list-group-horizontal",4,"ngFor","ngForOf"],[1,"list-group-item","uid"],[1,"list-group-item","email"],[1,"list-group-item","roles"],["type","checkbox","role","switch",1,"admin",3,"checked","id","value","change"],["type","checkbox",1,"manager",3,"checked","id","value","change"],["type","checkbox",1,"banned",3,"checked","id","value","change"]],template:function(t,i){1&t&&(l.TgZ(0,"body")(1,"div",0)(2,"div",1),l._uU(3,"Persistence mode settings"),l.qZA(),l.TgZ(4,"div",2)(5,"form",3)(6,"ul",4)(7,"li",5)(8,"input",6),l.NdJ("click",function(){return i.setLocal()}),l.qZA(),l._uU(9," Local "),l.TgZ(10,"input",7),l.NdJ("click",function(){return i.setSession()}),l.qZA(),l._uU(11," Session "),l.TgZ(12,"input",8),l.NdJ("click",function(){return i.setNone()}),l.qZA(),l._uU(13," None "),l.qZA()()()()(),l.TgZ(14,"div",9)(15,"div",1),l._uU(16,"Admin Dashboard"),l.qZA(),l.TgZ(17,"div",2)(18,"ul",10)(19,"li",11),l._uU(20,"UID"),l.qZA(),l.TgZ(21,"li",12),l._uU(22,"E-mail"),l.qZA(),l.TgZ(23,"li",13),l._uU(24,"Roles"),l.qZA()(),l.TgZ(25,"form",3),l.YNc(26,N3,14,11,"ul",14),l.qZA()()()()),2&t&&(l.xp6(5),l.Q6J("formGroup",i.settings),l.xp6(3),l.Q6J("checked",i.isLocal()),l.xp6(2),l.Q6J("checked",i.isSession()),l.xp6(2),l.Q6J("checked",i.isNone()),l.xp6(13),l.Q6J("formGroup",i.form),l.xp6(1),l.Q6J("ngForOf",i.users))},dependencies:[Oi,X_,Mt,Th],styles:["body[_ngcontent-%COMP%]{height:92.7vh;width:100vw;margin:0;padding:0;background-color:#fff;background-image:linear-gradient(0deg,#80D0C7 0%,#ffffff 100%)}.persistence[_ngcontent-%COMP%]{margin-bottom:50px}.card[_ngcontent-%COMP%]{top:10%;width:80%;left:10%}.email[_ngcontent-%COMP%], .uid[_ngcontent-%COMP%]{width:32%}.roles[_ngcontent-%COMP%]{width:12%}.roless[_ngcontent-%COMP%]{width:36%}.templates[_ngcontent-%COMP%]{margin-bottom:20px}#local[_ngcontent-%COMP%], #session[_ngcontent-%COMP%], #none[_ngcontent-%COMP%]{margin-left:10px;margin-right:10px}"]}),n})(),M3=(()=>{class n{constructor(t,i,r,o){this.auth=t,this.router=i,this.db=r,this.authFire=o}canActivate(t,i){return this.auth.isAdmin()}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(As),l.LFG(mi),l.LFG(zr),l.LFG(qr))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function O3(n,e){1&n&&(l.TgZ(0,"h3"),l._uU(1,"Wrong data"),l.qZA())}let R3=(()=>{class n{constructor(t){this.db=t,this.error=!1,this.lastId=0,this.Ids=[],this.form=new Ou({title:new Mn("",[Kn.required]),country:new Mn("",[Kn.required]),places:new Mn("",[Kn.required]),price:new Mn("",[Kn.required]),dayOut:new Mn("",[Kn.required]),dayIn:new Mn("",[Kn.required]),description:new Mn("",[Kn.required]),image1:new Mn("",[Kn.required]),image2:new Mn("",[]),image3:new Mn("",[])})}ngOnInit(){this.db.getTrips().subscribe(t=>{for(let i of t)this.Ids.push(i.id);this.lastId=Math.max(...this.Ids)})}submit(){if(this.form.valid){if(this.error=!1,null!=this.form.value.title&&null!=this.form.value.country&&null!=this.form.value.places&&null!=this.form.value.price&&null!=this.form.value.dayOut&&null!=this.form.value.dayIn&&null!=this.form.value.description&&null!=this.form.value.image1&&null!=this.form.value.image2&&null!=this.form.value.image3){let t={id:this.lastId+1,title:this.form.value.title,country:this.form.value.country,maxPlaces:parseInt(this.form.value.places),places:parseInt(this.form.value.places),price:parseInt(this.form.value.price),dayOut:this.form.value.dayOut,dayIn:this.form.value.dayIn,description:this.form.value.description,image:[this.form.value.image1,this.form.value.image2,this.form.value.image3],reviews:[]};this.db.addTrip(t)}this.form.reset()}else this.error=!0}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(zr))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-add-modal"]],decls:56,vars:2,consts:[["type","button","data-bs-toggle","modal","data-bs-target","#staticBackdrop",1,"btn","btn-primary"],["id","staticBackdrop","data-bs-backdrop","static","data-bs-keyboard","false","tabindex","10000","aria-labelledby","staticBackdropLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","staticBackdropLabel",1,"modal-title","fs-5"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[3,"formGroup"],[1,"row","g-3"],[1,"col-md-6"],["for","title",1,"visually-hidden"],["type","text","id","title","placeholder","Title","formControlName","title",1,"form-control"],["for","country",1,"visually-hidden"],["type","text","id","Country","placeholder","Country","formControlName","country",1,"form-control"],["for","dateOut",1,"visually-hidden"],["type","date","id","dateOut","placeholder","Date out","formControlName","dayOut",1,"form-control"],["for","dateIn",1,"visually-hidden"],["type","date","id","dateIn","placeholder","Date in","formControlName","dayIn",1,"form-control"],["for","places",1,"visually-hidden"],["type","text","id","places","placeholder","Number of places","formControlName","places",1,"form-control"],["for","price",1,"visually-hidden"],["type","text","id","price","placeholder","Price","formControlName","price",1,"form-control"],[1,"col-md-12"],["for","img",1,"visually-hidden"],["type","text","id","img","placeholder","Main image link","formControlName","image1",1,"form-control"],["type","text","id","img","placeholder","Second image link","formControlName","image2",1,"form-control"],["type","text","id","img","placeholder","Third image link","formControlName","image3",1,"form-control"],["for","description",1,"form-label"],["id","description","rows","3","formControlName","description",1,"form-control"],[1,"modal-footer"],[4,"ngIf"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(t,i){1&t&&(l.TgZ(0,"button",0),l._uU(1," Add Trip "),l.qZA(),l.TgZ(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"h1",5),l._uU(7,"Add Trip"),l.qZA(),l._UZ(8,"button",6),l.qZA(),l.TgZ(9,"div",7)(10,"form",8)(11,"div",9)(12,"div",10)(13,"label",11),l._uU(14,"Title"),l.qZA(),l._UZ(15,"input",12),l.qZA(),l.TgZ(16,"div",10)(17,"label",13),l._uU(18,"Country"),l.qZA(),l._UZ(19,"input",14),l.qZA(),l.TgZ(20,"div",10)(21,"label",15),l._uU(22,"Date out"),l.qZA(),l._UZ(23,"input",16),l.qZA(),l.TgZ(24,"div",10)(25,"label",17),l._uU(26,"Date in"),l.qZA(),l._UZ(27,"input",18),l.qZA(),l.TgZ(28,"div",10)(29,"label",19),l._uU(30,"Number of places"),l.qZA(),l._UZ(31,"input",20),l.qZA(),l.TgZ(32,"div",10)(33,"label",21),l._uU(34,"Price"),l.qZA(),l._UZ(35,"input",22),l.qZA(),l.TgZ(36,"div",23)(37,"label",24),l._uU(38,"Main image link"),l.qZA(),l._UZ(39,"input",25),l.qZA(),l.TgZ(40,"div",23)(41,"label",24),l._uU(42,"Second image link"),l.qZA(),l._UZ(43,"input",26),l.qZA(),l.TgZ(44,"div",23)(45,"label",24),l._uU(46,"Third image link"),l.qZA(),l._UZ(47,"input",27),l.qZA(),l.TgZ(48,"div",23)(49,"label",28),l._uU(50,"Description"),l.qZA(),l._UZ(51,"textarea",29),l.qZA()()()(),l.TgZ(52,"div",30),l.YNc(53,O3,2,0,"h3",31),l.TgZ(54,"button",32),l.NdJ("click",function(){return i.submit()}),l._uU(55,"Add"),l.qZA()()()()()),2&t&&(l.xp6(10),l.Q6J("formGroup",i.form),l.xp6(43),l.Q6J("ngIf",i.error))},dependencies:[Sn,X_,tl,Oe,Mt,Th,ey]}),n})();function P3(n,e){1&n&&(l.TgZ(0,"h3"),l._uU(1,"Wrong data"),l.qZA())}let k3=(()=>{class n{constructor(t){this.db=t,this.image0="",this.image1="",this.image2="",this.bagno="staticBackdropEd",this.error=!1,this.form=new Ou({title:new Mn("",[Kn.required]),country:new Mn("",[Kn.required]),places:new Mn("",[Kn.required]),price:new Mn("",[Kn.required]),dayOut:new Mn("",[Kn.required]),dayIn:new Mn("",[Kn.required]),description:new Mn("",[Kn.required]),image1:new Mn("",[Kn.required]),image2:new Mn("",[]),image3:new Mn("",[])})}ngOnInit(){this.tripsSubscription=this.db.getTrips().subscribe(t=>{for(let i of t)i.id==this.id&&(this.thisTrip=i,this.image0=i.image[0],this.image1=i.image[1],this.image2=i.image[2])})}submit(){if(this.form.valid){if(this.error=!1,null!=this.id&&null!=this.form.value.title&&null!=this.form.value.country&&null!=this.form.value.places&&null!=this.form.value.price&&null!=this.form.value.dayOut&&null!=this.form.value.dayIn&&null!=this.form.value.description&&null!=this.form.value.image1&&null!=this.form.value.image2&&null!=this.form.value.image3&&null!=this.thisTrip){let t={id:this.id,title:this.form.value.title,country:this.form.value.country,places:this.thisTrip?.places+this.thisTrip?.maxPlaces-parseInt(this.form.value.places),maxPlaces:parseInt(this.form.value.places),price:parseInt(this.form.value.price),dayOut:this.form.value.dayOut,dayIn:this.form.value.dayIn,description:this.form.value.description,image:[this.form.value.image1,this.form.value.image2,this.form.value.image3],reviews:[]};this.db.modifyTrip(t),this.form.reset()}}else this.error=!0}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(zr))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-edit-modal"]],inputs:{id:"id"},decls:56,vars:16,consts:[["data-bs-toggle","modal",1,"btn","btn-secondary"],["data-bs-backdrop","static","data-bs-keyboard","false","tabindex","10000","aria-labelledby","staticBackdropLabel","aria-hidden","true",1,"modal","fade",3,"id"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","staticBackdropLabel",1,"modal-title","fs-5"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[3,"formGroup"],[1,"row","g-3"],[1,"col-md-6"],["for","title",1,"visually-hidden"],["type","text","id","title","placeholder","Title","formControlName","title",1,"form-control",3,"value"],["for","country",1,"visually-hidden"],["type","text","id","Country","placeholder","Country","formControlName","country",1,"form-control",3,"value"],["for","dateOut",1,"visually-hidden"],["type","date","id","dateOut","placeholder","Date out","formControlName","dayOut",1,"form-control",3,"value"],["for","dateIn",1,"visually-hidden"],["type","date","id","dateIn","placeholder","Date in","formControlName","dayIn",1,"form-control",3,"value"],["for","places",1,"visually-hidden"],["type","text","id","places","placeholder","Number of places","formControlName","places",1,"form-control",3,"value"],["for","price",1,"visually-hidden"],["type","text","id","price","placeholder","Price","formControlName","price",1,"form-control",3,"value"],[1,"col-md-12"],["for","img",1,"visually-hidden"],["type","text","id","img","placeholder","Main image link","formControlName","image1",1,"form-control",3,"value"],["type","text","id","img","placeholder","Second image link","formControlName","image2",1,"form-control",3,"value"],["type","text","id","img","placeholder","Third image link","formControlName","image3",1,"form-control",3,"value"],["for","description",1,"form-label"],["id","description","rows","3","formControlName","description",1,"form-control",3,"value"],[1,"modal-footer"],[4,"ngIf"],["type","button",1,"btn","btn-success",3,"click"]],template:function(t,i){1&t&&(l.TgZ(0,"div",0),l._uU(1,"Edit trip"),l.qZA(),l.TgZ(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"h1",5),l._uU(7),l.qZA(),l._UZ(8,"button",6),l.qZA(),l.TgZ(9,"div",7)(10,"form",8)(11,"div",9)(12,"div",10)(13,"label",11),l._uU(14,"Title"),l.qZA(),l._UZ(15,"input",12),l.qZA(),l.TgZ(16,"div",10)(17,"label",13),l._uU(18,"Country"),l.qZA(),l._UZ(19,"input",14),l.qZA(),l.TgZ(20,"div",10)(21,"label",15),l._uU(22,"Date out"),l.qZA(),l._UZ(23,"input",16),l.qZA(),l.TgZ(24,"div",10)(25,"label",17),l._uU(26,"Date in"),l.qZA(),l._UZ(27,"input",18),l.qZA(),l.TgZ(28,"div",10)(29,"label",19),l._uU(30,"Number of places"),l.qZA(),l._UZ(31,"input",20),l.qZA(),l.TgZ(32,"div",10)(33,"label",21),l._uU(34,"Price"),l.qZA(),l._UZ(35,"input",22),l.qZA(),l.TgZ(36,"div",23)(37,"label",24),l._uU(38,"Image link"),l.qZA(),l._UZ(39,"input",25),l.qZA(),l.TgZ(40,"div",23)(41,"label",24),l._uU(42,"Image link"),l.qZA(),l._UZ(43,"input",26),l.qZA(),l.TgZ(44,"div",23)(45,"label",24),l._uU(46,"Image link"),l.qZA(),l._UZ(47,"input",27),l.qZA(),l.TgZ(48,"div",23)(49,"label",28),l._uU(50,"Description"),l.qZA(),l._UZ(51,"textarea",29),l.qZA()()()(),l.TgZ(52,"div",30),l.YNc(53,P3,2,0,"h3",31),l.TgZ(54,"button",32),l.NdJ("click",function(){return i.submit()}),l._uU(55,"Update"),l.qZA()()()()()),2&t&&(l.uIk("data-bs-target","#"+i.bagno+i.id),l.xp6(2),l.Q6J("id",i.bagno+i.id),l.xp6(5),l.AsE("Edit Trip: ",null==i.thisTrip?null:i.thisTrip.title,", ",null==i.thisTrip?null:i.thisTrip.country,""),l.xp6(3),l.Q6J("formGroup",i.form),l.xp6(5),l.Q6J("value",null==i.thisTrip?null:i.thisTrip.title),l.xp6(4),l.Q6J("value",null==i.thisTrip?null:i.thisTrip.country),l.xp6(4),l.Q6J("value",null==i.thisTrip?null:i.thisTrip.dayOut),l.xp6(4),l.Q6J("value",null==i.thisTrip?null:i.thisTrip.dayIn),l.xp6(4),l.Q6J("value",null==i.thisTrip?null:i.thisTrip.places),l.xp6(4),l.Q6J("value",null==i.thisTrip?null:i.thisTrip.price),l.xp6(4),l.Q6J("value",i.image0),l.xp6(4),l.Q6J("value",i.image1),l.xp6(4),l.Q6J("value",i.image2),l.xp6(4),l.Q6J("value",null==i.thisTrip?null:i.thisTrip.description),l.xp6(2),l.Q6J("ngIf",i.error))},dependencies:[Sn,X_,tl,Oe,Mt,Th,ey],styles:[".btn-grad[_ngcontent-%COMP%]{background-color:#0093e9;background-image:linear-gradient(315deg,#0093E9 0%,#80D0C7 56%);text-align:center;text-transform:uppercase;transition:.5s;background-size:200% auto;color:#fff;box-shadow:0 0 20px #eee;border-radius:10px;display:block;border:0px}.btn-grad[_ngcontent-%COMP%]:hover{background-position:right center;color:#fff;text-decoration:none}.btn-grad[_ngcontent-%COMP%]:active{background-position:left center;color:#fff;text-decoration:none}"]}),n})();function F3(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"ul",3)(1,"li",8),l._uU(2),l.qZA(),l.TgZ(3,"li",9),l._uU(4),l.qZA(),l.TgZ(5,"li",10),l._UZ(6,"app-edit-modal",11),l.qZA(),l.TgZ(7,"li",10)(8,"button",12),l.NdJ("click",function(){const o=l.CHM(t).$implicit,u=l.oxw();return l.KtG(u.remove(o.id))}),l._uU(9,"Remove trip"),l.qZA()()()}if(2&n){const t=e.$implicit;l.xp6(2),l.hij(" ",t.id," "),l.xp6(2),l.HOy(" ",t.title,", ",t.country,", ",t.dayOut," - ",t.dayIn," "),l.xp6(2),l.Q6J("id",t.id)}}let L3=(()=>{class n{constructor(t){this.db=t,this.trips=[]}ngOnInit(){this.tripsSubscription=this.db.getTrips().subscribe(t=>{this.trips=[];for(let i of t)this.trips.push({id:i.id,title:i.title,country:i.country,dayOut:i.dayOut,dayIn:i.dayIn,price:i.price,places:i.places,image:i.image,description:i.description,reviews:i.reviews})})}remove(t){this.db.removeTrip(t)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(zr))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-manage-trips"]],decls:15,vars:1,consts:[[1,"card"],[1,"card-header"],[1,"card-body"],[1,"list-group","list-group-horizontal"],[1,"list-group-item","flex-fill","id","template"],[1,"list-group-item","flex-fill","name","template"],[1,"list-group-item","flex-fill","manage","template"],["class","list-group list-group-horizontal",4,"ngFor","ngForOf"],[1,"list-group-item","flex-fill","id"],[1,"list-group-item","flex-fill","name"],[1,"list-group-item","flex-fill","button"],[3,"id"],[1,"btn","btn-danger",3,"click"]],template:function(t,i){1&t&&(l.TgZ(0,"body")(1,"div",0)(2,"div",1)(3,"h4"),l._uU(4,"Manage Trips"),l.qZA(),l._UZ(5,"app-add-modal"),l.qZA(),l.TgZ(6,"div",2)(7,"ul",3)(8,"li",4),l._uU(9," ID "),l.qZA(),l.TgZ(10,"li",5),l._uU(11," Name "),l.qZA(),l.TgZ(12,"li",6),l._uU(13," Manage "),l.qZA()(),l.YNc(14,F3,10,6,"ul",7),l.qZA()()()),2&t&&(l.xp6(14),l.Q6J("ngForOf",i.trips))},dependencies:[Oi,R3,k3],styles:["body[_ngcontent-%COMP%]{min-height:92.7vh;width:100vw;margin:0;padding:0;background-color:#fff;background-image:linear-gradient(0deg,#80D0C7 0%,#ffffff 100%)}.list-group-item[_ngcontent-%COMP%]{display:flex;align-items:center}.card[_ngcontent-%COMP%]{width:80%;left:10%;margin-top:60px}.card-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.id[_ngcontent-%COMP%]{width:15%}.name[_ngcontent-%COMP%]{width:45%}.manage[_ngcontent-%COMP%]{width:40%}.button[_ngcontent-%COMP%]{width:20%;display:flex;justify-content:center}h4[_ngcontent-%COMP%]{margin:0}.template[_ngcontent-%COMP%]{margin-bottom:20px}"]}),n})(),Hk=(()=>{class n{constructor(t,i,r,o){this.auth=t,this.router=i,this.db=r,this.authFire=o}canActivate(t,i){return this.auth.isClient()}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(As),l.LFG(mi),l.LFG(zr),l.LFG(qr))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const V3=[{path:"",component:$D},{path:"Travel-Agency-App/home",component:$D},{path:"trips",component:p3},{path:"history",component:w3,canActivate:[Hk]},{path:"cart",component:jk,canActivate:[Hk]},{path:"login",component:C3},{path:"register",component:E3},{path:"admin",component:x3,canActivate:[M3]},{path:"manager",component:L3,canActivate:[(()=>{class n{constructor(t,i,r,o){this.auth=t,this.router=i,this.db=r,this.authFire=o}canActivate(t,i){return this.auth.isMaster()}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(As),l.LFG(mi),l.LFG(zr),l.LFG(qr))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()]},{path:"**",component:A3}];let U3=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[{provide:ue,useValue:"/Travel-Agency-App/"}],imports:[Im.forRoot(V3,{useHash:!0}),Im]}),n})();function Ax(){return(0,Ci.e)((n,e)=>{let t,i=!1;n.subscribe((0,ti.x)(e,r=>{const o=t;t=r,i&&e.next([o,r]),i=!0}))})}var St,B3=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ru={},Nx=Nx||{},Wt=B3||self;function YE(){}function QE(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Wb(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var xx="closure_uid_"+(1e9*Math.random()>>>0),H3=0;function G3(n,e,t){return n.call.apply(n.bind,arguments)}function $3(n,e,t){if(!n)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),n.apply(e,r)}}return function(){return n.apply(e,arguments)}}function ms(n,e,t){return(ms=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?G3:$3).apply(null,arguments)}function JE(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var i=t.slice();return i.push.apply(i,arguments),n.apply(this,i)}}function Yr(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(i,r,o){for(var u=Array(arguments.length-2),h=2;h<arguments.length;h++)u[h-2]=arguments[h];return e.prototype[r].apply(i,u)}}function Sh(){this.s=this.s,this.o=this.o}Sh.prototype.s=!1,Sh.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function j3(n){Object.prototype.hasOwnProperty.call(n,xx)&&n[xx]||(n[xx]=++H3)}(this)},Sh.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Gk=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function Mx(n){const e=n.length;if(0<e){const t=Array(e);for(let i=0;i<e;i++)t[i]=n[i];return t}return[]}function $k(n,e){for(let t=1;t<arguments.length;t++){const i=arguments[t];if(QE(i)){const r=n.length||0,o=i.length||0;n.length=r+o;for(let u=0;u<o;u++)n[r+u]=i[u]}else n.push(i)}}function _s(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}_s.prototype.h=function(){this.defaultPrevented=!0};var W3=function(){if(!Wt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Wt.addEventListener("test",YE,e),Wt.removeEventListener("test",YE,e)}catch{}return n}();function XE(n){return/^[\s\xa0]*$/.test(n)}var Zk=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Ox(n,e){return n<e?-1:n>e?1:0}function eI(){var n=Wt.navigator;return n&&(n=n.userAgent)?n:""}function dc(n){return-1!=eI().indexOf(n)}function Rx(n){return Rx[" "](n),n}Rx[" "]=YE;var tI,n,z3=dc("Opera"),ty=dc("Trident")||dc("MSIE"),Wk=dc("Edge"),Px=Wk||ty,qk=dc("Gecko")&&!(-1!=eI().toLowerCase().indexOf("webkit")&&!dc("Edge"))&&!(dc("Trident")||dc("MSIE"))&&!dc("Edge"),K3=-1!=eI().toLowerCase().indexOf("webkit")&&!dc("Edge");function zk(){var n=Wt.document;return n?n.documentMode:void 0}e:{var kx="",Fx=(n=eI(),qk?/rv:([^\);]+)(\)|;)/.exec(n):Wk?/Edge\/([\d\.]+)/.exec(n):ty?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):K3?/WebKit\/(\S+)/.exec(n):z3?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Fx&&(kx=Fx?Fx[1]:""),ty){var Lx=zk();if(null!=Lx&&Lx>parseFloat(kx)){tI=String(Lx);break e}}tI=kx}var Y3={};var J3=Wt.document&&ty&&(zk()||parseInt(tI,10))||void 0;function qb(n,e){if(_s.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,i=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(qk){e:{try{Rx(e.nodeName);var r=!0;break e}catch{}r=!1}r||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:X3[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&qb.X.h.call(this)}}Yr(qb,_s);var X3={2:"touch",3:"pen",4:"mouse"};qb.prototype.h=function(){qb.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var zb="closure_listenable_"+(1e6*Math.random()|0),eH=0;function tH(n,e,t,i,r){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!i,this.ha=r,this.key=++eH,this.ba=this.ea=!1}function nI(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function Ux(n,e,t){for(const i in n)e.call(t,n[i],i,n)}function Yk(n){const e={};for(const t in n)e[t]=n[t];return e}const Qk="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Jk(n,e){let t,i;for(let r=1;r<arguments.length;r++){for(t in i=arguments[r],i)n[t]=i[t];for(let o=0;o<Qk.length;o++)t=Qk[o],Object.prototype.hasOwnProperty.call(i,t)&&(n[t]=i[t])}}function iI(n){this.src=n,this.g={},this.h=0}function Bx(n,e){var t=e.type;if(t in n.g){var o,i=n.g[t],r=Gk(i,e);(o=0<=r)&&Array.prototype.splice.call(i,r,1),o&&(nI(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function jx(n,e,t,i){for(var r=0;r<n.length;++r){var o=n[r];if(!o.ba&&o.listener==e&&o.capture==!!t&&o.ha==i)return r}return-1}iI.prototype.add=function(n,e,t,i,r){var o=n.toString();(n=this.g[o])||(n=this.g[o]=[],this.h++);var u=jx(n,e,i,r);return-1<u?(e=n[u],t||(e.ea=!1)):((e=new tH(e,this.src,o,!!i,r)).ea=t,n.push(e)),e};var Hx="closure_lm_"+(1e6*Math.random()|0),Gx={};function Xk(n,e,t,i,r){if(i&&i.once)return tF(n,e,t,i,r);if(Array.isArray(e)){for(var o=0;o<e.length;o++)Xk(n,e[o],t,i,r);return null}return t=qx(t),n&&n[zb]?n.N(e,t,Wb(i)?!!i.capture:!!i,r):eF(n,e,t,!1,i,r)}function eF(n,e,t,i,r,o){if(!e)throw Error("Invalid event type");var u=Wb(r)?!!r.capture:!!r,h=Zx(n);if(h||(n[Hx]=h=new iI(n)),(t=h.add(e,t,i,u,o)).proxy)return t;if(i=function nH(){const e=iH;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=i,i.src=n,i.listener=t,n.addEventListener)W3||(r=u),void 0===r&&(r=!1),n.addEventListener(e.toString(),i,r);else if(n.attachEvent)n.attachEvent(iF(e.toString()),i);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(i)}return t}function tF(n,e,t,i,r){if(Array.isArray(e)){for(var o=0;o<e.length;o++)tF(n,e[o],t,i,r);return null}return t=qx(t),n&&n[zb]?n.O(e,t,Wb(i)?!!i.capture:!!i,r):eF(n,e,t,!0,i,r)}function nF(n,e,t,i,r){if(Array.isArray(e))for(var o=0;o<e.length;o++)nF(n,e[o],t,i,r);else i=Wb(i)?!!i.capture:!!i,t=qx(t),n&&n[zb]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=jx(o=n.g[e],t,i,r))&&(nI(o[t]),Array.prototype.splice.call(o,t,1),0==o.length&&(delete n.g[e],n.h--))):n&&(n=Zx(n))&&(e=n.g[e.toString()],n=-1,e&&(n=jx(e,t,i,r)),(t=-1<n?e[n]:null)&&$x(t))}function $x(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[zb])Bx(e.i,n);else{var t=n.type,i=n.proxy;e.removeEventListener?e.removeEventListener(t,i,n.capture):e.detachEvent?e.detachEvent(iF(t),i):e.addListener&&e.removeListener&&e.removeListener(i),(t=Zx(e))?(Bx(t,n),0==t.h&&(t.src=null,e[Hx]=null)):nI(n)}}}function iF(n){return n in Gx?Gx[n]:Gx[n]="on"+n}function iH(n,e){if(n.ba)n=!0;else{e=new qb(e,this);var t=n.listener,i=n.ha||n.src;n.ea&&$x(n),n=t.call(i,e)}return n}function Zx(n){return(n=n[Hx])instanceof iI?n:null}var Wx="__closure_events_fn_"+(1e9*Math.random()>>>0);function qx(n){return"function"==typeof n?n:(n[Wx]||(n[Wx]=function(e){return n.handleEvent(e)}),n[Wx])}function Or(){Sh.call(this),this.i=new iI(this),this.P=this,this.I=null}function Qr(n,e){var t,i=n.I;if(i)for(t=[];i;i=i.I)t.push(i);if(n=n.P,i=e.type||e,"string"==typeof e)e=new _s(e,n);else if(e instanceof _s)e.target=e.target||n;else{var r=e;Jk(e=new _s(i,n),r)}if(r=!0,t)for(var o=t.length-1;0<=o;o--){var u=e.g=t[o];r=rI(u,i,!0,e)&&r}if(r=rI(u=e.g=n,i,!0,e)&&r,r=rI(u,i,!1,e)&&r,t)for(o=0;o<t.length;o++)r=rI(u=e.g=t[o],i,!1,e)&&r}function rI(n,e,t,i){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var r=!0,o=0;o<e.length;++o){var u=e[o];if(u&&!u.ba&&u.capture==t){var h=u.listener,g=u.ha||u.src;u.ea&&Bx(n.i,u),r=!1!==h.call(g,i)&&r}}return r&&!i.defaultPrevented}Yr(Or,Sh),Or.prototype[zb]=!0,Or.prototype.removeEventListener=function(n,e,t,i){nF(this,n,e,t,i)},Or.prototype.M=function(){if(Or.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],i=0;i<t.length;i++)nI(t[i]);delete n.g[e],n.h--}}this.I=null},Or.prototype.N=function(n,e,t,i){return this.i.add(String(n),e,!1,t,i)},Or.prototype.O=function(n,e,t,i){return this.i.add(String(n),e,!0,t,i)};var zx=Wt.JSON.stringify;function rH(){var n=oF;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Kx,rF=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new oH,n=>n.reset());class oH{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function aH(n){Wt.setTimeout(()=>{throw n},0)}function sF(n,e){Kx||function lH(){var n=Wt.Promise.resolve(void 0);Kx=function(){n.then(cH)}}(),Yx||(Kx(),Yx=!0),oF.add(n,e)}var Yx=!1,oF=new class sH{constructor(){this.h=this.g=null}add(e,t){const i=rF.get();i.set(e,t),this.h?this.h.next=i:this.g=i,this.h=i}};function cH(){for(var n;n=rH();){try{n.h.call(n.g)}catch(t){aH(t)}var e=rF;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Yx=!1}function sI(n,e){Or.call(this),this.h=n||1,this.g=e||Wt,this.j=ms(this.lb,this),this.l=Date.now()}function Qx(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function Jx(n,e,t){if("function"==typeof n)t&&(n=ms(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=ms(n.handleEvent,n)}return 2147483647<Number(e)?-1:Wt.setTimeout(n,e||0)}function aF(n){n.g=Jx(()=>{n.g=null,n.i&&(n.i=!1,aF(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Yr(sI,Or),(St=sI.prototype).ca=!1,St.R=null,St.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Qr(this,"tick"),this.ca&&(Qx(this),this.start()))}},St.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},St.M=function(){sI.X.M.call(this),Qx(this),delete this.g};class uH extends Sh{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:aF(this)}M(){super.M(),this.g&&(Wt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Kb(n){Sh.call(this),this.h=n,this.g={}}Yr(Kb,Sh);var lF=[];function cF(n,e,t,i){Array.isArray(t)||(t&&(lF[0]=t.toString()),t=lF);for(var r=0;r<t.length;r++){var o=Xk(e,t[r],i||n.handleEvent,!1,n.h||n);if(!o)break;n.g[o.key]=o}}function uF(n){Ux(n.g,function(e,t){this.g.hasOwnProperty(t)&&$x(e)},n),n.g={}}function oI(){this.g=!0}function ny(n,e,t,i){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function pH(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var i=t[n];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var o=r[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var u=1;u<r.length;u++)r[u]=""}}}return zx(t)}catch{return e}}(n,t)+(i?" "+i:"")})}Kb.prototype.M=function(){Kb.X.M.call(this),uF(this)},Kb.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},oI.prototype.Aa=function(){this.g=!1},oI.prototype.info=function(){};var Gp={},dF=null;function aI(){return dF=dF||new Or}function hF(n){_s.call(this,Gp.Pa,n)}function Yb(n){const e=aI();Qr(e,new hF(e))}function fF(n,e){_s.call(this,Gp.STAT_EVENT,n),this.stat=e}function Ns(n){const e=aI();Qr(e,new fF(e,n))}function pF(n,e){_s.call(this,Gp.Qa,n),this.size=e}function Qb(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Wt.setTimeout(function(){n()},e)}Gp.Pa="serverreachability",Yr(hF,_s),Gp.STAT_EVENT="statevent",Yr(fF,_s),Gp.Qa="timingevent",Yr(pF,_s);var lI={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},gF={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Xx(){}function _F(){}Xx.prototype.h=null;var nM,Jb={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function eM(){_s.call(this,"d")}function tM(){_s.call(this,"c")}function cI(){}function Xb(n,e,t,i){this.l=n,this.j=e,this.m=t,this.U=i||1,this.S=new Kb(this),this.O=gH,this.T=new sI(n=Px?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new yF}function yF(){this.i=null,this.g="",this.h=!1}Yr(eM,_s),Yr(tM,_s),Yr(cI,Xx),cI.prototype.g=function(){return new XMLHttpRequest},cI.prototype.i=function(){return{}},nM=new cI;var gH=45e3,iM={},uI={};function rM(n,e,t){n.K=1,n.v=pI(Pu(e)),n.s=t,n.P=!0,vF(n,null)}function vF(n,e){n.F=Date.now(),ew(n),n.A=Pu(n.v);var t=n.A,i=n.U;Array.isArray(i)||(i=[String(i)]),NF(t.i,"t",i),n.C=0,t=n.l.H,n.h=new yF,n.g=XF(n.l,t?e:null,!n.s),0<n.N&&(n.L=new uH(ms(n.La,n,n.g),n.N)),cF(n.S,n.g,"readystatechange",n.ib),e=n.H?Yk(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),Yb(),function dH(n,e,t,i,r,o){n.info(function(){if(n.g)if(o)for(var u="",h=o.split("&"),g=0;g<h.length;g++){var y=h[g].split("=");if(1<y.length){var C=y[0];y=y[1];var I=C.split("_");u=2<=I.length&&"type"==I[1]?u+(C+"=")+y+"&":u+(C+"=redacted&")}}else u=null;else u=o;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+e+"\n"+t+"\n"+u})}(n.j,n.u,n.A,n.m,n.U,n.s)}function bF(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function wF(n,e,t){let r,i=!0;for(;!n.I&&n.C<t.length;){if(r=mH(n,t),r==uI){4==e&&(n.o=4,Ns(14),i=!1),ny(n.j,n.m,null,"[Incomplete Response]");break}if(r==iM){n.o=4,Ns(15),ny(n.j,n.m,t,"[Invalid Chunk]"),i=!1;break}ny(n.j,n.m,r,null),sM(n,r)}bF(n)&&r!=uI&&r!=iM&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Ns(16),i=!1),n.i=n.i&&i,i?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),fM(e),e.K=!0,Ns(11))):(ny(n.j,n.m,t,"[Invalid Chunked Response]"),$p(n),tw(n))}function mH(n,e){var t=n.C,i=e.indexOf("\n",t);return-1==i?uI:(t=Number(e.substring(t,i)),isNaN(t)?iM:(i+=1)+t>e.length?uI:(e=e.substr(i,t),n.C=i+t,e))}function ew(n){n.V=Date.now()+n.O,DF(n,n.O)}function DF(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Qb(ms(n.gb,n),e)}function dI(n){n.B&&(Wt.clearTimeout(n.B),n.B=null)}function tw(n){0==n.l.G||n.I||KF(n.l,n)}function $p(n){dI(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Qx(n.T),uF(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function sM(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||oM(t.h,n)))if(!n.J&&oM(t.h,n)&&3==t.G){try{var i=t.Fa.g.parse(e)}catch{i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;bI(t),yI(t)}hM(t),Ns(18)}}else t.Ba=r[1],0<t.Ba-t.T&&37500>r[2]&&t.L&&0==t.A&&!t.v&&(t.v=Qb(ms(t.cb,t),6e3));if(1>=OF(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else Wp(t,11)}else if((n.J||t.g==n)&&bI(t),!XE(e))for(r=t.Fa.g.parse(e),e=0;e<r.length;e++){let y=r[e];if(t.T=y[0],y=y[1],2==t.G)if("c"==y[0]){t.I=y[1],t.ka=y[2];const C=y[3];null!=C&&(t.ma=C,t.j.info("VER="+t.ma));const I=y[4];null!=I&&(t.Ca=I,t.j.info("SVER="+t.Ca));const A=y[5];null!=A&&"number"==typeof A&&0<A&&(t.J=i=1.5*A,t.j.info("backChannelRequestTimeoutMs_="+i)),i=t;const F=n.g;if(F){const Z=F.g?F.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Z){var o=i.h;o.g||-1==Z.indexOf("spdy")&&-1==Z.indexOf("quic")&&-1==Z.indexOf("h2")||(o.j=o.l,o.g=new Set,o.h&&(aM(o,o.h),o.h=null))}if(i.D){const ee=F.g?F.g.getResponseHeader("X-HTTP-Session-Id"):null;ee&&(i.za=ee,Ti(i.F,i.D,ee))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var u=n;if((i=t).sa=JF(i,i.H?i.ka:null,i.V),u.J){RF(i.h,u);var h=u,g=i.J;g&&h.setTimeout(g),h.B&&(dI(h),ew(h)),i.g=u}else qF(i);0<t.i.length&&vI(t)}else"stop"!=y[0]&&"close"!=y[0]||Wp(t,7);else 3==t.G&&("stop"==y[0]||"close"==y[0]?"stop"==y[0]?Wp(t,7):dM(t):"noop"!=y[0]&&t.l&&t.l.wa(y),t.A=0)}Yb()}catch{}}function CF(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(QE(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function yH(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(QE(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const i in n)e[t++]=i;return e}}}(n),i=function _H(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(QE(n)){for(var e=[],t=n.length,i=0;i<t;i++)e.push(n[i]);return e}for(i in e=[],t=0,n)e[t++]=n[i];return e}(n),r=i.length,o=0;o<r;o++)e.call(void 0,i[o],t&&t[o],n)}(St=Xb.prototype).setTimeout=function(n){this.O=n},St.ib=function(n){n=n.target;const e=this.L;e&&3==ku(n)?e.l():this.La(n)},St.La=function(n){try{if(n==this.g)e:{const C=ku(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>C)&&(3!=C||Px||this.g&&(this.h.h||this.g.fa()||jF(this.g)))){this.I||4!=C||7==e||Yb(),dI(this);var t=this.g.aa();this.Y=t;t:if(bF(this)){var i=jF(this.g);n="";var r=i.length,o=4==ku(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){$p(this),tw(this);var u="";break t}this.h.i=new Wt.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,n+=this.h.i.decode(i[e],{stream:o&&e==r-1});i.splice(0,r),this.h.g+=n,this.C=0,u=this.h.g}else u=this.g.fa();if(this.i=200==t,function hH(n,e,t,i,r,o,u){n.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+e+"\n"+t+"\n"+o+" "+u})}(this.j,this.u,this.A,this.m,this.U,C,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var h,g=this.g;if((h=g.g?g.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!XE(h)){var y=h;break t}}y=null}if(!(t=y)){this.i=!1,this.o=3,Ns(12),$p(this),tw(this);break e}ny(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,sM(this,t)}this.P?(wF(this,C,u),Px&&this.i&&3==C&&(cF(this.S,this.T,"tick",this.hb),this.T.start())):(ny(this.j,this.m,u,null),sM(this,u)),4==C&&$p(this),this.i&&!this.I&&(4==C?KF(this.l,this):(this.i=!1,ew(this)))}else 400==t&&0<u.indexOf("Unknown SID")?(this.o=3,Ns(12)):(this.o=0,Ns(13)),$p(this),tw(this)}}}catch{}},St.hb=function(){if(this.g){var n=ku(this.g),e=this.g.fa();this.C<e.length&&(dI(this),wF(this,n,e),this.i&&4!=n&&ew(this))}},St.cancel=function(){this.I=!0,$p(this)},St.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function fH(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Yb(),Ns(17)),$p(this),this.o=2,tw(this)):DF(this,this.V-n)};var EF=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Zp(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Zp){this.h=void 0!==e?e:n.h,hI(this,n.j),this.s=n.s,this.g=n.g,fI(this,n.m),this.l=n.l,e=n.i;var t=new rw;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),IF(this,t),this.o=n.o}else n&&(t=String(n).match(EF))?(this.h=!!e,hI(this,t[1]||"",!0),this.s=nw(t[2]||""),this.g=nw(t[3]||"",!0),fI(this,t[4]),this.l=nw(t[5]||"",!0),IF(this,t[6]||"",!0),this.o=nw(t[7]||"")):(this.h=!!e,this.i=new rw(null,this.h))}function Pu(n){return new Zp(n)}function hI(n,e,t){n.j=t?nw(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function fI(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function IF(n,e,t){e instanceof rw?(n.i=e,function IH(n,e){e&&!n.j&&(Ah(n),n.i=null,n.g.forEach(function(t,i){var r=i.toLowerCase();i!=r&&(SF(this,i),NF(this,r,t))},n)),n.j=e}(n.i,n.h)):(t||(e=iw(e,CH)),n.i=new rw(e,n.h))}function Ti(n,e,t){n.i.set(e,t)}function pI(n){return Ti(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function nw(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function iw(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,bH),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function bH(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Zp.prototype.toString=function(){var n=[],e=this.j;e&&n.push(iw(e,TF,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(iw(e,TF,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(iw(t,"/"==t.charAt(0)?DH:wH,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",iw(t,EH)),n.join("")};var TF=/[#\/\?@]/g,wH=/[#\?:]/g,DH=/[#\?]/g,CH=/[#\?@]/g,EH=/#/g;function rw(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Ah(n){n.g||(n.g=new Map,n.h=0,n.i&&function vH(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var i=n[t].indexOf("="),r=null;if(0<=i){var o=n[t].substring(0,i);r=n[t].substring(i+1)}else o=n[t];e(o,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function SF(n,e){Ah(n),e=iy(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function AF(n,e){return Ah(n),e=iy(n,e),n.g.has(e)}function NF(n,e,t){SF(n,e),0<t.length&&(n.i=null,n.g.set(iy(n,e),Mx(t)),n.h+=t.length)}function iy(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function xF(n){this.l=n||SH,n=Wt.PerformanceNavigationTiming?0<(n=Wt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Wt.g&&Wt.g.Ga&&Wt.g.Ga()&&Wt.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(St=rw.prototype).add=function(n,e){Ah(this),this.i=null,n=iy(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},St.forEach=function(n,e){Ah(this),this.g.forEach(function(t,i){t.forEach(function(r){n.call(e,r,i,this)},this)},this)},St.oa=function(){Ah(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let i=0;i<e.length;i++){const r=n[i];for(let o=0;o<r.length;o++)t.push(e[i])}return t},St.W=function(n){Ah(this);let e=[];if("string"==typeof n)AF(this,n)&&(e=e.concat(this.g.get(iy(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},St.set=function(n,e){return Ah(this),this.i=null,AF(this,n=iy(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},St.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},St.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var i=e[t];const o=encodeURIComponent(String(i)),u=this.W(i);for(i=0;i<u.length;i++){var r=o;""!==u[i]&&(r+="="+encodeURIComponent(String(u[i]))),n.push(r)}}return this.i=n.join("&")};var SH=10;function MF(n){return!!n.h||!!n.g&&n.g.size>=n.j}function OF(n){return n.h?1:n.g?n.g.size:0}function oM(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function aM(n,e){n.g?n.g.add(e):n.h=e}function RF(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function PF(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Mx(n.i)}function lM(){}function AH(){this.g=new lM}function NH(n,e,t){const i=t||"";try{CF(n,function(r,o){let u=r;Wb(r)&&(u=zx(r)),e.push(i+o+"="+encodeURIComponent(u))})}catch(r){throw e.push(i+"type="+encodeURIComponent("_badmap")),r}}function gI(n,e,t,i,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(i)}catch{}}function sw(n){this.l=n.ac||null,this.j=n.jb||!1}function mI(n,e){Or.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=cM,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}xF.prototype.cancel=function(){if(this.i=PF(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},lM.prototype.stringify=function(n){return Wt.JSON.stringify(n,void 0)},lM.prototype.parse=function(n){return Wt.JSON.parse(n,void 0)},Yr(sw,Xx),sw.prototype.g=function(){return new mI(this.l,this.j)},sw.prototype.i=function(n){return function(){return n}}({}),Yr(mI,Or);var cM=0;function kF(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function ow(n){n.readyState=4,n.l=null,n.j=null,n.A=null,aw(n)}function aw(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(St=mI.prototype).open=function(n,e){if(this.readyState!=cM)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,aw(this)},St.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Wt).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},St.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ow(this)),this.readyState=cM},St.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,aw(this)),this.g&&(this.readyState=3,aw(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof Wt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;kF(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},St.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?ow(this):aw(this),3==this.readyState&&kF(this)}},St.Va=function(n){this.g&&(this.response=this.responseText=n,ow(this))},St.Ua=function(n){this.g&&(this.response=n,ow(this))},St.ga=function(){this.g&&ow(this)},St.setRequestHeader=function(n,e){this.v.append(n,e)},St.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},St.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(mI.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var MH=Wt.JSON.parse;function Hi(n){Or.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=FF,this.K=this.L=!1}Yr(Hi,Or);var FF="",OH=/^https?$/i,RH=["POST","PUT"];function LF(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,VF(n),_I(n)}function VF(n){n.D||(n.D=!0,Qr(n,"complete"),Qr(n,"error"))}function UF(n){if(n.h&&typeof Nx<"u"&&(!n.C[1]||4!=ku(n)||2!=n.aa()))if(n.v&&4==ku(n))Jx(n.Ha,0,n);else if(Qr(n,"readystatechange"),4==ku(n)){n.h=!1;try{const h=n.aa();e:switch(h){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var i;if(i=0===h){var r=String(n.H).match(EF)[1]||null;if(!r&&Wt.self&&Wt.self.location){var o=Wt.self.location.protocol;r=o.substr(0,o.length-1)}i=!OH.test(r?r.toLowerCase():"")}t=i}if(t)Qr(n,"complete"),Qr(n,"success");else{n.m=6;try{var u=2<ku(n)?n.g.statusText:""}catch{u=""}n.j=u+" ["+n.aa()+"]",VF(n)}}finally{_I(n)}}}function _I(n,e){if(n.g){BF(n);const t=n.g,i=n.C[0]?YE:null;n.g=null,n.C=null,e||Qr(n,"ready");try{t.onreadystatechange=i}catch{}}}function BF(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Wt.clearTimeout(n.A),n.A=null)}function ku(n){return n.g?n.g.readyState:0}function jF(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case FF:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function HF(n){let e="";return Ux(n,function(t,i){e+=i,e+=":",e+=t,e+="\r\n"}),e}function uM(n,e,t){e:{for(i in t){var i=!1;break e}i=!0}i||(t=HF(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Ti(n,e,t))}function lw(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function GF(n){this.Ca=0,this.i=[],this.j=new oI,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=lw("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=lw("baseRetryDelayMs",5e3,n),this.bb=lw("retryDelaySeedMs",1e4,n),this.$a=lw("forwardChannelMaxRetries",2,n),this.ta=lw("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new xF(n&&n.concurrentRequestLimit),this.Fa=new AH,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function dM(n){if($F(n),3==n.G){var e=n.U++,t=Pu(n.F);Ti(t,"SID",n.I),Ti(t,"RID",e),Ti(t,"TYPE","terminate"),cw(n,t),(e=new Xb(n,n.j,e,void 0)).K=2,e.v=pI(Pu(t)),t=!1,Wt.navigator&&Wt.navigator.sendBeacon&&(t=Wt.navigator.sendBeacon(e.v.toString(),"")),!t&&Wt.Image&&((new Image).src=e.v,t=!0),t||(e.g=XF(e.l,null),e.g.da(e.v)),e.F=Date.now(),ew(e)}QF(n)}function yI(n){n.g&&(fM(n),n.g.cancel(),n.g=null)}function $F(n){yI(n),n.u&&(Wt.clearTimeout(n.u),n.u=null),bI(n),n.h.cancel(),n.m&&("number"==typeof n.m&&Wt.clearTimeout(n.m),n.m=null)}function vI(n){MF(n.h)||n.m||(n.m=!0,sF(n.Ja,n),n.C=0)}function ZF(n,e){var t;t=e?e.m:n.U++;const i=Pu(n.F);Ti(i,"SID",n.I),Ti(i,"RID",t),Ti(i,"AID",n.T),cw(n,i),n.o&&n.s&&uM(i,n.o,n.s),t=new Xb(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=WF(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),aM(n.h,t),rM(t,i,e)}function cw(n,e){n.ia&&Ux(n.ia,function(t,i){Ti(e,i,t)}),n.l&&CF({},function(t,i){Ti(e,i,t)})}function WF(n,e,t){t=Math.min(n.i.length,t);var i=n.l?ms(n.l.Ra,n.l,n):null;e:{var r=n.i;let o=-1;for(;;){const u=["count="+t];-1==o?0<t?(o=r[0].h,u.push("ofs="+o)):o=0:u.push("ofs="+o);let h=!0;for(let g=0;g<t;g++){let y=r[g].h;const C=r[g].g;if(y-=o,0>y)o=Math.max(0,r[g].h-100),h=!1;else try{NH(C,u,"req"+y+"_")}catch{i&&i(C)}}if(h){i=u.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,i}function qF(n){n.g||n.u||(n.Z=1,sF(n.Ia,n),n.A=0)}function hM(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=Qb(ms(n.Ia,n),YF(n,n.A)),n.A++,0))}function fM(n){null!=n.B&&(Wt.clearTimeout(n.B),n.B=null)}function zF(n){n.g=new Xb(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=Pu(n.sa);Ti(e,"RID","rpc"),Ti(e,"SID",n.I),Ti(e,"CI",n.L?"0":"1"),Ti(e,"AID",n.T),Ti(e,"TYPE","xmlhttp"),cw(n,e),n.o&&n.s&&uM(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=pI(Pu(e)),t.s=null,t.P=!0,vF(t,n)}function bI(n){null!=n.v&&(Wt.clearTimeout(n.v),n.v=null)}function KF(n,e){var t=null;if(n.g==e){bI(n),fM(n),n.g=null;var i=2}else{if(!oM(n.h,e))return;t=e.D,RF(n.h,e),i=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==i){t=e.s?e.s.length:0,e=Date.now()-e.F;var r=n.C;Qr(i=aI(),new pF(i,t)),vI(n)}else qF(n);else if(3==(r=e.o)||0==r&&0<n.pa||!(1==i&&function kH(n,e){return!(OF(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=Qb(ms(n.Ja,n,e),YF(n,n.C)),n.C++,0)))}(n,e)||2==i&&hM(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),r){case 1:Wp(n,5);break;case 4:Wp(n,10);break;case 3:Wp(n,6);break;default:Wp(n,2)}}function YF(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function Wp(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var i=ms(n.kb,n);t||(t=new Zp("//www.google.com/images/cleardot.gif"),Wt.location&&"http"==Wt.location.protocol||hI(t,"https"),pI(t)),function xH(n,e){const t=new oI;if(Wt.Image){const i=new Image;i.onload=JE(gI,t,i,"TestLoadImage: loaded",!0,e),i.onerror=JE(gI,t,i,"TestLoadImage: error",!1,e),i.onabort=JE(gI,t,i,"TestLoadImage: abort",!1,e),i.ontimeout=JE(gI,t,i,"TestLoadImage: timeout",!1,e),Wt.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=n}else e(!1)}(t.toString(),i)}else Ns(2);n.G=0,n.l&&n.l.va(e),QF(n),$F(n)}function QF(n){if(n.G=0,n.la=[],n.l){const e=PF(n.h);(0!=e.length||0!=n.i.length)&&($k(n.la,e),$k(n.la,n.i),n.h.i.length=0,Mx(n.i),n.i.length=0),n.l.ua()}}function JF(n,e,t){var i=t instanceof Zp?Pu(t):new Zp(t,void 0);if(""!=i.g)e&&(i.g=e+"."+i.g),fI(i,i.m);else{var r=Wt.location;i=r.protocol,e=e?e+"."+r.hostname:r.hostname,r=+r.port;var o=new Zp(null,void 0);i&&hI(o,i),e&&(o.g=e),r&&fI(o,r),t&&(o.l=t),i=o}return e=n.za,(t=n.D)&&e&&Ti(i,t,e),Ti(i,"VER",n.ma),cw(n,i),i}function XF(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Hi(t&&n.Da&&!n.ra?new sw({jb:!0}):n.ra)).Ka(n.H),e}function eL(){}function wI(){if(ty&&!(10<=Number(J3)))throw Error("Environmental error: no available transport.")}function Vo(n,e){Or.call(this),this.g=new GF(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!XE(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!XE(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new ry(this)}function tL(n){eM.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function nL(){tM.call(this),this.status=1}function ry(n){this.g=n}(St=Hi.prototype).Ka=function(n){this.L=n},St.da=function(n,e,t,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():nM.g(),this.C=function mF(n){return n.h||(n.h=n.i())}(this.u?this.u:nM),this.g.onreadystatechange=ms(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(o){return void LF(this,o)}if(n=t||"",t=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)t.set(r,i[r]);else{if("function"!=typeof i.keys||"function"!=typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const o of i.keys())t.set(o,i.get(o))}i=Array.from(t.keys()).find(o=>"content-type"==o.toLowerCase()),r=Wt.FormData&&n instanceof Wt.FormData,!(0<=Gk(RH,e))||i||r||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,u]of t)this.g.setRequestHeader(o,u);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{BF(this),0<this.B&&((this.K=function PH(n){return ty&&function Q3(){return function q3(n){var e=Y3;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=Zk(String(tI)).split("."),t=Zk("9").split("."),i=Math.max(e.length,t.length);for(let u=0;0==n&&u<i;u++){var r=e[u]||"",o=t[u]||"";do{if(r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==r[0].length&&0==o[0].length)break;n=Ox(0==r[1].length?0:parseInt(r[1],10),0==o[1].length?0:parseInt(o[1],10))||Ox(0==r[2].length,0==o[2].length)||Ox(r[2],o[2]),r=r[3],o=o[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ms(this.qa,this)):this.A=Jx(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(o){LF(this,o)}},St.qa=function(){typeof Nx<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Qr(this,"timeout"),this.abort(8))},St.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Qr(this,"complete"),Qr(this,"abort"),_I(this))},St.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),_I(this,!0)),Hi.X.M.call(this)},St.Ha=function(){this.s||(this.F||this.v||this.l?UF(this):this.fb())},St.fb=function(){UF(this)},St.aa=function(){try{return 2<ku(this)?this.g.status:-1}catch{return-1}},St.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},St.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),MH(e)}},St.Ea=function(){return this.m},St.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(St=GF.prototype).ma=8,St.G=1,St.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const r=new Xb(this,this.j,n,void 0);let o=this.s;if(this.S&&(o?(o=Yk(o),Jk(o,this.S)):o=this.S),null!==this.o||this.N||(r.H=o,o=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var i=this.i[t];if(void 0===(i="__data__"in i.g&&"string"==typeof(i=i.g.__data__)?i.length:void 0))break;if(4096<(e+=i)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=WF(this,r,e),Ti(t=Pu(this.F),"RID",n),Ti(t,"CVER",22),this.D&&Ti(t,"X-HTTP-Session-Id",this.D),cw(this,t),o&&(this.N?e="headers="+encodeURIComponent(String(HF(o)))+"&"+e:this.o&&uM(t,this.o,o)),aM(this.h,r),this.Ya&&Ti(t,"TYPE","init"),this.O?(Ti(t,"$req",e),Ti(t,"SID","null"),r.Z=!0,rM(r,t,null)):rM(r,t,e),this.G=2}}else 3==this.G&&(n?ZF(this,n):0==this.i.length||MF(this.h)||ZF(this))},St.Ia=function(){if(this.u=null,zF(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=Qb(ms(this.eb,this),n)}},St.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Ns(10),yI(this),zF(this))},St.cb=function(){null!=this.v&&(this.v=null,yI(this),hM(this),Ns(19))},St.kb=function(n){n?(this.j.info("Successfully pinged google.com"),Ns(2)):(this.j.info("Failed to ping google.com"),Ns(1))},(St=eL.prototype).xa=function(){},St.wa=function(){},St.va=function(){},St.ua=function(){},St.Ra=function(){},wI.prototype.g=function(n,e){return new Vo(n,e)},Yr(Vo,Or),Vo.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;Ns(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=JF(n,null,n.V),vI(n)},Vo.prototype.close=function(){dM(this.g)},Vo.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=zx(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&vI(e)},Vo.prototype.M=function(){this.g.l=null,delete this.j,dM(this.g),delete this.g,Vo.X.M.call(this)},Yr(tL,eM),Yr(nL,tM),Yr(ry,eL),ry.prototype.xa=function(){Qr(this.g,"a")},ry.prototype.wa=function(n){Qr(this.g,new tL(n))},ry.prototype.va=function(n){Qr(this.g,new nL)},ry.prototype.ua=function(){Qr(this.g,"b")},wI.prototype.createWebChannel=wI.prototype.g,Vo.prototype.send=Vo.prototype.u,Vo.prototype.open=Vo.prototype.m,Vo.prototype.close=Vo.prototype.close,lI.NO_ERROR=0,lI.TIMEOUT=8,lI.HTTP_ERROR=6,gF.COMPLETE="complete",_F.EventType=Jb,Jb.OPEN="a",Jb.CLOSE="b",Jb.ERROR="c",Jb.MESSAGE="d",Or.prototype.listen=Or.prototype.N,Hi.prototype.listenOnce=Hi.prototype.O,Hi.prototype.getLastError=Hi.prototype.Oa,Hi.prototype.getLastErrorCode=Hi.prototype.Ea,Hi.prototype.getStatus=Hi.prototype.aa,Hi.prototype.getResponseJson=Hi.prototype.Sa,Hi.prototype.getResponseText=Hi.prototype.fa,Hi.prototype.send=Hi.prototype.da,Hi.prototype.setWithCredentials=Hi.prototype.Ka;var FH=Ru.createWebChannelTransport=function(){return new wI},LH=Ru.getStatEventTarget=function(){return aI()},pM=Ru.ErrorCode=lI,VH=Ru.EventType=gF,UH=Ru.Event=Gp,iL=Ru.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},BH=Ru.FetchXmlHttpFactory=sw,DI=Ru.WebChannel=_F,jH=Ru.XhrIo=Hi;const rL="@firebase/firestore";class Rr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Rr.UNAUTHENTICATED=new Rr(null),Rr.GOOGLE_CREDENTIALS=new Rr("google-credentials-uid"),Rr.FIRST_PARTY=new Rr("first-party-uid"),Rr.MOCK_USER=new Rr("mock-user");let sy="9.15.0";const Nh=new ma.Yd("@firebase/firestore");function gM(){return Nh.logLevel}function Ge(n,...e){if(Nh.logLevel<=ma.in.DEBUG){const t=e.map(mM);Nh.debug(`Firestore (${sy}): ${n}`,...t)}}function er(n,...e){if(Nh.logLevel<=ma.in.ERROR){const t=e.map(mM);Nh.error(`Firestore (${sy}): ${n}`,...t)}}function qp(n,...e){if(Nh.logLevel<=ma.in.WARN){const t=e.map(mM);Nh.warn(`Firestore (${sy}): ${n}`,...t)}}function mM(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function _t(n="Unexpected state"){const e=`FIRESTORE (${sy}) INTERNAL ASSERTION FAILED: `+n;throw er(e),new Error(e)}function Tt(n,e){n||_t()}function st(n,e){return n}const pe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ke extends k.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class br{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class sL{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class $H{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Rr.UNAUTHENTICATED))}shutdown(){}}class ZH{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class WH{constructor(e){this.t=e,this.currentUser=Rr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var i=this;let r=this.i;const o=y=>this.i!==r?(r=this.i,t(y)):Promise.resolve();let u=new br;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new br,e.enqueueRetryable(()=>o(this.currentUser))};const h=()=>{const y=u;e.enqueueRetryable((0,ge.Z)(function*(){yield y.promise,yield o(i.currentUser)}))},g=y=>{Ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(y=>g(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?g(y):(Ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new br)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(Ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Tt("string"==typeof i.accessToken),new sL(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Tt(null===e||"string"==typeof e),new Rr(e)}}class qH{constructor(e,t,i,r){this.h=e,this.l=t,this.m=i,this.g=r,this.type="FirstParty",this.user=Rr.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Tt(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class zH{constructor(e,t,i,r){this.h=e,this.l=t,this.m=i,this.g=r}getToken(){return Promise.resolve(new qH(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(Rr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class oL{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class KH{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const i=o=>{null!=o.error&&Ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const u=o.token!==this.A;return this.A=o.token,Ge("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};const r=o=>{Ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.T.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){const o=this.T.getImmediate({optional:!0});o?r(o):Ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Tt("string"==typeof t.token),this.A=t.token,new oL(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function YH(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}class aL{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const r=YH(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<t&&(i+=e.charAt(r[o]%e.length))}return i}}function qt(n,e){return n<e?-1:n>e?1:0}function oy(n,e,t){return n.length===e.length&&n.every((i,r)=>t(i,e[r]))}function lL(n){return n+"\0"}class Si{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ke(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ke(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ke(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ke(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Si.fromMillis(Date.now())}static fromDate(e){return Si.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new Si(t,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?qt(this.nanoseconds,e.nanoseconds):qt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ot{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ot(e)}static min(){return new Ot(new Si(0,0))}static max(){return new Ot(new Si(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class uw{constructor(e,t,i){void 0===t?t=0:t>e.length&&_t(),void 0===i?i=e.length-t:i>e.length-t&&_t(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return 0===uw.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof uw?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let r=0;r<i;r++){const o=e.get(r),u=t.get(r);if(o<u)return-1;if(o>u)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Cn extends uw{construct(e,t,i){return new Cn(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new ke(pe.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(r=>r.length>0))}return new Cn(t)}static emptyPath(){return new Cn([])}}const QH=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Gi extends uw{construct(e,t,i){return new Gi(e,t,i)}static isValidIdentifier(e){return QH.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Gi.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Gi(["__name__"])}static fromServerFormat(e){const t=[];let i="",r=0;const o=()=>{if(0===i.length)throw new ke(pe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let u=!1;for(;r<e.length;){const h=e[r];if("\\"===h){if(r+1===e.length)throw new ke(pe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[r+1];if("\\"!==g&&"."!==g&&"`"!==g)throw new ke(pe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=g,r+=2}else"`"===h?(u=!u,r++):"."!==h||u?(i+=h,r++):(o(),r++)}if(o(),u)throw new ke(pe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Gi(t)}static emptyPath(){return new Gi([])}}class it{constructor(e){this.path=e}static fromPath(e){return new it(Cn.fromString(e))}static fromName(e){return new it(Cn.fromString(e).popFirst(5))}static empty(){return new it(Cn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Cn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Cn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new it(new Cn(e.slice()))}}class CI{constructor(e,t,i,r){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=r}}function _M(n){return n.fields.find(e=>2===e.kind)}function zp(n){return n.fields.filter(e=>2!==e.kind)}CI.UNKNOWN_ID=-1;class EI{constructor(e,t){this.fieldPath=e,this.kind=t}}class dw{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new dw(0,Uo.min())}}function cL(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=Ot.fromTimestamp(1e9===i?new Si(t+1,0):new Si(t,i));return new Uo(r,it.empty(),e)}function uL(n){return new Uo(n.readTime,n.key,-1)}class Uo{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Uo(Ot.min(),it.empty(),-1)}static max(){return new Uo(Ot.max(),it.empty(),-1)}}function yM(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=it.comparator(n.documentKey,e.documentKey),0!==t?t:qt(n.largestBatchId,e.largestBatchId))}const dL="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class hL{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function xh(n){return vM.apply(this,arguments)}function vM(){return vM=(0,ge.Z)(function*(n){if(n.code!==pe.FAILED_PRECONDITION||n.message!==dL)throw n;Ge("LocalStore","Unexpectedly lost primary lease")}),vM.apply(this,arguments)}class le{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&_t(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new le((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(t,o).next(i,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof le?t:le.resolve(t)}catch(t){return le.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):le.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):le.reject(t)}static resolve(e){return new le((t,i)=>{t(e)})}static reject(e){return new le((t,i)=>{i(e)})}static waitFor(e){return new le((t,i)=>{let r=0,o=0,u=!1;e.forEach(h=>{++r,h.next(()=>{++o,u&&o===r&&t()},g=>i(g))}),u=!0,o===r&&t()})}static or(e){let t=le.resolve(!1);for(const i of e)t=t.next(r=>r?le.resolve(r):i());return t}static forEach(e,t){const i=[];return e.forEach((r,o)=>{i.push(t.call(this,r,o))}),this.waitFor(i)}static mapArray(e,t){return new le((i,r)=>{const o=e.length,u=new Array(o);let h=0;for(let g=0;g<o;g++){const y=g;t(e[y]).next(C=>{u[y]=C,++h,h===o&&i(u)},C=>r(C))}})}static doWhile(e,t){return new le((i,r)=>{const o=()=>{!0===e()?t().next(()=>{o()},r):i()};o()})}}class II{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new br,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new hw(e,t.error)):this.P.resolve()},this.transaction.onerror=i=>{const r=bM(i.target.error);this.P.reject(new hw(e,r))}}static open(e,t,i,r){try{return new II(t,e.transaction(r,i))}catch(o){throw new hw(t,o)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(Ge("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new tG(t)}}class nl{constructor(e,t,i){this.name=e,this.version=t,this.S=i,12.2===nl.D((0,k.z$)())&&er("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ge("SimpleDb","Removing database:",e),Kp(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,k.hl)())return!1;if(nl.N())return!0;const e=(0,k.z$)(),t=nl.D(e),i=0<t&&t<10,r=nl.k(e),o=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||o)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(i)}static k(e){const t=e.match(/Android ([\d.]+)/i),i=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(i)}F(e){var t=this;return(0,ge.Z)(function*(){return t.db||(Ge("SimpleDb","Opening database:",t.name),t.db=yield new Promise((i,r)=>{const o=indexedDB.open(t.name,t.version);o.onsuccess=u=>{i(u.target.result)},o.onblocked=()=>{r(new hw(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=u=>{const h=u.target.error;r("VersionError"===h.name?new ke(pe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===h.name?new ke(pe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h):new hw(e,h))},o.onupgradeneeded=u=>{Ge("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',u.oldVersion),t.S.$(u.target.result,o.transaction,u.oldVersion,t.version).next(()=>{Ge("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=i=>t.B(i)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,i,r){var o=this;return(0,ge.Z)(function*(){const u="readonly"===t;let h=0;for(;;){++h;try{o.db=yield o.F(e);const g=II.open(o.db,e,u?"readonly":"readwrite",i),y=r(g).next(C=>(g.V(),C)).catch(C=>(g.abort(C),le.reject(C))).toPromise();return y.catch(()=>{}),yield g.v,y}catch(g){const y=g,C="FirebaseError"!==y.name&&h<3;if(Ge("SimpleDb","Transaction failed with error:",y.message,"Retrying:",C),o.close(),!C)return Promise.reject(y)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class eG{constructor(e){this.q=e,this.U=!1,this.K=null}get isDone(){return this.U}get G(){return this.K}set cursor(e){this.q=e}done(){this.U=!0}j(e){this.K=e}delete(){return Kp(this.q.delete())}}class hw extends ke{constructor(e,t){super(pe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Mh(n){return"IndexedDbTransactionError"===n.name}class tG{constructor(e){this.store=e}put(e,t){let i;return void 0!==t?(Ge("SimpleDb","PUT",this.store.name,e,t),i=this.store.put(t,e)):(Ge("SimpleDb","PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),Kp(i)}add(e){return Ge("SimpleDb","ADD",this.store.name,e,e),Kp(this.store.add(e))}get(e){return Kp(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ge("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ge("SimpleDb","DELETE",this.store.name,e),Kp(this.store.delete(e))}count(){return Ge("SimpleDb","COUNT",this.store.name),Kp(this.store.count())}W(e,t){const i=this.options(e,t);if(i.index||"function"!=typeof this.store.getAll){const r=this.cursor(i),o=[];return this.H(r,(u,h)=>{o.push(h)}).next(()=>o)}{const r=this.store.getAll(i.range);return new le((o,u)=>{r.onerror=h=>{u(h.target.error)},r.onsuccess=h=>{o(h.target.result)}})}}J(e,t){const i=this.store.getAll(e,null===t?void 0:t);return new le((r,o)=>{i.onerror=u=>{o(u.target.error)},i.onsuccess=u=>{r(u.target.result)}})}Y(e,t){Ge("SimpleDb","DELETE ALL",this.store.name);const i=this.options(e,t);i.X=!1;const r=this.cursor(i);return this.H(r,(o,u,h)=>h.delete())}Z(e,t){let i;t?i=e:(i={},t=e);const r=this.cursor(i);return this.H(r,t)}tt(e){const t=this.cursor({});return new le((i,r)=>{t.onerror=o=>{const u=bM(o.target.error);r(u)},t.onsuccess=o=>{const u=o.target.result;u?e(u.primaryKey,u.value).next(h=>{h?u.continue():i()}):i()}})}H(e,t){const i=[];return new le((r,o)=>{e.onerror=u=>{o(u.target.error)},e.onsuccess=u=>{const h=u.target.result;if(!h)return void r();const g=new eG(h),y=t(h.primaryKey,h.value,g);if(y instanceof le){const C=y.catch(I=>(g.done(),le.reject(I)));i.push(C)}g.isDone?r():null===g.G?h.continue():h.continue(g.G)}}).next(()=>le.waitFor(i))}options(e,t){let i;return void 0!==e&&("string"==typeof e?i=e:t=e),{index:i,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const i=this.store.index(e.index);return e.X?i.openKeyCursor(e.range,t):i.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Kp(n){return new le((e,t)=>{n.onsuccess=i=>{e(i.target.result)},n.onerror=i=>{const r=bM(i.target.error);t(r)}})}let fL=!1;function bM(n){const e=nl.D((0,k.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const i=new ke("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return fL||(fL=!0,setTimeout(()=>{throw i},0)),i}}return n}class nG{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;Ge("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ge.Z)(function*(){t.task=null;try{Ge("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(i){Mh(i)?Ge("IndexBackiller","Ignoring IndexedDB error during index backfill: ",i):yield xh(i)}yield t.nt(6e4)}))}}class iG{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,ge.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",i=>t.it(i,e))})()}it(e,t){const i=new Set;let r=t,o=!0;return le.doWhile(()=>!0===o&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(u=>{if(null!==u&&!i.has(u))return Ge("IndexBackiller",`Processing collection: ${u}`),this.rt(e,u,r).next(h=>{r-=h,i.add(u)});o=!1})).next(()=>t-r)}rt(e,t,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(r=>this.localStore.localDocuments.getNextDocuments(e,t,r,i).next(o=>{const u=o.changes;return this.localStore.indexManager.updateIndexEntries(e,u).next(()=>this.ot(r,o)).next(h=>(Ge("IndexBackiller",`Updating offset: ${h}`),this.localStore.indexManager.updateCollectionGroup(e,t,h))).next(()=>u.size)}))}ot(e,t){let i=e;return t.changes.forEach((r,o)=>{const u=uL(o);yM(u,i)>0&&(i=u)}),new Uo(i.readTime,i.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Bo=(()=>{class n{constructor(t,i){this.previousValue=t,i&&(i.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>i.writeSequenceNumber(r))}ut(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ct&&this.ct(t),t}}return n.at=-1,n})();class rG{constructor(e,t,i,r,o,u,h,g){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=u,this.autoDetectLongPolling=h,this.useFetchStreams=g}}class Oh{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Oh("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Oh&&e.projectId===this.projectId&&e.database===this.database}}function pL(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Yp(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function gL(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function fw(n){return null==n}function pw(n){return 0===n&&1/n==-1/0}function mL(n){return"number"==typeof n&&Number.isInteger(n)&&!pw(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class wr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new wr(t)}static fromUint8Array(e){const t=function(i){let r="";for(let o=0;o<i.length;++o)r+=String.fromCharCode(i[o]);return r}(e);return new wr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return qt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}wr.EMPTY_BYTE_STRING=new wr("");const oG=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Rh(n){if(Tt(!!n),"string"==typeof n){let e=0;const t=oG.exec(n);if(Tt(!!t),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:$i(n.seconds),nanos:$i(n.nanos)}}function $i(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Qp(n){return"string"==typeof n?wr.fromBase64String(n):wr.fromUint8Array(n)}function wM(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function _L(n){const e=n.mapValue.fields.__previous_value__;return wM(e)?_L(e):e}function gw(n){const e=Rh(n.mapValue.fields.__local_write_time__.timestampValue);return new Si(e.seconds,e.nanos)}const Ph={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},TI={nullValue:"NULL_VALUE"};function Jp(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?wM(n)?4:wL(n)?9007199254740991:10:_t()}function hc(n,e){if(n===e)return!0;const t=Jp(n);if(t!==Jp(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return gw(n).isEqual(gw(e));case 3:return function(i,r){if("string"==typeof i.timestampValue&&"string"==typeof r.timestampValue&&i.timestampValue.length===r.timestampValue.length)return i.timestampValue===r.timestampValue;const o=Rh(i.timestampValue),u=Rh(r.timestampValue);return o.seconds===u.seconds&&o.nanos===u.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return r=e,Qp(n.bytesValue).isEqual(Qp(r.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,r){return $i(i.geoPointValue.latitude)===$i(r.geoPointValue.latitude)&&$i(i.geoPointValue.longitude)===$i(r.geoPointValue.longitude)}(n,e);case 2:return function(i,r){if("integerValue"in i&&"integerValue"in r)return $i(i.integerValue)===$i(r.integerValue);if("doubleValue"in i&&"doubleValue"in r){const o=$i(i.doubleValue),u=$i(r.doubleValue);return o===u?pw(o)===pw(u):isNaN(o)&&isNaN(u)}return!1}(n,e);case 9:return oy(n.arrayValue.values||[],e.arrayValue.values||[],hc);case 10:return function(i,r){const o=i.mapValue.fields||{},u=r.mapValue.fields||{};if(pL(o)!==pL(u))return!1;for(const h in o)if(o.hasOwnProperty(h)&&(void 0===u[h]||!hc(o[h],u[h])))return!1;return!0}(n,e);default:return _t()}var r}function mw(n,e){return void 0!==(n.values||[]).find(t=>hc(t,e))}function kh(n,e){if(n===e)return 0;const t=Jp(n),i=Jp(e);if(t!==i)return qt(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return qt(n.booleanValue,e.booleanValue);case 2:return function(r,o){const u=$i(r.integerValue||r.doubleValue),h=$i(o.integerValue||o.doubleValue);return u<h?-1:u>h?1:u===h?0:isNaN(u)?isNaN(h)?0:-1:1}(n,e);case 3:return yL(n.timestampValue,e.timestampValue);case 4:return yL(gw(n),gw(e));case 5:return qt(n.stringValue,e.stringValue);case 6:return function(r,o){const u=Qp(r),h=Qp(o);return u.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(r,o){const u=r.split("/"),h=o.split("/");for(let g=0;g<u.length&&g<h.length;g++){const y=qt(u[g],h[g]);if(0!==y)return y}return qt(u.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(r,o){const u=qt($i(r.latitude),$i(o.latitude));return 0!==u?u:qt($i(r.longitude),$i(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(r,o){const u=r.values||[],h=o.values||[];for(let g=0;g<u.length&&g<h.length;++g){const y=kh(u[g],h[g]);if(y)return y}return qt(u.length,h.length)}(n.arrayValue,e.arrayValue);case 10:return function(r,o){if(r===Ph.mapValue&&o===Ph.mapValue)return 0;if(r===Ph.mapValue)return 1;if(o===Ph.mapValue)return-1;const u=r.fields||{},h=Object.keys(u),g=o.fields||{},y=Object.keys(g);h.sort(),y.sort();for(let C=0;C<h.length&&C<y.length;++C){const I=qt(h[C],y[C]);if(0!==I)return I;const A=kh(u[h[C]],g[y[C]]);if(0!==A)return A}return qt(h.length,y.length)}(n.mapValue,e.mapValue);default:throw _t()}}function yL(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return qt(n,e);const t=Rh(n),i=Rh(e),r=qt(t.seconds,i.seconds);return 0!==r?r:qt(t.nanos,i.nanos)}function ay(n){return DM(n)}function DM(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(i){const r=Rh(i);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Qp(n.bytesValue).toBase64():"referenceValue"in n?it.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(i){let r="[",o=!0;for(const u of i.values||[])o?o=!1:r+=",",r+=DM(u);return r+"]"}(n.arrayValue):"mapValue"in n?function(i){const r=Object.keys(i.fields||{}).sort();let o="{",u=!0;for(const h of r)u?u=!1:o+=",",o+=`${h}:${DM(i.fields[h])}`;return o+"}"}(n.mapValue):_t();var e}function Xp(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function CM(n){return!!n&&"integerValue"in n}function _w(n){return!!n&&"arrayValue"in n}function vL(n){return!!n&&"nullValue"in n}function bL(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function SI(n){return!!n&&"mapValue"in n}function yw(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Yp(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=yw(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=yw(n.arrayValue.values[t]);return e}return Object.assign({},n)}function wL(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function aG(n){return"nullValue"in n?TI:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Xp(Oh.empty(),it.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:_t()}function lG(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Xp(Oh.empty(),it.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Ph:_t()}function DL(n,e){const t=kh(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function CL(n,e){const t=kh(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Fh{constructor(e,t){this.position=e,this.inclusive=t}}function EL(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){const o=e[r],u=n.position[r];if(i=o.field.isKeyField()?it.comparator(it.fromName(u.referenceValue),t.key):kh(u,t.data.field(o.field)),"desc"===o.dir&&(i*=-1),0!==i)break}return i}function IL(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!hc(n.position[t],e.position[t]))return!1;return!0}class TL{}class mn extends TL{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,i):new cG(e,t,i):"array-contains"===t?new hG(e,i):"in"===t?new PL(e,i):"not-in"===t?new fG(e,i):"array-contains-any"===t?new pG(e,i):new mn(e,t,i)}static createKeyFieldInFilter(e,t,i){return"in"===t?new uG(e,i):new dG(e,i)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(kh(t,this.value)):null!==t&&Jp(this.value)===Jp(t)&&this.matchesComparison(kh(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return _t()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Gn extends TL{constructor(e,t){super(),this.filters=e,this.op=t,this.ht=null}static create(e,t){return new Gn(e,t)}matches(e){return ly(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ht||(this.ht=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(t=>t.isInequality());return null!==e?e.field:null}lt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function ly(n){return"and"===n.op}function EM(n){return"or"===n.op}function SL(n){return AL(n)&&ly(n)}function AL(n){for(const e of n.filters)if(e instanceof Gn)return!1;return!0}function NL(n){if(n instanceof mn)return n.field.canonicalString()+n.op.toString()+ay(n.value);{const e=n.filters.map(t=>NL(t)).join(",");return`${n.op}(${e})`}}function xL(n,e){return n instanceof mn?(t=n,(i=e)instanceof mn&&t.op===i.op&&t.field.isEqual(i.field)&&hc(t.value,i.value)):n instanceof Gn?function(t,i){return i instanceof Gn&&t.op===i.op&&t.filters.length===i.filters.length&&t.filters.reduce((r,o,u)=>r&&xL(o,i.filters[u]),!0)}(n,e):void _t();var t,i}function ML(n,e){const t=n.filters.concat(e);return Gn.create(t,n.op)}function OL(n){return n instanceof mn?`${(e=n).field.canonicalString()} ${e.op} ${ay(e.value)}`:n instanceof Gn?function(e){return e.op.toString()+" {"+e.getFilters().map(OL).join(" ,")+"}"}(n):"Filter";var e}class cG extends mn{constructor(e,t,i){super(e,t,i),this.key=it.fromName(i.referenceValue)}matches(e){const t=it.comparator(e.key,this.key);return this.matchesComparison(t)}}class uG extends mn{constructor(e,t){super(e,"in",t),this.keys=RL(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class dG extends mn{constructor(e,t){super(e,"not-in",t),this.keys=RL(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function RL(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(i=>it.fromName(i.referenceValue))}class hG extends mn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return _w(t)&&mw(t.arrayValue,this.value)}}class PL extends mn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&mw(this.value.arrayValue,t)}}class fG extends mn{constructor(e,t){super(e,"not-in",t)}matches(e){if(mw(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!mw(this.value.arrayValue,t)}}class pG extends mn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!_w(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>mw(this.value.arrayValue,i))}}class cy{constructor(e,t="asc"){this.field=e,this.dir=t}}function gG(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class Zi{constructor(e,t){this.comparator=e,this.root=t||Jr.EMPTY}insert(e,t){return new Zi(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Jr.BLACK,null,null))}remove(e){return new Zi(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Jr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(0===i)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(0===r)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new AI(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new AI(this.root,e,this.comparator,!1)}getReverseIterator(){return new AI(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new AI(this.root,e,this.comparator,!0)}}class AI{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?i(e.key,t):1,t&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(0===o){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Jr{constructor(e,t,i,r,o){this.key=e,this.value=t,this.color=i??Jr.RED,this.left=r??Jr.EMPTY,this.right=o??Jr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,o){return new Jr(e??this.key,t??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this;const o=i(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,t,i),null):0===o?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Jr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Jr.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Jr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Jr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw _t();const e=this.left.check();if(e!==this.right.check())throw _t();return e+(this.isRed()?0:1)}}Jr.EMPTY=null,Jr.RED=!0,Jr.BLACK=!1,Jr.EMPTY=new class{constructor(){this.size=0}get key(){throw _t()}get value(){throw _t()}get color(){throw _t()}get left(){throw _t()}get right(){throw _t()}copy(n,e,t,i,r){return this}insert(n,e,t){return new Jr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Yn{constructor(e){this.comparator=e,this.data=new Zi(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new kL(this.data.getIterator())}getIteratorFrom(e){return new kL(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof Yn)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,o=i.getNext().key;if(0!==this.comparator(r,o))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Yn(this.comparator);return t.data=e,t}}class kL{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function uy(n){return n.hasNext()?n.getNext():void 0}class jo{constructor(e){this.fields=e,e.sort(Gi.comparator)}static empty(){return new jo([])}unionWith(e){let t=new Yn(Gi.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new jo(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return oy(this.fields,e.fields,(t,i)=>t.isEqual(i))}}class Xr{constructor(e){this.value=e}static empty(){return new Xr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!SI(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=yw(t)}setAll(e){let t=Gi.emptyPath(),i={},r=[];e.forEach((u,h)=>{if(!t.isImmediateParentOf(h)){const g=this.getFieldsMap(t);this.applyChanges(g,i,r),i={},r=[],t=h.popLast()}u?i[h.lastSegment()]=yw(u):r.push(h.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,i,r)}delete(e){const t=this.field(e.popLast());SI(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return hc(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];SI(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){Yp(t,(r,o)=>e[r]=o);for(const r of i)delete e[r]}clone(){return new Xr(yw(this.value))}}function FL(n){const e=[];return Yp(n.fields,(t,i)=>{const r=new Gi([t]);if(SI(i)){const o=FL(i.mapValue).fields;if(0===o.length)e.push(r);else for(const u of o)e.push(r.child(u))}else e.push(r)}),new jo(e)}class _i{constructor(e,t,i,r,o,u,h){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.createTime=o,this.data=u,this.documentState=h}static newInvalidDocument(e){return new _i(e,0,Ot.min(),Ot.min(),Ot.min(),Xr.empty(),0)}static newFoundDocument(e,t,i,r){return new _i(e,1,t,Ot.min(),i,r,0)}static newNoDocument(e,t){return new _i(e,2,t,Ot.min(),Ot.min(),Xr.empty(),0)}static newUnknownDocument(e,t){return new _i(e,3,t,Ot.min(),Ot.min(),Xr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ot.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Xr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Xr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ot.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof _i&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new _i(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class mG{constructor(e,t=null,i=[],r=[],o=null,u=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=u,this.endAt=h,this.ft=null}}function IM(n,e=null,t=[],i=[],r=null,o=null,u=null){return new mG(n,e,t,i,r,o,u)}function eg(n){const e=st(n);if(null===e.ft){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>NL(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>{return(r=i).field.canonicalString()+r.dir;var r}).join(","),fw(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>ay(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>ay(i)).join(",")),e.ft=t}return e.ft}function vw(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!gG(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!xL(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!IL(n.startAt,e.startAt)&&IL(n.endAt,e.endAt)}function NI(n){return it.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function xI(n,e){return n.filters.filter(t=>t instanceof mn&&t.field.isEqual(e))}function LL(n,e,t){let i=TI,r=!0;for(const o of xI(n,e)){let u=TI,h=!0;switch(o.op){case"<":case"<=":u=aG(o.value);break;case"==":case"in":case">=":u=o.value;break;case">":u=o.value,h=!1;break;case"!=":case"not-in":u=TI}DL({value:i,inclusive:r},{value:u,inclusive:h})<0&&(i=u,r=h)}if(null!==t)for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const u=t.position[o];DL({value:i,inclusive:r},{value:u,inclusive:t.inclusive})<0&&(i=u,r=t.inclusive);break}return{value:i,inclusive:r}}function VL(n,e,t){let i=Ph,r=!0;for(const o of xI(n,e)){let u=Ph,h=!0;switch(o.op){case">=":case">":u=lG(o.value),h=!1;break;case"==":case"in":case"<=":u=o.value;break;case"<":u=o.value,h=!1;break;case"!=":case"not-in":u=Ph}CL({value:i,inclusive:r},{value:u,inclusive:h})>0&&(i=u,r=h)}if(null!==t)for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const u=t.position[o];CL({value:i,inclusive:r},{value:u,inclusive:t.inclusive})>0&&(i=u,r=t.inclusive);break}return{value:i,inclusive:r}}class Fu{constructor(e,t=null,i=[],r=[],o=null,u="F",h=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=u,this.startAt=h,this.endAt=g,this.dt=null,this._t=null}}function UL(n,e,t,i,r,o,u,h){return new Fu(n,e,t,i,r,o,u,h)}function dy(n){return new Fu(n)}function BL(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function TM(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function MI(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function SM(n){return null!==n.collectionGroup}function tg(n){const e=st(n);if(null===e.dt){e.dt=[];const t=MI(e),i=TM(e);if(null!==t&&null===i)t.isKeyField()||e.dt.push(new cy(t)),e.dt.push(new cy(Gi.keyField(),"asc"));else{let r=!1;for(const o of e.explicitOrderBy)e.dt.push(o),o.field.isKeyField()&&(r=!0);if(!r){const o=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new cy(Gi.keyField(),o))}}}return e.dt}function xs(n){const e=st(n);if(!e._t)if("F"===e.limitType)e._t=IM(e.path,e.collectionGroup,tg(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const o of tg(e))t.push(new cy(o.field,"desc"===o.dir?"asc":"desc"));const i=e.endAt?new Fh(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Fh(e.startAt.position,e.startAt.inclusive):null;e._t=IM(e.path,e.collectionGroup,t,e.filters,e.limit,i,r)}return e._t}function AM(n,e){e.getFirstInequalityField(),MI(n);const t=n.filters.concat([e]);return new Fu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function OI(n,e,t){return new Fu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function bw(n,e){return vw(xs(n),xs(e))&&n.limitType===e.limitType}function jL(n){return`${eg(xs(n))}|lt:${n.limitType}`}function NM(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(i=>OL(i)).join(", ")}]`),fw(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(i=>{return`${(r=i).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>ay(i)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>ay(i)).join(",")),`Target(${t})`}(xs(n))}; limitType=${n.limitType})`}function xM(n,e){return e.isFoundDocument()&&function(t,i){const r=i.key.path;return null!==t.collectionGroup?i.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(r):it.isDocumentKey(t.path)?t.path.isEqual(r):t.path.isImmediateParentOf(r)}(n,e)&&function(t,i){for(const r of tg(t))if(!r.field.isKeyField()&&null===i.data.field(r.field))return!1;return!0}(n,e)&&function(t,i){for(const r of t.filters)if(!r.matches(i))return!1;return!0}(n,e)&&(i=e,!((t=n).startAt&&!function(r,o,u){const h=EL(r,o,u);return r.inclusive?h<=0:h<0}(t.startAt,tg(t),i)||t.endAt&&!function(r,o,u){const h=EL(r,o,u);return r.inclusive?h>=0:h>0}(t.endAt,tg(t),i)));var t,i}function HL(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function GL(n){return(e,t)=>{let i=!1;for(const r of tg(n)){const o=_G(r,e,t);if(0!==o)return o;i=i||r.field.isKeyField()}return 0}}function _G(n,e,t){const i=n.field.isKeyField()?it.comparator(e.key,t.key):function(r,o,u){const h=o.data.field(r),g=u.data.field(r);return null!==h&&null!==g?kh(h,g):_t()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return _t()}}function $L(n,e){if(n.wt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:pw(e)?"-0":e}}function ZL(n){return{integerValue:""+n}}function WL(n,e){return mL(e)?ZL(e):$L(n,e)}class RI{constructor(){this._=void 0}}function yG(n,e,t){return n instanceof hy?function(i,r){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return r&&(o.fields.__previous_value__=r),{mapValue:o}}(t,e):n instanceof ng?zL(n,e):n instanceof ig?KL(n,e):function(i,r){const o=qL(i,r),u=YL(o)+YL(i.gt);return CM(o)&&CM(i.gt)?ZL(u):$L(i.yt,u)}(n,e)}function vG(n,e,t){return n instanceof ng?zL(n,e):n instanceof ig?KL(n,e):t}function qL(n,e){return n instanceof fy?CM(t=e)||(i=t)&&"doubleValue"in i?e:{integerValue:0}:null;var i,t}class hy extends RI{}class ng extends RI{constructor(e){super(),this.elements=e}}function zL(n,e){const t=QL(e);for(const i of n.elements)t.some(r=>hc(r,i))||t.push(i);return{arrayValue:{values:t}}}class ig extends RI{constructor(e){super(),this.elements=e}}function KL(n,e){let t=QL(e);for(const i of n.elements)t=t.filter(r=>!hc(r,i));return{arrayValue:{values:t}}}class fy extends RI{constructor(e,t){super(),this.yt=e,this.gt=t}}function YL(n){return $i(n.integerValue||n.doubleValue)}function QL(n){return _w(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class ww{constructor(e,t){this.field=e,this.transform=t}}class wG{constructor(e,t){this.version=e,this.transformResults=t}}class Ai{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ai}static exists(e){return new Ai(void 0,e)}static updateTime(e){return new Ai(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function PI(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class kI{}function JL(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new gy(n.key,Ai.none()):new py(n.key,n.data,Ai.none());{const t=n.data,i=Xr.empty();let r=new Yn(Gi.comparator);for(let o of e.fields)if(!r.has(o)){let u=t.field(o);null===u&&o.length>1&&(o=o.popLast(),u=t.field(o)),null===u?i.delete(o):i.set(o,u),r=r.add(o)}return new Lu(n.key,i,new jo(r.toArray()),Ai.none())}}function DG(n,e,t){n instanceof py?function(i,r,o){const u=i.value.clone(),h=t2(i.fieldTransforms,r,o.transformResults);u.setAll(h),r.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(n,e,t):n instanceof Lu?function(i,r,o){if(!PI(i.precondition,r))return void r.convertToUnknownDocument(o.version);const u=t2(i.fieldTransforms,r,o.transformResults),h=r.data;h.setAll(e2(i)),h.setAll(u),r.convertToFoundDocument(o.version,h).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Dw(n,e,t,i){return n instanceof py?function(r,o,u,h){if(!PI(r.precondition,o))return u;const g=r.value.clone(),y=n2(r.fieldTransforms,h,o);return g.setAll(y),o.convertToFoundDocument(o.version,g).setHasLocalMutations(),null}(n,e,t,i):n instanceof Lu?function(r,o,u,h){if(!PI(r.precondition,o))return u;const g=n2(r.fieldTransforms,h,o),y=o.data;return y.setAll(e2(r)),y.setAll(g),o.convertToFoundDocument(o.version,y).setHasLocalMutations(),null===u?null:u.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(C=>C.field))}(n,e,t,i):(u=t,PI(n.precondition,o=e)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):u);var o,u}function CG(n,e){let t=null;for(const i of n.fieldTransforms){const r=e.data.field(i.field),o=qL(i.transform,r||null);null!=o&&(null===t&&(t=Xr.empty()),t.set(i.field,o))}return t||null}function XL(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===i||t&&i&&oy(t,i,(r,o)=>function bG(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(t=n.transform)instanceof ng&&i instanceof ng||t instanceof ig&&i instanceof ig?oy(t.elements,i.elements,hc):t instanceof fy&&i instanceof fy?hc(t.gt,i.gt):t instanceof hy&&i instanceof hy);var t,i}(r,o))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,i}class py extends kI{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Lu extends kI{constructor(e,t,i,r,o=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function e2(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}}),e}function t2(n,e,t){const i=new Map;Tt(n.length===t.length);for(let r=0;r<t.length;r++){const o=n[r],u=o.transform,h=e.data.field(o.field);i.set(o.field,vG(u,h,t[r]))}return i}function n2(n,e,t){const i=new Map;for(const r of n){const o=r.transform,u=t.data.field(r.field);i.set(r.field,yG(o,u,e))}return i}class gy extends kI{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class MM extends kI{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class EG{constructor(e){this.count=e}}var gr,En;function r2(n){switch(n){default:return _t();case pe.CANCELLED:case pe.UNKNOWN:case pe.DEADLINE_EXCEEDED:case pe.RESOURCE_EXHAUSTED:case pe.INTERNAL:case pe.UNAVAILABLE:case pe.UNAUTHENTICATED:return!1;case pe.INVALID_ARGUMENT:case pe.NOT_FOUND:case pe.ALREADY_EXISTS:case pe.PERMISSION_DENIED:case pe.FAILED_PRECONDITION:case pe.ABORTED:case pe.OUT_OF_RANGE:case pe.UNIMPLEMENTED:case pe.DATA_LOSS:return!0}}function s2(n){if(void 0===n)return er("GRPC error has no .code"),pe.UNKNOWN;switch(n){case gr.OK:return pe.OK;case gr.CANCELLED:return pe.CANCELLED;case gr.UNKNOWN:return pe.UNKNOWN;case gr.DEADLINE_EXCEEDED:return pe.DEADLINE_EXCEEDED;case gr.RESOURCE_EXHAUSTED:return pe.RESOURCE_EXHAUSTED;case gr.INTERNAL:return pe.INTERNAL;case gr.UNAVAILABLE:return pe.UNAVAILABLE;case gr.UNAUTHENTICATED:return pe.UNAUTHENTICATED;case gr.INVALID_ARGUMENT:return pe.INVALID_ARGUMENT;case gr.NOT_FOUND:return pe.NOT_FOUND;case gr.ALREADY_EXISTS:return pe.ALREADY_EXISTS;case gr.PERMISSION_DENIED:return pe.PERMISSION_DENIED;case gr.FAILED_PRECONDITION:return pe.FAILED_PRECONDITION;case gr.ABORTED:return pe.ABORTED;case gr.OUT_OF_RANGE:return pe.OUT_OF_RANGE;case gr.UNIMPLEMENTED:return pe.UNIMPLEMENTED;case gr.DATA_LOSS:return pe.DATA_LOSS;default:return _t()}}(En=gr||(gr={}))[En.OK=0]="OK",En[En.CANCELLED=1]="CANCELLED",En[En.UNKNOWN=2]="UNKNOWN",En[En.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",En[En.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",En[En.NOT_FOUND=5]="NOT_FOUND",En[En.ALREADY_EXISTS=6]="ALREADY_EXISTS",En[En.PERMISSION_DENIED=7]="PERMISSION_DENIED",En[En.UNAUTHENTICATED=16]="UNAUTHENTICATED",En[En.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",En[En.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",En[En.ABORTED=10]="ABORTED",En[En.OUT_OF_RANGE=11]="OUT_OF_RANGE",En[En.UNIMPLEMENTED=12]="UNIMPLEMENTED",En[En.INTERNAL=13]="INTERNAL",En[En.UNAVAILABLE=14]="UNAVAILABLE",En[En.DATA_LOSS=15]="DATA_LOSS";class Lh{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(void 0!==i)for(const[r,o]of i)if(this.equalsFn(r,e))return o}has(e){return void 0!==this.get(e)}set(e,t){const i=this.mapKeyFn(e),r=this.inner[i];if(void 0===r)return this.inner[i]=[[e,t]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(void 0===i)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return 1===i.length?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Yp(this.inner,(t,i)=>{for(const[r,o]of i)e(r,o)})}isEmpty(){return gL(this.inner)}size(){return this.innerSize}}const IG=new Zi(it.comparator);function ro(){return IG}const o2=new Zi(it.comparator);function Cw(...n){let e=o2;for(const t of n)e=e.insert(t.key,t);return e}function a2(n){let e=o2;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function fc(){return Ew()}function l2(){return Ew()}function Ew(){return new Lh(n=>n.toString(),(n,e)=>n.isEqual(e))}const TG=new Zi(it.comparator),SG=new Yn(it.comparator);function tn(...n){let e=SG;for(const t of n)e=e.add(t);return e}const AG=new Yn(qt);function FI(){return AG}class Iw{constructor(e,t,i,r,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const r=new Map;return r.set(e,Tw.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Iw(Ot.min(),r,FI(),ro(),tn())}}class Tw{constructor(e,t,i,r,o){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Tw(i,t,tn(),tn(),tn())}}class LI{constructor(e,t,i,r){this.It=e,this.removedTargetIds=t,this.key=i,this.Tt=r}}class c2{constructor(e,t){this.targetId=e,this.Et=t}}class u2{constructor(e,t,i=wr.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}}class d2{constructor(){this.At=0,this.Rt=f2(),this.bt=wr.EMPTY_BYTE_STRING,this.Pt=!1,this.vt=!0}get current(){return this.Pt}get resumeToken(){return this.bt}get Vt(){return 0!==this.At}get St(){return this.vt}Dt(e){e.approximateByteSize()>0&&(this.vt=!0,this.bt=e)}Ct(){let e=tn(),t=tn(),i=tn();return this.Rt.forEach((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:_t()}}),new Tw(this.bt,this.Pt,e,t,i)}xt(){this.vt=!1,this.Rt=f2()}Nt(e,t){this.vt=!0,this.Rt=this.Rt.insert(e,t)}kt(e){this.vt=!0,this.Rt=this.Rt.remove(e)}Ot(){this.At+=1}Mt(){this.At-=1}Ft(){this.vt=!0,this.Pt=!0}}class NG{constructor(e){this.$t=e,this.Bt=new Map,this.Lt=ro(),this.qt=h2(),this.Ut=new Yn(qt)}Kt(e){for(const t of e.It)e.Tt&&e.Tt.isFoundDocument()?this.Gt(t,e.Tt):this.Qt(t,e.key,e.Tt);for(const t of e.removedTargetIds)this.Qt(t,e.key,e.Tt)}jt(e){this.forEachTarget(e,t=>{const i=this.Wt(t);switch(e.state){case 0:this.zt(t)&&i.Dt(e.resumeToken);break;case 1:i.Mt(),i.Vt||i.xt(),i.Dt(e.resumeToken);break;case 2:i.Mt(),i.Vt||this.removeTarget(t);break;case 3:this.zt(t)&&(i.Ft(),i.Dt(e.resumeToken));break;case 4:this.zt(t)&&(this.Ht(t),i.Dt(e.resumeToken));break;default:_t()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach((i,r)=>{this.zt(r)&&t(r)})}Jt(e){const t=e.targetId,i=e.Et.count,r=this.Yt(t);if(r){const o=r.target;if(NI(o))if(0===i){const u=new it(o.path);this.Qt(t,u,_i.newNoDocument(u,Ot.min()))}else Tt(1===i);else this.Xt(t)!==i&&(this.Ht(t),this.Ut=this.Ut.add(t))}}Zt(e){const t=new Map;this.Bt.forEach((o,u)=>{const h=this.Yt(u);if(h){if(o.current&&NI(h.target)){const g=new it(h.target.path);null!==this.Lt.get(g)||this.te(u,g)||this.Qt(u,g,_i.newNoDocument(g,e))}o.St&&(t.set(u,o.Ct()),o.xt())}});let i=tn();this.qt.forEach((o,u)=>{let h=!0;u.forEachWhile(g=>{const y=this.Yt(g);return!y||2===y.purpose||(h=!1,!1)}),h&&(i=i.add(o))}),this.Lt.forEach((o,u)=>u.setReadTime(e));const r=new Iw(e,t,this.Ut,this.Lt,i);return this.Lt=ro(),this.qt=h2(),this.Ut=new Yn(qt),r}Gt(e,t){if(!this.zt(e))return;const i=this.te(e,t.key)?2:0;this.Wt(e).Nt(t.key,i),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}Qt(e,t,i){if(!this.zt(e))return;const r=this.Wt(e);this.te(e,t)?r.Nt(t,1):r.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),i&&(this.Lt=this.Lt.insert(t,i))}removeTarget(e){this.Bt.delete(e)}Xt(e){const t=this.Wt(e).Ct();return this.$t.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.Wt(e).Ot()}Wt(e){let t=this.Bt.get(e);return t||(t=new d2,this.Bt.set(e,t)),t}ee(e){let t=this.qt.get(e);return t||(t=new Yn(qt),this.qt=this.qt.insert(e,t)),t}zt(e){const t=null!==this.Yt(e);return t||Ge("WatchChangeAggregator","Detected inactive target",e),t}Yt(e){const t=this.Bt.get(e);return t&&t.Vt?null:this.$t.ne(e)}Ht(e){this.Bt.set(e,new d2),this.$t.getRemoteKeysForTarget(e).forEach(t=>{this.Qt(e,t,null)})}te(e,t){return this.$t.getRemoteKeysForTarget(e).has(t)}}function h2(){return new Zi(it.comparator)}function f2(){return new Zi(it.comparator)}const xG={asc:"ASCENDING",desc:"DESCENDING"},MG={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},OG={and:"AND",or:"OR"};class RG{constructor(e,t){this.databaseId=e,this.wt=t}}function my(n,e){return n.wt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function p2(n,e){return n.wt?e.toBase64():e.toUint8Array()}function PG(n,e){return my(n,e.toTimestamp())}function tr(n){return Tt(!!n),Ot.fromTimestamp(function(e){const t=Rh(e);return new Si(t.seconds,t.nanos)}(n))}function OM(n,e){return(t=n,new Cn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function g2(n){const e=Cn.fromString(n);return Tt(E2(e)),e}function Sw(n,e){return OM(n.databaseId,e.path)}function pc(n,e){const t=g2(e);if(t.get(1)!==n.databaseId.projectId)throw new ke(pe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ke(pe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new it(_2(t))}function RM(n,e){return OM(n.databaseId,e)}function m2(n){const e=g2(n);return 4===e.length?Cn.emptyPath():_2(e)}function Aw(n){return new Cn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function _2(n){return Tt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function y2(n,e,t){return{name:Sw(n,e),fields:t.value.mapValue.fields}}function v2(n,e,t){const i=pc(n,e.name),r=tr(e.updateTime),o=e.createTime?tr(e.createTime):Ot.min(),u=new Xr({mapValue:{fields:e.fields}}),h=_i.newFoundDocument(i,r,o,u);return t&&h.setHasCommittedMutations(),t?h.setHasCommittedMutations():h}function Nw(n,e){let t;if(e instanceof py)t={update:y2(n,e.key,e.value)};else if(e instanceof gy)t={delete:Sw(n,e.key)};else if(e instanceof Lu)t={update:y2(n,e.key,e.data),updateMask:HG(e.fieldMask)};else{if(!(e instanceof MM))return _t();t={verify:Sw(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(r,o){const u=o.transform;if(u instanceof hy)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof ng)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof ig)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof fy)return{fieldPath:o.field.canonicalString(),increment:u.gt};throw _t()}(0,i))),e.precondition.isNone||(t.currentDocument=void 0!==(r=e.precondition).updateTime?{updateTime:PG(n,r.updateTime)}:void 0!==r.exists?{exists:r.exists}:_t()),t;var r}function PM(n,e){const t=e.currentDocument?void 0!==(r=e.currentDocument).updateTime?Ai.updateTime(tr(r.updateTime)):void 0!==r.exists?Ai.exists(r.exists):Ai.none():Ai.none(),i=e.updateTransforms?e.updateTransforms.map(r=>function(o,u){let h=null;"setToServerValue"in u?(Tt("REQUEST_TIME"===u.setToServerValue),h=new hy):"appendMissingElements"in u?h=new ng(u.appendMissingElements.values||[]):"removeAllFromArray"in u?h=new ig(u.removeAllFromArray.values||[]):"increment"in u?h=new fy(o,u.increment):_t();const g=Gi.fromServerFormat(u.fieldPath);return new ww(g,h)}(n,r)):[];var r;if(e.update){const r=pc(n,e.update.name),o=new Xr({mapValue:{fields:e.update.fields}});if(e.updateMask){const u=new jo((e.updateMask.fieldPaths||[]).map(y=>Gi.fromServerFormat(y)));return new Lu(r,o,u,t,i)}return new py(r,o,t,i)}if(e.delete){const r=pc(n,e.delete);return new gy(r,t)}if(e.verify){const r=pc(n,e.verify);return new MM(r,t)}return _t()}function b2(n,e){return{documents:[RM(n,e.path)]}}function kM(n,e){const t={structuredQuery:{}},i=e.path;null!==e.collectionGroup?(t.parent=RM(n,i),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=RM(n,i.popLast()),t.structuredQuery.from=[{collectionId:i.lastSegment()}]);const r=function(g){if(0!==g.length)return C2(Gn.create(g,"and"))}(e.filters);r&&(t.structuredQuery.where=r);const o=function(g){if(0!==g.length)return g.map(y=>{return{field:_y((C=y).field),direction:UG(C.dir)};var C})}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const u=(y=e.limit,n.wt||fw(y)?y:{value:y});var y,h,g;return null!==u&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt={before:(h=e.startAt).inclusive,values:h.position}),e.endAt&&(t.structuredQuery.endAt={before:!(g=e.endAt).inclusive,values:g.position}),t}function w2(n){let e=m2(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let r=null;if(i>0){Tt(1===i);const C=t.from[0];C.allDescendants?r=C.collectionId:e=e.child(C.collectionId)}let o=[];t.where&&(o=function(C){const I=D2(C);return I instanceof Gn&&SL(I)?I.getFilters():[I]}(t.where));let u=[];t.orderBy&&(u=t.orderBy.map(C=>{return new cy(yy((I=C).field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(I.direction));var I}));let h=null;t.limit&&(h=function(C){let I;return I="object"==typeof C?C.value:C,fw(I)?null:I}(t.limit));let g=null;var C;t.startAt&&(g=new Fh((C=t.startAt).values||[],!!C.before));let y=null;return t.endAt&&(y=function(C){return new Fh(C.values||[],!C.before)}(t.endAt)),UL(e,r,u,o,h,"F",g,y)}function D2(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=yy(e.unaryFilter.field);return mn.create(t,"==",{doubleValue:NaN});case"IS_NULL":const i=yy(e.unaryFilter.field);return mn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=yy(e.unaryFilter.field);return mn.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=yy(e.unaryFilter.field);return mn.create(o,"!=",{nullValue:"NULL_VALUE"});default:return _t()}}(n):void 0!==n.fieldFilter?mn.create(yy((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return _t()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return Gn.create(e.compositeFilter.filters.map(t=>D2(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return _t()}}(e.compositeFilter.op))}(n):_t();var e}function UG(n){return xG[n]}function BG(n){return MG[n]}function jG(n){return OG[n]}function _y(n){return{fieldPath:n.canonicalString()}}function yy(n){return Gi.fromServerFormat(n.fieldPath)}function C2(n){return n instanceof mn?function(e){if("=="===e.op){if(bL(e.value))return{unaryFilter:{field:_y(e.field),op:"IS_NAN"}};if(vL(e.value))return{unaryFilter:{field:_y(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(bL(e.value))return{unaryFilter:{field:_y(e.field),op:"IS_NOT_NAN"}};if(vL(e.value))return{unaryFilter:{field:_y(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:_y(e.field),op:BG(e.op),value:e.value}}}(n):n instanceof Gn?function(e){const t=e.getFilters().map(i=>C2(i));return 1===t.length?t[0]:{compositeFilter:{op:jG(e.op),filters:t}}}(n):_t()}function HG(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function E2(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Ms(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=I2(e)),e=GG(n.get(t),e);return I2(e)}function GG(n,e){let t=e;const i=n.length;for(let r=0;r<i;r++){const o=n.charAt(r);switch(o){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=o}}return t}function I2(n){return n+"\x01\x01"}function gc(n){const e=n.length;if(Tt(e>=2),2===e)return Tt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Cn.emptyPath();const t=e-2,i=[];let r="";for(let o=0;o<e;){const u=n.indexOf("\x01",o);switch((u<0||u>t)&&_t(),n.charAt(u+1)){case"\x01":const h=n.substring(o,u);let g;0===r.length?g=h:(r+=h,g=r,r=""),i.push(g);break;case"\x10":r+=n.substring(o,u),r+="\0";break;case"\x11":r+=n.substring(o,u+1);break;default:_t()}o=u+2}return new Cn(i)}const T2=["userId","batchId"];function VI(n,e){return[n,Ms(e)]}function S2(n,e,t){return[n,Ms(e),t]}const $G={},ZG=["prefixPath","collectionGroup","readTime","documentId"],WG=["prefixPath","collectionGroup","documentId"],qG=["collectionGroup","readTime","prefixPath","documentId"],zG=["canonicalId","targetId"],KG=["targetId","path"],YG=["path","targetId"],QG=["collectionId","parent"],JG=["indexId","uid"],XG=["uid","sequenceNumber"],e$=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],t$=["indexId","uid","orderedDocumentKey"],n$=["userId","collectionPath","documentId"],i$=["userId","collectionPath","largestBatchId"],r$=["userId","collectionGroup","largestBatchId"],A2=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],s$=[...A2,"documentOverlays"],N2=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],x2=N2,o$=[...x2,"indexConfiguration","indexState","indexEntries"];class FM extends hL{constructor(e,t){super(),this.se=e,this.currentSequenceNumber=t}}function Pr(n,e){const t=st(n);return nl.M(t.se,e)}class LM{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const o=this.mutations[r];o.key.isEqual(e.key)&&DG(o,e,i[r])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Dw(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Dw(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=l2();return this.mutations.forEach(r=>{const o=e.get(r.key),u=o.overlayedDocument;let h=this.applyToLocalView(u,o.mutatedFields);h=t.has(r.key)?null:h;const g=JL(u,h);null!==g&&i.set(r.key,g),u.isValidDocument()||u.convertToNoDocument(Ot.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),tn())}isEqual(e){return this.batchId===e.batchId&&oy(this.mutations,e.mutations,(t,i)=>XL(t,i))&&oy(this.baseMutations,e.baseMutations,(t,i)=>XL(t,i))}}class VM{constructor(e,t,i,r){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=r}static from(e,t,i){Tt(e.mutations.length===i.length);let r=TG;const o=e.mutations;for(let u=0;u<o.length;u++)r=r.insert(o[u].key,i[u].version);return new VM(e,t,i,r)}}class UM{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Vh{constructor(e,t,i,r,o=Ot.min(),u=Ot.min(),h=wr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=h}withSequenceNumber(e){return new Vh(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Vh(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Vh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class M2{constructor(e){this.ie=e}}function O2(n,e){const t=e.key,i={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:UI(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document={name:Sw(r=n.ie,(o=e).key),fields:o.data.value.mapValue.fields,updateTime:my(r,o.version.toTimestamp()),createTime:my(r,o.createTime.toTimestamp())};else if(e.isNoDocument())i.noDocument={path:t.path.toArray(),readTime:rg(e.version)};else{if(!e.isUnknownDocument())return _t();i.unknownDocument={path:t.path.toArray(),version:rg(e.version)}}var r,o;return i}function UI(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function rg(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function sg(n){const e=new Si(n.seconds,n.nanoseconds);return Ot.fromTimestamp(e)}function og(n,e){const t=(e.baseMutations||[]).map(o=>PM(n.ie,o));for(let o=0;o<e.mutations.length-1;++o){const u=e.mutations[o];o+1<e.mutations.length&&void 0!==e.mutations[o+1].transform&&(u.updateTransforms=e.mutations[o+1].transform.fieldTransforms,e.mutations.splice(o+1,1),++o)}const i=e.mutations.map(o=>PM(n.ie,o)),r=Si.fromMillis(e.localWriteTimeMs);return new LM(e.batchId,r,t,i)}function xw(n){const e=sg(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?sg(n.lastLimboFreeSnapshotVersion):Ot.min();let i;var r;return void 0!==n.query.documents?(Tt(1===(r=n.query).documents.length),i=xs(dy(m2(r.documents[0])))):i=xs(w2(n.query)),new Vh(i,n.targetId,0,n.lastListenSequenceNumber,e,t,wr.fromBase64String(n.resumeToken))}function R2(n,e){const t=rg(e.snapshotVersion),i=rg(e.lastLimboFreeSnapshotVersion);let r;r=NI(e.target)?b2(n.ie,e.target):kM(n.ie,e.target);const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:eg(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function BM(n){const e=w2({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?OI(e,e.limit,"L"):e}function jM(n,e){return new UM(e.largestBatchId,PM(n.ie,e.overlayMutation))}function P2(n,e){const t=e.path.lastSegment();return[n,Ms(e.path.popLast()),t]}function k2(n,e,t,i){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:rg(i.readTime),documentKey:Ms(i.documentKey.path),largestBatchId:i.largestBatchId}}class l${getBundleMetadata(e,t){return F2(e).get(t).next(i=>{if(i)return{id:(r=i).bundleId,createTime:sg(r.createTime),version:r.version};var r})}saveBundleMetadata(e,t){return F2(e).put({bundleId:(i=t).id,createTime:rg(tr(i.createTime)),version:i.version});var i}getNamedQuery(e,t){return L2(e).get(t).next(i=>{if(i)return{name:(r=i).name,query:BM(r.bundledQuery),readTime:sg(r.readTime)};var r})}saveNamedQuery(e,t){return L2(e).put({name:(i=t).name,readTime:rg(tr(i.readTime)),bundledQuery:i.bundledQuery});var i}}function F2(n){return Pr(n,"bundles")}function L2(n){return Pr(n,"namedQueries")}class BI{constructor(e,t){this.yt=e,this.userId=t}static re(e,t){return new BI(e,t.uid||"")}getOverlay(e,t){return Mw(e).get(P2(this.userId,t)).next(i=>i?jM(this.yt,i):null)}getOverlays(e,t){const i=fc();return le.forEach(t,r=>this.getOverlay(e,r).next(o=>{null!==o&&i.set(r,o)})).next(()=>i)}saveOverlays(e,t,i){const r=[];return i.forEach((o,u)=>{const h=new UM(t,u);r.push(this.oe(e,h))}),le.waitFor(r)}removeOverlaysForBatchId(e,t,i){const r=new Set;t.forEach(u=>r.add(Ms(u.getCollectionPath())));const o=[];return r.forEach(u=>{const h=IDBKeyRange.bound([this.userId,u,i],[this.userId,u,i+1],!1,!0);o.push(Mw(e).Y("collectionPathOverlayIndex",h))}),le.waitFor(o)}getOverlaysForCollection(e,t,i){const r=fc(),o=Ms(t),u=IDBKeyRange.bound([this.userId,o,i],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Mw(e).W("collectionPathOverlayIndex",u).next(h=>{for(const g of h){const y=jM(this.yt,g);r.set(y.getKey(),y)}return r})}getOverlaysForCollectionGroup(e,t,i,r){const o=fc();let u;const h=IDBKeyRange.bound([this.userId,t,i],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Mw(e).Z({index:"collectionGroupOverlayIndex",range:h},(g,y,C)=>{const I=jM(this.yt,y);o.size()<r||I.largestBatchId===u?(o.set(I.getKey(),I),u=I.largestBatchId):C.done()}).next(()=>o)}oe(e,t){return Mw(e).put(function(i,r,o){const[u,h,g]=P2(r,o.mutation.key);return{userId:r,collectionPath:h,documentId:g,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Nw(i.ie,o.mutation)}}(this.yt,this.userId,t))}}function Mw(n){return Pr(n,"documentOverlays")}class ag{constructor(){}ue(e,t){this.ce(e,t),t.ae()}ce(e,t){if("nullValue"in e)this.he(t,5);else if("booleanValue"in e)this.he(t,10),t.le(e.booleanValue?1:0);else if("integerValue"in e)this.he(t,15),t.le($i(e.integerValue));else if("doubleValue"in e){const i=$i(e.doubleValue);isNaN(i)?this.he(t,13):(this.he(t,15),pw(i)?t.le(0):t.le(i))}else if("timestampValue"in e){const i=e.timestampValue;this.he(t,20),"string"==typeof i?t.fe(i):(t.fe(`${i.seconds||""}`),t.le(i.nanos||0))}else if("stringValue"in e)this.de(e.stringValue,t),this._e(t);else if("bytesValue"in e)this.he(t,30),t.we(Qp(e.bytesValue)),this._e(t);else if("referenceValue"in e)this.me(e.referenceValue,t);else if("geoPointValue"in e){const i=e.geoPointValue;this.he(t,45),t.le(i.latitude||0),t.le(i.longitude||0)}else"mapValue"in e?wL(e)?this.he(t,Number.MAX_SAFE_INTEGER):(this.ge(e.mapValue,t),this._e(t)):"arrayValue"in e?(this.ye(e.arrayValue,t),this._e(t)):_t()}de(e,t){this.he(t,25),this.pe(e,t)}pe(e,t){t.fe(e)}ge(e,t){const i=e.fields||{};this.he(t,55);for(const r of Object.keys(i))this.de(r,t),this.ce(i[r],t)}ye(e,t){const i=e.values||[];this.he(t,50);for(const r of i)this.ce(r,t)}me(e,t){this.he(t,37),it.fromName(e).path.forEach(i=>{this.he(t,60),this.pe(i,t)})}he(e,t){e.le(t)}_e(e){e.le(2)}}function c$(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function V2(n){const e=64-function(t){let i=0;for(let r=0;r<8;++r){const o=c$(255&t[r]);if(i+=o,8!==o)break}return i}(n);return Math.ceil(e/8)}ag.Ie=new ag;class u${constructor(){this.buffer=new Uint8Array(1024),this.position=0}Te(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Ee(i.value),i=t.next();this.Ae()}Re(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.be(i.value),i=t.next();this.Pe()}ve(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Ee(i);else if(i<2048)this.Ee(960|i>>>6),this.Ee(128|63&i);else if(t<"\ud800"||"\udbff"<t)this.Ee(480|i>>>12),this.Ee(128|63&i>>>6),this.Ee(128|63&i);else{const r=t.codePointAt(0);this.Ee(240|r>>>18),this.Ee(128|63&r>>>12),this.Ee(128|63&r>>>6),this.Ee(128|63&r)}}this.Ae()}Ve(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.be(i);else if(i<2048)this.be(960|i>>>6),this.be(128|63&i);else if(t<"\ud800"||"\udbff"<t)this.be(480|i>>>12),this.be(128|63&i>>>6),this.be(128|63&i);else{const r=t.codePointAt(0);this.be(240|r>>>18),this.be(128|63&r>>>12),this.be(128|63&r>>>6),this.be(128|63&r)}}this.Pe()}Se(e){const t=this.De(e),i=V2(t);this.Ce(1+i),this.buffer[this.position++]=255&i;for(let r=t.length-i;r<t.length;++r)this.buffer[this.position++]=255&t[r]}xe(e){const t=this.De(e),i=V2(t);this.Ce(1+i),this.buffer[this.position++]=~(255&i);for(let r=t.length-i;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}Ne(){this.ke(255),this.ke(255)}Oe(){this.Me(255),this.Me(255)}reset(){this.position=0}seed(e){this.Ce(e.length),this.buffer.set(e,this.position),this.position+=e.length}Fe(){return this.buffer.slice(0,this.position)}De(e){const t=function(r){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,r,!1),new Uint8Array(o.buffer)}(e),i=0!=(128&t[0]);t[0]^=i?255:128;for(let r=1;r<t.length;++r)t[r]^=i?255:0;return t}Ee(e){const t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(t)}be(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(e)}Ae(){this.ke(0),this.ke(1)}Pe(){this.Me(0),this.Me(1)}ke(e){this.Ce(1),this.buffer[this.position++]=e}Me(e){this.Ce(1),this.buffer[this.position++]=~e}Ce(e){const t=e+this.position;if(t<=this.buffer.length)return;let i=2*this.buffer.length;i<t&&(i=t);const r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}}class d${constructor(e){this.$e=e}we(e){this.$e.Te(e)}fe(e){this.$e.ve(e)}le(e){this.$e.Se(e)}ae(){this.$e.Ne()}}class h${constructor(e){this.$e=e}we(e){this.$e.Re(e)}fe(e){this.$e.Ve(e)}le(e){this.$e.xe(e)}ae(){this.$e.Oe()}}class Ow{constructor(){this.$e=new u$,this.Be=new d$(this.$e),this.Le=new h$(this.$e)}seed(e){this.$e.seed(e)}qe(e){return 0===e?this.Be:this.Le}Fe(){return this.$e.Fe()}reset(){this.$e.reset()}}class lg{constructor(e,t,i,r){this.indexId=e,this.documentKey=t,this.arrayValue=i,this.directionalValue=r}Ue(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,i=new Uint8Array(t);return i.set(this.directionalValue,0),t!==e?i.set([0],this.directionalValue.length):++i[i.length-1],new lg(this.indexId,this.documentKey,this.arrayValue,i)}}function Uh(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=U2(n.arrayValue,e.arrayValue),0!==t?t:(t=U2(n.directionalValue,e.directionalValue),0!==t?t:it.comparator(n.documentKey,e.documentKey)))}function U2(n,e){for(let t=0;t<n.length&&t<e.length;++t){const i=n[t]-e[t];if(0!==i)return i}return n.length-e.length}class f${constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ke=e.orderBy,this.Ge=[];for(const t of e.filters){const i=t;i.isInequality()?this.Qe=i:this.Ge.push(i)}}je(e){Tt(e.collectionGroup===this.collectionId);const t=_M(e);if(void 0!==t&&!this.We(t))return!1;const i=zp(e);let r=0,o=0;for(;r<i.length&&this.We(i[r]);++r);if(r===i.length)return!0;if(void 0!==this.Qe){const u=i[r];if(!this.ze(this.Qe,u)||!this.He(this.Ke[o++],u))return!1;++r}for(;r<i.length;++r){const u=i[r];if(o>=this.Ke.length||!this.He(this.Ke[o++],u))return!1}return!0}We(e){for(const t of this.Ge)if(this.ze(t,e))return!0;return!1}ze(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}He(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function B2(n){var e,t;if(Tt(n instanceof mn||n instanceof Gn),n instanceof mn){if(n instanceof PL){const r=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(o=>mn.create(n.field,"==",o)))||[];return Gn.create(r,"or")}return n}const i=n.filters.map(r=>B2(r));return Gn.create(i,n.op)}function p$(n){if(0===n.getFilters().length)return[];const e=$M(B2(n));return Tt(j2(e)),HM(e)||GM(e)?[e]:e.getFilters()}function HM(n){return n instanceof mn}function GM(n){return n instanceof Gn&&SL(n)}function j2(n){return HM(n)||GM(n)||function(e){if(e instanceof Gn&&EM(e)){for(const t of e.getFilters())if(!HM(t)&&!GM(t))return!1;return!0}return!1}(n)}function $M(n){if(Tt(n instanceof mn||n instanceof Gn),n instanceof mn)return n;if(1===n.filters.length)return $M(n.filters[0]);const e=n.filters.map(i=>$M(i));let t=Gn.create(e,n.op);return t=jI(t),j2(t)?t:(Tt(t instanceof Gn),Tt(ly(t)),Tt(t.filters.length>1),t.filters.reduce((i,r)=>ZM(i,r)))}function ZM(n,e){let t;return Tt(n instanceof mn||n instanceof Gn),Tt(e instanceof mn||e instanceof Gn),t=n instanceof mn?e instanceof mn?Gn.create([n,e],"and"):H2(n,e):e instanceof mn?H2(e,n):function(i,r){if(Tt(i.filters.length>0&&r.filters.length>0),ly(i)&&ly(r))return ML(i,r.getFilters());const o=EM(i)?i:r,u=EM(i)?r:i,h=o.filters.map(g=>ZM(g,u));return Gn.create(h,"or")}(n,e),jI(t)}function H2(n,e){if(ly(e))return ML(e,n.getFilters());{const t=e.filters.map(i=>ZM(n,i));return Gn.create(t,"or")}}function jI(n){if(Tt(n instanceof mn||n instanceof Gn),n instanceof mn)return n;const e=n.getFilters();if(1===e.length)return jI(e[0]);if(AL(n))return n;const t=e.map(r=>jI(r)),i=[];return t.forEach(r=>{r instanceof mn?i.push(r):r instanceof Gn&&(r.op===n.op?i.push(...r.filters):i.push(r))}),1===i.length?i[0]:Gn.create(i,n.op)}class g${constructor(){this.Je=new WM}addToCollectionParentIndex(e,t){return this.Je.add(t),le.resolve()}getCollectionParents(e,t){return le.resolve(this.Je.getEntries(t))}addFieldIndex(e,t){return le.resolve()}deleteFieldIndex(e,t){return le.resolve()}getDocumentsMatchingTarget(e,t){return le.resolve(null)}getIndexType(e,t){return le.resolve(0)}getFieldIndexes(e,t){return le.resolve([])}getNextCollectionGroupToUpdate(e){return le.resolve(null)}getMinOffset(e,t){return le.resolve(Uo.min())}getMinOffsetFromCollectionGroup(e,t){return le.resolve(Uo.min())}updateCollectionGroup(e,t,i){return le.resolve()}updateIndexEntries(e,t){return le.resolve()}}class WM{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new Yn(Cn.comparator),o=!r.has(i);return this.index[t]=r.add(i),o}has(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Yn(Cn.comparator)).toArray()}}const HI=new Uint8Array(0);class m${constructor(e,t){this.user=e,this.databaseId=t,this.Ye=new WM,this.Xe=new Lh(i=>eg(i),(i,r)=>vw(i,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ye.has(t)){const i=t.lastSegment(),r=t.popLast();e.addOnCommittedListener(()=>{this.Ye.add(t)});const o={collectionId:i,parent:Ms(r)};return G2(e).put(o)}return le.resolve()}getCollectionParents(e,t){const i=[],r=IDBKeyRange.bound([t,""],[lL(t),""],!1,!0);return G2(e).W(r).next(o=>{for(const u of o){if(u.collectionId!==t)break;i.push(gc(u.parent))}return i})}addFieldIndex(e,t){const i=GI(e),r={indexId:(u=t).indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(h=>[h.fieldPath.canonicalString(),h.kind])};var u;delete r.indexId;const o=i.add(r);if(t.indexState){const u=Pw(e);return o.next(h=>{u.put(k2(h,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){const i=GI(e),r=Pw(e),o=Rw(e);return i.delete(t.indexId).next(()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const i=Rw(e);let r=!0;const o=new Map;return le.forEach(this.Ze(t),u=>this.tn(e,u).next(h=>{r&&(r=!!h),o.set(u,h)})).next(()=>{if(r){let u=tn();const h=[];return le.forEach(o,(g,y)=>{var C;Ge("IndexedDbIndexManager",`Using index ${C=g,`id=${C.indexId}|cg=${C.collectionGroup}|f=${C.fields.map(rt=>`${rt.fieldPath}:${rt.kind}`).join(",")}`} to execute ${eg(t)}`);const I=function(rt,Je){const Xe=_M(Je);if(void 0===Xe)return null;for(const ct of xI(rt,Xe.fieldPath))switch(ct.op){case"array-contains-any":return ct.value.arrayValue.values||[];case"array-contains":return[ct.value]}return null}(y,g),A=function(rt,Je){const Xe=new Map;for(const ct of zp(Je))for(const Zt of xI(rt,ct.fieldPath))switch(Zt.op){case"==":case"in":Xe.set(ct.fieldPath.canonicalString(),Zt.value);break;case"not-in":case"!=":return Xe.set(ct.fieldPath.canonicalString(),Zt.value),Array.from(Xe.values())}return null}(y,g),F=function(rt,Je){const Xe=[];let ct=!0;for(const Zt of zp(Je)){const In=0===Zt.kind?LL(rt,Zt.fieldPath,rt.startAt):VL(rt,Zt.fieldPath,rt.startAt);Xe.push(In.value),ct&&(ct=In.inclusive)}return new Fh(Xe,ct)}(y,g),Z=function(rt,Je){const Xe=[];let ct=!0;for(const Zt of zp(Je)){const In=0===Zt.kind?VL(rt,Zt.fieldPath,rt.endAt):LL(rt,Zt.fieldPath,rt.endAt);Xe.push(In.value),ct&&(ct=In.inclusive)}return new Fh(Xe,ct)}(y,g),ee=this.en(g,y,F),ce=this.en(g,y,Z),Ze=this.nn(g,y,A),We=this.sn(g.indexId,I,ee,F.inclusive,ce,Z.inclusive,Ze);return le.forEach(We,rt=>i.J(rt,t.limit).next(Je=>{Je.forEach(Xe=>{const ct=it.fromSegments(Xe.documentKey);u.has(ct)||(u=u.add(ct),h.push(ct))})}))}).next(()=>h)}return le.resolve(null)})}Ze(e){let t=this.Xe.get(e);return t||(t=0===e.filters.length?[e]:p$(Gn.create(e.filters,"and")).map(i=>IM(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt)),this.Xe.set(e,t),t)}sn(e,t,i,r,o,u,h){const g=(null!=t?t.length:1)*Math.max(i.length,o.length),y=g/(null!=t?t.length:1),C=[];for(let I=0;I<g;++I){const A=t?this.rn(t[I/y]):HI,F=this.on(e,A,i[I%y],r),Z=this.un(e,A,o[I%y],u),ee=h.map(ce=>this.on(e,A,ce,!0));C.push(...this.createRange(F,Z,ee))}return C}on(e,t,i,r){const o=new lg(e,it.empty(),t,i);return r?o:o.Ue()}un(e,t,i,r){const o=new lg(e,it.empty(),t,i);return r?o.Ue():o}tn(e,t){const i=new f$(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next(o=>{let u=null;for(const h of o)i.je(h)&&(!u||h.fields.length>u.fields.length)&&(u=h);return u})}getIndexType(e,t){let i=2;const r=this.Ze(t);return le.forEach(r,o=>this.tn(e,o).next(u=>{u?0!==i&&u.fields.length<function(h){let g=new Yn(Gi.comparator),y=!1;for(const C of h.filters)for(const I of C.getFlattenedFilters())I.field.isKeyField()||("array-contains"===I.op||"array-contains-any"===I.op?y=!0:g=g.add(I.field));for(const C of h.orderBy)C.field.isKeyField()||(g=g.add(C.field));return g.size+(y?1:0)}(o)&&(i=1):i=0})).next(()=>null!==t.limit&&r.length>1&&2===i?1:i)}cn(e,t){const i=new Ow;for(const r of zp(e)){const o=t.data.field(r.fieldPath);if(null==o)return null;const u=i.qe(r.kind);ag.Ie.ue(o,u)}return i.Fe()}rn(e){const t=new Ow;return ag.Ie.ue(e,t.qe(0)),t.Fe()}an(e,t){const i=new Ow;return ag.Ie.ue(Xp(this.databaseId,t),i.qe(function(r){const o=zp(r);return 0===o.length?0:o[o.length-1].kind}(e))),i.Fe()}nn(e,t,i){if(null===i)return[];let r=[];r.push(new Ow);let o=0;for(const u of zp(e)){const h=i[o++];for(const g of r)if(this.hn(t,u.fieldPath)&&_w(h))r=this.ln(r,u,h);else{const y=g.qe(u.kind);ag.Ie.ue(h,y)}}return this.fn(r)}en(e,t,i){return this.nn(e,t,i.position)}fn(e){const t=[];for(let i=0;i<e.length;++i)t[i]=e[i].Fe();return t}ln(e,t,i){const r=[...e],o=[];for(const u of i.arrayValue.values||[])for(const h of r){const g=new Ow;g.seed(h.Fe()),ag.Ie.ue(u,g.qe(t.kind)),o.push(g)}return o}hn(e,t){return!!e.filters.find(i=>i instanceof mn&&i.field.isEqual(t)&&("in"===i.op||"not-in"===i.op))}getFieldIndexes(e,t){const i=GI(e),r=Pw(e);return(t?i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):i.W()).next(o=>{const u=[];return le.forEach(o,h=>r.get([h.indexId,this.uid]).next(g=>{u.push(function(y,C){const I=C?new dw(C.sequenceNumber,new Uo(sg(C.readTime),new it(gc(C.documentKey)),C.largestBatchId)):dw.empty(),A=y.fields.map(([F,Z])=>new EI(Gi.fromServerFormat(F),Z));return new CI(y.indexId,y.collectionGroup,A,I)}(h,g))})).next(()=>u)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((i,r)=>{const o=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return 0!==o?o:qt(i.collectionGroup,r.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,i){const r=GI(e),o=Pw(e);return this.dn(e).next(u=>r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(h=>le.forEach(h,g=>o.put(k2(g.indexId,this.user,u,i)))))}updateIndexEntries(e,t){const i=new Map;return le.forEach(t,(r,o)=>{const u=i.get(r.collectionGroup);return(u?le.resolve(u):this.getFieldIndexes(e,r.collectionGroup)).next(h=>(i.set(r.collectionGroup,h),le.forEach(h,g=>this._n(e,r,g).next(y=>{const C=this.wn(o,g);return y.isEqual(C)?le.resolve():this.mn(e,o,g,y,C)}))))})}gn(e,t,i,r){return Rw(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.an(i,t.key),documentKey:t.key.path.toArray()})}yn(e,t,i,r){return Rw(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.an(i,t.key),t.key.path.toArray()])}_n(e,t,i){const r=Rw(e);let o=new Yn(Uh);return r.Z({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.an(i,t)])},(u,h)=>{o=o.add(new lg(i.indexId,t,h.arrayValue,h.directionalValue))}).next(()=>o)}wn(e,t){let i=new Yn(Uh);const r=this.cn(t,e);if(null==r)return i;const o=_M(t);if(null!=o){const u=e.data.field(o.fieldPath);if(_w(u))for(const h of u.arrayValue.values||[])i=i.add(new lg(t.indexId,e.key,this.rn(h),r))}else i=i.add(new lg(t.indexId,e.key,HI,r));return i}mn(e,t,i,r,o){Ge("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const u=[];return function(h,g,y,C,I){const A=h.getIterator(),F=g.getIterator();let Z=uy(A),ee=uy(F);for(;Z||ee;){let ce=!1,Ze=!1;if(Z&&ee){const We=y(Z,ee);We<0?Ze=!0:We>0&&(ce=!0)}else null!=Z?Ze=!0:ce=!0;ce?(C(ee),ee=uy(F)):Ze?(I(Z),Z=uy(A)):(Z=uy(A),ee=uy(F))}}(r,o,Uh,h=>{u.push(this.gn(e,t,i,h))},h=>{u.push(this.yn(e,t,i,h))}),le.waitFor(u)}dn(e){let t=1;return Pw(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,o)=>{o.done(),t=r.sequenceNumber+1}).next(()=>t)}createRange(e,t,i){i=i.sort((u,h)=>Uh(u,h)).filter((u,h,g)=>!h||0!==Uh(u,g[h-1]));const r=[];r.push(e);for(const u of i){const h=Uh(u,e),g=Uh(u,t);if(0===h)r[0]=e.Ue();else if(h>0&&g<0)r.push(u),r.push(u.Ue());else if(g>0)break}r.push(t);const o=[];for(let u=0;u<r.length;u+=2){if(this.pn(r[u],r[u+1]))return[];o.push(IDBKeyRange.bound([r[u].indexId,this.uid,r[u].arrayValue,r[u].directionalValue,HI,[]],[r[u+1].indexId,this.uid,r[u+1].arrayValue,r[u+1].directionalValue,HI,[]]))}return o}pn(e,t){return Uh(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next($2)}getMinOffset(e,t){return le.mapArray(this.Ze(t),i=>this.tn(e,i).next(r=>r||_t())).next($2)}}function G2(n){return Pr(n,"collectionParents")}function Rw(n){return Pr(n,"indexEntries")}function GI(n){return Pr(n,"indexConfiguration")}function Pw(n){return Pr(n,"indexState")}function $2(n){Tt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let i=1;i<n.length;i++){const r=n[i].indexState.offset;yM(r,e)<0&&(e=r),t<r.largestBatchId&&(t=r.largestBatchId)}return new Uo(e.readTime,e.documentKey,t)}const Z2={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class so{constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new so(e,so.DEFAULT_COLLECTION_PERCENTILE,so.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function W2(n,e,t){const i=n.store("mutations"),r=n.store("documentMutations"),o=[],u=IDBKeyRange.only(t.batchId);let h=0;const g=i.Z({range:u},(C,I,A)=>(h++,A.delete()));o.push(g.next(()=>{Tt(1===h)}));const y=[];for(const C of t.mutations){const I=S2(e,C.key.path,t.batchId);o.push(r.delete(I)),y.push(C.key)}return le.waitFor(o).next(()=>y)}function $I(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw _t();e=n.noDocument}return JSON.stringify(e).length}so.DEFAULT_COLLECTION_PERCENTILE=10,so.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,so.DEFAULT=new so(41943040,so.DEFAULT_COLLECTION_PERCENTILE,so.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),so.DISABLED=new so(-1,0,0);class ZI{constructor(e,t,i,r){this.userId=e,this.yt=t,this.indexManager=i,this.referenceDelegate=r,this.In={}}static re(e,t,i,r){Tt(""!==e.uid);const o=e.isAuthenticated()?e.uid:"";return new ZI(o,t,i,r)}checkEmpty(e){let t=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Bh(e).Z({index:"userMutationsIndex",range:i},(r,o,u)=>{t=!1,u.done()}).next(()=>t)}addMutationBatch(e,t,i,r){const o=vy(e),u=Bh(e);return u.add({}).next(h=>{Tt("number"==typeof h);const g=new LM(h,t,i,r),y=function(A,F,Z){const ee=Z.baseMutations.map(Ze=>Nw(A.ie,Ze)),ce=Z.mutations.map(Ze=>Nw(A.ie,Ze));return{userId:F,batchId:Z.batchId,localWriteTimeMs:Z.localWriteTime.toMillis(),baseMutations:ee,mutations:ce}}(this.yt,this.userId,g),C=[];let I=new Yn((A,F)=>qt(A.canonicalString(),F.canonicalString()));for(const A of r){const F=S2(this.userId,A.key.path,h);I=I.add(A.key.path.popLast()),C.push(u.put(y)),C.push(o.put(F,$G))}return I.forEach(A=>{C.push(this.indexManager.addToCollectionParentIndex(e,A))}),e.addOnCommittedListener(()=>{this.In[h]=g.keys()}),le.waitFor(C).next(()=>g)})}lookupMutationBatch(e,t){return Bh(e).get(t).next(i=>i?(Tt(i.userId===this.userId),og(this.yt,i)):null)}Tn(e,t){return this.In[t]?le.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(i=>{if(i){const r=i.keys();return this.In[t]=r,r}return null})}getNextMutationBatchAfterBatchId(e,t){const i=t+1,r=IDBKeyRange.lowerBound([this.userId,i]);let o=null;return Bh(e).Z({index:"userMutationsIndex",range:r},(u,h,g)=>{h.userId===this.userId&&(Tt(h.batchId>=i),o=og(this.yt,h)),g.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=-1;return Bh(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(r,o,u)=>{i=o.batchId,u.done()}).next(()=>i)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Bh(e).W("userMutationsIndex",t).next(i=>i.map(r=>og(this.yt,r)))}getAllMutationBatchesAffectingDocumentKey(e,t){const i=VI(this.userId,t.path),r=IDBKeyRange.lowerBound(i),o=[];return vy(e).Z({range:r},(u,h,g)=>{const[y,C,I]=u,A=gc(C);if(y===this.userId&&t.path.isEqual(A))return Bh(e).get(I).next(F=>{if(!F)throw _t();Tt(F.userId===this.userId),o.push(og(this.yt,F))});g.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Yn(qt);const r=[];return t.forEach(o=>{const u=VI(this.userId,o.path),h=IDBKeyRange.lowerBound(u),g=vy(e).Z({range:h},(y,C,I)=>{const[A,F,Z]=y,ee=gc(F);A===this.userId&&o.path.isEqual(ee)?i=i.add(Z):I.done()});r.push(g)}),le.waitFor(r).next(()=>this.En(e,i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1,o=VI(this.userId,i),u=IDBKeyRange.lowerBound(o);let h=new Yn(qt);return vy(e).Z({range:u},(g,y,C)=>{const[I,A,F]=g,Z=gc(A);I===this.userId&&i.isPrefixOf(Z)?Z.length===r&&(h=h.add(F)):C.done()}).next(()=>this.En(e,h))}En(e,t){const i=[],r=[];return t.forEach(o=>{r.push(Bh(e).get(o).next(u=>{if(null===u)throw _t();Tt(u.userId===this.userId),i.push(og(this.yt,u))}))}),le.waitFor(r).next(()=>i)}removeMutationBatch(e,t){return W2(e.se,this.userId,t).next(i=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),le.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(e,r))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return le.resolve();const i=IDBKeyRange.lowerBound([this.userId]),r=[];return vy(e).Z({range:i},(o,u,h)=>{if(o[0]===this.userId){const g=gc(o[1]);r.push(g)}else h.done()}).next(()=>{Tt(0===r.length)})})}containsKey(e,t){return q2(e,this.userId,t)}Rn(e){return z2(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function q2(n,e,t){const i=VI(e,t.path),r=i[1],o=IDBKeyRange.lowerBound(i);let u=!1;return vy(n).Z({range:o,X:!0},(h,g,y)=>{const[C,I,A]=h;C===e&&I===r&&(u=!0),y.done()}).next(()=>u)}function Bh(n){return Pr(n,"mutations")}function vy(n){return Pr(n,"documentMutations")}function z2(n){return Pr(n,"mutationQueues")}class cg{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new cg(0)}static vn(){return new cg(-1)}}class _${constructor(e,t){this.referenceDelegate=e,this.yt=t}allocateTargetId(e){return this.Vn(e).next(t=>{const i=new cg(t.highestTargetId);return t.highestTargetId=i.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>Ot.fromTimestamp(new Si(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,i){return this.Vn(e).next(r=>(r.highestListenSequenceNumber=t,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.Sn(e,r)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(i=>(i.targetCount+=1,this.Cn(t,i),this.Sn(e,i))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>by(e).delete(t.targetId)).next(()=>this.Vn(e)).next(i=>(Tt(i.targetCount>0),i.targetCount-=1,this.Sn(e,i)))}removeTargets(e,t,i){let r=0;const o=[];return by(e).Z((u,h)=>{const g=xw(h);g.sequenceNumber<=t&&null===i.get(g.targetId)&&(r++,o.push(this.removeTargetData(e,g)))}).next(()=>le.waitFor(o)).next(()=>r)}forEachTarget(e,t){return by(e).Z((i,r)=>{const o=xw(r);t(o)})}Vn(e){return K2(e).get("targetGlobalKey").next(t=>(Tt(null!==t),t))}Sn(e,t){return K2(e).put("targetGlobalKey",t)}Dn(e,t){return by(e).put(R2(this.yt,t))}Cn(e,t){let i=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,i=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const i=eg(t),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let o=null;return by(e).Z({range:r,index:"queryTargetsIndex"},(u,h,g)=>{const y=xw(h);vw(t,y.target)&&(o=y,g.done())}).next(()=>o)}addMatchingKeys(e,t,i){const r=[],o=jh(e);return t.forEach(u=>{const h=Ms(u.path);r.push(o.put({targetId:i,path:h})),r.push(this.referenceDelegate.addReference(e,i,u))}),le.waitFor(r)}removeMatchingKeys(e,t,i){const r=jh(e);return le.forEach(t,o=>{const u=Ms(o.path);return le.waitFor([r.delete([i,u]),this.referenceDelegate.removeReference(e,i,o)])})}removeMatchingKeysForTargetId(e,t){const i=jh(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(e,t){const i=IDBKeyRange.bound([t],[t+1],!1,!0),r=jh(e);let o=tn();return r.Z({range:i,X:!0},(u,h,g)=>{const y=gc(u[1]),C=new it(y);o=o.add(C)}).next(()=>o)}containsKey(e,t){const i=Ms(t.path),r=IDBKeyRange.bound([i],[lL(i)],!1,!0);let o=0;return jh(e).Z({index:"documentTargetsIndex",X:!0,range:r},([u,h],g,y)=>{0!==u&&(o++,y.done())}).next(()=>o>0)}ne(e,t){return by(e).get(t).next(i=>i?xw(i):null)}}function by(n){return Pr(n,"targets")}function K2(n){return Pr(n,"targetGlobal")}function jh(n){return Pr(n,"targetDocuments")}function Y2([n,e],[t,i]){const r=qt(n,t);return 0===r?qt(e,i):r}class y${constructor(e){this.xn=e,this.buffer=new Yn(Y2),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();Y2(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class v${constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;Ge("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ge.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(i){Mh(i)?Ge("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield xh(i)}yield t.Fn(3e5)}))}}class b${constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(0===t)return le.resolve(Bo.at);const i=new y$(t);return this.$n.forEachTarget(e,r=>i.On(r.sequenceNumber)).next(()=>this.$n.Ln(e,r=>i.On(r))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.$n.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ge("LruGarbageCollector","Garbage collection skipped; disabled"),le.resolve(Z2)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(Ge("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Z2):this.qn(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}qn(e,t){let i,r,o,u,h,g,y;const C=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(I=>(I>this.params.maximumSequenceNumbersToCollect?(Ge("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${I}`),r=this.params.maximumSequenceNumbersToCollect):r=I,u=Date.now(),this.nthSequenceNumber(e,r))).next(I=>(i=I,h=Date.now(),this.removeTargets(e,i,t))).next(I=>(o=I,g=Date.now(),this.removeOrphanedDocuments(e,i))).next(I=>(y=Date.now(),gM()<=ma.in.DEBUG&&Ge("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${u-C}ms\n\tDetermined least recently used ${r} in `+(h-u)+`ms\n\tRemoved ${o} targets in `+(g-h)+`ms\n\tRemoved ${I} documents in `+(y-g)+`ms\nTotal Duration: ${y-C}ms`),le.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:I})))}}class w${constructor(e,t){this.db=e,this.garbageCollector=new b$(this,t)}Bn(e){const t=this.Un(e);return this.db.getTargetCache().getTargetCount(e).next(i=>t.next(r=>i+r))}Un(e){let t=0;return this.Ln(e,i=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(i,r)=>t(r))}addReference(e,t,i){return WI(e,i)}removeReference(e,t,i){return WI(e,i)}removeTargets(e,t,i){return this.db.getTargetCache().removeTargets(e,t,i)}markPotentiallyOrphaned(e,t){return WI(e,t)}Gn(e,t){return function(i,r){let o=!1;return z2(i).tt(u=>q2(i,u,r).next(h=>(h&&(o=!0),le.resolve(!h)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let o=0;return this.Kn(e,(u,h)=>{if(h<=t){const g=this.Gn(e,u).next(y=>{if(!y)return o++,i.getEntry(e,u).next(()=>(i.removeEntry(u,Ot.min()),jh(e).delete([0,Ms(u.path)])))});r.push(g)}}).next(()=>le.waitFor(r)).next(()=>i.apply(e)).next(()=>o)}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,t){return WI(e,t)}Kn(e,t){const i=jh(e);let r,o=Bo.at;return i.Z({index:"documentTargetsIndex"},([u,h],{path:g,sequenceNumber:y})=>{0===u?(o!==Bo.at&&t(new it(gc(r)),o),o=y,r=g):o=Bo.at}).next(()=>{o!==Bo.at&&t(new it(gc(r)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function WI(n,e){return jh(n).put((i=n.currentSequenceNumber,{targetId:0,path:Ms(e.path),sequenceNumber:i}));var i}class Q2{constructor(){this.changes=new Lh(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,_i.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return void 0!==i?le.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class D${constructor(e){this.yt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,i){return ug(e).put(i)}removeEntry(e,t,i){return ug(e).delete(function(r,o){const u=r.path.toArray();return[u.slice(0,u.length-2),u[u.length-2],UI(o),u[u.length-1]]}(t,i))}updateMetadata(e,t){return this.getMetadata(e).next(i=>(i.byteSize+=t,this.Qn(e,i)))}getEntry(e,t){let i=_i.newInvalidDocument(t);return ug(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(kw(t))},(r,o)=>{i=this.jn(t,o)}).next(()=>i)}Wn(e,t){let i={size:0,document:_i.newInvalidDocument(t)};return ug(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(kw(t))},(r,o)=>{i={document:this.jn(t,o),size:$I(o)}}).next(()=>i)}getEntries(e,t){let i=ro();return this.zn(e,t,(r,o)=>{const u=this.jn(r,o);i=i.insert(r,u)}).next(()=>i)}Hn(e,t){let i=ro(),r=new Zi(it.comparator);return this.zn(e,t,(o,u)=>{const h=this.jn(o,u);i=i.insert(o,h),r=r.insert(o,$I(u))}).next(()=>({documents:i,Jn:r}))}zn(e,t,i){if(t.isEmpty())return le.resolve();let r=new Yn(tV);t.forEach(g=>r=r.add(g));const o=IDBKeyRange.bound(kw(r.first()),kw(r.last())),u=r.getIterator();let h=u.getNext();return ug(e).Z({index:"documentKeyIndex",range:o},(g,y,C)=>{const I=it.fromSegments([...y.prefixPath,y.collectionGroup,y.documentId]);for(;h&&tV(h,I)<0;)i(h,null),h=u.getNext();h&&h.isEqual(I)&&(i(h,y),h=u.hasNext()?u.getNext():null),h?C.j(kw(h)):C.done()}).next(()=>{for(;h;)i(h,null),h=u.hasNext()?u.getNext():null})}getAllFromCollection(e,t,i){const r=[t.popLast().toArray(),t.lastSegment(),UI(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],o=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ug(e).W(IDBKeyRange.bound(r,o,!0)).next(u=>{let h=ro();for(const g of u){const y=this.jn(it.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);h=h.insert(y.key,y)}return h})}getAllFromCollectionGroup(e,t,i,r){let o=ro();const u=eV(t,i),h=eV(t,Uo.max());return ug(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(u,h,!0)},(g,y,C)=>{const I=this.jn(it.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);o=o.insert(I.key,I),o.size===r&&C.done()}).next(()=>o)}newChangeBuffer(e){return new C$(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return X2(e).get("remoteDocumentGlobalKey").next(t=>(Tt(!!t),t))}Qn(e,t){return X2(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const i=function a$(n,e){let t;if(e.document)t=v2(n.ie,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=it.fromSegments(e.noDocument.path),r=sg(e.noDocument.readTime);t=_i.newNoDocument(i,r),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return _t();{const i=it.fromSegments(e.unknownDocument.path),r=sg(e.unknownDocument.version);t=_i.newUnknownDocument(i,r)}}return e.readTime&&t.setReadTime(function(i){const r=new Si(i[0],i[1]);return Ot.fromTimestamp(r)}(e.readTime)),t}(this.yt,t);if(!i.isNoDocument()||!i.version.isEqual(Ot.min()))return i}return _i.newInvalidDocument(e)}}function J2(n){return new D$(n)}class C$ extends Q2{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new Lh(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(e){const t=[];let i=0,r=new Yn((o,u)=>qt(o.canonicalString(),u.canonicalString()));return this.changes.forEach((o,u)=>{const h=this.Xn.get(o);if(t.push(this.Yn.removeEntry(e,o,h.readTime)),u.isValidDocument()){const g=O2(this.Yn.yt,u);r=r.add(o.path.popLast()),i+=$I(g)-h.size,t.push(this.Yn.addEntry(e,o,g))}else if(i-=h.size,this.trackRemovals){const g=O2(this.Yn.yt,u.convertToNoDocument(Ot.min()));t.push(this.Yn.addEntry(e,o,g))}}),r.forEach(o=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.Yn.updateMetadata(e,i)),le.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(i=>(this.Xn.set(t,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:i,Jn:r})=>(r.forEach((o,u)=>{this.Xn.set(o,{size:u,readTime:i.get(o).readTime})}),i))}}function X2(n){return Pr(n,"remoteDocumentGlobal")}function ug(n){return Pr(n,"remoteDocumentsV14")}function kw(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function eV(n,e){const t=e.documentKey.path.toArray();return[n,UI(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function tV(n,e){const t=n.path.toArray(),i=e.path.toArray();let r=0;for(let o=0;o<t.length-2&&o<i.length-2;++o)if(r=qt(t[o],i[o]),r)return r;return r=qt(t.length,i.length),r||(r=qt(t[t.length-2],i[i.length-2]),r||qt(t[t.length-1],i[i.length-1]))}class E${constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class nV{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,t))).next(r=>(null!==i&&Dw(i.mutation,r,jo.empty(),Si.now()),r))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,tn()).next(()=>i))}getLocalViewOfDocuments(e,t,i=tn()){const r=fc();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,i).next(o=>{let u=Cw();return o.forEach((h,g)=>{u=u.insert(h,g.overlayedDocument)}),u}))}getOverlayedDocuments(e,t){const i=fc();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,tn()))}populateOverlays(e,t,i){const r=[];return i.forEach(o=>{t.has(o)||r.push(o)}),this.documentOverlayCache.getOverlays(e,r).next(o=>{o.forEach((u,h)=>{t.set(u,h)})})}computeViews(e,t,i,r){let o=ro();const u=Ew(),h=Ew();return t.forEach((g,y)=>{const C=i.get(y.key);r.has(y.key)&&(void 0===C||C.mutation instanceof Lu)?o=o.insert(y.key,y):void 0!==C&&(u.set(y.key,C.mutation.getFieldMask()),Dw(C.mutation,y,C.mutation.getFieldMask(),Si.now()))}),this.recalculateAndSaveOverlays(e,o).next(g=>(g.forEach((y,C)=>u.set(y,C)),t.forEach((y,C)=>{var I;return h.set(y,new E$(C,null!==(I=u.get(y))&&void 0!==I?I:null))}),h))}recalculateAndSaveOverlays(e,t){const i=Ew();let r=new Zi((u,h)=>u-h),o=tn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(u=>{for(const h of u)h.keys().forEach(g=>{const y=t.get(g);if(null===y)return;let C=i.get(g)||jo.empty();C=h.applyToLocalView(y,C),i.set(g,C);const I=(r.get(h.batchId)||tn()).add(g);r=r.insert(h.batchId,I)})}).next(()=>{const u=[],h=r.getReverseIterator();for(;h.hasNext();){const g=h.getNext(),y=g.key,C=g.value,I=l2();C.forEach(A=>{if(!o.has(A)){const F=JL(t.get(A),i.get(A));null!==F&&I.set(A,F),o=o.add(A)}}),u.push(this.documentOverlayCache.saveOverlays(e,y,I))}return le.waitFor(u)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i){return it.isDocumentKey((r=t).path)&&null===r.collectionGroup&&0===r.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):SM(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i):this.getDocumentsMatchingCollectionQuery(e,t,i);var r}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next(o=>{const u=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-o.size):le.resolve(fc());let h=-1,g=o;return u.next(y=>le.forEach(y,(C,I)=>(h<I.largestBatchId&&(h=I.largestBatchId),o.get(C)?le.resolve():this.remoteDocumentCache.getEntry(e,C).next(A=>{g=g.insert(C,A)}))).next(()=>this.populateOverlays(e,y,o)).next(()=>this.computeViews(e,g,y,tn())).next(C=>({batchId:h,changes:a2(C)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new it(t)).next(i=>{let r=Cw();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,t,i){const r=t.collectionGroup;let o=Cw();return this.indexManager.getCollectionParents(e,r).next(u=>le.forEach(u,h=>{const g=(y=t,C=h.child(r),new Fu(C,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt));var y,C;return this.getDocumentsMatchingCollectionQuery(e,g,i).next(y=>{y.forEach((C,I)=>{o=o.insert(C,I)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,i){let r;return this.remoteDocumentCache.getAllFromCollection(e,t.path,i).next(o=>(r=o,this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId))).next(o=>{o.forEach((h,g)=>{const y=g.getKey();null===r.get(y)&&(r=r.insert(y,_i.newInvalidDocument(y)))});let u=Cw();return r.forEach((h,g)=>{const y=o.get(h);void 0!==y&&Dw(y.mutation,g,jo.empty(),Si.now()),xM(t,g)&&(u=u.insert(h,g))}),u})}}class I${constructor(e){this.yt=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return le.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var i;return this.Zn.set(t.id,{id:(i=t).id,version:i.version,createTime:tr(i.createTime)}),le.resolve()}getNamedQuery(e,t){return le.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(i=t).name,query:BM(i.bundledQuery),readTime:tr(i.readTime)}),le.resolve();var i}}class T${constructor(){this.overlays=new Zi(it.comparator),this.es=new Map}getOverlay(e,t){return le.resolve(this.overlays.get(t))}getOverlays(e,t){const i=fc();return le.forEach(t,r=>this.getOverlay(e,r).next(o=>{null!==o&&i.set(r,o)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((r,o)=>{this.oe(e,t,o)}),le.resolve()}removeOverlaysForBatchId(e,t,i){const r=this.es.get(i);return void 0!==r&&(r.forEach(o=>this.overlays=this.overlays.remove(o)),this.es.delete(i)),le.resolve()}getOverlaysForCollection(e,t,i){const r=fc(),o=t.length+1,u=new it(t.child("")),h=this.overlays.getIteratorFrom(u);for(;h.hasNext();){const g=h.getNext().value,y=g.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===o&&g.largestBatchId>i&&r.set(g.getKey(),g)}return le.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let o=new Zi((y,C)=>y-C);const u=this.overlays.getIterator();for(;u.hasNext();){const y=u.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>i){let C=o.get(y.largestBatchId);null===C&&(C=fc(),o=o.insert(y.largestBatchId,C)),C.set(y.getKey(),y)}}const h=fc(),g=o.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((y,C)=>h.set(y,C)),!(h.size()>=r)););return le.resolve(h)}oe(e,t,i){const r=this.overlays.get(i.key);if(null!==r){const u=this.es.get(r.largestBatchId).delete(i.key);this.es.set(r.largestBatchId,u)}this.overlays=this.overlays.insert(i.key,new UM(t,i));let o=this.es.get(t);void 0===o&&(o=tn(),this.es.set(t,o)),this.es.set(t,o.add(i.key))}}class qM{constructor(){this.ns=new Yn(kr.ss),this.rs=new Yn(kr.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const i=new kr(e,t);this.ns=this.ns.add(i),this.rs=this.rs.add(i)}us(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.cs(new kr(e,t))}hs(e,t){e.forEach(i=>this.removeReference(i,t))}ls(e){const t=new it(new Cn([])),i=new kr(t,e),r=new kr(t,e+1),o=[];return this.rs.forEachInRange([i,r],u=>{this.cs(u),o.push(u.key)}),o}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new it(new Cn([])),i=new kr(t,e),r=new kr(t,e+1);let o=tn();return this.rs.forEachInRange([i,r],u=>{o=o.add(u.key)}),o}containsKey(e){const t=new kr(e,0),i=this.ns.firstAfterOrEqual(t);return null!==i&&e.isEqual(i.key)}}class kr{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return it.comparator(e.key,t.key)||qt(e._s,t._s)}static os(e,t){return qt(e._s,t._s)||it.comparator(e.key,t.key)}}class S${constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new Yn(kr.ss)}checkEmpty(e){return le.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,i,r){const o=this.ws;this.ws++;const u=new LM(o,t,i,r);this.mutationQueue.push(u);for(const h of r)this.gs=this.gs.add(new kr(h.key,o)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return le.resolve(u)}lookupMutationBatch(e,t){return le.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const r=this.ps(t+1),o=r<0?0:r;return le.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return le.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return le.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new kr(t,0),r=new kr(t,Number.POSITIVE_INFINITY),o=[];return this.gs.forEachInRange([i,r],u=>{const h=this.ys(u._s);o.push(h)}),le.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Yn(qt);return t.forEach(r=>{const o=new kr(r,0),u=new kr(r,Number.POSITIVE_INFINITY);this.gs.forEachInRange([o,u],h=>{i=i.add(h._s)})}),le.resolve(this.Is(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1;let o=i;it.isDocumentKey(o)||(o=o.child(""));const u=new kr(new it(o),0);let h=new Yn(qt);return this.gs.forEachWhile(g=>{const y=g.key.path;return!!i.isPrefixOf(y)&&(y.length===r&&(h=h.add(g._s)),!0)},u),le.resolve(this.Is(h))}Is(e){const t=[];return e.forEach(i=>{const r=this.ys(i);null!==r&&t.push(r)}),t}removeMutationBatch(e,t){Tt(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let i=this.gs;return le.forEach(t.mutations,r=>{const o=new kr(r.key,t.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.gs=i})}An(e){}containsKey(e,t){const i=new kr(t,0),r=this.gs.firstAfterOrEqual(i);return le.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return le.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class A${constructor(e){this.Es=e,this.docs=new Zi(it.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,r=this.docs.get(i),o=r?r.size:0,u=this.Es(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:u}),this.size+=u-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return le.resolve(i?i.document.mutableCopy():_i.newInvalidDocument(t))}getEntries(e,t){let i=ro();return t.forEach(r=>{const o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():_i.newInvalidDocument(r))}),le.resolve(i)}getAllFromCollection(e,t,i){let r=ro();const o=new it(t.child("")),u=this.docs.getIteratorFrom(o);for(;u.hasNext();){const{key:h,value:{document:g}}=u.getNext();if(!t.isPrefixOf(h.path))break;h.path.length>t.length+1||yM(uL(g),i)<=0||(r=r.insert(g.key,g.mutableCopy()))}return le.resolve(r)}getAllFromCollectionGroup(e,t,i,r){_t()}As(e,t){return le.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new N$(this)}getSize(e){return le.resolve(this.size)}}class N$ extends Q2{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?t.push(this.Yn.addEntry(e,r)):this.Yn.removeEntry(i)}),le.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class x${constructor(e){this.persistence=e,this.Rs=new Lh(t=>eg(t),vw),this.lastRemoteSnapshotVersion=Ot.min(),this.highestTargetId=0,this.bs=0,this.Ps=new qM,this.targetCount=0,this.vs=cg.Pn()}forEachTarget(e,t){return this.Rs.forEach((i,r)=>t(r)),le.resolve()}getLastRemoteSnapshotVersion(e){return le.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return le.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),le.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.bs&&(this.bs=t),le.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new cg(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,le.resolve()}updateTargetData(e,t){return this.Dn(t),le.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,le.resolve()}removeTargets(e,t,i){let r=0;const o=[];return this.Rs.forEach((u,h)=>{h.sequenceNumber<=t&&null===i.get(h.targetId)&&(this.Rs.delete(u),o.push(this.removeMatchingKeysForTargetId(e,h.targetId)),r++)}),le.waitFor(o).next(()=>r)}getTargetCount(e){return le.resolve(this.targetCount)}getTargetData(e,t){const i=this.Rs.get(t)||null;return le.resolve(i)}addMatchingKeys(e,t,i){return this.Ps.us(t,i),le.resolve()}removeMatchingKeys(e,t,i){this.Ps.hs(t,i);const r=this.persistence.referenceDelegate,o=[];return r&&t.forEach(u=>{o.push(r.markPotentiallyOrphaned(e,u))}),le.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),le.resolve()}getMatchingKeysForTargetId(e,t){const i=this.Ps.ds(t);return le.resolve(i)}containsKey(e,t){return le.resolve(this.Ps.containsKey(t))}}class iV{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new Bo(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new x$(this),this.indexManager=new g$,this.remoteDocumentCache=new A$(i=>this.referenceDelegate.xs(i)),this.yt=new M2(t),this.Ns=new I$(this.yt)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new T$,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.Vs[e.toKey()];return i||(i=new S$(t,this.referenceDelegate),this.Vs[e.toKey()]=i),i}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,i){Ge("MemoryPersistence","Starting transaction:",e);const r=new M$(this.Ss.next());return this.referenceDelegate.ks(),i(r).next(o=>this.referenceDelegate.Os(r).next(()=>o)).toPromise().then(o=>(r.raiseOnCommittedEvent(),o))}Ms(e,t){return le.or(Object.values(this.Vs).map(i=>()=>i.containsKey(e,t)))}}class M$ extends hL{constructor(e){super(),this.currentSequenceNumber=e}}class qI{constructor(e){this.persistence=e,this.Fs=new qM,this.$s=null}static Bs(e){return new qI(e)}get Ls(){if(this.$s)return this.$s;throw _t()}addReference(e,t,i){return this.Fs.addReference(i,t),this.Ls.delete(i.toString()),le.resolve()}removeReference(e,t,i){return this.Fs.removeReference(i,t),this.Ls.add(i.toString()),le.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),le.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(r=>this.Ls.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(r=>{r.forEach(o=>this.Ls.add(o.toString()))}).next(()=>i.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return le.forEach(this.Ls,i=>{const r=it.fromPath(i);return this.qs(e,r).next(o=>{o||t.removeEntry(r,Ot.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.qs(e,t).next(i=>{i?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}qs(e,t){return le.or([()=>le.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class O${constructor(e){this.yt=e}$(e,t,i,r){const o=new II("createOrUpgrade",t);var h;i<1&&r>=1&&(e.createObjectStore("owner"),(h=e).createObjectStore("mutationQueues",{keyPath:"userId"}),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",T2,{unique:!0}),h.createObjectStore("documentMutations"),rV(e),function(h){h.createObjectStore("remoteDocuments")}(e));let u=le.resolve();return i<3&&r>=3&&(0!==i&&(function(h){h.deleteObjectStore("targetDocuments"),h.deleteObjectStore("targets"),h.deleteObjectStore("targetGlobal")}(e),rV(e)),u=u.next(()=>function(h){const g=h.store("targetGlobal"),y={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ot.min().toTimestamp(),targetCount:0};return g.put("targetGlobalKey",y)}(o))),i<4&&r>=4&&(0!==i&&(u=u.next(()=>function(h,g){return g.store("mutations").W().next(y=>{h.deleteObjectStore("mutations"),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",T2,{unique:!0});const C=g.store("mutations"),I=y.map(A=>C.put(A));return le.waitFor(I)})}(e,o))),u=u.next(()=>{!function(h){h.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),i<5&&r>=5&&(u=u.next(()=>this.Us(o))),i<6&&r>=6&&(u=u.next(()=>(function(h){h.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(o)))),i<7&&r>=7&&(u=u.next(()=>this.Gs(o))),i<8&&r>=8&&(u=u.next(()=>this.Qs(e,o))),i<9&&r>=9&&(u=u.next(()=>{!function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")}(e)})),i<10&&r>=10&&(u=u.next(()=>this.js(o))),i<11&&r>=11&&(u=u.next(()=>{(function(h){h.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(h){h.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),i<12&&r>=12&&(u=u.next(()=>{!function(h){const g=h.createObjectStore("documentOverlays",{keyPath:n$});g.createIndex("collectionPathOverlayIndex",i$,{unique:!1}),g.createIndex("collectionGroupOverlayIndex",r$,{unique:!1})}(e)})),i<13&&r>=13&&(u=u.next(()=>function(h){const g=h.createObjectStore("remoteDocumentsV14",{keyPath:ZG});g.createIndex("documentKeyIndex",WG),g.createIndex("collectionGroupIndex",qG)}(e)).next(()=>this.Ws(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),i<14&&r>=14&&(u=u.next(()=>this.zs(e,o))),i<15&&r>=15&&(u=u.next(()=>function(h){h.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),h.createObjectStore("indexState",{keyPath:JG}).createIndex("sequenceNumberIndex",XG,{unique:!1}),h.createObjectStore("indexEntries",{keyPath:e$}).createIndex("documentKeyIndex",t$,{unique:!1})}(e))),u}Ks(e){let t=0;return e.store("remoteDocuments").Z((i,r)=>{t+=$I(r)}).next(()=>{const i={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}Us(e){const t=e.store("mutationQueues"),i=e.store("mutations");return t.W().next(r=>le.forEach(r,o=>{const u=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return i.W("userMutationsIndex",u).next(h=>le.forEach(h,g=>{Tt(g.userId===o.userId);const y=og(this.yt,g);return W2(e,o.userId,y).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),i=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(r=>{const o=[];return i.Z((u,h)=>{const g=new Cn(u),y=[0,Ms(g)];o.push(t.get(y).next(C=>C?le.resolve():t.put({targetId:0,path:Ms(g),sequenceNumber:r.highestListenSequenceNumber})))}).next(()=>le.waitFor(o))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:QG});const i=t.store("collectionParents"),r=new WM,o=u=>{if(r.add(u)){const h=u.lastSegment(),g=u.popLast();return i.put({collectionId:h,parent:Ms(g)})}};return t.store("remoteDocuments").Z({X:!0},(u,h)=>{const g=new Cn(u);return o(g.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([u,h,g],y)=>{const C=gc(h);return o(C.popLast())}))}js(e){const t=e.store("targets");return t.Z((i,r)=>{const o=xw(r),u=R2(this.yt,o);return t.put(u)})}Ws(e,t){const i=t.store("remoteDocuments"),r=[];return i.Z((o,u)=>{const h=t.store("remoteDocumentsV14"),g=(y=u,y.document?new it(Cn.fromString(y.document.name).popFirst(5)):y.noDocument?it.fromSegments(y.noDocument.path):y.unknownDocument?it.fromSegments(y.unknownDocument.path):_t()).path.toArray();var y;const C={prefixPath:g.slice(0,g.length-2),collectionGroup:g[g.length-2],documentId:g[g.length-1],readTime:u.readTime||[0,0],unknownDocument:u.unknownDocument,noDocument:u.noDocument,document:u.document,hasCommittedMutations:!!u.hasCommittedMutations};r.push(h.put(C))}).next(()=>le.waitFor(r))}zs(e,t){const i=t.store("mutations"),r=J2(this.yt),o=new iV(qI.Bs,this.yt.ie);return i.W().next(u=>{const h=new Map;return u.forEach(g=>{var y;let C=null!==(y=h.get(g.userId))&&void 0!==y?y:tn();og(this.yt,g).keys().forEach(I=>C=C.add(I)),h.set(g.userId,C)}),le.forEach(h,(g,y)=>{const C=new Rr(y),I=BI.re(this.yt,C),A=o.getIndexManager(C),F=ZI.re(C,this.yt,A,o.referenceDelegate);return new nV(r,F,I,A).recalculateAndSaveOverlaysForDocumentKeys(new FM(t,Bo.at),g).next()})})}}function rV(n){n.createObjectStore("targetDocuments",{keyPath:KG}).createIndex("documentTargetsIndex",YG,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",zG,{unique:!0}),n.createObjectStore("targetGlobal")}const zM="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class KM{constructor(e,t,i,r,o,u,h,g,y,C,I=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=i,this.Hs=o,this.window=u,this.document=h,this.Js=y,this.Ys=C,this.Xs=I,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=A=>Promise.resolve(),!KM.C())throw new ke(pe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new w$(this,r),this.ii=t+"main",this.yt=new M2(g),this.ri=new nl(this.ii,this.Xs,new O$(this.yt)),this.Cs=new _$(this.referenceDelegate,this.yt),this.remoteDocumentCache=J2(this.yt),this.Ns=new l$,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===C&&er("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ke(pe.FAILED_PRECONDITION,zM);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new Bo(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var i=(0,ge.Z)(function*(r){if(t.started)return e(r)});return function(r){return i.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,ge.Z)(function*(i){null===i.newVersion&&(yield e())});return function(i){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,ge.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>zI(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(Mh(e))return Ge("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ge("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return Fw(e).get("owner").next(t=>le.resolve(this.mi(t)))}gi(e){return zI(e).delete(this.clientId)}yi(){var e=this;return(0,ge.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",i=>{const r=Pr(i,"clientMetadata");return r.W().next(o=>{const u=e.Ii(o,18e5),h=o.filter(g=>-1===u.indexOf(g));return le.forEach(h,g=>r.delete(g.clientId)).next(()=>h)})}).catch(()=>[]);if(e.oi)for(const i of t)e.oi.removeItem(e.Ti(i.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?le.resolve(!0):Fw(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new ke(pe.FAILED_PRECONDITION,zM);return!1}}return!(!this.networkEnabled||!this.inForeground)||zI(e).W().next(i=>void 0===this.Ii(i,5e3).find(r=>{if(this.clientId!==r.clientId){const u=!this.inForeground&&r.inForeground,h=this.networkEnabled===r.networkEnabled;if(!this.networkEnabled&&r.networkEnabled||u&&h)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Ge("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ge.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const i=new FM(t,Bo.at);return e._i(i).next(()=>e.gi(i))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(i=>this.pi(i.updateTimeMs,t)&&!this.Ei(i.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>zI(e).W().next(t=>this.Ii(t,18e5).map(i=>i.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return ZI.re(e,this.yt,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new m$(e,this.yt.ie.databaseId)}getDocumentOverlayCache(e){return BI.re(this.yt,e)}getBundleCache(){return this.Ns}runTransaction(e,t,i){Ge("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",o=15===(u=this.Xs)?o$:14===u?x2:13===u?N2:12===u?s$:11===u?A2:void _t();var u;let h;return this.ri.runTransaction(e,r,o,g=>(h=new FM(g,this.Ss?this.Ss.next():Bo.at),"readwrite-primary"===t?this.fi(h).next(y=>!!y||this.di(h)).next(y=>{if(!y)throw er(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new ke(pe.FAILED_PRECONDITION,dL);return i(h)}).next(y=>this.wi(h).next(()=>y)):this.Vi(h).next(()=>i(h)))).then(g=>(h.raiseOnCommittedEvent(),g))}Vi(e){return Fw(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ke(pe.FAILED_PRECONDITION,zM)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Fw(e).put("owner",t)}static C(){return nl.C()}_i(e){const t=Fw(e);return t.get("owner").next(i=>this.mi(i)?(Ge("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):le.resolve())}pi(e,t){const i=Date.now();return!(e<i-t||e>i&&(er(`Detected an update time that is in the future: ${e} > ${i}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,k.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const i=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return Ge("IndexedDbPersistence",`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return er("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){er("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Fw(n){return Pr(n,"owner")}function zI(n){return Pr(n,"clientMetadata")}function YM(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class QM{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.Si=i,this.Di=r}static Ci(e,t){let i=tn(),r=tn();for(const o of t.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new QM(e,t.fromCache,i,r)}}class sV{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,i,r){return this.ki(e,t).next(o=>o||this.Oi(e,t,r,i)).next(o=>o||this.Mi(e,t))}ki(e,t){if(BL(t))return le.resolve(null);let i=xs(t);return this.indexManager.getIndexType(e,i).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=OI(t,null,"F"),i=xs(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{const u=tn(...o);return this.Ni.getDocuments(e,u).next(h=>this.indexManager.getMinOffset(e,i).next(g=>{const y=this.Fi(t,h);return this.$i(t,y,u,g.readTime)?this.ki(e,OI(t,null,"F")):this.Bi(e,y,t,g)}))})))}Oi(e,t,i,r){return BL(t)||r.isEqual(Ot.min())?this.Mi(e,t):this.Ni.getDocuments(e,i).next(o=>{const u=this.Fi(t,o);return this.$i(t,u,i,r)?this.Mi(e,t):(gM()<=ma.in.DEBUG&&Ge("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),NM(t)),this.Bi(e,u,t,cL(r,-1)))})}Fi(e,t){let i=new Yn(GL(e));return t.forEach((r,o)=>{xM(e,o)&&(i=i.add(o))}),i}$i(e,t,i,r){if(null===e.limit)return!1;if(i.size!==t.size)return!0;const o="F"===e.limitType?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Mi(e,t){return gM()<=ma.in.DEBUG&&Ge("QueryEngine","Using full collection scan to execute query:",NM(t)),this.Ni.getDocumentsMatchingQuery(e,t,Uo.min())}Bi(e,t,i,r){return this.Ni.getDocumentsMatchingQuery(e,i,r).next(o=>(t.forEach(u=>{o=o.insert(u.key,u)}),o))}}class R${constructor(e,t,i,r){this.persistence=e,this.Li=t,this.yt=r,this.qi=new Zi(qt),this.Ui=new Lh(o=>eg(o),vw),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(i)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new nV(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.qi))}}function oV(n,e,t,i){return new R$(n,e,t,i)}function aV(n,e){return JM.apply(this,arguments)}function JM(){return JM=(0,ge.Z)(function*(n,e){const t=st(n);return yield t.persistence.runTransaction("Handle user change","readonly",i=>{let r;return t.mutationQueue.getAllMutationBatches(i).next(o=>(r=o,t.Qi(e),t.mutationQueue.getAllMutationBatches(i))).next(o=>{const u=[],h=[];let g=tn();for(const y of r){u.push(y.batchId);for(const C of y.mutations)g=g.add(C.key)}for(const y of o){h.push(y.batchId);for(const C of y.mutations)g=g.add(C.key)}return t.localDocuments.getDocuments(i,g).next(y=>({ji:y,removedBatchIds:u,addedBatchIds:h}))})})}),JM.apply(this,arguments)}function P$(n,e){const t=st(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),o=t.Gi.newChangeBuffer({trackRemovals:!0});return function(u,h,g,y){const C=g.batch,I=C.keys();let A=le.resolve();return I.forEach(F=>{A=A.next(()=>y.getEntry(h,F)).next(Z=>{const ee=g.docVersions.get(F);Tt(null!==ee),Z.version.compareTo(ee)<0&&(C.applyToRemoteDocument(Z,g),Z.isValidDocument()&&(Z.setReadTime(g.commitVersion),y.addEntry(Z)))})}),A.next(()=>u.mutationQueue.removeMutationBatch(h,C))}(t,i,e,o).next(()=>o.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(u){let h=tn();for(let g=0;g<u.mutationResults.length;++g)u.mutationResults[g].transformResults.length>0&&(h=h.add(u.batch.mutations[g].key));return h}(e))).next(()=>t.localDocuments.getDocuments(i,r))})}function lV(n){const e=st(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function k$(n,e){const t=st(n),i=e.snapshotVersion;let r=t.qi;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const u=t.Gi.newChangeBuffer({trackRemovals:!0});r=t.qi;const h=[];e.targetChanges.forEach((C,I)=>{const A=r.get(I);if(!A)return;h.push(t.Cs.removeMatchingKeys(o,C.removedDocuments,I).next(()=>t.Cs.addMatchingKeys(o,C.addedDocuments,I)));let F=A.withSequenceNumber(o.currentSequenceNumber);var Z,ee,ce;e.targetMismatches.has(I)?F=F.withResumeToken(wr.EMPTY_BYTE_STRING,Ot.min()).withLastLimboFreeSnapshotVersion(Ot.min()):C.resumeToken.approximateByteSize()>0&&(F=F.withResumeToken(C.resumeToken,i)),r=r.insert(I,F),ee=F,ce=C,(0===(Z=A).resumeToken.approximateByteSize()||ee.snapshotVersion.toMicroseconds()-Z.snapshotVersion.toMicroseconds()>=3e8||ce.addedDocuments.size+ce.modifiedDocuments.size+ce.removedDocuments.size>0)&&h.push(t.Cs.updateTargetData(o,F))});let g=ro(),y=tn();if(e.documentUpdates.forEach(C=>{e.resolvedLimboDocuments.has(C)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(o,C))}),h.push(cV(o,u,e.documentUpdates).next(C=>{g=C.Wi,y=C.zi})),!i.isEqual(Ot.min())){const C=t.Cs.getLastRemoteSnapshotVersion(o).next(I=>t.Cs.setTargetsMetadata(o,o.currentSequenceNumber,i));h.push(C)}return le.waitFor(h).next(()=>u.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,g,y)).next(()=>g)}).then(o=>(t.qi=r,o))}function cV(n,e,t){let i=tn(),r=tn();return t.forEach(o=>i=i.add(o)),e.getEntries(n,i).next(o=>{let u=ro();return t.forEach((h,g)=>{const y=o.get(h);g.isFoundDocument()!==y.isFoundDocument()&&(r=r.add(h)),g.isNoDocument()&&g.version.isEqual(Ot.min())?(e.removeEntry(h,g.readTime),u=u.insert(h,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||0===g.version.compareTo(y.version)&&y.hasPendingWrites?(e.addEntry(g),u=u.insert(h,g)):Ge("LocalStore","Ignoring outdated watch update for ",h,". Current version:",y.version," Watch version:",g.version)}),{Wi:u,zi:r}})}function F$(n,e){const t=st(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function wy(n,e){const t=st(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return t.Cs.getTargetData(i,e).next(o=>o?(r=o,le.resolve(r)):t.Cs.allocateTargetId(i).next(u=>(r=new Vh(e,u,0,i.currentSequenceNumber),t.Cs.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=t.qi.get(i.targetId);return(null===r||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.qi=t.qi.insert(i.targetId,i),t.Ui.set(e,i.targetId)),i})}function Dy(n,e,t){return XM.apply(this,arguments)}function XM(){return XM=(0,ge.Z)(function*(n,e,t){const i=st(n),r=i.qi.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield i.persistence.runTransaction("Release target",o,u=>i.persistence.referenceDelegate.removeTarget(u,r)))}catch(u){if(!Mh(u))throw u;Ge("LocalStore",`Failed to update sequence numbers for target ${e}: ${u}`)}i.qi=i.qi.remove(e),i.Ui.delete(r.target)}),XM.apply(this,arguments)}function KI(n,e,t){const i=st(n);let r=Ot.min(),o=tn();return i.persistence.runTransaction("Execute query","readonly",u=>function(h,g,y){const C=st(h),I=C.Ui.get(y);return void 0!==I?le.resolve(C.qi.get(I)):C.Cs.getTargetData(g,y)}(i,u,xs(e)).next(h=>{if(h)return r=h.lastLimboFreeSnapshotVersion,i.Cs.getMatchingKeysForTargetId(u,h.targetId).next(g=>{o=g})}).next(()=>i.Li.getDocumentsMatchingQuery(u,e,t?r:Ot.min(),t?o:tn())).next(h=>(hV(i,HL(e),h),{documents:h,Hi:o})))}function uV(n,e){const t=st(n),i=st(t.Cs),r=t.qi.get(e);return r?Promise.resolve(r.target):t.persistence.runTransaction("Get target data","readonly",o=>i.ne(o,e).next(u=>u?u.target:null))}function dV(n,e){const t=st(n),i=t.Ki.get(e)||Ot.min();return t.persistence.runTransaction("Get new document changes","readonly",r=>t.Gi.getAllFromCollectionGroup(r,e,cL(i,-1),Number.MAX_SAFE_INTEGER)).then(r=>(hV(t,e,r),r))}function hV(n,e,t){let i=n.Ki.get(e)||Ot.min();t.forEach((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),n.Ki.set(e,i)}function eO(){return eO=(0,ge.Z)(function*(n,e,t,i){const r=st(n);let o=tn(),u=ro();for(const y of t){const C=e.Ji(y.metadata.name);y.document&&(o=o.add(C));const I=e.Yi(y);I.setReadTime(e.Xi(y.metadata.readTime)),u=u.insert(C,I)}const h=r.Gi.newChangeBuffer({trackRemovals:!0}),g=yield wy(r,(y=i,xs(dy(Cn.fromString(`__bundle__/docs/${y}`)))));var y;return r.persistence.runTransaction("Apply bundle documents","readwrite",y=>cV(y,h,u).next(C=>(h.apply(y),C)).next(C=>r.Cs.removeMatchingKeysForTargetId(y,g.targetId).next(()=>r.Cs.addMatchingKeys(y,o,g.targetId)).next(()=>r.localDocuments.getLocalViewOfDocuments(y,C.Wi,C.zi)).next(()=>C.Wi)))}),eO.apply(this,arguments)}function V$(n,e){return tO.apply(this,arguments)}function tO(){return tO=(0,ge.Z)(function*(n,e,t=tn()){const i=yield wy(n,xs(BM(e.bundledQuery))),r=st(n);return r.persistence.runTransaction("Save named query","readwrite",o=>{const u=tr(e.readTime);if(i.snapshotVersion.compareTo(u)>=0)return r.Ns.saveNamedQuery(o,e);const h=i.withResumeToken(wr.EMPTY_BYTE_STRING,u);return r.qi=r.qi.insert(h.targetId,h),r.Cs.updateTargetData(o,h).next(()=>r.Cs.removeMatchingKeysForTargetId(o,i.targetId)).next(()=>r.Cs.addMatchingKeys(o,t,i.targetId)).next(()=>r.Ns.saveNamedQuery(o,e))})}),tO.apply(this,arguments)}function fV(n,e){return`firestore_clients_${n}_${e}`}function pV(n,e,t){let i=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}function nO(n,e){return`firestore_targets_${n}_${e}`}class YI{constructor(e,t,i,r){this.user=e,this.batchId=t,this.state=i,this.error=r}static Zi(e,t,i){const r=JSON.parse(i);let o,u="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(o=new ke(r.error.code,r.error.message))),u?new YI(e,t,r.state,o):(er("SharedClientState",`Failed to parse mutation state for ID '${t}': ${i}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Lw{constructor(e,t,i){this.targetId=e,this.state=t,this.error=i}static Zi(e,t){const i=JSON.parse(t);let r,o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code,o&&(r=new ke(i.error.code,i.error.message))),o?new Lw(e,i.state,r):(er("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class QI{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const i=JSON.parse(t);let r="object"==typeof i&&i.activeTargetIds instanceof Array,o=FI();for(let u=0;r&&u<i.activeTargetIds.length;++u)r=mL(i.activeTargetIds[u]),o=o.add(i.activeTargetIds[u]);return r?new QI(e,o):(er("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class iO{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new iO(t.clientId,t.onlineState):(er("SharedClientState",`Failed to parse online state: ${e}`),null)}}class rO{constructor(){this.activeTargetIds=FI()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class sO{constructor(e,t,i,r,o){this.window=e,this.Hs=t,this.persistenceKey=i,this.sr=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new Zi(qt),this.started=!1,this.cr=[];const u=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.ar=fV(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new rO),this.lr=new RegExp(`^firestore_clients_${u}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${u}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${u}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(h){return`firestore_bundle_loaded_v2_${h}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ge.Z)(function*(){const t=yield e.syncEngine.vi();for(const r of t){if(r===e.sr)continue;const o=e.getItem(fV(e.persistenceKey,r));if(o){const u=QI.Zi(r,o);u&&(e.ur=e.ur.insert(u.clientId,u))}}e.gr();const i=e.storage.getItem(e.wr);if(i){const r=e.yr(i);r&&e.pr(r)}for(const r of e.cr)e.rr(r);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((i,r)=>{r.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,i){this.Tr(e,t,i),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(nO(this.persistenceKey,e));if(i){const r=Lw.Zi(e,i);r&&(t=r.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(nO(this.persistenceKey,e))}updateQueryState(e,t,i){this.Rr(e,t,i)}handleUserChange(e,t,i){t.forEach(r=>{this.Er(r)}),this.currentUser=e,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ge("SharedClientState","READ",e,t),t}setItem(e,t){Ge("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ge("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const i=e;if(i.storageArea===this.storage){if(Ge("SharedClientState","EVENT",i.key,i.newValue),i.key===this.ar)return void er("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,ge.Z)(function*(){if(t.started){if(null!==i.key)if(t.lr.test(i.key)){if(null==i.newValue){const r=t.vr(i.key);return t.Vr(r,null)}{const r=t.Sr(i.key,i.newValue);if(r)return t.Vr(r.clientId,r)}}else if(t.dr.test(i.key)){if(null!==i.newValue){const r=t.Dr(i.key,i.newValue);if(r)return t.Cr(r)}}else if(t._r.test(i.key)){if(null!==i.newValue){const r=t.Nr(i.key,i.newValue);if(r)return t.kr(r)}}else if(i.key===t.wr){if(null!==i.newValue){const r=t.yr(i.newValue);if(r)return t.pr(r)}}else if(i.key===t.hr){const r=function(o){let u=Bo.at;if(null!=o)try{const h=JSON.parse(o);Tt("number"==typeof h),u=h}catch(h){er("SharedClientState","Failed to read sequence number from WebStorage",h)}return u}(i.newValue);r!==Bo.at&&t.sequenceNumberHandler(r)}else if(i.key===t.mr){const r=t.Or(i.newValue);yield Promise.all(r.map(o=>t.syncEngine.Mr(o)))}}else t.cr.push(i)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,i){const r=new YI(this.currentUser,e,t,i),o=pV(this.persistenceKey,this.currentUser,e);this.setItem(o,r.tr())}Er(e){const t=pV(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,i){const r=nO(this.persistenceKey,e),o=new Lw(e,t,i);this.setItem(r,o.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const i=this.vr(e);return QI.Zi(i,t)}Dr(e,t){const i=this.dr.exec(e),r=Number(i[1]);return YI.Zi(new Rr(void 0!==i[2]?i[2]:null),r,t)}Nr(e,t){const i=this._r.exec(e),r=Number(i[1]);return Lw.Zi(r,t)}yr(e){return iO.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,ge.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);Ge("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const i=t?this.ur.insert(e,t):this.ur.remove(e),r=this.Ir(this.ur),o=this.Ir(i),u=[],h=[];return o.forEach(g=>{r.has(g)||u.push(g)}),r.forEach(g=>{o.has(g)||h.push(g)}),this.syncEngine.Br(u,h).then(()=>{this.ur=i})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=FI();return e.forEach((i,r)=>{t=t.unionWith(r.activeTargetIds)}),t}}class gV{constructor(){this.Lr=new rO,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e){return this.Lr.er(e),this.qr[e]||"not-current"}updateQueryState(e,t,i){this.qr[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new rO,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class U${Ur(e){}shutdown(){}}class mV{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}Ur(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){Ge("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){Ge("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const B$={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class j${constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class H$ extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,i,r,o){const u=this.ho(e,t);Ge("RestConnection","Sending: ",u,i);const h={};return this.lo(h,r,o),this.fo(e,u,h,i).then(g=>(Ge("RestConnection","Received: ",g),g),g=>{throw qp("RestConnection",`${e} failed with error: `,g,"url: ",u,"request:",i),g})}_o(e,t,i,r,o,u){return this.ao(e,t,i,r,o)}lo(e,t,i){e["X-Goog-Api-Client"]="gl-js/ fire/"+sy,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((r,o)=>e[o]=r),i&&i.headers.forEach((r,o)=>e[o]=r)}ho(e,t){return`${this.oo}/v1/${t}:${B$[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,i,r){return new Promise((o,u)=>{const h=new jH;h.setWithCredentials(!0),h.listenOnce(VH.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case pM.NO_ERROR:const y=h.getResponseJson();Ge("Connection","XHR received:",JSON.stringify(y)),o(y);break;case pM.TIMEOUT:Ge("Connection",'RPC "'+e+'" timed out'),u(new ke(pe.DEADLINE_EXCEEDED,"Request time out"));break;case pM.HTTP_ERROR:const C=h.getStatus();if(Ge("Connection",'RPC "'+e+'" failed with status:',C,"response text:",h.getResponseText()),C>0){let I=h.getResponseJson();Array.isArray(I)&&(I=I[0]);const A=I?.error;if(A&&A.status&&A.message){const F=function(Z){const ee=Z.toLowerCase().replace(/_/g,"-");return Object.values(pe).indexOf(ee)>=0?ee:pe.UNKNOWN}(A.status);u(new ke(F,A.message))}else u(new ke(pe.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new ke(pe.UNAVAILABLE,"Connection failed."));break;default:_t()}}finally{Ge("Connection",'RPC "'+e+'" completed.')}});const g=JSON.stringify(r);h.send(t,"POST",g,i,15)})}wo(e,t,i){const r=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=FH(),u=LH(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(h.xmlHttpFactory=new BH({})),this.lo(h.initMessageHeaders,t,i),h.encodeInitMessageHeaders=!0;const g=r.join("");Ge("Connection","Creating WebChannel: "+g,h);const y=o.createWebChannel(g,h);let C=!1,I=!1;const A=new j$({Hr:Z=>{I?Ge("Connection","Not sending because WebChannel is closed:",Z):(C||(Ge("Connection","Opening WebChannel transport."),y.open(),C=!0),Ge("Connection","WebChannel sending:",Z),y.send(Z))},Jr:()=>y.close()}),F=(Z,ee,ce)=>{Z.listen(ee,Ze=>{try{ce(Ze)}catch(We){setTimeout(()=>{throw We},0)}})};return F(y,DI.EventType.OPEN,()=>{I||Ge("Connection","WebChannel transport opened.")}),F(y,DI.EventType.CLOSE,()=>{I||(I=!0,Ge("Connection","WebChannel transport closed"),A.io())}),F(y,DI.EventType.ERROR,Z=>{I||(I=!0,qp("Connection","WebChannel transport errored:",Z),A.io(new ke(pe.UNAVAILABLE,"The operation could not be completed")))}),F(y,DI.EventType.MESSAGE,Z=>{var ee;if(!I){const ce=Z.data[0];Tt(!!ce);const Ze=ce,We=Ze.error||(null===(ee=Ze[0])||void 0===ee?void 0:ee.error);if(We){Ge("Connection","WebChannel received error:",We);const rt=We.status;let Je=function(ct){const Zt=gr[ct];if(void 0!==Zt)return s2(Zt)}(rt),Xe=We.message;void 0===Je&&(Je=pe.INTERNAL,Xe="Unknown error status: "+rt+" with message "+We.message),I=!0,A.io(new ke(Je,Xe)),y.close()}else Ge("Connection","WebChannel received:",ce),A.ro(ce)}}),F(u,UH.STAT_EVENT,Z=>{Z.stat===iL.PROXY?Ge("Connection","Detected buffering proxy"):Z.stat===iL.NOPROXY&&Ge("Connection","Detected no buffering proxy")}),setTimeout(()=>{A.so()},0),A}}function _V(){return typeof window<"u"?window:null}function JI(){return typeof document<"u"?document:null}function Vw(n){return new RG(n,!0)}class oO{constructor(e,t,i=1e3,r=1.5,o=6e4){this.Hs=e,this.timerId=t,this.mo=i,this.yo=r,this.po=o,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),i=Math.max(0,Date.now()-this.Eo),r=Math.max(0,t-i);r>0&&Ge("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,r,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class yV{constructor(e,t,i,r,o,u,h,g){this.Hs=e,this.vo=i,this.Vo=r,this.connection=o,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=h,this.listener=g,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new oO(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,ge.Z)(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,ge.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}qo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var i=this;return(0,ge.Z)(function*(){i.Lo(),i.qo(),i.xo.cancel(),i.So++,4!==e?i.xo.reset():t&&t.code===pe.RESOURCE_EXHAUSTED?(er(t.toString()),er("Using maximum backoff delay to prevent overloading the backend."),i.xo.Ao()):t&&t.code===pe.UNAUTHENTICATED&&3!==i.state&&(i.authCredentialsProvider.invalidateToken(),i.appCheckCredentialsProvider.invalidateToken()),null!==i.stream&&(i.Uo(),i.stream.close(),i.stream=null),i.state=e,yield i.listener.Zr(t)})()}Uo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.So===t&&this.Go(i,r)},i=>{e(()=>{const r=new ke(pe.UNKNOWN,"Fetching auth token failed: "+i.message);return this.Qo(r)})})}Go(e,t){const i=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{i(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(r=>{i(()=>this.Qo(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}Oo(){var e=this;this.state=5,this.xo.Ro((0,ge.Z)(function*(){e.state=0,e.start()}))}Qo(e){return Ge("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(Ge("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class G$ extends yV{constructor(e,t,i,r,o,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,u),this.yt=o}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=function FG(n,e){let t;if("targetChange"in e){const i="NO_CHANGE"===(g=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===g?1:"REMOVE"===g?2:"CURRENT"===g?3:"RESET"===g?4:_t(),r=e.targetChange.targetIds||[],o=function(g,y){return g.wt?(Tt(void 0===y||"string"==typeof y),wr.fromBase64String(y||"")):(Tt(void 0===y||y instanceof Uint8Array),wr.fromUint8Array(y||new Uint8Array))}(n,e.targetChange.resumeToken),u=e.targetChange.cause,h=u&&function(g){const y=void 0===g.code?pe.UNKNOWN:s2(g.code);return new ke(y,g.message||"")}(u);t=new u2(i,r,o,h||null)}else if("documentChange"in e){const i=e.documentChange,r=pc(n,i.document.name),o=tr(i.document.updateTime),u=i.document.createTime?tr(i.document.createTime):Ot.min(),h=new Xr({mapValue:{fields:i.document.fields}}),g=_i.newFoundDocument(r,o,u,h);t=new LI(i.targetIds||[],i.removedTargetIds||[],g.key,g)}else if("documentDelete"in e){const i=e.documentDelete,r=pc(n,i.document),o=i.readTime?tr(i.readTime):Ot.min(),u=_i.newNoDocument(r,o);t=new LI([],i.removedTargetIds||[],u.key,u)}else if("documentRemove"in e){const i=e.documentRemove,r=pc(n,i.document);t=new LI([],i.removedTargetIds||[],r,null)}else{if(!("filter"in e))return _t();{const i=e.filter,o=new EG(i.count||0);t=new c2(i.targetId,o)}}var g;return t}(this.yt,e),i=function(r){if(!("targetChange"in r))return Ot.min();const o=r.targetChange;return o.targetIds&&o.targetIds.length?Ot.min():o.readTime?tr(o.readTime):Ot.min()}(e);return this.listener.Wo(t,i)}zo(e){const t={};t.database=Aw(this.yt),t.addTarget=function(r,o){let u;const h=o.target;return u=NI(h)?{documents:b2(r,h)}:{query:kM(r,h)},u.targetId=o.targetId,o.resumeToken.approximateByteSize()>0?u.resumeToken=p2(r,o.resumeToken):o.snapshotVersion.compareTo(Ot.min())>0&&(u.readTime=my(r,o.snapshotVersion.toTimestamp())),u}(this.yt,e);const i=function VG(n,e){const t=function(i,r){switch(r){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return _t()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);i&&(t.labels=i),this.Bo(t)}Ho(e){const t={};t.database=Aw(this.yt),t.removeTarget=e,this.Bo(t)}}class $$ extends yV{constructor(e,t,i,r,o,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,r,u),this.yt=o,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}Uo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(Tt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function LG(n,e){return n&&n.length>0?(Tt(void 0!==e),n.map(t=>function(i,r){let o=tr(i.updateTime?i.updateTime:r);return o.isEqual(Ot.min())&&(o=tr(r)),new wG(o,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),i=tr(e.commitTime);return this.listener.Zo(i,t)}return Tt(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=Aw(this.yt),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>Nw(this.yt,i))};this.Bo(t)}}class Z$ extends class{}{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.yt=r,this.nu=!1}su(){if(this.nu)throw new ke(pe.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,i){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,o])=>this.connection.ao(e,t,i,r,o)).catch(r=>{throw"FirebaseError"===r.name?(r.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new ke(pe.UNKNOWN,r.toString())})}_o(e,t,i,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.connection._o(e,t,i,o,u,r)).catch(o=>{throw"FirebaseError"===o.name?(o.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ke(pe.UNKNOWN,o.toString())})}terminate(){this.nu=!0}}class q${constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(er(t),this.ou=!1):Ge("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class z${constructor(e,t,i,r,o){var u=this;this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=o,this.mu.Ur(h=>{i.enqueueAndForget((0,ge.Z)(function*(){var g;Vu(u)&&(Ge("RemoteStore","Restarting streams for network reachability change."),yield(g=(0,ge.Z)(function*(y){const C=st(y);C._u.add(4),yield Cy(C),C.gu.set("Unknown"),C._u.delete(4),yield Uw(C)}),function(y){return g.apply(this,arguments)})(u))}))}),this.gu=new q$(i,r)}}function Uw(n){return lO.apply(this,arguments)}function lO(){return lO=(0,ge.Z)(function*(n){if(Vu(n))for(const e of n.wu)yield e(!0)}),lO.apply(this,arguments)}function Cy(n){return cO.apply(this,arguments)}function cO(){return cO=(0,ge.Z)(function*(n){for(const e of n.wu)yield e(!1)}),cO.apply(this,arguments)}function XI(n,e){const t=st(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),hO(t)?dO(t):Iy(t).ko()&&uO(t,e))}function Bw(n,e){const t=st(n),i=Iy(t);t.du.delete(e),i.ko()&&vV(t,e),0===t.du.size&&(i.ko()?i.Fo():Vu(t)&&t.gu.set("Unknown"))}function uO(n,e){n.yu.Ot(e.targetId),Iy(n).zo(e)}function vV(n,e){n.yu.Ot(e),Iy(n).Ho(e)}function dO(n){n.yu=new NG({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ne:e=>n.du.get(e)||null}),Iy(n).start(),n.gu.uu()}function hO(n){return Vu(n)&&!Iy(n).No()&&n.du.size>0}function Vu(n){return 0===st(n)._u.size}function bV(n){n.yu=void 0}function K$(n){return fO.apply(this,arguments)}function fO(){return fO=(0,ge.Z)(function*(n){n.du.forEach((e,t)=>{uO(n,e)})}),fO.apply(this,arguments)}function Y$(n,e){return pO.apply(this,arguments)}function pO(){return pO=(0,ge.Z)(function*(n,e){bV(n),hO(n)?(n.gu.hu(e),dO(n)):n.gu.set("Unknown")}),pO.apply(this,arguments)}function Q$(n,e,t){return gO.apply(this,arguments)}function gO(){return gO=(0,ge.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof u2&&2===e.state&&e.cause)try{yield(i=(0,ge.Z)(function*(r,o){const u=o.cause;for(const h of o.targetIds)r.du.has(h)&&(yield r.remoteSyncer.rejectListen(h,u),r.du.delete(h),r.yu.removeTarget(h))}),function(r,o){return i.apply(this,arguments)})(n,e)}catch(i){Ge("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield eT(n,i)}else if(e instanceof LI?n.yu.Kt(e):e instanceof c2?n.yu.Jt(e):n.yu.jt(e),!t.isEqual(Ot.min()))try{const i=yield lV(n.localStore);t.compareTo(i)>=0&&(yield function(r,o){const u=r.yu.Zt(o);return u.targetChanges.forEach((h,g)=>{if(h.resumeToken.approximateByteSize()>0){const y=r.du.get(g);y&&r.du.set(g,y.withResumeToken(h.resumeToken,o))}}),u.targetMismatches.forEach(h=>{const g=r.du.get(h);if(!g)return;r.du.set(h,g.withResumeToken(wr.EMPTY_BYTE_STRING,g.snapshotVersion)),vV(r,h);const y=new Vh(g.target,h,1,g.sequenceNumber);uO(r,y)}),r.remoteSyncer.applyRemoteEvent(u)}(n,t))}catch(i){Ge("RemoteStore","Failed to raise snapshot:",i),yield eT(n,i)}var i}),gO.apply(this,arguments)}function eT(n,e,t){return mO.apply(this,arguments)}function mO(){return mO=(0,ge.Z)(function*(n,e,t){if(!Mh(e))throw e;n._u.add(1),yield Cy(n),n.gu.set("Offline"),t||(t=()=>lV(n.localStore)),n.asyncQueue.enqueueRetryable((0,ge.Z)(function*(){Ge("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield Uw(n)}))}),mO.apply(this,arguments)}function wV(n,e){return e().catch(t=>eT(n,t,e))}function Ey(n){return _O.apply(this,arguments)}function _O(){return _O=(0,ge.Z)(function*(n){const e=st(n),t=Hh(e);let i=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;J$(e);)try{const r=yield F$(e.localStore,i);if(null===r){0===e.fu.length&&t.Fo();break}i=r.batchId,X$(e,r)}catch(r){yield eT(e,r)}DV(e)&&CV(e)}),_O.apply(this,arguments)}function J$(n){return Vu(n)&&n.fu.length<10}function X$(n,e){n.fu.push(e);const t=Hh(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function DV(n){return Vu(n)&&!Hh(n).No()&&n.fu.length>0}function CV(n){Hh(n).start()}function e6(n){return yO.apply(this,arguments)}function yO(){return yO=(0,ge.Z)(function*(n){Hh(n).eu()}),yO.apply(this,arguments)}function t6(n){return vO.apply(this,arguments)}function vO(){return vO=(0,ge.Z)(function*(n){const e=Hh(n);for(const t of n.fu)e.Xo(t.mutations)}),vO.apply(this,arguments)}function n6(n,e,t){return bO.apply(this,arguments)}function bO(){return bO=(0,ge.Z)(function*(n,e,t){const i=n.fu.shift(),r=VM.from(i,e,t);yield wV(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield Ey(n)}),bO.apply(this,arguments)}function i6(n,e){return wO.apply(this,arguments)}function wO(){return wO=(0,ge.Z)(function*(n,e){var t;e&&Hh(n).Yo&&(yield(t=(0,ge.Z)(function*(i,r){if(r2(o=r.code)&&o!==pe.ABORTED){const u=i.fu.shift();Hh(i).Mo(),yield wV(i,()=>i.remoteSyncer.rejectFailedWrite(u.batchId,r)),yield Ey(i)}var o}),function(i,r){return t.apply(this,arguments)})(n,e)),DV(n)&&CV(n)}),wO.apply(this,arguments)}function EV(n,e){return DO.apply(this,arguments)}function DO(){return DO=(0,ge.Z)(function*(n,e){const t=st(n);t.asyncQueue.verifyOperationInProgress(),Ge("RemoteStore","RemoteStore received new credentials");const i=Vu(t);t._u.add(3),yield Cy(t),i&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield Uw(t)}),DO.apply(this,arguments)}function CO(n,e){return EO.apply(this,arguments)}function EO(){return EO=(0,ge.Z)(function*(n,e){const t=st(n);e?(t._u.delete(2),yield Uw(t)):e||(t._u.add(2),yield Cy(t),t.gu.set("Unknown"))}),EO.apply(this,arguments)}function Iy(n){return n.pu||(n.pu=function(e,t,i){const r=st(e);return r.su(),new G$(t,r.connection,r.authCredentials,r.appCheckCredentials,r.yt,i)}(n.datastore,n.asyncQueue,{Yr:K$.bind(null,n),Zr:Y$.bind(null,n),Wo:Q$.bind(null,n)}),n.wu.push(function(){var e=(0,ge.Z)(function*(t){t?(n.pu.Mo(),hO(n)?dO(n):n.gu.set("Unknown")):(yield n.pu.stop(),bV(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function Hh(n){return n.Iu||(n.Iu=function(e,t,i){const r=st(e);return r.su(),new $$(t,r.connection,r.authCredentials,r.appCheckCredentials,r.yt,i)}(n.datastore,n.asyncQueue,{Yr:e6.bind(null,n),Zr:i6.bind(null,n),tu:t6.bind(null,n),Zo:n6.bind(null,n)}),n.wu.push(function(){var e=(0,ge.Z)(function*(t){t?(n.Iu.Mo(),yield Ey(n)):(yield n.Iu.stop(),n.fu.length>0&&(Ge("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class IO{constructor(e,t,i,r,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new br,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}static createAndSchedule(e,t,i,r,o){const u=Date.now()+i,h=new IO(e,t,u,r,o);return h.start(i),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ke(pe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ty(n,e){if(er("AsyncQueue",`${e}: ${n}`),Mh(n))return new ke(pe.UNAVAILABLE,`${e}: ${n}`);throw n}class Sy{constructor(e){this.comparator=e?(t,i)=>e(t,i)||it.comparator(t.key,i.key):(t,i)=>it.comparator(t.key,i.key),this.keyedMap=Cw(),this.sortedSet=new Zi(this.comparator)}static emptySet(e){return new Sy(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Sy)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const i=new Sy;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}class IV{constructor(){this.Tu=new Zi(it.comparator)}track(e){const t=e.doc.key,i=this.Tu.get(t);i?0!==e.type&&3===i.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==i.type?this.Tu=this.Tu.insert(t,{type:i.type,doc:e.doc}):2===e.type&&2===i.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===i.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===i.type?this.Tu=this.Tu.remove(t):1===e.type&&2===i.type?this.Tu=this.Tu.insert(t,{type:1,doc:i.doc}):0===e.type&&1===i.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):_t():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,i)=>{e.push(i)}),e}}class Ay{constructor(e,t,i,r,o,u,h,g,y){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=u,this.syncStateChanged=h,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,t,i,r,o){const u=[];return t.forEach(h=>{u.push({type:0,doc:h})}),new Ay(e,t,Sy.emptySet(t),u,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&bw(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}}class r6{constructor(){this.Au=void 0,this.listeners=[]}}class s6{constructor(){this.queries=new Lh(e=>jL(e),bw),this.onlineState="Unknown",this.Ru=new Set}}function TO(n,e){return SO.apply(this,arguments)}function SO(){return SO=(0,ge.Z)(function*(n,e){const t=st(n),i=e.query;let r=!1,o=t.queries.get(i);if(o||(r=!0,o=new r6),r)try{o.Au=yield t.onListen(i)}catch(u){const h=Ty(u,`Initialization of query '${NM(e.query)}' failed`);return void e.onError(h)}t.queries.set(i,o),o.listeners.push(e),e.bu(t.onlineState),o.Au&&e.Pu(o.Au)&&xO(t)}),SO.apply(this,arguments)}function AO(n,e){return NO.apply(this,arguments)}function NO(){return NO=(0,ge.Z)(function*(n,e){const t=st(n),i=e.query;let r=!1;const o=t.queries.get(i);if(o){const u=o.listeners.indexOf(e);u>=0&&(o.listeners.splice(u,1),r=0===o.listeners.length)}if(r)return t.queries.delete(i),t.onUnlisten(i)}),NO.apply(this,arguments)}function o6(n,e){const t=st(n);let i=!1;for(const r of e){const u=t.queries.get(r.query);if(u){for(const h of u.listeners)h.Pu(r)&&(i=!0);u.Au=r}}i&&xO(t)}function a6(n,e,t){const i=st(n),r=i.queries.get(e);if(r)for(const o of r.listeners)o.onError(t);i.queries.delete(e)}function xO(n){n.Ru.forEach(e=>{e.next()})}class MO{constructor(e,t,i){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=i||{}}Pu(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)3!==r.type&&i.push(r);e=new Ay(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||(!this.options.Nu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=Ay.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class l6{constructor(e,t){this.ku=e,this.byteLength=t}Ou(){return"metadata"in this.ku}}class TV{constructor(e){this.yt=e}Ji(e){return pc(this.yt,e)}Yi(e){return e.metadata.exists?v2(this.yt,e.document,!1):_i.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return tr(e)}}class c6{constructor(e,t,i){this.Mu=e,this.localStore=t,this.yt=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=SV(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;const i=Cn.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,i=new TV(this.yt);for(const r of e)if(r.metadata.queries){const o=i.Ji(r.metadata.name);for(const u of r.metadata.queries){const h=(t.get(u)||tn()).add(o);t.set(u,h)}}return t}complete(){var e=this;return(0,ge.Z)(function*(){const t=yield function L$(n,e,t,i){return eO.apply(this,arguments)}(e.localStore,new TV(e.yt),e.documents,e.Mu.id),i=e.$u(e.documents);for(const r of e.queries)yield V$(e.localStore,r,i.get(r.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function SV(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class AV{constructor(e){this.key=e}}class NV{constructor(e){this.key=e}}class xV{constructor(e,t){this.query=e,this.qu=t,this.Uu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=tn(),this.mutatedKeys=tn(),this.Gu=GL(e),this.Qu=new Sy(this.Gu)}get ju(){return this.qu}Wu(e,t){const i=t?t.zu:new IV,r=t?t.Qu:this.Qu;let o=t?t.mutatedKeys:this.mutatedKeys,u=r,h=!1;const g="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,y="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((C,I)=>{const A=r.get(C),F=xM(this.query,I)?I:null,Z=!!A&&this.mutatedKeys.has(A.key),ee=!!F&&(F.hasLocalMutations||this.mutatedKeys.has(F.key)&&F.hasCommittedMutations);let ce=!1;A&&F?A.data.isEqual(F.data)?Z!==ee&&(i.track({type:3,doc:F}),ce=!0):this.Hu(A,F)||(i.track({type:2,doc:F}),ce=!0,(g&&this.Gu(F,g)>0||y&&this.Gu(F,y)<0)&&(h=!0)):!A&&F?(i.track({type:0,doc:F}),ce=!0):A&&!F&&(i.track({type:1,doc:A}),ce=!0,(g||y)&&(h=!0)),ce&&(F?(u=u.add(F),o=ee?o.add(C):o.delete(C)):(u=u.delete(C),o=o.delete(C)))}),null!==this.query.limit)for(;u.size>this.query.limit;){const C="F"===this.query.limitType?u.last():u.first();u=u.delete(C.key),o=o.delete(C.key),i.track({type:1,doc:C})}return{Qu:u,zu:i,$i:h,mutatedKeys:o}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i){const r=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const o=e.zu.Eu();o.sort((y,C)=>function(I,A){const F=Z=>{switch(Z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _t()}};return F(I)-F(A)}(y.type,C.type)||this.Gu(y.doc,C.doc)),this.Ju(i);const u=t?this.Yu():[],h=0===this.Ku.size&&this.current?1:0,g=h!==this.Uu;return this.Uu=h,0!==o.length||g?{snapshot:new Ay(this.query,e.Qu,r,o,e.mutatedKeys,0===h,g,!1,!!i&&i.resumeToken.approximateByteSize()>0),Xu:u}:{Xu:u}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new IV,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.qu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.qu=this.qu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.qu=this.qu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=tn(),this.Qu.forEach(i=>{this.Zu(i.key)&&(this.Ku=this.Ku.add(i.key))});const t=[];return e.forEach(i=>{this.Ku.has(i)||t.push(new NV(i))}),this.Ku.forEach(i=>{e.has(i)||t.push(new AV(i))}),t}tc(e){this.qu=e.Hi,this.Ku=tn();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return Ay.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.Uu,this.hasCachedResults)}}class u6{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class d6{constructor(e){this.key=e,this.nc=!1}}class h6{constructor(e,t,i,r,o,u){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=u,this.sc={},this.ic=new Lh(h=>jL(h),bw),this.rc=new Map,this.oc=new Set,this.uc=new Zi(it.comparator),this.cc=new Map,this.ac=new qM,this.hc={},this.lc=new Map,this.fc=cg.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function f6(n,e){return OO.apply(this,arguments)}function OO(){return OO=(0,ge.Z)(function*(n,e){const t=tR(n);let i,r;const o=t.ic.get(e);if(o)i=o.targetId,t.sharedClientState.addLocalQueryTarget(i),r=o.view.ec();else{const u=yield wy(t.localStore,xs(e));t.isPrimaryClient&&XI(t.remoteStore,u);const h=t.sharedClientState.addLocalQueryTarget(u.targetId);i=u.targetId,r=yield RO(t,e,i,"current"===h,u.resumeToken)}return r}),OO.apply(this,arguments)}function RO(n,e,t,i,r){return PO.apply(this,arguments)}function PO(){return PO=(0,ge.Z)(function*(n,e,t,i,r){n._c=(I,A,F)=>{return(Z=(0,ge.Z)(function*(ee,ce,Ze,We){let rt=ce.view.Wu(Ze);rt.$i&&(rt=yield KI(ee.localStore,ce.query,!1).then(({documents:ct})=>ce.view.Wu(ct,rt)));const Je=We&&We.targetChanges.get(ce.targetId),Xe=ce.view.applyChanges(rt,ee.isPrimaryClient,Je);return $O(ee,ce.targetId,Xe.Xu),Xe.snapshot}),function(ee,ce,Ze,We){return Z.apply(this,arguments)})(n,I,A,F);var Z};const o=yield KI(n.localStore,e,!0),u=new xV(e,o.Hi),h=u.Wu(o.documents),g=Tw.createSynthesizedTargetChangeForCurrentChange(t,i&&"Offline"!==n.onlineState,r),y=u.applyChanges(h,n.isPrimaryClient,g);$O(n,t,y.Xu);const C=new u6(e,t,u);return n.ic.set(e,C),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),y.snapshot}),PO.apply(this,arguments)}function p6(n,e){return kO.apply(this,arguments)}function kO(){return kO=(0,ge.Z)(function*(n,e){const t=st(n),i=t.ic.get(e),r=t.rc.get(i.targetId);if(r.length>1)return t.rc.set(i.targetId,r.filter(o=>!bw(o,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(i.targetId),t.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Dy(t.localStore,i.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(i.targetId),Bw(t.remoteStore,i.targetId),Ny(t,i.targetId)}).catch(xh))):(Ny(t,i.targetId),yield Dy(t.localStore,i.targetId,!0))}),kO.apply(this,arguments)}function FO(){return FO=(0,ge.Z)(function*(n,e,t){const i=nR(n);try{const r=yield function(o,u){const h=st(o),g=Si.now(),y=u.reduce((A,F)=>A.add(F.key),tn());let C,I;return h.persistence.runTransaction("Locally write mutations","readwrite",A=>{let F=ro(),Z=tn();return h.Gi.getEntries(A,y).next(ee=>{F=ee,F.forEach((ce,Ze)=>{Ze.isValidDocument()||(Z=Z.add(ce))})}).next(()=>h.localDocuments.getOverlayedDocuments(A,F)).next(ee=>{C=ee;const ce=[];for(const Ze of u){const We=CG(Ze,C.get(Ze.key).overlayedDocument);null!=We&&ce.push(new Lu(Ze.key,We,FL(We.value.mapValue),Ai.exists(!0)))}return h.mutationQueue.addMutationBatch(A,g,ce,u)}).next(ee=>{I=ee;const ce=ee.applyToLocalDocumentSet(C,Z);return h.documentOverlayCache.saveOverlays(A,ee.batchId,ce)})}).then(()=>({batchId:I.batchId,changes:a2(C)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(o,u,h){let g=o.hc[o.currentUser.toKey()];g||(g=new Zi(qt)),g=g.insert(u,h),o.hc[o.currentUser.toKey()]=g}(i,r.batchId,t),yield Uu(i,r.changes),yield Ey(i.remoteStore)}catch(r){const o=Ty(r,"Failed to persist write");t.reject(o)}}),FO.apply(this,arguments)}function MV(n,e){return LO.apply(this,arguments)}function LO(){return LO=(0,ge.Z)(function*(n,e){const t=st(n);try{const i=yield k$(t.localStore,e);e.targetChanges.forEach((r,o)=>{const u=t.cc.get(o);u&&(Tt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?u.nc=!0:r.modifiedDocuments.size>0?Tt(u.nc):r.removedDocuments.size>0&&(Tt(u.nc),u.nc=!1))}),yield Uu(t,i,e)}catch(i){yield xh(i)}}),LO.apply(this,arguments)}function OV(n,e,t){const i=st(n);if(i.isPrimaryClient&&0===t||!i.isPrimaryClient&&1===t){const r=[];i.ic.forEach((o,u)=>{const h=u.view.bu(e);h.snapshot&&r.push(h.snapshot)}),function(o,u){const h=st(o);h.onlineState=u;let g=!1;h.queries.forEach((y,C)=>{for(const I of C.listeners)I.bu(u)&&(g=!0)}),g&&xO(h)}(i.eventManager,e),r.length&&i.sc.Wo(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function m6(n,e,t){return VO.apply(this,arguments)}function VO(){return VO=(0,ge.Z)(function*(n,e,t){const i=st(n);i.sharedClientState.updateQueryState(e,"rejected",t);const r=i.cc.get(e),o=r&&r.key;if(o){let u=new Zi(it.comparator);u=u.insert(o,_i.newNoDocument(o,Ot.min()));const h=tn().add(o),g=new Iw(Ot.min(),new Map,new Yn(qt),u,h);yield MV(i,g),i.uc=i.uc.remove(o),i.cc.delete(e),ZO(i)}else yield Dy(i.localStore,e,!1).then(()=>Ny(i,e,t)).catch(xh)}),VO.apply(this,arguments)}function _6(n,e){return UO.apply(this,arguments)}function UO(){return UO=(0,ge.Z)(function*(n,e){const t=st(n),i=e.batch.batchId;try{const r=yield P$(t.localStore,e);GO(t,i,null),HO(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),yield Uu(t,r)}catch(r){yield xh(r)}}),UO.apply(this,arguments)}function y6(n,e,t){return BO.apply(this,arguments)}function BO(){return BO=(0,ge.Z)(function*(n,e,t){const i=st(n);try{const r=yield function(o,u){const h=st(o);return h.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let y;return h.mutationQueue.lookupMutationBatch(g,u).next(C=>(Tt(null!==C),y=C.keys(),h.mutationQueue.removeMutationBatch(g,C))).next(()=>h.mutationQueue.performConsistencyCheck(g)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(g,y,u)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,y)).next(()=>h.localDocuments.getDocuments(g,y))})}(i.localStore,e);GO(i,e,t),HO(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),yield Uu(i,r)}catch(r){yield xh(r)}}),BO.apply(this,arguments)}function jO(){return jO=(0,ge.Z)(function*(n,e){const t=st(n);Vu(t.remoteStore)||Ge("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=yield function(o){const u=st(o);return u.persistence.runTransaction("Get highest unacknowledged batch id","readonly",h=>u.mutationQueue.getHighestUnacknowledgedBatchId(h))}(t.localStore);if(-1===i)return void e.resolve();const r=t.lc.get(i)||[];r.push(e),t.lc.set(i,r)}catch(i){const r=Ty(i,"Initialization of waitForPendingWrites() operation failed");e.reject(r)}}),jO.apply(this,arguments)}function HO(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function GO(n,e,t){const i=st(n);let r=i.hc[i.currentUser.toKey()];if(r){const o=r.get(e);o&&(t?o.reject(t):o.resolve(),r=r.remove(e)),i.hc[i.currentUser.toKey()]=r}}function Ny(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.rc.get(e))n.ic.delete(i),t&&n.sc.wc(i,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(i=>{n.ac.containsKey(i)||RV(n,i)})}function RV(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);null!==t&&(Bw(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),ZO(n))}function $O(n,e,t){for(const i of t)i instanceof AV?(n.ac.addReference(i.key,e),b6(n,i)):i instanceof NV?(Ge("SyncEngine","Document no longer in limbo: "+i.key),n.ac.removeReference(i.key,e),n.ac.containsKey(i.key)||RV(n,i.key)):_t()}function b6(n,e){const t=e.key,i=t.path.canonicalString();n.uc.get(t)||n.oc.has(i)||(Ge("SyncEngine","New document in limbo: "+t),n.oc.add(i),ZO(n))}function ZO(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new it(Cn.fromString(e)),i=n.fc.next();n.cc.set(i,new d6(t)),n.uc=n.uc.insert(t,i),XI(n.remoteStore,new Vh(xs(dy(t.path)),i,2,Bo.at))}}function Uu(n,e,t){return WO.apply(this,arguments)}function WO(){return WO=(0,ge.Z)(function*(n,e,t){const i=st(n),r=[],o=[],u=[];var h;i.ic.isEmpty()||(i.ic.forEach((h,g)=>{u.push(i._c(g,e,t).then(y=>{if((y||t)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(g.targetId,y?.fromCache?"not-current":"current"),y){r.push(y);const C=QM.Ci(g.targetId,y);o.push(C)}}))}),yield Promise.all(u),i.sc.Wo(r),yield(h=(0,ge.Z)(function*(g,y){const C=st(g);try{yield C.persistence.runTransaction("notifyLocalViewChanges","readwrite",I=>le.forEach(y,A=>le.forEach(A.Si,F=>C.persistence.referenceDelegate.addReference(I,A.targetId,F)).next(()=>le.forEach(A.Di,F=>C.persistence.referenceDelegate.removeReference(I,A.targetId,F)))))}catch(I){if(!Mh(I))throw I;Ge("LocalStore","Failed to update sequence numbers: "+I)}for(const I of y){const A=I.targetId;if(!I.fromCache){const F=C.qi.get(A),ee=F.withLastLimboFreeSnapshotVersion(F.snapshotVersion);C.qi=C.qi.insert(A,ee)}}}),function(g,y){return h.apply(this,arguments)})(i.localStore,o))}),WO.apply(this,arguments)}function w6(n,e){return qO.apply(this,arguments)}function qO(){return qO=(0,ge.Z)(function*(n,e){const t=st(n);if(!t.currentUser.isEqual(e)){Ge("SyncEngine","User change. New user:",e.toKey());const i=yield aV(t.localStore,e);t.currentUser=e,(r=t).lc.forEach(u=>{u.forEach(h=>{h.reject(new ke(pe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),r.lc.clear(),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield Uu(t,i.ji)}var r}),qO.apply(this,arguments)}function D6(n,e){const t=st(n),i=t.cc.get(e);if(i&&i.nc)return tn().add(i.key);{let r=tn();const o=t.rc.get(e);if(!o)return r;for(const u of o){const h=t.ic.get(u);r=r.unionWith(h.view.ju)}return r}}function C6(n,e){return zO.apply(this,arguments)}function zO(){return zO=(0,ge.Z)(function*(n,e){const t=st(n),i=yield KI(t.localStore,e.query,!0),r=e.view.tc(i);return t.isPrimaryClient&&$O(t,e.targetId,r.Xu),r}),zO.apply(this,arguments)}function E6(n,e){return KO.apply(this,arguments)}function KO(){return KO=(0,ge.Z)(function*(n,e){const t=st(n);return dV(t.localStore,e).then(i=>Uu(t,i))}),KO.apply(this,arguments)}function I6(n,e,t,i){return YO.apply(this,arguments)}function YO(){return YO=(0,ge.Z)(function*(n,e,t,i){const r=st(n),o=yield function(u,h){const g=st(u),y=st(g.mutationQueue);return g.persistence.runTransaction("Lookup mutation documents","readonly",C=>y.Tn(C,h).next(I=>I?g.localDocuments.getDocuments(C,I):le.resolve(null)))}(r.localStore,e);var h;null!==o?("pending"===t?yield Ey(r.remoteStore):"acknowledged"===t||"rejected"===t?(GO(r,e,i||null),HO(r,e),h=e,st(st(r.localStore).mutationQueue).An(h)):_t(),yield Uu(r,o)):Ge("SyncEngine","Cannot apply mutation batch with id: "+e)}),YO.apply(this,arguments)}function QO(){return QO=(0,ge.Z)(function*(n,e){const t=st(n);if(tR(t),nR(t),!0===e&&!0!==t.dc){const i=t.sharedClientState.getAllActiveQueryTargets(),r=yield PV(t,i.toArray());t.dc=!0,yield CO(t.remoteStore,!0);for(const o of r)XI(t.remoteStore,o)}else if(!1===e&&!1!==t.dc){const i=[];let r=Promise.resolve();t.rc.forEach((o,u)=>{t.sharedClientState.isLocalQueryTarget(u)?i.push(u):r=r.then(()=>(Ny(t,u),Dy(t.localStore,u,!0))),Bw(t.remoteStore,u)}),yield r,yield PV(t,i),function(o){const u=st(o);u.cc.forEach((h,g)=>{Bw(u.remoteStore,g)}),u.ac.fs(),u.cc=new Map,u.uc=new Zi(it.comparator)}(t),t.dc=!1,yield CO(t.remoteStore,!1)}}),QO.apply(this,arguments)}function PV(n,e,t){return JO.apply(this,arguments)}function JO(){return JO=(0,ge.Z)(function*(n,e,t){const i=st(n),r=[],o=[];for(const u of e){let h;const g=i.rc.get(u);if(g&&0!==g.length){h=yield wy(i.localStore,xs(g[0]));for(const y of g){const C=i.ic.get(y),I=yield C6(i,C);I.snapshot&&o.push(I.snapshot)}}else{const y=yield uV(i.localStore,u);h=yield wy(i.localStore,y),yield RO(i,kV(y),u,!1,h.resumeToken)}r.push(h)}return i.sc.Wo(o),r}),JO.apply(this,arguments)}function kV(n){return UL(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function S6(n){const e=st(n);return st(st(e.localStore).persistence).vi()}function A6(n,e,t,i){return XO.apply(this,arguments)}function XO(){return XO=(0,ge.Z)(function*(n,e,t,i){const r=st(n);if(r.dc)return void Ge("SyncEngine","Ignoring unexpected query state notification.");const o=r.rc.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{const u=yield dV(r.localStore,HL(o[0])),h=Iw.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,wr.EMPTY_BYTE_STRING);yield Uu(r,u,h);break}case"rejected":yield Dy(r.localStore,e,!0),Ny(r,e,i);break;default:_t()}}),XO.apply(this,arguments)}function N6(n,e,t){return eR.apply(this,arguments)}function eR(){return eR=(0,ge.Z)(function*(n,e,t){const i=tR(n);if(i.dc){for(const r of e){if(i.rc.has(r)){Ge("SyncEngine","Adding an already active target "+r);continue}const o=yield uV(i.localStore,r),u=yield wy(i.localStore,o);yield RO(i,kV(o),u.targetId,!1,u.resumeToken),XI(i.remoteStore,u)}for(const r of t)i.rc.has(r)&&(yield Dy(i.localStore,r,!1).then(()=>{Bw(i.remoteStore,r),Ny(i,r)}).catch(xh))}}),eR.apply(this,arguments)}function tR(n){const e=st(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=MV.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=D6.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=m6.bind(null,e),e.sc.Wo=o6.bind(null,e.eventManager),e.sc.wc=a6.bind(null,e.eventManager),e}function nR(n){const e=st(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=_6.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=y6.bind(null,e),e}class FV{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ge.Z)(function*(){t.yt=Vw(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return oV(this.persistence,new sV,e.initialUser,this.yt)}yc(e){return new iV(qI.Bs,this.yt)}gc(e){return new gV}terminate(){var e=this;return(0,ge.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class LV extends FV{constructor(e,t,i){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,i=this;return(0,ge.Z)(function*(){yield t().call(i,e),yield i.Ac.initialize(i,e),yield nR(i.Ac.syncEngine),yield Ey(i.Ac.remoteStore),yield i.persistence.li(()=>(i.gcScheduler&&!i.gcScheduler.started&&i.gcScheduler.start(),i.indexBackfillerScheduler&&!i.indexBackfillerScheduler.started&&i.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return oV(this.persistence,new sV,e.initialUser,this.yt)}Tc(e,t){return new v$(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const i=new iG(t,this.persistence);return new nG(e.asyncQueue,i)}yc(e){const t=YM(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=void 0!==this.cacheSizeBytes?so.withCacheSize(this.cacheSizeBytes):so.DEFAULT;return new KM(this.synchronizeTabs,t,e.clientId,i,e.asyncQueue,_V(),JI(),this.yt,this.sharedClientState,!!this.forceOwnership)}gc(e){return new gV}}class M6 extends LV{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,i=this;return(0,ge.Z)(function*(){yield t().call(i,e);const r=i.Ac.syncEngine;i.sharedClientState instanceof sO&&(i.sharedClientState.syncEngine={Fr:I6.bind(null,r),$r:A6.bind(null,r),Br:N6.bind(null,r),vi:S6.bind(null,r),Mr:E6.bind(null,r)},yield i.sharedClientState.start()),yield i.persistence.li(function(){var o=(0,ge.Z)(function*(u){yield function T6(n,e){return QO.apply(this,arguments)}(i.Ac.syncEngine,u),i.gcScheduler&&(u&&!i.gcScheduler.started?i.gcScheduler.start():u||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(u&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():u||i.indexBackfillerScheduler.stop())});return function(u){return o.apply(this,arguments)}}())})()}gc(e){const t=_V();if(!sO.C(t))throw new ke(pe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=YM(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new sO(t,e.asyncQueue,i,e.clientId,e.initialUser)}}class iR{initialize(e,t){var i=this;return(0,ge.Z)(function*(){i.localStore||(i.localStore=e.localStore,i.sharedClientState=e.sharedClientState,i.datastore=i.createDatastore(t),i.remoteStore=i.createRemoteStore(t),i.eventManager=i.createEventManager(t),i.syncEngine=i.createSyncEngine(t,!e.synchronizeTabs),i.sharedClientState.onlineStateHandler=r=>OV(i.syncEngine,r,1),i.remoteStore.remoteSyncer.handleCredentialChange=w6.bind(null,i.syncEngine),yield CO(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(e){return new s6}createDatastore(e){const t=Vw(e.databaseInfo.databaseId),i=new H$(e.databaseInfo);return new Z$(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return t=this.localStore,i=this.datastore,r=e.asyncQueue,o=h=>OV(this.syncEngine,h,0),u=mV.C()?new mV:new U$,new z$(t,i,r,o,u);var t,i,r,o,u}createSyncEngine(e,t){return function(i,r,o,u,h,g,y){const C=new h6(i,r,o,u,h,g);return y&&(C.dc=!0),C}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ge.Z)(function*(t){const i=st(t);Ge("RemoteStore","RemoteStore shutting down."),i._u.add(5),yield Cy(i),i.mu.shutdown(),i.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function rR(n,e,t){if(!t)throw new ke(pe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function VV(n,e,t,i){if(!0===e&&!0===i)throw new ke(pe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function UV(n){if(!it.isDocumentKey(n))throw new ke(pe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function BV(n){if(it.isDocumentKey(n))throw new ke(pe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function tT(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":_t()}function _n(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ke(pe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=tT(n);throw new ke(pe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function jV(n,e){if(e<=0)throw new ke(pe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}const HV=new Map;class GV{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new ke(pe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new ke(pe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,VV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class jw{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new GV({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new ke(pe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ke(pe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new GV(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new $H;switch(t.type){case"gapi":return new zH(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new ke(pe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=HV.get(e);t&&(Ge("ComponentProvider","Removing Datastore"),HV.delete(e),t.terminate())}(this),Promise.resolve()}}class yi{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new mc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new yi(this.firestore,e,this._key)}}class es{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new es(this.firestore,e,this._query)}}class mc extends es{constructor(e,t,i){super(e,t,dy(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new yi(this.firestore,null,new it(e))}withConverter(e){return new mc(this.firestore,e,this._path)}}function ZV(n,e,...t){if(n=(0,k.m9)(n),rR("collection","path",e),n instanceof jw){const i=Cn.fromString(e,...t);return BV(i),new mc(n,null,i)}{if(!(n instanceof yi||n instanceof mc))throw new ke(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Cn.fromString(e,...t));return BV(i),new mc(n.firestore,null,i)}}function nT(n,e,...t){if(n=(0,k.m9)(n),1===arguments.length&&(e=aL.R()),rR("doc","path",e),n instanceof jw){const i=Cn.fromString(e,...t);return UV(i),new yi(n,null,new it(i))}{if(!(n instanceof yi||n instanceof mc))throw new ke(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Cn.fromString(e,...t));return UV(i),new yi(n.firestore,n instanceof mc?n.converter:null,new it(i))}}function WV(n,e){return n=(0,k.m9)(n),e=(0,k.m9)(e),(n instanceof yi||n instanceof mc)&&(e instanceof yi||e instanceof mc)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function sR(n,e){return n=(0,k.m9)(n),e=(0,k.m9)(e),n instanceof es&&e instanceof es&&n.firestore===e.firestore&&bw(n._query,e._query)&&n.converter===e.converter}function qV(n,e=10240){let t=0;return{read:()=>(0,ge.Z)(function*(){if(t<n.byteLength){const i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})(),cancel:()=>(0,ge.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class iT{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):er("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class R6{constructor(e,t){this.Pc=e,this.yt=t,this.metadata=new br,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(i=>{i&&i.Ou()?this.metadata.resolve(i.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(i?.ku)}`))},i=>this.metadata.reject(i))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,ge.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,ge.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,ge.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const i=e.vc.decode(t),r=Number(i);isNaN(r)&&e.Dc(`length string (${i}) is not valid number`);const o=yield e.Cc(r);return new l6(JSON.parse(o),t.length+r)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,ge.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const i=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),i})()}Cc(e){var t=this;return(0,ge.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const i=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),i})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,ge.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const i=new Uint8Array(e.buffer.length+t.value.length);i.set(e.buffer),i.set(t.value,e.buffer.length),e.buffer=i}return t.done})()}}class F6{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ge.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new ke(pe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const i=yield(r=(0,ge.Z)(function*(o,u){const h=st(o),g=Aw(h.yt)+"/documents",y={documents:u.map(F=>Sw(h.yt,F))},C=yield h._o("BatchGetDocuments",g,y,u.length),I=new Map;C.forEach(F=>{const Z=function kG(n,e){return"found"in e?function(t,i){Tt(!!i.found);const r=pc(t,i.found.name),o=tr(i.found.updateTime),u=i.found.createTime?tr(i.found.createTime):Ot.min(),h=new Xr({mapValue:{fields:i.found.fields}});return _i.newFoundDocument(r,o,u,h)}(n,e):"missing"in e?function(t,i){Tt(!!i.missing),Tt(!!i.readTime);const r=pc(t,i.missing),o=tr(i.readTime);return _i.newNoDocument(r,o)}(n,e):_t()}(h.yt,F);I.set(Z.key.toString(),Z)});const A=[];return u.forEach(F=>{const Z=I.get(F.toString());Tt(!!Z),A.push(Z)}),A}),function(o,u){return r.apply(this,arguments)})(t.datastore,e);var r;return i.forEach(r=>t.recordVersion(r)),i})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastWriteError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new gy(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ge.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var i;e.mutations.forEach(i=>{t.delete(i.key.toString())}),t.forEach((i,r)=>{const o=it.fromPath(r);e.mutations.push(new MM(o,e.precondition(o)))}),yield(i=(0,ge.Z)(function*(r,o){const u=st(r),h=Aw(u.yt)+"/documents",g={writes:o.map(y=>Nw(u.yt,y))};yield u.ao("Commit",h,g)}),function(r,o){return i.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw _t();t=Ot.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!t.isEqual(i))throw new ke(pe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Ot.min())?Ai.exists(!1):Ai.updateTime(t):Ai.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ot.min()))throw new ke(pe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ai.updateTime(t)}return Ai.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class L6{constructor(e,t,i,r,o){this.asyncQueue=e,this.datastore=t,this.options=i,this.updateFunction=r,this.deferred=o,this.kc=i.maxAttempts,this.xo=new oO(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.xo.Ro((0,ge.Z)(function*(){const t=new F6(e.datastore),i=e.Mc(t);i&&i.then(r=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(r)}).catch(o=>{e.Fc(o)}))}).catch(r=>{e.Fc(r)})}))}Mc(e){try{const t=this.updateFunction(e);return!fw(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!r2(t)}return!1}}class V6{constructor(e,t,i,r){var o=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=r,this.user=Rr.UNAUTHENTICATED,this.clientId=aL.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,function(){var u=(0,ge.Z)(function*(h){Ge("FirestoreClient","Received user=",h.uid),yield o.authCredentialListener(h),o.user=h});return function(h){return u.apply(this,arguments)}}()),this.appCheckCredentials.start(i,u=>(Ge("FirestoreClient","Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}getConfiguration(){var e=this;return(0,ge.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ke(pe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new br;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ge.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(i){const r=Ty(i,"Failed to shutdown persistence");t.reject(r)}})),t.promise}}function zV(n,e){return oR.apply(this,arguments)}function oR(){return oR=(0,ge.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ge("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(function(){var r=(0,ge.Z)(function*(o){i.isEqual(o)||(yield aV(e.localStore,o),i=o)});return function(o){return r.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),oR.apply(this,arguments)}function KV(n,e){return aR.apply(this,arguments)}function aR(){return aR=(0,ge.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield lR(n);Ge("FirestoreClient","Initializing OnlineComponentProvider");const i=yield n.getConfiguration();yield e.initialize(t,i),n.setCredentialChangeListener(r=>EV(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,o)=>EV(e.remoteStore,o)),n.onlineComponents=e}),aR.apply(this,arguments)}function lR(n){return cR.apply(this,arguments)}function cR(){return cR=(0,ge.Z)(function*(n){return n.offlineComponents||(Ge("FirestoreClient","Using default OfflineComponentProvider"),yield zV(n,new FV)),n.offlineComponents}),cR.apply(this,arguments)}function rT(n){return uR.apply(this,arguments)}function uR(){return uR=(0,ge.Z)(function*(n){return n.onlineComponents||(Ge("FirestoreClient","Using default OnlineComponentProvider"),yield KV(n,new iR)),n.onlineComponents}),uR.apply(this,arguments)}function YV(n){return lR(n).then(e=>e.persistence)}function sT(n){return lR(n).then(e=>e.localStore)}function dR(n){return rT(n).then(e=>e.remoteStore)}function hR(n){return rT(n).then(e=>e.syncEngine)}function xy(n){return fR.apply(this,arguments)}function fR(){return fR=(0,ge.Z)(function*(n){const e=yield rT(n),t=e.eventManager;return t.onListen=f6.bind(null,e.syncEngine),t.onUnlisten=p6.bind(null,e.syncEngine),t}),fR.apply(this,arguments)}function JV(n,e,t={}){const i=new br;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function(r,o,u,h,g){const y=new iT({next:I=>{o.enqueueAndForget(()=>AO(r,C));const A=I.docs.has(u);!A&&I.fromCache?g.reject(new ke(pe.UNAVAILABLE,"Failed to get document because the client is offline.")):A&&I.fromCache&&h&&"server"===h.source?g.reject(new ke(pe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(I)},error:I=>g.reject(I)}),C=new MO(dy(u.path),y,{includeMetadataChanges:!0,Nu:!0});return TO(r,C)}(yield xy(n),n.asyncQueue,e,t,i)})),i.promise}function XV(n,e,t={}){const i=new br;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function(r,o,u,h,g){const y=new iT({next:I=>{o.enqueueAndForget(()=>AO(r,C)),I.fromCache&&"server"===h.source?g.reject(new ke(pe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(I)},error:I=>g.reject(I)}),C=new MO(u,y,{includeMetadataChanges:!0,Nu:!0});return TO(r,C)}(yield xy(n),n.asyncQueue,e,t,i)})),i.promise}class W6{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.qc=!1,this.Uc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new oO(this,"async_queue_retry"),this.Wc=()=>{const t=JI();t&&Ge("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=JI();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.qc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.qc){this.qc=!0,this.Qc=e||!1;const t=JI();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.qc)return new Promise(()=>{});const t=new br;return this.Hc(()=>this.qc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,ge.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(t){if(!Mh(t))throw t;Ge("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(i=>{throw this.Kc=i,this.Gc=!1,er("INTERNAL UNHANDLED ERROR: ",function(o){let u=o.message||"";return o.stack&&(u=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),u}(i)),i}).then(i=>(this.Gc=!1,i))));return this.Bc=t,t}enqueueAfterDelay(e,t,i){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const r=IO.createAndSchedule(this,e,t,i,o=>this.Yc(o));return this.Uc.push(r),r}zc(){this.Kc&&_t()}verifyOperationInProgress(){}Xc(){var e=this;return(0,ge.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.Uc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.Uc.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.Uc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}function pR(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const i=e;for(const r of["next","error","complete"])if(r in i&&"function"==typeof i[r])return!0;return!1}(n)}class q6{constructor(){this._progressObserver={},this._taskCompletionResolver=new br,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,i){this._progressObserver={next:e,error:t,complete:i}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class vi extends jw{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=new W6,this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||eU(this),this._firestoreClient.terminate()}}function nr(n){return n._firestoreClient||eU(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function eU(n){var e;const t=n._freezeSettings(),i=(o=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new rG(n._databaseId,o,n._persistenceKey,(h=t).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,h.useFetchStreams));var o,h;n._firestoreClient=new V6(n._authCredentials,n._appCheckCredentials,n._queue,i)}function tU(n,e,t){const i=new br;return n.asyncQueue.enqueue((0,ge.Z)(function*(){try{yield zV(n,t),yield KV(n,e),i.resolve()}catch(r){const o=r;if(!("FirebaseError"===(u=o).name?u.code===pe.FAILED_PRECONDITION||u.code===pe.UNIMPLEMENTED:!(typeof DOMException<"u"&&u instanceof DOMException)||22===u.code||20===u.code||11===u.code))throw o;qp("Error enabling offline persistence. Falling back to persistence disabled: "+o),i.reject(o)}var u})).then(()=>i.promise)}function nU(n){if(n._initialized||n._terminated)throw new ke(pe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class _c{constructor(e){this._byteString=e}static fromBase64String(e){try{return new _c(wr.fromBase64String(e))}catch(t){throw new ke(pe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new _c(wr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Bu{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new ke(pe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Gi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class dg{constructor(e){this._methodName=e}}class oT{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ke(pe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ke(pe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return qt(this._lat,e._lat)||qt(this._long,e._long)}}const iZ=/^__.*__$/;class rZ{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return null!==this.fieldMask?new Lu(e,this.data,this.fieldMask,t,this.fieldTransforms):new py(e,this.data,t,this.fieldTransforms)}}class iU{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Lu(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function rU(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _t()}}class aT{constructor(e,t,i,r,o,u){this.settings=e,this.databaseId=t,this.yt=i,this.ignoreUndefinedProperties=r,void 0===o&&this.na(),this.fieldTransforms=o||[],this.fieldMask=u||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new aT(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.yt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const i=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ia({path:i,oa:!1});return r.ua(e),r}ca(e){var t;const i=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ia({path:i,oa:!1});return r.na(),r}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return uT(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(rU(this.sa)&&iZ.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class sZ{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.yt=i||Vw(e)}da(e,t,i,r=!1){return new aT({sa:e,methodName:t,fa:i,path:Gi.emptyPath(),oa:!1,la:r},this.databaseId,this.yt,this.ignoreUndefinedProperties)}}function hg(n){const e=n._freezeSettings(),t=Vw(n._databaseId);return new sZ(n._databaseId,!!e.ignoreUndefinedProperties,t)}function lT(n,e,t,i,r,o={}){const u=n.da(o.merge||o.mergeFields?2:0,e,t,r);yR("Data must be an object, but it was:",u,i);const h=aU(i,u);let g,y;if(o.merge)g=new jo(u.fieldMask),y=u.fieldTransforms;else if(o.mergeFields){const C=[];for(const I of o.mergeFields){const A=vR(e,I,t);if(!u.contains(A))throw new ke(pe.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);cU(C,A)||C.push(A)}g=new jo(C),y=u.fieldTransforms.filter(I=>g.covers(I.field))}else g=null,y=u.fieldTransforms;return new rZ(new Xr(h),g,y)}class Hw extends dg{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Hw}}function sU(n,e,t){return new aT({sa:3,fa:e.settings.fa,methodName:n._methodName,oa:t},e.databaseId,e.yt,e.ignoreUndefinedProperties)}class gR extends dg{_toFieldTransform(e){return new ww(e.path,new hy)}isEqual(e){return e instanceof gR}}class oZ extends dg{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=sU(this,e,!0),i=this._a.map(o=>fg(o,t)),r=new ng(i);return new ww(e.path,r)}isEqual(e){return this===e}}class aZ extends dg{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=sU(this,e,!0),i=this._a.map(o=>fg(o,t)),r=new ig(i);return new ww(e.path,r)}isEqual(e){return this===e}}class lZ extends dg{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new fy(e.yt,WL(e.yt,this.wa));return new ww(e.path,t)}isEqual(e){return this===e}}function mR(n,e,t,i){const r=n.da(1,e,t);yR("Data must be an object, but it was:",r,i);const o=[],u=Xr.empty();Yp(i,(g,y)=>{const C=cT(e,g,t);y=(0,k.m9)(y);const I=r.ca(C);if(y instanceof Hw)o.push(C);else{const A=fg(y,I);null!=A&&(o.push(C),u.set(C,A))}});const h=new jo(o);return new iU(u,h,r.fieldTransforms)}function _R(n,e,t,i,r,o){const u=n.da(1,e,t),h=[vR(e,i,t)],g=[r];if(o.length%2!=0)throw new ke(pe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let A=0;A<o.length;A+=2)h.push(vR(e,o[A])),g.push(o[A+1]);const y=[],C=Xr.empty();for(let A=h.length-1;A>=0;--A)if(!cU(y,h[A])){const F=h[A];let Z=g[A];Z=(0,k.m9)(Z);const ee=u.ca(F);if(Z instanceof Hw)y.push(F);else{const ce=fg(Z,ee);null!=ce&&(y.push(F),C.set(F,ce))}}const I=new jo(y);return new iU(C,I,u.fieldTransforms)}function oU(n,e,t,i=!1){return fg(t,n.da(i?4:3,e))}function fg(n,e){if(lU(n=(0,k.m9)(n)))return yR("Unsupported field value:",e,n),aU(n,e);if(n instanceof dg)return function(t,i){if(!rU(i.sa))throw i.ha(`${t._methodName}() can only be used with update() and set()`);if(!i.path)throw i.ha(`${t._methodName}() is not currently supported inside arrays`);const r=t._toFieldTransform(i);r&&i.fieldTransforms.push(r)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,i){const r=[];let o=0;for(const u of t){let h=fg(u,i.aa(o));null==h&&(h={nullValue:"NULL_VALUE"}),r.push(h),o++}return{arrayValue:{values:r}}}(n,e)}return function(t,i){if(null===(t=(0,k.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return WL(i.yt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const r=Si.fromDate(t);return{timestampValue:my(i.yt,r)}}if(t instanceof Si){const r=new Si(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:my(i.yt,r)}}if(t instanceof oT)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof _c)return{bytesValue:p2(i.yt,t._byteString)};if(t instanceof yi){const r=i.databaseId,o=t.firestore._databaseId;if(!o.isEqual(r))throw i.ha(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:OM(t.firestore._databaseId||i.databaseId,t._key.path)}}throw i.ha(`Unsupported field value: ${tT(t)}`)}(n,e)}function aU(n,e){const t={};return gL(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Yp(n,(i,r)=>{const o=fg(r,e.ra(i));null!=o&&(t[i]=o)}),{mapValue:{fields:t}}}function lU(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Si||n instanceof oT||n instanceof _c||n instanceof yi||n instanceof dg)}function yR(n,e,t){if(!lU(t)||"object"!=typeof(i=t)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const i=tT(t);throw e.ha("an object"===i?n+" a custom object":n+" "+i)}var i}function vR(n,e,t){if((e=(0,k.m9)(e))instanceof Bu)return e._internalPath;if("string"==typeof e)return cT(n,e);throw uT("Field path arguments must be of type string or ",n,!1,void 0,t)}const cZ=new RegExp("[~\\*/\\[\\]]");function cT(n,e,t){if(e.search(cZ)>=0)throw uT(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Bu(...e.split("."))._internalPath}catch{throw uT(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function uT(n,e,t,i,r){const o=i&&!i.isEmpty(),u=void 0!==r;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let g="";return(o||u)&&(g+=" (found",o&&(g+=` in field ${i}`),u&&(g+=` in document ${r}`),g+=")"),new ke(pe.INVALID_ARGUMENT,h+n+g)}function cU(n,e){return n.some(t=>t.isEqual(e))}class Gw{constructor(e,t,i,r,o){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new yi(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new uZ(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(dT("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class uZ extends Gw{data(){return super.data()}}function dT(n,e){return"string"==typeof e?cT(n,e):e instanceof Bu?e._internalPath:e._delegate._internalPath}function uU(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new ke(pe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class bR{}class $w extends bR{}function Gh(n,e,...t){let i=[];e instanceof bR&&i.push(e),i=i.concat(t),function(r){const o=r.filter(h=>h instanceof My).length,u=r.filter(h=>h instanceof Zw).length;if(o>1||o>0&&u>0)throw new ke(pe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)n=r._apply(n);return n}class Zw extends $w{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new Zw(e,t,i)}_apply(e){const t=this._parse(e);return pU(e._query,t),new es(e.firestore,e.converter,AM(e._query,t))}_parse(e){const t=hg(e.firestore);return function(r,o,u,h,g,y,C){let I;if(g.isKeyField()){if("array-contains"===y||"array-contains-any"===y)throw new ke(pe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if("in"===y||"not-in"===y){fU(C,y);const A=[];for(const F of C)A.push(hU(h,r,F));I={arrayValue:{values:A}}}else I=hU(h,r,C)}else"in"!==y&&"not-in"!==y&&"array-contains-any"!==y||fU(C,y),I=oU(u,"where",C,"in"===y||"not-in"===y);return mn.create(g,y,I)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class My extends bR{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new My(e,t)}_parse(e){const t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return 1===t.length?t[0]:Gn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(i,r){let o=i;const u=r.getFlattenedFilters();for(const h of u)pU(o,h),o=AM(o,h)}(e._query,t),new es(e.firestore,e.converter,AM(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class wR extends $w{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new wR(e,t)}_apply(e){const t=function(i,r,o){if(null!==i.startAt)throw new ke(pe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new ke(pe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const u=new cy(r,o);return function(h,g){if(null===TM(h)){const y=MI(h);null!==y&&gU(0,y,g.field)}}(i,u),u}(e._query,this._field,this._direction);return new es(e.firestore,e.converter,function(i,r){const o=i.explicitOrderBy.concat([r]);return new Fu(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}class hT extends $w{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new hT(e,t,i)}_apply(e){return new es(e.firestore,e.converter,OI(e._query,this._limit,this._limitType))}}class fT extends $w{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new fT(e,t,i)}_apply(e){const t=dU(e,this.type,this._docOrFields,this._inclusive);return new es(e.firestore,e.converter,(r=t,new Fu((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,r,i.endAt)));var i,r}}class pT extends $w{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new pT(e,t,i)}_apply(e){const t=dU(e,this.type,this._docOrFields,this._inclusive);return new es(e.firestore,e.converter,(r=t,new Fu((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,r)));var i,r}}function dU(n,e,t,i){if(t[0]=(0,k.m9)(t[0]),t[0]instanceof Gw)return function(r,o,u,h,g){if(!h)throw new ke(pe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${u}().`);const y=[];for(const C of tg(r))if(C.field.isKeyField())y.push(Xp(o,h.key));else{const I=h.data.field(C.field);if(wM(I))throw new ke(pe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+C.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===I){const A=C.field.canonicalString();throw new ke(pe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${A}' (used as the orderBy) does not exist.`)}y.push(I)}return new Fh(y,g)}(n._query,n.firestore._databaseId,e,t[0]._document,i);{const r=hg(n.firestore);return function(o,u,h,g,y,C){const I=o.explicitOrderBy;if(y.length>I.length)throw new ke(pe.INVALID_ARGUMENT,`Too many arguments provided to ${g}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const A=[];for(let F=0;F<y.length;F++){const Z=y[F];if(I[F].field.isKeyField()){if("string"!=typeof Z)throw new ke(pe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${g}(), but got a ${typeof Z}`);if(!SM(o)&&-1!==Z.indexOf("/"))throw new ke(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${g}() must be a plain document ID, but '${Z}' contains a slash.`);const ee=o.path.child(Cn.fromString(Z));if(!it.isDocumentKey(ee))throw new ke(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${g}() must result in a valid document path, but '${ee}' is not because it contains an odd number of segments.`);const ce=new it(ee);A.push(Xp(u,ce))}else{const ee=oU(h,g,Z);A.push(ee)}}return new Fh(A,C)}(n._query,n.firestore._databaseId,r,e,t,i)}}function hU(n,e,t){if("string"==typeof(t=(0,k.m9)(t))){if(""===t)throw new ke(pe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!SM(e)&&-1!==t.indexOf("/"))throw new ke(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(Cn.fromString(t));if(!it.isDocumentKey(i))throw new ke(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Xp(n,new it(i))}if(t instanceof yi)return Xp(n,t._key);throw new ke(pe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${tT(t)}.`)}function fU(n,e){if(!Array.isArray(n)||0===n.length)throw new ke(pe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new ke(pe.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function pU(n,e){if(e.isInequality()){const i=MI(n),r=e.field;if(null!==i&&!i.isEqual(r))throw new ke(pe.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${i.toString()}' and '${r.toString()}'`);const o=TM(n);null!==o&&gU(0,r,o)}const t=function(i,r){for(const o of i)for(const u of o.getFlattenedFilters())if(r.indexOf(u.op)>=0)return u.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new ke(pe.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function gU(n,e,t){if(!t.isEqual(e))throw new ke(pe.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class DR{convertValue(e,t="none"){switch(Jp(e)){case 0:return null;case 1:return e.booleanValue;case 2:return $i(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Qp(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw _t()}}convertObject(e,t){const i={};return Yp(e.fields,(r,o)=>{i[r]=this.convertValue(o,t)}),i}convertGeoPoint(e){return new oT($i(e.latitude),$i(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=_L(e);return null==i?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(gw(e));default:return null}}convertTimestamp(e){const t=Rh(e);return new Si(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Cn.fromString(e);Tt(E2(i));const r=new Oh(i.get(1),i.get(3)),o=new it(i.popFirst(5));return r.isEqual(t)||er(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}function gT(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class vZ extends DR{constructor(e){super(),this.firestore=e}convertBytes(e){return new _c(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new yi(this.firestore,null,t)}}class pg{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ju extends Gw{constructor(e,t,i,r,o,u){super(e,t,i,r,u),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Ww(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(dT("DocumentSnapshot.get",e));if(null!==i)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class Ww extends ju{data(e={}){return super.data(e)}}class $h{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new pg(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new Ww(this._firestore,this._userDataWriter,i.key,i,new pg(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ke(pe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,r){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(u=>({type:"added",doc:new Ww(i._firestore,i._userDataWriter,u.doc.key,u.doc,new pg(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:o++}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(u=>r||3!==u.type).map(u=>{const h=new Ww(i._firestore,i._userDataWriter,u.doc.key,u.doc,new pg(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);let g=-1,y=-1;return 0!==u.type&&(g=o.indexOf(u.doc.key),o=o.delete(u.doc.key)),1!==u.type&&(o=o.add(u.doc),y=o.indexOf(u.doc.key)),{type:bZ(u.type),doc:h,oldIndex:g,newIndex:y}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function bZ(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _t()}}function _U(n,e){return n instanceof ju&&e instanceof ju?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof $h&&e instanceof $h&&n._firestore===e._firestore&&sR(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Zh extends DR{constructor(e){super(),this.firestore=e}convertBytes(e){return new _c(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new yi(this.firestore,null,t)}}function yU(n,e,t){n=_n(n,yi);const i=_n(n.firestore,vi),r=gT(n.converter,e,t);return Oy(i,[lT(hg(i),"setDoc",n._key,r,null!==n.converter,t).toMutation(n._key,Ai.none())])}function vU(n,e,t,...i){n=_n(n,yi);const r=_n(n.firestore,vi),o=hg(r);let u;return u="string"==typeof(e=(0,k.m9)(e))||e instanceof Bu?_R(o,"updateDoc",n._key,e,t,i):mR(o,"updateDoc",n._key,e),Oy(r,[u.toMutation(n._key,Ai.exists(!0))])}function bU(n,...e){var t,i,r;n=(0,k.m9)(n);let o={includeMetadataChanges:!1},u=0;"object"!=typeof e[u]||pR(e[u])||(o=e[u],u++);const h={includeMetadataChanges:o.includeMetadataChanges};if(pR(e[u])){const I=e[u];e[u]=null===(t=I.next)||void 0===t?void 0:t.bind(I),e[u+1]=null===(i=I.error)||void 0===i?void 0:i.bind(I),e[u+2]=null===(r=I.complete)||void 0===r?void 0:r.bind(I)}let g,y,C;if(n instanceof yi)y=_n(n.firestore,vi),C=dy(n._key.path),g={next:I=>{e[u]&&e[u](CR(y,n,I))},error:e[u+1],complete:e[u+2]};else{const I=_n(n,es);y=_n(I.firestore,vi),C=I._query;const A=new Zh(y);g={next:F=>{e[u]&&e[u](new $h(y,A,I,F))},error:e[u+1],complete:e[u+2]},uU(n._query)}return function(I,A,F,Z){const ee=new iT(Z),ce=new MO(A,ee,F);return I.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return TO(yield xy(I),ce)})),()=>{ee.bc(),I.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return AO(yield xy(I),ce)}))}}(nr(y),C,h,g)}function Oy(n,e){return function(t,i){const r=new br;return t.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function g6(n,e,t){return FO.apply(this,arguments)}(yield hR(t),i,r)})),r.promise}(nr(n),e)}function CR(n,e,t){const i=t.docs.get(e._key),r=new Zh(n);return new ju(n,r,e._key,i,new pg(t.hasPendingWrites,t.fromCache),e.converter)}const xZ={maxAttempts:5};class wU{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=hg(e)}set(e,t,i){this._verifyNotCommitted();const r=Wh(e,this._firestore),o=gT(r.converter,t,i),u=lT(this._dataReader,"WriteBatch.set",r._key,o,null!==r.converter,i);return this._mutations.push(u.toMutation(r._key,Ai.none())),this}update(e,t,i,...r){this._verifyNotCommitted();const o=Wh(e,this._firestore);let u;return u="string"==typeof(t=(0,k.m9)(t))||t instanceof Bu?_R(this._dataReader,"WriteBatch.update",o._key,t,i,r):mR(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(u.toMutation(o._key,Ai.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Wh(e,this._firestore);return this._mutations=this._mutations.concat(new gy(t._key,Ai.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ke(pe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Wh(n,e){if((n=(0,k.m9)(n)).firestore!==e)throw new ke(pe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class MZ extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=hg(e)}get(e){const t=Wh(e,this._firestore),i=new vZ(this._firestore);return this._transaction.lookup([t._key]).then(r=>{if(!r||1!==r.length)return _t();const o=r[0];if(o.isFoundDocument())return new Gw(this._firestore,i,o.key,o,t.converter);if(o.isNoDocument())return new Gw(this._firestore,i,t._key,null,t.converter);throw _t()})}set(e,t,i){const r=Wh(e,this._firestore),o=gT(r.converter,t,i),u=lT(this._dataReader,"Transaction.set",r._key,o,null!==r.converter,i);return this._transaction.set(r._key,u),this}update(e,t,i,...r){const o=Wh(e,this._firestore);let u;return u="string"==typeof(t=(0,k.m9)(t))||t instanceof Bu?_R(this._dataReader,"Transaction.update",o._key,t,i,r):mR(this._dataReader,"Transaction.update",o._key,t),this._transaction.update(o._key,u),this}delete(e){const t=Wh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Wh(e,this._firestore),i=new Zh(this._firestore);return super.get(e).then(r=>new ju(this._firestore,i,t._key,r._document,new pg(!1,!1),t.converter))}}function ER(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new ke("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function CU(){if(typeof Uint8Array>"u")throw new ke("unimplemented","Uint8Arrays are not available in this environment.")}function EU(){if(!function sG(){return typeof atob<"u"}())throw new ke("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){sy=Eo.SDK_VERSION,(0,Eo._registerComponent)(new Bl.wA("firestore",(t,{instanceIdentifier:i,options:r})=>{const o=t.getProvider("app").getImmediate(),u=new vi(new WH(t.getProvider("auth-internal")),new KH(t.getProvider("app-check-internal")),function(h,g){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new ke(pe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Oh(h.options.projectId,g)}(o,i),o);return r=Object.assign({useFetchStreams:e},r),u._setSettings(r),u},"PUBLIC").setMultipleInstances(!0)),(0,Eo.registerVersion)(rL,"3.8.0",n),(0,Eo.registerVersion)(rL,"3.8.0","esm2017")}();class qw{constructor(e){this._delegate=e}static fromBase64String(e){return EU(),new qw(_c.fromBase64String(e))}static fromUint8Array(e){return CU(),new qw(_c.fromUint8Array(e))}toBase64(){return EU(),this._delegate.toBase64()}toUint8Array(){return CU(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function IR(n){return function BZ(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const i of e)if(i in t&&"function"==typeof t[i])return!0;return!1}(n,["next","error","complete"])}class jZ{enableIndexedDbPersistence(e,t){return function K6(n,e){nU(n=_n(n,vi));const t=nr(n),i=n._freezeSettings(),r=new iR;return tU(t,r,new LV(r,i.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function Y6(n){nU(n=_n(n,vi));const e=nr(n),t=n._freezeSettings(),i=new iR;return tU(e,i,new M6(i,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function Q6(n){if(n._initialized&&!n._terminated)throw new ke(pe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new br;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ge.Z)(function*(){try{yield(t=(0,ge.Z)(function*(i){if(!nl.C())return Promise.resolve();const r=i+"main";yield nl.delete(r)}),function(i){return t.apply(this,arguments)})(YM(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class IU{constructor(e,t,i){this._delegate=t,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},e instanceof Oh||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&qp("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,i={}){!function $V(n,e,t,i={}){var r;const o=(n=_n(n,jw))._getSettings();if("firestore.googleapis.com"!==o.host&&o.host!==e&&qp("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},o),{host:`${e}:${t}`,ssl:!1})),i.mockUserToken){let u,h;if("string"==typeof i.mockUserToken)u=i.mockUserToken,h=Rr.MOCK_USER;else{u=(0,k.Sg)(i.mockUserToken,null===(r=n._app)||void 0===r?void 0:r.options.projectId);const g=i.mockUserToken.sub||i.mockUserToken.user_id;if(!g)throw new ke(pe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Rr(g)}n._authCredentials=new ZH(new sL(u,h))}}(this._delegate,e,t,i)}enableNetwork(){return function X6(n){return function U6(n){return n.asyncQueue.enqueue((0,ge.Z)(function*(){const e=yield YV(n),t=yield dR(n);return e.setNetworkEnabled(!0),function(i){const r=st(i);return r._u.delete(0),Uw(r)}(t)}))}(nr(n=_n(n,vi)))}(this._delegate)}disableNetwork(){return function eZ(n){return function B6(n){return n.asyncQueue.enqueue((0,ge.Z)(function*(){const e=yield YV(n),t=yield dR(n);return e.setNetworkEnabled(!1),(i=(0,ge.Z)(function*(r){const o=st(r);o._u.add(0),yield Cy(o),o.gu.set("Offline")}),function(r){return i.apply(this,arguments)})(t);var i}))}(nr(n=_n(n,vi)))}(this._delegate)}enablePersistence(e){let t=!1,i=!1;return e&&(t=!!e.synchronizeTabs,i=!!e.experimentalForceOwningTab,VV("synchronizeTabs",t,"experimentalForceOwningTab",i)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function J6(n){return function(e){const t=new br;return e.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function v6(n,e){return jO.apply(this,arguments)}(yield hR(e),t)})),t.promise}(nr(n=_n(n,vi)))}(this._delegate)}onSnapshotsInSync(e){return function NZ(n,e){return function G6(n,e){const t=new iT(e);return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return i=yield xy(n),r=t,st(i).Ru.add(r),void r.next();var i,r})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return i=yield xy(n),r=t,void st(i).Ru.delete(r);var i,r}))}}(nr(n=_n(n,vi)),pR(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new ke("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Ry(this,ZV(this._delegate,e))}catch(t){throw Os(t,"collection()","Firestore.collection()")}}doc(e){try{return new Ea(this,nT(this._delegate,e))}catch(t){throw Os(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Rs(this,function O6(n,e){if(n=_n(n,jw),rR("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ke(pe.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new es(n,null,(t=e,new Fu(Cn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Os(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function OZ(n,e,t){n=_n(n,vi);const i=Object.assign(Object.assign({},xZ),t);return function(r){if(r.maxAttempts<1)throw new ke(pe.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(r,o,u){const h=new br;return r.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){const g=yield function QV(n){return rT(n).then(e=>e.datastore)}(r);new L6(r.asyncQueue,g,u,o,h).run()})),h.promise}(nr(n),r=>e(new MZ(n,r)),i)}(this._delegate,t=>e(new TU(this,t)))}batch(){return nr(this._delegate),new SU(new wU(this._delegate,e=>Oy(this._delegate,e)))}loadBundle(e){return function tZ(n,e){const t=nr(n=_n(n,vi)),i=new q6;return function $6(n,e,t,i){const r=function(o,u){let h;return h="string"==typeof o?(new TextEncoder).encode(o):o,g=function(g,y){if(g instanceof Uint8Array)return qV(g,y);if(g instanceof ArrayBuffer)return qV(new Uint8Array(g),y);if(g instanceof ReadableStream)return g.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(h),new R6(g,u);var g}(t,Vw(e));n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){!function x6(n,e,t){const i=st(n);var r;(r=(0,ge.Z)(function*(o,u,h){try{const g=yield u.getMetadata();if(yield function(A,F){const Z=st(A),ee=tr(F.createTime);return Z.persistence.runTransaction("hasNewerBundle","readonly",ce=>Z.Ns.getBundleMetadata(ce,F.id)).then(ce=>!!ce&&ce.createTime.compareTo(ee)>=0)}(o.localStore,g))return yield u.close(),h._completeWith({taskState:"Success",documentsLoaded:(A=g).totalDocuments,bytesLoaded:A.totalBytes,totalDocuments:A.totalDocuments,totalBytes:A.totalBytes}),Promise.resolve(new Set);h._updateProgress(SV(g));const y=new c6(g,o.localStore,u.yt);let C=yield u.mc();for(;C;){const A=yield y.Fu(C);A&&h._updateProgress(A),C=yield u.mc()}const I=yield y.complete();return yield Uu(o,I.Lu,void 0),yield function(A,F){const Z=st(A);return Z.persistence.runTransaction("Save bundle","readwrite",ee=>Z.Ns.saveBundleMetadata(ee,F))}(o.localStore,g),h._completeWith(I.progress),Promise.resolve(I.Bu)}catch(g){return qp("SyncEngine",`Loading bundle failed with ${g}`),h._failWith(g),Promise.resolve(new Set)}var A}),function(o,u,h){return r.apply(this,arguments)})(i,e,t).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}(yield hR(n),r,i)}))}(t,n._databaseId,e,i),i}(this._delegate,e)}namedQuery(e){return function nZ(n,e){return function Z6(n,e){return n.asyncQueue.enqueue((0,ge.Z)(function*(){return function(t,i){const r=st(t);return r.persistence.runTransaction("Get named query","readonly",o=>r.Ns.getNamedQuery(o,i))}(yield sT(n),e)}))}(nr(n=_n(n,vi)),e).then(t=>t?new es(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Rs(this,t):null)}}class mT extends DR{constructor(e){super(),this.firestore=e}convertBytes(e){return new qw(new _c(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Ea.forKey(t,this.firestore,null)}}class TU{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new mT(e)}get(e){const t=mg(e);return this._delegate.get(t).then(i=>new zw(this._firestore,new ju(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,t.converter)))}set(e,t,i){const r=mg(e);return i?(ER("Transaction.set",i),this._delegate.set(r,t,i)):this._delegate.set(r,t),this}update(e,t,i,...r){const o=mg(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,i,...r),this}delete(e){const t=mg(e);return this._delegate.delete(t),this}}class SU{constructor(e){this._delegate=e}set(e,t,i){const r=mg(e);return i?(ER("WriteBatch.set",i),this._delegate.set(r,t,i)):this._delegate.set(r,t),this}update(e,t,i,...r){const o=mg(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,i,...r),this}delete(e){const t=mg(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class gg{constructor(e,t,i){this._firestore=e,this._userDataWriter=t,this._delegate=i}fromFirestore(e,t){const i=new Ww(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Kw(this._firestore,i),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const i=gg.INSTANCES;let r=i.get(e);r||(r=new WeakMap,i.set(e,r));let o=r.get(t);return o||(o=new gg(e,new mT(e),t),r.set(t,o)),o}}gg.INSTANCES=new WeakMap;class Ea{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new mT(e)}static forPath(e,t,i){if(e.length%2!=0)throw new ke("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ea(t,new yi(t._delegate,i,new it(e)))}static forKey(e,t,i){return new Ea(t,new yi(t._delegate,i,e))}get id(){return this._delegate.id}get parent(){return new Ry(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Ry(this.firestore,ZV(this._delegate,e))}catch(t){throw Os(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,k.m9)(e))instanceof yi&&WV(this._delegate,e)}set(e,t){t=ER("DocumentReference.set",t);try{return t?yU(this._delegate,e,t):yU(this._delegate,e)}catch(i){throw Os(i,"setDoc()","DocumentReference.set()")}}update(e,t,...i){try{return 1===arguments.length?vU(this._delegate,e):vU(this._delegate,e,t,...i)}catch(r){throw Os(r,"updateDoc()","DocumentReference.update()")}}delete(){return function SZ(n){return Oy(_n(n.firestore,vi),[new gy(n._key,Ai.none())])}(this._delegate)}onSnapshot(...e){const t=AU(e),i=NU(e,r=>new zw(this.firestore,new ju(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return bU(this._delegate,t,i)}get(e){let t;return t="cache"===e?.source?function DZ(n){n=_n(n,yi);const e=_n(n.firestore,vi),t=nr(e),i=new Zh(e);return function j6(n,e){const t=new br;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return(i=(0,ge.Z)(function*(r,o,u){try{const h=yield function(g,y){const C=st(g);return C.persistence.runTransaction("read document","readonly",I=>C.localDocuments.getDocument(I,y))}(r,o);h.isFoundDocument()?u.resolve(h):h.isNoDocument()?u.resolve(null):u.reject(new ke(pe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const g=Ty(h,`Failed to get document '${o} from cache`);u.reject(g)}}),function(r,o,u){return i.apply(this,arguments)})(yield sT(n),e,t);var i})),t.promise}(t,n._key).then(r=>new ju(e,i,n._key,r,new pg(null!==r&&r.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function CZ(n){n=_n(n,yi);const e=_n(n.firestore,vi);return JV(nr(e),n._key,{source:"server"}).then(t=>CR(e,n,t))}(this._delegate):function wZ(n){n=_n(n,yi);const e=_n(n.firestore,vi);return JV(nr(e),n._key).then(t=>CR(e,n,t))}(this._delegate),t.then(i=>new zw(this.firestore,new ju(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(e){return new Ea(this.firestore,this._delegate.withConverter(e?gg.getInstance(this.firestore,e):null))}}function Os(n,e,t){return n.message=n.message.replace(e,t),n}function AU(n){for(const e of n)if("object"==typeof e&&!IR(e))return e;return{}}function NU(n,e){var t,i;let r;return r=IR(n[0])?n[0]:IR(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:o=>{r.next&&r.next(e(o))},error:null===(t=r.error)||void 0===t?void 0:t.bind(r),complete:null===(i=r.complete)||void 0===i?void 0:i.bind(r)}}class zw{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ea(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return _U(this._delegate,e._delegate)}}class Kw extends zw{data(e){const t=this._delegate.data(e);return function GH(n,e){n||_t()}(void 0!==t),t}}class Rs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new mT(e)}where(e,t,i){try{return new Rs(this.firestore,Gh(this._delegate,function dZ(n,e,t){const i=e,r=dT("where",n);return Zw._create(r,i,t)}(e,t,i)))}catch(r){throw Os(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Rs(this.firestore,Gh(this._delegate,function hZ(n,e="asc"){const t=e,i=dT("orderBy",n);return wR._create(i,t)}(e,t)))}catch(i){throw Os(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Rs(this.firestore,Gh(this._delegate,function fZ(n){return jV("limit",n),hT._create("limit",n,"F")}(e)))}catch(t){throw Os(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Rs(this.firestore,Gh(this._delegate,function pZ(n){return jV("limitToLast",n),hT._create("limitToLast",n,"L")}(e)))}catch(t){throw Os(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Rs(this.firestore,Gh(this._delegate,function gZ(...n){return fT._create("startAt",n,!0)}(...e)))}catch(t){throw Os(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Rs(this.firestore,Gh(this._delegate,function mZ(...n){return fT._create("startAfter",n,!1)}(...e)))}catch(t){throw Os(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Rs(this.firestore,Gh(this._delegate,function _Z(...n){return pT._create("endBefore",n,!1)}(...e)))}catch(t){throw Os(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Rs(this.firestore,Gh(this._delegate,function yZ(...n){return pT._create("endAt",n,!0)}(...e)))}catch(t){throw Os(t,"endAt()","Query.endAt()")}}isEqual(e){return sR(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function IZ(n){n=_n(n,es);const e=_n(n.firestore,vi),t=nr(e),i=new Zh(e);return function H6(n,e){const t=new br;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return(i=(0,ge.Z)(function*(r,o,u){try{const h=yield KI(r,o,!0),g=new xV(o,h.Hi),y=g.Wu(h.documents),C=g.applyChanges(y,!1);u.resolve(C.snapshot)}catch(h){const g=Ty(h,`Failed to execute query '${o} against cache`);u.reject(g)}}),function(r,o,u){return i.apply(this,arguments)})(yield sT(n),e,t);var i})),t.promise}(t,n._query).then(r=>new $h(e,i,n,r))}(this._delegate):"server"===e?.source?function TZ(n){n=_n(n,es);const e=_n(n.firestore,vi),t=nr(e),i=new Zh(e);return XV(t,n._query,{source:"server"}).then(r=>new $h(e,i,n,r))}(this._delegate):function EZ(n){n=_n(n,es);const e=_n(n.firestore,vi),t=nr(e),i=new Zh(e);return uU(n._query),XV(t,n._query).then(r=>new $h(e,i,n,r))}(this._delegate),t.then(i=>new TR(this.firestore,new $h(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...e){const t=AU(e),i=NU(e,r=>new TR(this.firestore,new $h(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return bU(this._delegate,t,i)}withConverter(e){return new Rs(this.firestore,this._delegate.withConverter(e?gg.getInstance(this.firestore,e):null))}}class GZ{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Kw(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class TR{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Rs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Kw(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new GZ(this._firestore,t))}forEach(e,t){this._delegate.forEach(i=>{e.call(t,new Kw(this._firestore,i))})}isEqual(e){return _U(this._delegate,e._delegate)}}class Ry extends Rs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ea(this.firestore,e):null}doc(e){try{return new Ea(this.firestore,void 0===e?nT(this._delegate):nT(this._delegate,e))}catch(t){throw Os(t,"doc()","CollectionReference.doc()")}}add(e){return function AZ(n,e){const t=_n(n.firestore,vi),i=nT(n),r=gT(n.converter,e);return Oy(t,[lT(hg(n.firestore),"addDoc",i._key,r,null!==n.converter,{}).toMutation(i._key,Ai.exists(!1))]).then(()=>i)}(this._delegate,e).then(t=>new Ea(this.firestore,t))}isEqual(e){return WV(this._delegate,e._delegate)}withConverter(e){return new Ry(this.firestore,this._delegate.withConverter(e?gg.getInstance(this.firestore,e):null))}}function mg(n){return _n(n,yi)}class SR{constructor(...e){this._delegate=new Bu(...e)}static documentId(){return new SR(Gi.keyField().canonicalString())}isEqual(e){return(e=(0,k.m9)(e))instanceof Bu&&this._delegate._internalPath.isEqual(e._internalPath)}}class _g{constructor(e){this._delegate=e}static serverTimestamp(){const e=function PZ(){return new gR("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new _g(e)}static delete(){const e=function RZ(){return new Hw("deleteField")}();return e._methodName="FieldValue.delete",new _g(e)}static arrayUnion(...e){const t=function kZ(...n){return new oZ("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new _g(t)}static arrayRemove(...e){const t=function FZ(...n){return new aZ("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new _g(t)}static increment(e){const t=function LZ(n){return new lZ("increment",n)}(e);return t._methodName="FieldValue.increment",new _g(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const $Z={Firestore:IU,GeoPoint:oT,Timestamp:Si,Blob:qw,Transaction:TU,WriteBatch:SU,DocumentReference:Ea,DocumentSnapshot:zw,Query:Rs,QueryDocumentSnapshot:Kw,QuerySnapshot:TR,CollectionReference:Ry,FieldPath:SR,FieldValue:_g,setLogLevel:function HZ(n){!function HH(n){Nh.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function xU(n,e){return function qZ(n,e=Tm.z){return new ai.y(t=>{let i;return null!=e?e.schedule(()=>{i=n.onSnapshot({includeMetadataChanges:!0},t)}):i=n.onSnapshot({includeMetadataChanges:!0},t),()=>{i?.()}})}(n,e)}function AR(n,e){return xU(n,e).pipe((0,at.U)(t=>({payload:t,type:"query"})))}function _T(n,e){return AR(n,e).pipe(na(void 0),Ax(),(0,at.U)(([t,i])=>{const r=i.payload.docChanges(),o=r.map(u=>({type:u.type,payload:u}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((u,h)=>{const g=r.find(C=>C.doc.ref.isEqual(u.ref)),y=t?.payload.docs.find(C=>C.ref.isEqual(u.ref));g&&JSON.stringify(g.doc.metadata)===JSON.stringify(u.metadata)||!g&&y&&JSON.stringify(y.metadata)===JSON.stringify(u.metadata)||o.push({type:"modified",payload:{oldIndex:h,newIndex:h,type:"modified",doc:u}})}),o}))}function MU(n,e,t){return _T(n,t).pipe(mo((i,r)=>function KZ(n,e,t){return e.forEach(i=>{t.indexOf(i.type)>-1&&(n=function YZ(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return NR(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return NR(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return NR(n,e.oldIndex,1)}return n}(n,i))}),n}(i,r.map(o=>o.payload),e),[]),Ud(),(0,at.U)(i=>i.map(r=>({type:r.type,payload:r}))))}function NR(n,e,t,...i){const r=n.slice();return r.splice(e,t,...i),r}function OU(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function WZ(n){(function ZZ(n,e){n.INTERNAL.registerComponent(new Bl.wA("firestore-compat",t=>{const i=t.getProvider("app-compat").getImmediate(),r=t.getProvider("firestore").getImmediate();return e(i,r)},"PUBLIC").setServiceProps(Object.assign({},$Z)))})(n,(e,t)=>new IU(e,t,new jZ)),n.registerVersion("@firebase/firestore-compat","0.3.0")}(NS.Z);class RU{constructor(e,t,i){this.ref=e,this.query=t,this.afs=i}stateChanges(e){let t=_T(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,at.U)(i=>i.filter(r=>e.indexOf(r.type)>-1)))),t.pipe(na(void 0),Ax(),gi(([i,r])=>r.length>0||!i),(0,at.U)(([i,r])=>r),qn.iC)}auditTrail(e){return this.stateChanges(e).pipe(mo((t,i)=>[...t,...i],[]))}snapshotChanges(e){const t=OU(e);return MU(this.query,t,this.afs.schedulers.outsideAngular).pipe(qn.iC)}valueChanges(e={}){return AR(this.query,this.afs.schedulers.outsideAngular).pipe((0,at.U)(t=>t.payload.docs.map(i=>e.idField?Object.assign(Object.assign({},i.data()),{[e.idField]:i.id}):i.data())),qn.iC)}get(e){return(0,Pn.D)(this.query.get(e)).pipe(qn.iC)}add(e){return this.ref.add(e)}doc(e){return new PU(this.ref.doc(e),this.afs)}}class PU{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const i=this.ref.collection(e),{ref:r,query:o}=LU(i,t);return new RU(r,o,this.afs)}snapshotChanges(){return function zZ(n,e){return xU(n,e).pipe(na(void 0),Ax(),(0,at.U)(([t,i])=>i.exists?t?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(qn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,at.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Pn.D)(this.ref.get(e)).pipe(qn.iC)}}class QZ{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?_T(this.query,this.afs.schedulers.outsideAngular).pipe((0,at.U)(t=>t.filter(i=>e.indexOf(i.type)>-1)),gi(t=>t.length>0),qn.iC):_T(this.query,this.afs.schedulers.outsideAngular).pipe(qn.iC)}auditTrail(e){return this.stateChanges(e).pipe(mo((t,i)=>[...t,...i],[]))}snapshotChanges(e){const t=OU(e);return MU(this.query,t,this.afs.schedulers.outsideAngular).pipe(qn.iC)}valueChanges(e={}){return AR(this.query,this.afs.schedulers.outsideAngular).pipe((0,at.U)(i=>i.payload.docs.map(r=>e.idField?Object.assign({[e.idField]:r.id},r.data()):r.data())),qn.iC)}get(e){return(0,Pn.D)(this.query.get(e)).pipe(qn.iC)}}const kU=new l.OlP("angularfire2.enableFirestorePersistence"),FU=new l.OlP("angularfire2.firestore.persistenceSettings"),JZ=new l.OlP("angularfire2.firestore.settings"),XZ=new l.OlP("angularfire2.firestore.use-emulator");function LU(n,e=(t=>t)){return{query:e(n),ref:n}}let VU=(()=>{class n{constructor(t,i,r,o,u,h,g,y,C,I,A,F,Z,ee,ce,Ze,We){this.schedulers=g;const rt=(0,Gr.on)(t,h,i),Je=C;I&&K_(rt,h,A,Z,ee,ce,F,Ze),[this.firestore,this.persistenceEnabled$]=(0,Gr.cc)(`${rt.name}.firestore`,"AngularFirestore",rt.name,()=>{const Xe=h.runOutsideAngular(()=>rt.firestore());if(o&&Xe.settings(o),Je&&Xe.useEmulator(...Je),r&&!cr(u)){const ct=()=>{try{return(0,Pn.D)(Xe.enablePersistence(y||void 0).then(()=>!0,()=>!1))}catch(Zt){return typeof console<"u"&&console.warn(Zt),bt(!1)}};return[Xe,h.runOutsideAngular(ct)]}return[Xe,bt(!1)]},[o,Je,r])}collection(t,i){let r;r="string"==typeof t?this.firestore.collection(t):t;const{ref:o,query:u}=LU(r,i),h=this.schedulers.ngZone.run(()=>o);return new RU(h,u,this)}collectionGroup(t,i){const r=i||(u=>u),o=this.firestore.collectionGroup(t);return new QZ(r(o),this)}doc(t){let i;i="string"==typeof t?this.firestore.doc(t):t;const r=this.schedulers.ngZone.run(()=>i);return new PU(r,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Gr.Dh),l.LFG(Gr.xv,8),l.LFG(kU,8),l.LFG(JZ,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(qn.HU),l.LFG(FU,8),l.LFG(XZ,8),l.LFG(qr,8),l.LFG(W_,8),l.LFG(Eh,8),l.LFG(Ih,8),l.LFG(q_,8),l.LFG(Ab,8),l.LFG(z_,8),l.LFG(io,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),e8=(()=>{class n{constructor(){wE.Z.registerVersion("angularfire",qn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:kU,useValue:!0},{provide:FU,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[VU]}),n})();var t8=R(1144);const n8=["addListener","removeListener"],i8=["addEventListener","removeEventListener"],r8=["on","off"];function Ps(n,e,t,i){if((0,Hr.m)(t)&&(i=t,t=void 0),i)return Ps(n,e,t).pipe(ud(i));const[r,o]=function a8(n){return(0,Hr.m)(n.addEventListener)&&(0,Hr.m)(n.removeEventListener)}(n)?i8.map(u=>h=>n[u](e,h,t)):function s8(n){return(0,Hr.m)(n.addListener)&&(0,Hr.m)(n.removeListener)}(n)?n8.map(UU(n,e)):function o8(n){return(0,Hr.m)(n.on)&&(0,Hr.m)(n.off)}(n)?r8.map(UU(n,e)):[];if(!r&&(0,t8.z)(n))return(0,Pi.z)(u=>Ps(u,e,t))((0,po.Xf)(n));if(!r)throw new TypeError("Invalid event target");return new ai.y(u=>{const h=(...g)=>u.next(1<g.length?g:g[0]);return r(h),()=>o(h)})}function UU(n,e){return t=>i=>n[t](e,i)}var l8=R(3532);const{isArray:u8}=Array;function BU(n){return 1===n.length&&u8(n[0])?n[0]:n}function yT(...n){const e=(0,Sr.jO)(n),t=BU(n);return t.length?new ai.y(i=>{let r=t.map(()=>[]),o=t.map(()=>!1);i.add(()=>{r=o=null});for(let u=0;!i.closed&&u<t.length;u++)(0,po.Xf)(t[u]).subscribe((0,ti.x)(i,h=>{if(r[u].push(h),r.every(g=>g.length)){const g=r.map(y=>y.shift());i.next(e?e(...g):g),r.some((y,C)=>!y.length&&o[C])&&i.complete()}},()=>{o[u]=!0,!r[u].length&&i.complete()}));return()=>{r=o=null}}):ws.E}function Dr(n){return(0,Ci.e)((e,t)=>{(0,po.Xf)(n).subscribe((0,ti.x)(t,()=>t.complete(),ga.Z)),!t.closed&&e.subscribe(t)})}new ai.y(ga.Z),Math,Math,Math;const TW=["*"],$W=["dialog"];function HR(n){return"string"==typeof n}function bg(n){return null!=n}function Vy(n){return(n||document.body).getBoundingClientRect()}const aB={animation:!0,transitionTimerDelayMs:5},V5=()=>{},{transitionTimerDelayMs:U5}=aB,nD=new Map,ks=(n,e,t,i)=>{let r=i.context||{};const o=nD.get(e);if(o)switch(i.runningTransition){case"continue":return ws.E;case"stop":n.run(()=>o.transition$.complete()),r=Object.assign(o.context,r),nD.delete(e)}const u=t(e,i.animation,r)||V5;if(!i.animation||"none"===window.getComputedStyle(e).transitionProperty)return n.run(()=>u()),bt(void 0).pipe(function F5(n){return e=>new ai.y(t=>e.subscribe({next:u=>n.run(()=>t.next(u)),error:u=>n.run(()=>t.error(u)),complete:()=>n.run(()=>t.complete())}))}(n));const h=new Wn.x,g=new Wn.x,y=h.pipe(function h8(...n){return e=>qs(e,bt(...n))}(!0));nD.set(e,{transition$:h,complete:()=>{g.next(),g.complete()},context:r});const C=function L5(n){const{transitionDelay:e,transitionDuration:t}=window.getComputedStyle(n);return 1e3*(parseFloat(e)+parseFloat(t))}(e);return n.runOutsideAngular(()=>{const I=Ps(e,"transitionend").pipe(Dr(y),gi(({target:F})=>F===e));(function jU(...n){return 1===(n=BU(n)).length?(0,po.Xf)(n[0]):new ai.y(function d8(n){return e=>{let t=[];for(let i=0;t&&!e.closed&&i<n.length;i++)t.push((0,po.Xf)(n[i]).subscribe((0,ti.x)(e,r=>{if(t){for(let o=0;o<t.length;o++)o!==i&&t[o].unsubscribe();t=null}e.next(r)})))}}(n))})(function xR(n=0,e,t=Tm.P){let i=-1;return null!=e&&((0,l8.K)(e)?t=e:i=e),new ai.y(r=>{let o=function c8(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;o<0&&(o=0);let u=0;return t.schedule(function(){r.closed||(r.next(u++),0<=i?this.schedule(void 0,i):r.complete())},o)})}(C+U5).pipe(Dr(y)),I,g).pipe(Dr(y)).subscribe(()=>{nD.delete(e),n.run(()=>{u(),h.next(),h.complete()})})}),h.asObservable()};let ET=(()=>{class n{constructor(){this.animation=aB.animation}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),fB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[oi]}),n})(),pB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[oi]}),n})(),_B=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[oi]}),n})(),yB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})();var Cr=(()=>(function(n){n[n.Tab=9]="Tab",n[n.Enter=13]="Enter",n[n.Escape=27]="Escape",n[n.Space=32]="Space",n[n.PageUp=33]="PageUp",n[n.PageDown=34]="PageDown",n[n.End=35]="End",n[n.Home=36]="Home",n[n.ArrowLeft=37]="ArrowLeft",n[n.ArrowUp=38]="ArrowUp",n[n.ArrowRight=39]="ArrowRight",n[n.ArrowDown=40]="ArrowDown"}(Cr||(Cr={})),Cr))();typeof navigator<"u"&&navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));const bB=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function wB(n){const e=Array.from(n.querySelectorAll(bB)).filter(t=>-1!==t.tabIndex);return[e[0],e[e.length-1]]}new Date(1882,10,12),new Date(2174,10,25);let NB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[oi,Lk]}),n})(),KR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=l.lG2({type:n,selectors:[["",8,"navbar"]]}),n})(),OB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})();class Eg{constructor(e,t,i){this.nodes=e,this.viewRef=t,this.componentRef=i}}let x4=(()=>{class n{constructor(t,i){this._el=t,this._zone=i}ngOnInit(){this._zone.onStable.asObservable().pipe(cn(1)).subscribe(()=>{ks(this._zone,this._el.nativeElement,(t,i)=>{i&&Vy(t),t.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return ks(this._zone,this._el.nativeElement,({classList:t})=>t.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.SBq),l.Y36(l.R0b))},n.\u0275cmp=l.Xpm({type:n,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(t,i){2&t&&(l.Tol("modal-backdrop"+(i.backdropClass?" "+i.backdropClass:"")),l.ekj("show",!i.animation)("fade",i.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},decls:0,vars:0,template:function(t,i){},encapsulation:2}),n})();class RB{close(e){}dismiss(e){}}class M4{constructor(e,t,i,r){this._windowCmptRef=e,this._contentRef=t,this._backdropCmptRef=i,this._beforeDismiss=r,this._closed=new Wn.x,this._dismissed=new Wn.x,this._hidden=new Wn.x,e.instance.dismissEvent.subscribe(o=>{this.dismiss(o)}),this.result=new Promise((o,u)=>{this._resolve=o,this._reject=u}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(Dr(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(Dr(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(e){this._windowCmptRef&&(this._closed.next(e),this._resolve(e),this._removeModalElements())}_dismiss(e){this._dismissed.next(e),this._reject(e),this._removeModalElements()}dismiss(e){if(this._windowCmptRef)if(this._beforeDismiss){const t=this._beforeDismiss();!function oB(n){return n&&n.then}(t)?!1!==t&&this._dismiss(e):t.then(i=>{!1!==i&&this._dismiss(e)},()=>{})}else this._dismiss(e)}_removeModalElements(){const e=this._windowCmptRef.instance.hide(),t=this._backdropCmptRef?this._backdropCmptRef.instance.hide():bt(void 0);e.subscribe(()=>{const{nativeElement:i}=this._windowCmptRef.location;i.parentNode.removeChild(i),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),t.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:i}=this._backdropCmptRef.location;i.parentNode.removeChild(i),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),yT(e,t).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var oD=(()=>(function(n){n[n.BACKDROP_CLICK=0]="BACKDROP_CLICK",n[n.ESC=1]="ESC"}(oD||(oD={})),oD))();let O4=(()=>{class n{constructor(t,i,r){this._document=t,this._elRef=i,this._zone=r,this._closed$=new Wn.x,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new l.vpe,this.shown=new Wn.x,this.hidden=new Wn.x}get fullscreenClass(){return!0===this.fullscreen?" modal-fullscreen":HR(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(t){this.dismissEvent.emit(t)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(cn(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:t}=this._elRef,i={animation:this.animation,runningTransition:"stop"},u=yT(ks(this._zone,t,()=>t.classList.remove("show"),i),ks(this._zone,this._dialogEl.nativeElement,()=>{},i));return u.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),u}_show(){const t={animation:this.animation,runningTransition:"continue"};yT(ks(this._zone,this._elRef.nativeElement,(o,u)=>{u&&Vy(o),o.classList.add("show")},t),ks(this._zone,this._dialogEl.nativeElement,()=>{},t)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:t}=this._elRef;this._zone.runOutsideAngular(()=>{Ps(t,"keydown").pipe(Dr(this._closed$),gi(r=>r.which===Cr.Escape)).subscribe(r=>{this.keyboard?requestAnimationFrame(()=>{r.defaultPrevented||this._zone.run(()=>this.dismiss(oD.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let i=!1;Ps(this._dialogEl.nativeElement,"mousedown").pipe(Dr(this._closed$),(0,ci.b)(()=>i=!1),li(()=>Ps(t,"mouseup").pipe(Dr(this._closed$),cn(1))),gi(({target:r})=>t===r)).subscribe(()=>{i=!0}),Ps(t,"click").pipe(Dr(this._closed$)).subscribe(({target:r})=>{t===r&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!i&&this._zone.run(()=>this.dismiss(oD.BACKDROP_CLICK))),i=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:t}=this._elRef;if(!t.contains(document.activeElement)){const i=t.querySelector("[ngbAutofocus]"),r=wB(t)[0];(i||r||t).focus()}}_restoreFocus(){const t=this._document.body,i=this._elWithFocus;let r;r=i&&i.focus&&t.contains(i)?i:t,this._zone.runOutsideAngular(()=>{setTimeout(()=>r.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&ks(this._zone,this._elRef.nativeElement,({classList:t})=>(t.add("modal-static"),()=>t.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(ae),l.Y36(l.SBq),l.Y36(l.R0b))},n.\u0275cmp=l.Xpm({type:n,selectors:[["ngb-modal-window"]],viewQuery:function(t,i){if(1&t&&l.Gf($W,7),2&t){let r;l.iGM(r=l.CRH())&&(i._dialogEl=r.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(t,i){2&t&&(l.uIk("aria-modal",!0)("aria-labelledby",i.ariaLabelledBy)("aria-describedby",i.ariaDescribedBy),l.Tol("modal d-block"+(i.windowClass?" "+i.windowClass:"")),l.ekj("fade",i.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:TW,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(t,i){1&t&&(l.F$t(),l.TgZ(0,"div",0,1)(2,"div",2),l.Hsn(3),l.qZA()()),2&t&&l.Tol("modal-dialog"+(i.size?" modal-"+i.size:"")+(i.centered?" modal-dialog-centered":"")+i.fullscreenClass+(i.scrollable?" modal-dialog-scrollable":"")+(i.modalDialogClass?" "+i.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}\n"],encapsulation:2}),n})(),R4=(()=>{class n{constructor(t){this._document=t}hide(){const t=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),i=this._document.body,r=i.style,{overflow:o,paddingRight:u}=r;if(t>0){const h=parseFloat(window.getComputedStyle(i).paddingRight);r.paddingRight=`${h+t}px`}return r.overflow="hidden",()=>{t>0&&(r.paddingRight=u),r.overflow=o}}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(ae))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),P4=(()=>{class n{constructor(t,i,r,o,u,h){this._applicationRef=t,this._injector=i,this._document=r,this._scrollBar=o,this._rendererFactory=u,this._ngZone=h,this._activeWindowCmptHasChanged=new Wn.x,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._backdropAttributes=["animation","backdropClass"],this._modalRefs=[],this._windowAttributes=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","scrollable","size","windowClass","modalDialogClass"],this._windowCmpts=[],this._activeInstances=new l.vpe,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const g=this._windowCmpts[this._windowCmpts.length-1];((n,e,t,i=!1)=>{this._ngZone.runOutsideAngular(()=>{const r=Ps(e,"focusin").pipe(Dr(t),(0,at.U)(o=>o.target));Ps(e,"keydown").pipe(Dr(t),gi(o=>o.which===Cr.Tab),Sm(r)).subscribe(([o,u])=>{const[h,g]=wB(e);(u===h||u===e)&&o.shiftKey&&(g.focus(),o.preventDefault()),u===g&&!o.shiftKey&&(h.focus(),o.preventDefault())}),i&&Ps(e,"click").pipe(Dr(t),Sm(r),(0,at.U)(o=>o[1])).subscribe(o=>o.focus())})})(0,g.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(g.location.nativeElement)}})}_restoreScrollBar(){const t=this._scrollBarRestoreFn;t&&(this._scrollBarRestoreFn=null,t())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(t,i,r){const o=r.container instanceof HTMLElement?r.container:bg(r.container)?this._document.querySelector(r.container):this._document.body,u=this._rendererFactory.createRenderer(null,null);if(!o)throw new Error(`The specified modal container "${r.container||"body"}" was not found in the DOM.`);this._hideScrollBar();const h=new RB,g=this._getContentRef(r.injector||t,i,h,r);let y=!1!==r.backdrop?this._attachBackdrop(o):void 0,C=this._attachWindowComponent(o,g.nodes),I=new M4(C,g,y,r.beforeDismiss);return this._registerModalRef(I),this._registerWindowCmpt(C),I.hidden.pipe(cn(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(u.removeClass(this._document.body,"modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),h.close=A=>{I.close(A)},h.dismiss=A=>{I.dismiss(A)},this._applyWindowOptions(C.instance,r),1===this._modalRefs.length&&u.addClass(this._document.body,"modal-open"),y&&y.instance&&(this._applyBackdropOptions(y.instance,r),y.changeDetectorRef.detectChanges()),C.changeDetectorRef.detectChanges(),I}get activeInstances(){return this._activeInstances}dismissAll(t){this._modalRefs.forEach(i=>i.dismiss(t))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(t){let i=(0,l.LMc)(x4,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(i.hostView),t.appendChild(i.location.nativeElement),i}_attachWindowComponent(t,i){let r=(0,l.LMc)(O4,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:i});return this._applicationRef.attachView(r.hostView),t.appendChild(r.location.nativeElement),r}_applyWindowOptions(t,i){this._windowAttributes.forEach(r=>{bg(i[r])&&(t[r]=i[r])})}_applyBackdropOptions(t,i){this._backdropAttributes.forEach(r=>{bg(i[r])&&(t[r]=i[r])})}_getContentRef(t,i,r,o){return i?i instanceof l.Rgc?this._createFromTemplateRef(i,r):HR(i)?this._createFromString(i):this._createFromComponent(t,i,r,o):new Eg([])}_createFromTemplateRef(t,i){const o=t.createEmbeddedView({$implicit:i,close(u){i.close(u)},dismiss(u){i.dismiss(u)}});return this._applicationRef.attachView(o),new Eg([o.rootNodes],o)}_createFromString(t){const i=this._document.createTextNode(`${t}`);return new Eg([[i]])}_createFromComponent(t,i,r,o){const u=l.zs3.create({providers:[{provide:RB,useValue:r}],parent:t}),h=(0,l.LMc)(i,{environmentInjector:this._applicationRef.injector,elementInjector:u}),g=h.location.nativeElement;return o.scrollable&&g.classList.add("component-host-scrollable"),this._applicationRef.attachView(h.hostView),new Eg([[g]],h.hostView,h)}_setAriaHidden(t){const i=t.parentElement;i&&t!==this._document.body&&(Array.from(i.children).forEach(r=>{r!==t&&"SCRIPT"!==r.nodeName&&(this._ariaHiddenValues.set(r,r.getAttribute("aria-hidden")),r.setAttribute("aria-hidden","true"))}),this._setAriaHidden(i))}_revertAriaHidden(){this._ariaHiddenValues.forEach((t,i)=>{t?i.setAttribute("aria-hidden",t):i.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(t){const i=()=>{const r=this._modalRefs.indexOf(t);r>-1&&(this._modalRefs.splice(r,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(t),this._activeInstances.emit(this._modalRefs),t.result.then(i,i)}_registerWindowCmpt(t){this._windowCmpts.push(t),this._activeWindowCmptHasChanged.next(),t.onDestroy(()=>{const i=this._windowCmpts.indexOf(t);i>-1&&(this._windowCmpts.splice(i,1),this._activeWindowCmptHasChanged.next())})}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(l.z2F),l.LFG(l.zs3),l.LFG(ae),l.LFG(R4),l.LFG(l.FYo),l.LFG(l.R0b))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),k4=(()=>{class n{constructor(t){this._ngbConfig=t,this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(t){this._animation=t}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(ET))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),F4=(()=>{class n{constructor(t,i,r){this._injector=t,this._modalStack=i,this._config=r}open(t,i={}){const r={...this._config,animation:this._config.animation,...i};return this._modalStack.open(this._injector,t,r)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(t){this._modalStack.dismissAll(t)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(l.zs3),l.LFG(P4),l.LFG(k4))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),PB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[F4]}),n})(),VB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[oi]}),n})(),WB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[oi]}),n})(),zB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[oi]}),n})(),KB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[oi]}),n})(),YB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[oi]}),n})(),QB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[oi]}),n})(),JB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[oi]}),n})(),XB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})();new l.OlP("live announcer delay",{providedIn:"root",factory:function K4(){return 100}});let ej=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[oi]}),n})(),tj=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})();const Y4=[fB,pB,_B,yB,NB,OB,PB,VB,tj,WB,zB,KB,YB,QB,JB,XB,ej];let Q4=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Y4,fB,pB,_B,yB,NB,OB,PB,VB,tj,WB,zB,KB,YB,QB,JB,XB,ej]}),n})(),J4=(()=>{class n{constructor(){this.notificationsCounter=0}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-notifications"]],decls:4,vars:1,consts:[["type","button","data-bs-toggle","toast","data-bs-target","#testToast","aria-controls","testToast",1,"btn","btn-grad",2,"position","relative","margin","12px"],[1,"bi","bi-bell"],[1,"position-absolute","translate-middle","badge","rounded-pill","bg-danger",2,"left","0%","top","0%"]],template:function(t,i){1&t&&(l.TgZ(0,"button",0),l._UZ(1,"i",1),l.TgZ(2,"span",2),l._uU(3),l.qZA()()),2&t&&(l.xp6(3),l.hij(" ",i.notificationsCounter," "))},styles:[".btn-grad[_ngcontent-%COMP%]{background-image:linear-gradient(315deg,#0093E9 0%,#80D0C7 56%);text-align:center;text-transform:uppercase;transition:.5s;background-size:200% auto;color:#fff;box-shadow:0 0 20px #eee;border-radius:10px;display:block;border:0px}.btn-grad[_ngcontent-%COMP%]:hover{background-position:right center;color:#fff;text-decoration:none}.btn-grad[_ngcontent-%COMP%]:active{background-position:left center;color:#fff;text-decoration:none}"]}),n})(),X4=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-login-register-buttons"]],decls:7,vars:0,consts:[[1,"container"],["href","/login"],[1,"btn","btn-grad","login"],["href","/register"],[1,"btn","btn-grad","register"]],template:function(t,i){1&t&&(l.TgZ(0,"div",0)(1,"a",1)(2,"div",2),l._uU(3,"Log in"),l.qZA()(),l.TgZ(4,"a",3)(5,"div",4),l._uU(6,"Sign up"),l.qZA()()())},styles:[".btn[_ngcontent-%COMP%]{margin-bottom:20px;font-size:1.5rem;border-radius:12px}.login[_ngcontent-%COMP%]{background-color:#0093e9;background-image:linear-gradient(315deg,#0093E9 0%,#80D0C7 56%);text-align:center;text-transform:uppercase;transition:.5s;background-size:200% auto;color:#fff;box-shadow:0 0 20px #eee;display:block;border:0px}.register[_ngcontent-%COMP%]{background-color:#80d0c7;background-image:linear-gradient(315deg,#80D0C7 0%,#0093E9 70%);text-align:center;text-transform:uppercase;transition:.5s;background-size:200% auto;color:#fff;box-shadow:0 0 20px #eee;display:block;border:0px}.btn-grad[_ngcontent-%COMP%]:hover{background-position:right center;color:#fff;text-decoration:none}.btn-grad[_ngcontent-%COMP%]:active{background-position:left center;color:#fff;text-decoration:none}.container[_ngcontent-%COMP%]{display:flex;justify-content:space-around;align-items:center}a[_ngcontent-%COMP%]{text-decoration:none}"]}),n})(),eq=(()=>{class n{constructor(t){this.auth=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(As))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-log-out-button"]],decls:3,vars:0,consts:[[1,"container"],[1,"btn","btn-grad",3,"click"]],template:function(t,i){1&t&&(l.TgZ(0,"div",0)(1,"button",1),l.NdJ("click",function(){return i.auth.signOut()}),l._uU(2,"Log out"),l.qZA()())},styles:[".btn[_ngcontent-%COMP%]{margin-bottom:20px;font-size:1.5rem;border-radius:12px}.btn-grad[_ngcontent-%COMP%]{background-color:#0093e9;background-image:linear-gradient(315deg,#0093E9 0%,#80D0C7 56%);text-align:center;text-transform:uppercase;transition:.5s;background-size:200% auto;color:#fff;box-shadow:0 0 20px #eee;display:block;border:0px}.btn-grad[_ngcontent-%COMP%]:hover{background-position:right center;color:#fff;text-decoration:none}.btn-grad[_ngcontent-%COMP%]:active{background-position:left center;color:#fff;text-decoration:none}.container[_ngcontent-%COMP%]{display:flex;justify-content:space-around;align-items:center}"]}),n})();function tq(n,e){if(1&n&&(l.TgZ(0,"h5",16),l._uU(1),l.qZA()),2&n){const t=e.ngIf;l.xp6(1),l.hij("Hello, ",t.email,"")}}function nq(n,e){1&n&&(l.TgZ(0,"li",8),l._UZ(1,"i",17),l.TgZ(2,"a",18),l._uU(3,"Manage Users"),l.qZA()())}function iq(n,e){1&n&&(l.TgZ(0,"li",8),l._UZ(1,"i",19),l.TgZ(2,"a",20),l._uU(3,"Manage Trips"),l.qZA()())}function rq(n,e){1&n&&l._UZ(0,"app-login-register-buttons")}function sq(n,e){1&n&&l._UZ(0,"app-log-out-button")}let oq=(()=>{class n{constructor(t,i){this.authService=t,this.auth=i,this.user$=this.auth.authState}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(As),l.Y36(qr))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-menu"]],decls:22,vars:7,consts:[["type","button","data-bs-toggle","offcanvas","data-bs-target","#mainNav","aria-controls","mainNav"],[1,"bi","bi-list"],["tabindex","-1","id","mainNav","aria-labelledby","mainNavLabel",1,"offcanvas","offcanvas-start"],[1,"offcanvas-header"],["class","offcanvas-title","id","mainNavLabel",4,"ngIf"],["type","button","data-bs-dismiss","offcanvas","aria-label","Close",1,"btn-close"],[1,"offcanvas-body"],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"],[1,"nav-item"],[1,"bi","bi-house"],["aria-current","page","href","/Travel-Agency-App/#/Travel-Agency-App/home",1,"nav-link"],[1,"bi","bi-airplane-engines"],["href","/Travel-Agency-App/#/Travel-Agency-App/trips",1,"nav-link"],["class","nav-item",4,"ngIf"],[1,"offcanvas-footer"],[4,"ngIf"],["id","mainNavLabel",1,"offcanvas-title"],[1,"bi","bi-people"],["href","/Travel-Agency-App/#/Travel-Agency-App/admin",1,"nav-link"],[1,"bi","bi-gear"],["href","/Travel-Agency-App/#/Travel-Agency-App/manager",1,"nav-link"]],template:function(t,i){1&t&&(l.TgZ(0,"button",0),l._UZ(1,"i",1),l.qZA(),l.TgZ(2,"div",2)(3,"div",3),l.YNc(4,tq,2,1,"h5",4),l.ALo(5,"async"),l._UZ(6,"button",5),l.qZA(),l.TgZ(7,"div",6)(8,"ul",7)(9,"li",8),l._UZ(10,"i",9),l.TgZ(11,"a",10),l._uU(12,"Home"),l.qZA()(),l.TgZ(13,"li",8),l._UZ(14,"i",11),l.TgZ(15,"a",12),l._uU(16,"Trips Catalog"),l.qZA()(),l.YNc(17,nq,4,0,"li",13),l.YNc(18,iq,4,0,"li",13),l.qZA()(),l.TgZ(19,"div",14),l.YNc(20,rq,1,0,"app-login-register-buttons",15),l.YNc(21,sq,1,0,"app-log-out-button",15),l.qZA()()),2&t&&(l.xp6(4),l.Q6J("ngIf",l.lcZ(5,5,i.user$)),l.xp6(13),l.Q6J("ngIf",i.authService.userRoles.admin),l.xp6(1),l.Q6J("ngIf",i.authService.userRoles.admin||i.authService.userRoles.manager),l.xp6(2),l.Q6J("ngIf",!i.authService.isLoggedIn()),l.xp6(1),l.Q6J("ngIf",i.authService.isLoggedIn()))},dependencies:[Sn,X4,eq,Cc],styles:["button[_ngcontent-%COMP%]{position:absolute;top:11px;left:11px;border:none;margin:0;width:40px;height:40px;background-color:#fff}button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem}.navbar-nav[_ngcontent-%COMP%]{padding-top:10px}.nav-item[_ngcontent-%COMP%]{display:flex;align-items:center}.nav-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2.3rem;margin-right:10px;margin-left:10px}.nav-link[_ngcontent-%COMP%]{font-size:2rem}#mainNav[_ngcontent-%COMP%]{width:350px}.offcanvas-title[_ngcontent-%COMP%]{position:absolute;left:80px;top:16px;width:250px;overflow:scroll}"]}),n})();function aq(n,e){1&n&&l._UZ(0,"app-shopping-cart",6)}function lq(n,e){1&n&&l._UZ(0,"app-notifications",7)}let cq=(()=>{class n{constructor(t){this.auth=t}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(As))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-navigation-bar"]],decls:7,vars:2,consts:[[1,"navbar","sticky-top","bg-body"],[2,"position","relative","width","100%","height","100%"],["href","home",1,"navbar-brand"],["src","../../../assets/logo.png","alt",""],["style","position: absolute; right: 0px",4,"ngIf"],["style","position: absolute; right: 62px",4,"ngIf"],[2,"position","absolute","right","0px"],[2,"position","absolute","right","62px"]],template:function(t,i){1&t&&(l.TgZ(0,"nav",0)(1,"div",1),l._UZ(2,"app-menu"),l.TgZ(3,"a",2),l._UZ(4,"img",3),l.qZA(),l.YNc(5,aq,1,0,"app-shopping-cart",4),l.YNc(6,lq,1,0,"app-notifications",5),l.qZA()()),2&t&&(l.xp6(5),l.Q6J("ngIf",i.auth.isLoggedIn()),l.xp6(1),l.Q6J("ngIf",i.auth.isLoggedIn()))},dependencies:[Sn,KR,jk,J4,oq],styles:["nav[_ngcontent-%COMP%]{box-shadow:5px #000;height:62px;padding:0;box-shadow:0 3px 5px #b6b6b6bf}.navbar-brand[_ngcontent-%COMP%]{position:absolute;top:-2px;left:60px}.navbar-brand[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:60px;width:auto}"]}),n})(),uq=(()=>{class n{constructor(t){this.title="MainProject",this.items=t.collection("trips").valueChanges()}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(VU))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-root"]],decls:2,vars:0,template:function(t,i){1&t&&l._UZ(0,"app-navigation-bar")(1,"router-outlet")},dependencies:[Uf,cq],styles:[".modal-backdrop[_ngcontent-%COMP%]{z-index:-1;--bs-backdrop-zindex: -1}.modal[_ngcontent-%COMP%]{z-index:10000}"]}),n})();var dq=R(3008);const XR_firebase={apiKey:"AIzaSyDuekJ8EvdJB4Hpj9sNGLGkWYL0ofJkqxA",authDomain:"drip-trip-c1c9c.firebaseapp.com",databaseURL:"https://drip-trip-c1c9c-default-rtdb.europe-west1.firebasedatabase.app",projectId:"drip-trip-c1c9c",storageBucket:"drip-trip-c1c9c.appspot.com",messagingSenderId:"691297381529",appId:"1:691297381529:web:ec4a94ad5f206a74e81c08",measurementId:"G-BL0KVCGSB0"},hq=(0,O_.ZF)(XR_firebase);(0,dq.IH)(hq);let fq=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n,bootstrap:[uq]}),n.\u0275inj=l.cJS({imports:[ff,Q4,U3,Im,Gr.hO.initializeApp(XR_firebase),e8,Vk,Lk]}),n})();(0,l.G48)(),sd().bootstrapModule(fq).catch(n=>console.error(n))},9751:(yt,Me,R)=>{R.d(Me,{y:()=>ye});var l=R(930),X=R(727),V=R(8822),re=R(9635),fe=R(2416),me=R(576),ae=R(2806);let ye=(()=>{class J{constructor(Te){Te&&(this._subscribe=Te)}lift(Te){const Se=new J;return Se.source=this,Se.operator=Te,Se}subscribe(Te,Se,et){const be=function $(J){return J&&J instanceof l.Lv||function G(J){return J&&(0,me.m)(J.next)&&(0,me.m)(J.error)&&(0,me.m)(J.complete)}(J)&&(0,X.Nn)(J)}(Te)?Te:new l.Hp(Te,Se,et);return(0,ae.x)(()=>{const{operator:ue,source:pt}=this;be.add(ue?ue.call(be,pt):pt?this._subscribe(be):this._trySubscribe(be))}),be}_trySubscribe(Te){try{return this._subscribe(Te)}catch(Se){Te.error(Se)}}forEach(Te,Se){return new(Se=he(Se))((et,be)=>{const ue=new l.Hp({next:pt=>{try{Te(pt)}catch(lt){be(lt),ue.unsubscribe()}},error:be,complete:et});this.subscribe(ue)})}_subscribe(Te){var Se;return null===(Se=this.source)||void 0===Se?void 0:Se.subscribe(Te)}[V.L](){return this}pipe(...Te){return(0,re.U)(Te)(this)}toPromise(Te){return new(Te=he(Te))((Se,et)=>{let be;this.subscribe(ue=>be=ue,ue=>et(ue),()=>Se(be))})}}return J.create=Pe=>new J(Pe),J})();function he(J){var Pe;return null!==(Pe=J??fe.v.Promise)&&void 0!==Pe?Pe:Promise}},7579:(yt,Me,R)=>{R.d(Me,{x:()=>ae});var l=R(9751),X=R(727);const re=(0,R(3888).d)(he=>function(){he(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var fe=R(8737),me=R(2806);let ae=(()=>{class he extends l.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift($){const J=new ye(this,this);return J.operator=$,J}_throwIfClosed(){if(this.closed)throw new re}next($){(0,me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const J of this.currentObservers)J.next($)}})}error($){(0,me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=$;const{observers:J}=this;for(;J.length;)J.shift().error($)}})}complete(){(0,me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:$}=this;for(;$.length;)$.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var $;return(null===($=this.observers)||void 0===$?void 0:$.length)>0}_trySubscribe($){return this._throwIfClosed(),super._trySubscribe($)}_subscribe($){return this._throwIfClosed(),this._checkFinalizedStatuses($),this._innerSubscribe($)}_innerSubscribe($){const{hasError:J,isStopped:Pe,observers:Te}=this;return J||Pe?X.Lc:(this.currentObservers=null,Te.push($),new X.w0(()=>{this.currentObservers=null,(0,fe.P)(Te,$)}))}_checkFinalizedStatuses($){const{hasError:J,thrownError:Pe,isStopped:Te}=this;J?$.error(Pe):Te&&$.complete()}asObservable(){const $=new l.y;return $.source=this,$}}return he.create=(G,$)=>new ye(G,$),he})();class ye extends ae{constructor(G,$){super(),this.destination=G,this.source=$}next(G){var $,J;null===(J=null===($=this.destination)||void 0===$?void 0:$.next)||void 0===J||J.call($,G)}error(G){var $,J;null===(J=null===($=this.destination)||void 0===$?void 0:$.error)||void 0===J||J.call($,G)}complete(){var G,$;null===($=null===(G=this.destination)||void 0===G?void 0:G.complete)||void 0===$||$.call(G)}_subscribe(G){var $,J;return null!==(J=null===($=this.source)||void 0===$?void 0:$.subscribe(G))&&void 0!==J?J:X.Lc}}},930:(yt,Me,R)=>{R.d(Me,{Hp:()=>et,Lv:()=>J});var l=R(576),X=R(727),V=R(2416),re=R(7849),fe=R(5032);const me=he("C",void 0,void 0);function he(Re,Ee,Ae){return{kind:Re,value:Ee,error:Ae}}var G=R(3410),$=R(2806);class J extends X.w0{constructor(Ee){super(),this.isStopped=!1,Ee?(this.destination=Ee,(0,X.Nn)(Ee)&&Ee.add(this)):this.destination=lt}static create(Ee,Ae,$e){return new et(Ee,Ae,$e)}next(Ee){this.isStopped?pt(function ye(Re){return he("N",Re,void 0)}(Ee),this):this._next(Ee)}error(Ee){this.isStopped?pt(function ae(Re){return he("E",void 0,Re)}(Ee),this):(this.isStopped=!0,this._error(Ee))}complete(){this.isStopped?pt(me,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ee){this.destination.next(Ee)}_error(Ee){try{this.destination.error(Ee)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Pe=Function.prototype.bind;function Te(Re,Ee){return Pe.call(Re,Ee)}class Se{constructor(Ee){this.partialObserver=Ee}next(Ee){const{partialObserver:Ae}=this;if(Ae.next)try{Ae.next(Ee)}catch($e){be($e)}}error(Ee){const{partialObserver:Ae}=this;if(Ae.error)try{Ae.error(Ee)}catch($e){be($e)}else be(Ee)}complete(){const{partialObserver:Ee}=this;if(Ee.complete)try{Ee.complete()}catch(Ae){be(Ae)}}}class et extends J{constructor(Ee,Ae,$e){let Le;if(super(),(0,l.m)(Ee)||!Ee)Le={next:Ee??void 0,error:Ae??void 0,complete:$e??void 0};else{let j;this&&V.v.useDeprecatedNextContext?(j=Object.create(Ee),j.unsubscribe=()=>this.unsubscribe(),Le={next:Ee.next&&Te(Ee.next,j),error:Ee.error&&Te(Ee.error,j),complete:Ee.complete&&Te(Ee.complete,j)}):Le=Ee}this.destination=new Se(Le)}}function be(Re){V.v.useDeprecatedSynchronousErrorHandling?(0,$.O)(Re):(0,re.h)(Re)}function pt(Re,Ee){const{onStoppedNotification:Ae}=V.v;Ae&&G.z.setTimeout(()=>Ae(Re,Ee))}const lt={closed:!0,next:fe.Z,error:function ue(Re){throw Re},complete:fe.Z}},727:(yt,Me,R)=>{R.d(Me,{Lc:()=>me,w0:()=>fe,Nn:()=>ae});var l=R(576);const V=(0,R(3888).d)(he=>function($){he(this),this.message=$?`${$.length} errors occurred during unsubscription:\n${$.map((J,Pe)=>`${Pe+1}) ${J.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=$});var re=R(8737);class fe{constructor(G){this.initialTeardown=G,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let G;if(!this.closed){this.closed=!0;const{_parentage:$}=this;if($)if(this._parentage=null,Array.isArray($))for(const Te of $)Te.remove(this);else $.remove(this);const{initialTeardown:J}=this;if((0,l.m)(J))try{J()}catch(Te){G=Te instanceof V?Te.errors:[Te]}const{_finalizers:Pe}=this;if(Pe){this._finalizers=null;for(const Te of Pe)try{ye(Te)}catch(Se){G=G??[],Se instanceof V?G=[...G,...Se.errors]:G.push(Se)}}if(G)throw new V(G)}}add(G){var $;if(G&&G!==this)if(this.closed)ye(G);else{if(G instanceof fe){if(G.closed||G._hasParent(this))return;G._addParent(this)}(this._finalizers=null!==($=this._finalizers)&&void 0!==$?$:[]).push(G)}}_hasParent(G){const{_parentage:$}=this;return $===G||Array.isArray($)&&$.includes(G)}_addParent(G){const{_parentage:$}=this;this._parentage=Array.isArray($)?($.push(G),$):$?[$,G]:G}_removeParent(G){const{_parentage:$}=this;$===G?this._parentage=null:Array.isArray($)&&(0,re.P)($,G)}remove(G){const{_finalizers:$}=this;$&&(0,re.P)($,G),G instanceof fe&&G._removeParent(this)}}fe.EMPTY=(()=>{const he=new fe;return he.closed=!0,he})();const me=fe.EMPTY;function ae(he){return he instanceof fe||he&&"closed"in he&&(0,l.m)(he.remove)&&(0,l.m)(he.add)&&(0,l.m)(he.unsubscribe)}function ye(he){(0,l.m)(he)?he():he.unsubscribe()}},2416:(yt,Me,R)=>{R.d(Me,{v:()=>l});const l={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(yt,Me,R)=>{R.d(Me,{E:()=>X});const X=new(R(9751).y)(fe=>fe.complete())},8996:(yt,Me,R)=>{R.d(Me,{D:()=>Ee});var l=R(8421),X=R(5363),V=R(9468),me=R(9751),ye=R(2202),he=R(576),G=R(9672);function J(Ae,$e){if(!Ae)throw new Error("Iterable cannot be null");return new me.y(Le=>{(0,G.f)(Le,$e,()=>{const j=Ae[Symbol.asyncIterator]();(0,G.f)(Le,$e,()=>{j.next().then(Ce=>{Ce.done?Le.complete():Le.next(Ce.value)})},0,!0)})})}var Pe=R(3670),Te=R(8239),Se=R(1144),et=R(6495),be=R(2206),ue=R(4532),pt=R(3260);function Ee(Ae,$e){return $e?function Re(Ae,$e){if(null!=Ae){if((0,Pe.c)(Ae))return function re(Ae,$e){return(0,l.Xf)(Ae).pipe((0,V.R)($e),(0,X.Q)($e))}(Ae,$e);if((0,Se.z)(Ae))return function ae(Ae,$e){return new me.y(Le=>{let j=0;return $e.schedule(function(){j===Ae.length?Le.complete():(Le.next(Ae[j++]),Le.closed||this.schedule())})})}(Ae,$e);if((0,Te.t)(Ae))return function fe(Ae,$e){return(0,l.Xf)(Ae).pipe((0,V.R)($e),(0,X.Q)($e))}(Ae,$e);if((0,be.D)(Ae))return J(Ae,$e);if((0,et.T)(Ae))return function $(Ae,$e){return new me.y(Le=>{let j;return(0,G.f)(Le,$e,()=>{j=Ae[ye.h](),(0,G.f)(Le,$e,()=>{let Ce,Q;try{({value:Ce,done:Q}=j.next())}catch(te){return void Le.error(te)}Q?Le.complete():Le.next(Ce)},0,!0)}),()=>(0,he.m)(j?.return)&&j.return()})}(Ae,$e);if((0,pt.L)(Ae))return function lt(Ae,$e){return J((0,pt.Q)(Ae),$e)}(Ae,$e)}throw(0,ue.z)(Ae)}(Ae,$e):(0,l.Xf)(Ae)}},8421:(yt,Me,R)=>{R.d(Me,{Xf:()=>Pe});var l=R(655),X=R(1144),V=R(8239),re=R(9751),fe=R(3670),me=R(2206),ae=R(4532),ye=R(6495),he=R(3260),G=R(576),$=R(7849),J=R(8822);function Pe(Re){if(Re instanceof re.y)return Re;if(null!=Re){if((0,fe.c)(Re))return function Te(Re){return new re.y(Ee=>{const Ae=Re[J.L]();if((0,G.m)(Ae.subscribe))return Ae.subscribe(Ee);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Re);if((0,X.z)(Re))return function Se(Re){return new re.y(Ee=>{for(let Ae=0;Ae<Re.length&&!Ee.closed;Ae++)Ee.next(Re[Ae]);Ee.complete()})}(Re);if((0,V.t)(Re))return function et(Re){return new re.y(Ee=>{Re.then(Ae=>{Ee.closed||(Ee.next(Ae),Ee.complete())},Ae=>Ee.error(Ae)).then(null,$.h)})}(Re);if((0,me.D)(Re))return ue(Re);if((0,ye.T)(Re))return function be(Re){return new re.y(Ee=>{for(const Ae of Re)if(Ee.next(Ae),Ee.closed)return;Ee.complete()})}(Re);if((0,he.L)(Re))return function pt(Re){return ue((0,he.Q)(Re))}(Re)}throw(0,ae.z)(Re)}function ue(Re){return new re.y(Ee=>{(function lt(Re,Ee){var Ae,$e,Le,j;return(0,l.mG)(this,void 0,void 0,function*(){try{for(Ae=(0,l.KL)(Re);!($e=yield Ae.next()).done;)if(Ee.next($e.value),Ee.closed)return}catch(Ce){Le={error:Ce}}finally{try{$e&&!$e.done&&(j=Ae.return)&&(yield j.call(Ae))}finally{if(Le)throw Le.error}}Ee.complete()})})(Re,Ee).catch(Ae=>Ee.error(Ae))})}},6451:(yt,Me,R)=>{R.d(Me,{T:()=>me});var l=R(8189),X=R(8421),V=R(515),re=R(3269),fe=R(8996);function me(...ae){const ye=(0,re.yG)(ae),he=(0,re._6)(ae,1/0),G=ae;return G.length?1===G.length?(0,X.Xf)(G[0]):(0,l.J)(he)((0,fe.D)(G,ye)):V.E}},5403:(yt,Me,R)=>{R.d(Me,{x:()=>X});var l=R(930);function X(re,fe,me,ae,ye){return new V(re,fe,me,ae,ye)}class V extends l.Lv{constructor(fe,me,ae,ye,he,G){super(fe),this.onFinalize=he,this.shouldUnsubscribe=G,this._next=me?function($){try{me($)}catch(J){fe.error(J)}}:super._next,this._error=ye?function($){try{ye($)}catch(J){fe.error(J)}finally{this.unsubscribe()}}:super._error,this._complete=ae?function(){try{ae()}catch($){fe.error($)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var fe;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:me}=this;super.unsubscribe(),!me&&(null===(fe=this.onFinalize)||void 0===fe||fe.call(this))}}}},4004:(yt,Me,R)=>{R.d(Me,{U:()=>V});var l=R(4482),X=R(5403);function V(re,fe){return(0,l.e)((me,ae)=>{let ye=0;me.subscribe((0,X.x)(ae,he=>{ae.next(re.call(fe,he,ye++))}))})}},8189:(yt,Me,R)=>{R.d(Me,{J:()=>V});var l=R(5577),X=R(4671);function V(re=1/0){return(0,l.z)(X.y,re)}},5577:(yt,Me,R)=>{R.d(Me,{z:()=>ye});var l=R(4004),X=R(8421),V=R(4482),re=R(9672),fe=R(5403),ae=R(576);function ye(he,G,$=1/0){return(0,ae.m)(G)?ye((J,Pe)=>(0,l.U)((Te,Se)=>G(J,Te,Pe,Se))((0,X.Xf)(he(J,Pe))),$):("number"==typeof G&&($=G),(0,V.e)((J,Pe)=>function me(he,G,$,J,Pe,Te,Se,et){const be=[];let ue=0,pt=0,lt=!1;const Re=()=>{lt&&!be.length&&!ue&&G.complete()},Ee=$e=>ue<J?Ae($e):be.push($e),Ae=$e=>{Te&&G.next($e),ue++;let Le=!1;(0,X.Xf)($($e,pt++)).subscribe((0,fe.x)(G,j=>{Pe?.(j),Te?Ee(j):G.next(j)},()=>{Le=!0},void 0,()=>{if(Le)try{for(ue--;be.length&&ue<J;){const j=be.shift();Se?(0,re.f)(G,Se,()=>Ae(j)):Ae(j)}Re()}catch(j){G.error(j)}}))};return he.subscribe((0,fe.x)(G,Ee,()=>{lt=!0,Re()})),()=>{et?.()}}(J,Pe,he,$)))}},5363:(yt,Me,R)=>{R.d(Me,{Q:()=>re});var l=R(9672),X=R(4482),V=R(5403);function re(fe,me=0){return(0,X.e)((ae,ye)=>{ae.subscribe((0,V.x)(ye,he=>(0,l.f)(ye,fe,()=>ye.next(he),me),()=>(0,l.f)(ye,fe,()=>ye.complete(),me),he=>(0,l.f)(ye,fe,()=>ye.error(he),me)))})}},3099:(yt,Me,R)=>{R.d(Me,{B:()=>fe});var l=R(8421),X=R(7579),V=R(930),re=R(4482);function fe(ae={}){const{connector:ye=(()=>new X.x),resetOnError:he=!0,resetOnComplete:G=!0,resetOnRefCountZero:$=!0}=ae;return J=>{let Pe,Te,Se,et=0,be=!1,ue=!1;const pt=()=>{Te?.unsubscribe(),Te=void 0},lt=()=>{pt(),Pe=Se=void 0,be=ue=!1},Re=()=>{const Ee=Pe;lt(),Ee?.unsubscribe()};return(0,re.e)((Ee,Ae)=>{et++,!ue&&!be&&pt();const $e=Se=Se??ye();Ae.add(()=>{et--,0===et&&!ue&&!be&&(Te=me(Re,$))}),$e.subscribe(Ae),!Pe&&et>0&&(Pe=new V.Hp({next:Le=>$e.next(Le),error:Le=>{ue=!0,pt(),Te=me(lt,he,Le),$e.error(Le)},complete:()=>{be=!0,pt(),Te=me(lt,G),$e.complete()}}),(0,l.Xf)(Ee).subscribe(Pe))})(J)}}function me(ae,ye,...he){if(!0===ye)return void ae();if(!1===ye)return;const G=new V.Hp({next:()=>{G.unsubscribe(),ae()}});return ye(...he).subscribe(G)}},9468:(yt,Me,R)=>{R.d(Me,{R:()=>X});var l=R(4482);function X(V,re=0){return(0,l.e)((fe,me)=>{me.add(V.schedule(()=>fe.subscribe(me),re))})}},8505:(yt,Me,R)=>{R.d(Me,{b:()=>fe});var l=R(576),X=R(4482),V=R(5403),re=R(4671);function fe(me,ae,ye){const he=(0,l.m)(me)||ae||ye?{next:me,error:ae,complete:ye}:me;return he?(0,X.e)((G,$)=>{var J;null===(J=he.subscribe)||void 0===J||J.call(he);let Pe=!0;G.subscribe((0,V.x)($,Te=>{var Se;null===(Se=he.next)||void 0===Se||Se.call(he,Te),$.next(Te)},()=>{var Te;Pe=!1,null===(Te=he.complete)||void 0===Te||Te.call(he),$.complete()},Te=>{var Se;Pe=!1,null===(Se=he.error)||void 0===Se||Se.call(he,Te),$.error(Te)},()=>{var Te,Se;Pe&&(null===(Te=he.unsubscribe)||void 0===Te||Te.call(he)),null===(Se=he.finalize)||void 0===Se||Se.call(he)}))}):re.y}},4408:(yt,Me,R)=>{R.d(Me,{o:()=>fe});var l=R(727);class X extends l.w0{constructor(ae,ye){super()}schedule(ae,ye=0){return this}}const V={setInterval(me,ae,...ye){const{delegate:he}=V;return he?.setInterval?he.setInterval(me,ae,...ye):setInterval(me,ae,...ye)},clearInterval(me){const{delegate:ae}=V;return(ae?.clearInterval||clearInterval)(me)},delegate:void 0};var re=R(8737);class fe extends X{constructor(ae,ye){super(ae,ye),this.scheduler=ae,this.work=ye,this.pending=!1}schedule(ae,ye=0){var he;if(this.closed)return this;this.state=ae;const G=this.id,$=this.scheduler;return null!=G&&(this.id=this.recycleAsyncId($,G,ye)),this.pending=!0,this.delay=ye,this.id=null!==(he=this.id)&&void 0!==he?he:this.requestAsyncId($,this.id,ye),this}requestAsyncId(ae,ye,he=0){return V.setInterval(ae.flush.bind(ae,this),he)}recycleAsyncId(ae,ye,he=0){if(null!=he&&this.delay===he&&!1===this.pending)return ye;null!=ye&&V.clearInterval(ye)}execute(ae,ye){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const he=this._execute(ae,ye);if(he)return he;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ae,ye){let G,he=!1;try{this.work(ae)}catch($){he=!0,G=$||new Error("Scheduled action threw falsy error")}if(he)return this.unsubscribe(),G}unsubscribe(){if(!this.closed){const{id:ae,scheduler:ye}=this,{actions:he}=ye;this.work=this.state=this.scheduler=null,this.pending=!1,(0,re.P)(he,this),null!=ae&&(this.id=this.recycleAsyncId(ye,ae,null)),this.delay=null,super.unsubscribe()}}}},7565:(yt,Me,R)=>{R.d(Me,{v:()=>V});var l=R(6063);class X{constructor(fe,me=X.now){this.schedulerActionCtor=fe,this.now=me}schedule(fe,me=0,ae){return new this.schedulerActionCtor(this,fe).schedule(ae,me)}}X.now=l.l.now;class V extends X{constructor(fe,me=X.now){super(fe,me),this.actions=[],this._active=!1}flush(fe){const{actions:me}=this;if(this._active)return void me.push(fe);let ae;this._active=!0;do{if(ae=fe.execute(fe.state,fe.delay))break}while(fe=me.shift());if(this._active=!1,ae){for(;fe=me.shift();)fe.unsubscribe();throw ae}}}},4986:(yt,Me,R)=>{R.d(Me,{P:()=>re,z:()=>V});var l=R(4408);const V=new(R(7565).v)(l.o),re=V},6063:(yt,Me,R)=>{R.d(Me,{l:()=>l});const l={now:()=>(l.delegate||Date).now(),delegate:void 0}},3410:(yt,Me,R)=>{R.d(Me,{z:()=>l});const l={setTimeout(X,V,...re){const{delegate:fe}=l;return fe?.setTimeout?fe.setTimeout(X,V,...re):setTimeout(X,V,...re)},clearTimeout(X){const{delegate:V}=l;return(V?.clearTimeout||clearTimeout)(X)},delegate:void 0}},2202:(yt,Me,R)=>{R.d(Me,{h:()=>X});const X=function l(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(yt,Me,R)=>{R.d(Me,{L:()=>l});const l="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(yt,Me,R)=>{R.d(Me,{_6:()=>me,jO:()=>re,yG:()=>fe});var l=R(576),X=R(3532);function V(ae){return ae[ae.length-1]}function re(ae){return(0,l.m)(V(ae))?ae.pop():void 0}function fe(ae){return(0,X.K)(V(ae))?ae.pop():void 0}function me(ae,ye){return"number"==typeof V(ae)?ae.pop():ye}},8737:(yt,Me,R)=>{function l(X,V){if(X){const re=X.indexOf(V);0<=re&&X.splice(re,1)}}R.d(Me,{P:()=>l})},3888:(yt,Me,R)=>{function l(X){const re=X(fe=>{Error.call(fe),fe.stack=(new Error).stack});return re.prototype=Object.create(Error.prototype),re.prototype.constructor=re,re}R.d(Me,{d:()=>l})},2806:(yt,Me,R)=>{R.d(Me,{O:()=>re,x:()=>V});var l=R(2416);let X=null;function V(fe){if(l.v.useDeprecatedSynchronousErrorHandling){const me=!X;if(me&&(X={errorThrown:!1,error:null}),fe(),me){const{errorThrown:ae,error:ye}=X;if(X=null,ae)throw ye}}else fe()}function re(fe){l.v.useDeprecatedSynchronousErrorHandling&&X&&(X.errorThrown=!0,X.error=fe)}},9672:(yt,Me,R)=>{function l(X,V,re,fe=0,me=!1){const ae=V.schedule(function(){re(),me?X.add(this.schedule(null,fe)):this.unsubscribe()},fe);if(X.add(ae),!me)return ae}R.d(Me,{f:()=>l})},4671:(yt,Me,R)=>{function l(X){return X}R.d(Me,{y:()=>l})},1144:(yt,Me,R)=>{R.d(Me,{z:()=>l});const l=X=>X&&"number"==typeof X.length&&"function"!=typeof X},2206:(yt,Me,R)=>{R.d(Me,{D:()=>X});var l=R(576);function X(V){return Symbol.asyncIterator&&(0,l.m)(V?.[Symbol.asyncIterator])}},576:(yt,Me,R)=>{function l(X){return"function"==typeof X}R.d(Me,{m:()=>l})},3670:(yt,Me,R)=>{R.d(Me,{c:()=>V});var l=R(8822),X=R(576);function V(re){return(0,X.m)(re[l.L])}},6495:(yt,Me,R)=>{R.d(Me,{T:()=>V});var l=R(2202),X=R(576);function V(re){return(0,X.m)(re?.[l.h])}},8239:(yt,Me,R)=>{R.d(Me,{t:()=>X});var l=R(576);function X(V){return(0,l.m)(V?.then)}},3260:(yt,Me,R)=>{R.d(Me,{L:()=>re,Q:()=>V});var l=R(655),X=R(576);function V(fe){return(0,l.FC)(this,arguments,function*(){const ae=fe.getReader();try{for(;;){const{value:ye,done:he}=yield(0,l.qq)(ae.read());if(he)return yield(0,l.qq)(void 0);yield yield(0,l.qq)(ye)}}finally{ae.releaseLock()}})}function re(fe){return(0,X.m)(fe?.getReader)}},3532:(yt,Me,R)=>{R.d(Me,{K:()=>X});var l=R(576);function X(V){return V&&(0,l.m)(V.schedule)}},4482:(yt,Me,R)=>{R.d(Me,{A:()=>X,e:()=>V});var l=R(576);function X(re){return(0,l.m)(re?.lift)}function V(re){return fe=>{if(X(fe))return fe.lift(function(me){try{return re(me,this)}catch(ae){this.error(ae)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(yt,Me,R)=>{function l(){}R.d(Me,{Z:()=>l})},9635:(yt,Me,R)=>{R.d(Me,{U:()=>V,z:()=>X});var l=R(4671);function X(...re){return V(re)}function V(re){return 0===re.length?l.y:1===re.length?re[0]:function(me){return re.reduce((ae,ye)=>ye(ae),me)}}},7849:(yt,Me,R)=>{R.d(Me,{h:()=>V});var l=R(2416),X=R(3410);function V(re){X.z.setTimeout(()=>{const{onUnhandledError:fe}=l.v;if(!fe)throw re;fe(re)})}},4532:(yt,Me,R)=>{function l(X){return new TypeError(`You provided ${null!==X&&"object"==typeof X?"an invalid object":`'${X}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}R.d(Me,{z:()=>l})},655:(yt,Me,R)=>{function re(Q,te){var se={};for(var ie in Q)Object.prototype.hasOwnProperty.call(Q,ie)&&te.indexOf(ie)<0&&(se[ie]=Q[ie]);if(null!=Q&&"function"==typeof Object.getOwnPropertySymbols){var He=0;for(ie=Object.getOwnPropertySymbols(Q);He<ie.length;He++)te.indexOf(ie[He])<0&&Object.prototype.propertyIsEnumerable.call(Q,ie[He])&&(se[ie[He]]=Q[ie[He]])}return se}function ye(Q,te,se,ie){return new(se||(se=Promise))(function(Ve,gt){function Jt(un){try{Ke(ie.next(un))}catch(Un){gt(Un)}}function Lt(un){try{Ke(ie.throw(un))}catch(Un){gt(Un)}}function Ke(un){un.done?Ve(un.value):function He(Ve){return Ve instanceof se?Ve:new se(function(gt){gt(Ve)})}(un.value).then(Jt,Lt)}Ke((ie=ie.apply(Q,te||[])).next())})}function be(Q){return this instanceof be?(this.v=Q,this):new be(Q)}function ue(Q,te,se){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var He,ie=se.apply(Q,te||[]),Ve=[];return He={},gt("next"),gt("throw"),gt("return"),He[Symbol.asyncIterator]=function(){return this},He;function gt(dn){ie[dn]&&(He[dn]=function(nn){return new Promise(function(ii,Et){Ve.push([dn,nn,ii,Et])>1||Jt(dn,nn)})})}function Jt(dn,nn){try{!function Lt(dn){dn.value instanceof be?Promise.resolve(dn.value.v).then(Ke,un):Un(Ve[0][2],dn)}(ie[dn](nn))}catch(ii){Un(Ve[0][3],ii)}}function Ke(dn){Jt("next",dn)}function un(dn){Jt("throw",dn)}function Un(dn,nn){dn(nn),Ve.shift(),Ve.length&&Jt(Ve[0][0],Ve[0][1])}}function lt(Q){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var se,te=Q[Symbol.asyncIterator];return te?te.call(Q):(Q=function J(Q){var te="function"==typeof Symbol&&Symbol.iterator,se=te&&Q[te],ie=0;if(se)return se.call(Q);if(Q&&"number"==typeof Q.length)return{next:function(){return Q&&ie>=Q.length&&(Q=void 0),{value:Q&&Q[ie++],done:!Q}}};throw new TypeError(te?"Object is not iterable.":"Symbol.iterator is not defined.")}(Q),se={},ie("next"),ie("throw"),ie("return"),se[Symbol.asyncIterator]=function(){return this},se);function ie(Ve){se[Ve]=Q[Ve]&&function(gt){return new Promise(function(Jt,Lt){!function He(Ve,gt,Jt,Lt){Promise.resolve(Lt).then(function(Ke){Ve({value:Ke,done:Jt})},gt)}(Jt,Lt,(gt=Q[Ve](gt)).done,gt.value)})}}}R.d(Me,{FC:()=>ue,KL:()=>lt,_T:()=>re,mG:()=>ye,qq:()=>be})},4650:(yt,Me,R)=>{R.d(Me,{$8M:()=>ad,$Z:()=>Yf,AFp:()=>Db,ALo:()=>U1,AaK:()=>ye,AsE:()=>P0,CHM:()=>Gt,CRH:()=>Np,CZH:()=>Pp,CqO:()=>MC,D6c:()=>RE,EJc:()=>Ch,EpF:()=>Cu,F$t:()=>Wm,F4k:()=>xC,FYo:()=>Wf,FiY:()=>ci,G48:()=>YP,Gf:()=>q1,GfV:()=>FD,Gpc:()=>$,HOy:()=>F0,Hsn:()=>RC,Ikx:()=>o_,JOm:()=>Es,KtG:()=>Gs,LFG:()=>cn,LMc:()=>kE,LSH:()=>Fd,Lbi:()=>j_,Lck:()=>D1,MAs:()=>v0,MGl:()=>ps,MMx:()=>tb,NdJ:()=>Eu,OlP:()=>Fn,Oqu:()=>R0,PXZ:()=>$N,Q6J:()=>b0,QGY:()=>Da,QP$:()=>Ye,Qsj:()=>dS,QtT:()=>E_,R0b:()=>no,RDi:()=>v,Rgc:()=>S_,SBq:()=>hu,SDv:()=>C_,Sil:()=>RN,Suo:()=>z1,TTD:()=>Hs,TgZ:()=>Zr,Tol:()=>A0,Udp:()=>Qm,VKq:()=>M1,W1O:()=>O_,WLB:()=>O1,X6Q:()=>qr,XFs:()=>tt,Xpm:()=>Ne,Xts:()=>mm,Y36:()=>Hd,YKP:()=>sc,YNc:()=>NC,Yjl:()=>W,Yz7:()=>nn,Z0I:()=>rr,ZZ4:()=>Fb,_Bn:()=>Ep,_UZ:()=>lp,_Vd:()=>Ll,_c5:()=>ix,_uU:()=>GC,aQg:()=>Lb,c2e:()=>hE,cJS:()=>Et,cg1:()=>l_,dDg:()=>Tb,dqk:()=>Vt,eFA:()=>WN,ekj:()=>sh,eoX:()=>HN,f3M:()=>gi,g9A:()=>cE,h0i:()=>yr,hGG:()=>Kn,hij:()=>n_,iGM:()=>W1,ifc:()=>ht,ip1:()=>U_,jDz:()=>E1,kEZ:()=>R1,kL8:()=>ah,lG2:()=>O,lcZ:()=>T_,lqb:()=>Fl,lri:()=>BN,n5z:()=>ho,oAB:()=>Ut,oxw:()=>up,pQV:()=>J0,q4F:()=>LD,qLn:()=>fu,qOj:()=>u0,qZA:()=>eh,rWj:()=>jN,s9C:()=>Vn,sBO:()=>CE,sIi:()=>ip,s_b:()=>N_,soG:()=>kp,tb:()=>H_,tp0:()=>ra,uIk:()=>p0,vHH:()=>Se,vpe:()=>Fo,wAp:()=>Rt,xp6:()=>HD,z2F:()=>Eh,zSh:()=>Ov,zs3:()=>ga});var l=R(7579),X=R(727),V=R(9751),re=R(6451),fe=R(3099);function me(s){for(let a in s)if(s[a]===me)return a;throw Error("Could not find renamed property on target object.")}function ae(s,a){for(const c in a)a.hasOwnProperty(c)&&!s.hasOwnProperty(c)&&(s[c]=a[c])}function ye(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(ye).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const a=s.toString();if(null==a)return""+a;const c=a.indexOf("\n");return-1===c?a:a.substring(0,c)}function he(s,a){return null==s||""===s?null===a?"":a:null==a||""===a?s:s+" "+a}const G=me({__forward_ref__:me});function $(s){return s.__forward_ref__=$,s.toString=function(){return ye(this())},s}function J(s){return Pe(s)?s():s}function Pe(s){return"function"==typeof s&&s.hasOwnProperty(G)&&s.__forward_ref__===$}class Se extends Error{constructor(a,c){super(function et(s,a){return`NG0${Math.abs(s)}${a?": "+a.trim():""}`}(a,c)),this.code=a}}function be(s){return"string"==typeof s?s:null==s?"":String(s)}function Ee(s,a){throw new Se(-201,!1)}function Ke(s,a,c,d){throw new Error(`ASSERTION ERROR: ${s}`+(null==d?"":` [Expected=> ${c} ${d} ${a} <=Actual]`))}function nn(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Et(s){return{providers:s.providers||[],imports:s.imports||[]}}function jt(s){return Fr(s,hi)||Fr(s,fi)}function rr(s){return null!==jt(s)}function Fr(s,a){return s.hasOwnProperty(a)?s[a]:null}function sr(s){return s&&(s.hasOwnProperty(Wi)||s.hasOwnProperty(Lr))?s[Wi]:null}const hi=me({\u0275prov:me}),Wi=me({\u0275inj:me}),fi=me({ngInjectableDef:me}),Lr=me({ngInjectorDef:me});var tt=(()=>((tt=tt||{})[tt.Default=0]="Default",tt[tt.Host=1]="Host",tt[tt.Self=2]="Self",tt[tt.SkipSelf=4]="SkipSelf",tt[tt.Optional=8]="Optional",tt))();let Tn;function kn(s){const a=Tn;return Tn=s,a}function qi(s,a,c){const d=jt(s);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:c&tt.Optional?null:void 0!==a?a:void Ee(ye(s))}function Rn(s){return{toString:s}.toString()}var $n=(()=>(($n=$n||{})[$n.OnPush=0]="OnPush",$n[$n.Default=1]="Default",$n))(),ht=(()=>{return(s=ht||(ht={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",ht;var s})();const Vt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),bi={},Nt=[],or=me({\u0275cmp:me}),Yt=me({\u0275dir:me}),Mi=me({\u0275pipe:me}),Xt=me({\u0275mod:me}),Jn=me({\u0275fac:me}),Fi=me({__NG_ELEMENT_ID__:me});let nt=0;function Ne(s){return Rn(()=>{const c=!0===s.standalone,d={},f={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:d,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===$n.OnPush,directiveDefs:null,pipeDefs:null,standalone:c,dependencies:c&&s.dependencies||null,getStandaloneInjector:null,selectors:s.selectors||Nt,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||ht.Emulated,id:"c"+nt++,styles:s.styles||Nt,_:null,setInput:null,schemas:s.schemas||null,tView:null},m=s.dependencies,b=s.features;return f.inputs=B(s.inputs,d),f.outputs=B(s.outputs),b&&b.forEach(D=>D(f)),f.directiveDefs=m?()=>("function"==typeof m?m():m).map(xt).filter(Ft):null,f.pipeDefs=m?()=>("function"==typeof m?m():m).map(Ie).filter(Ft):null,f})}function xt(s){return U(s)||oe(s)}function Ft(s){return null!==s}function Ut(s){return Rn(()=>({type:s.type,bootstrap:s.bootstrap||Nt,declarations:s.declarations||Nt,imports:s.imports||Nt,exports:s.exports||Nt,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function B(s,a){if(null==s)return bi;const c={};for(const d in s)if(s.hasOwnProperty(d)){let f=s[d],m=f;Array.isArray(f)&&(m=f[1],f=f[0]),c[f]=d,a&&(a[f]=m)}return c}const O=Ne;function W(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function U(s){return s[or]||null}function oe(s){return s[Yt]||null}function Ie(s){return s[Mi]||null}function Ye(s){const a=U(s)||oe(s)||Ie(s);return null!==a&&a.standalone}function ut(s,a){const c=s[Xt]||null;if(!c&&!0===a)throw new Error(`Type ${ye(s)} does not have '\u0275mod' property.`);return c}function zi(s){return Array.isArray(s)&&"object"==typeof s[1]}function Ri(s){return Array.isArray(s)&&!0===s[1]}function Zo(s){return 0!=(8&s.flags)}function Vs(s){return 2==(2&s.flags)}function ll(s){return 1==(1&s.flags)}function lr(s){return null!==s.template}function $u(s){return 0!=(256&s[2])}function is(s,a){return s.hasOwnProperty(Jn)?s[Jn]:null}class js{constructor(a,c,d){this.previousValue=a,this.currentValue=c,this.firstChange=d}isFirstChange(){return this.firstChange}}function Hs(){return ao}function ao(s){return s.type.prototype.ngOnChanges&&(s.setInput=hl),dl}function dl(){const s=Tc(this),a=s?.current;if(a){const c=s.previous;if(c===bi)s.previous=a;else for(let d in a)c[d]=a[d];s.current=null,this.ngOnChanges(a)}}function hl(s,a,c,d){const f=Tc(s)||function oi(s,a){return s[Ic]=a}(s,{previous:bi,current:null}),m=f.current||(f.current={}),b=f.previous,D=this.declaredInputs[c],E=b[D];m[D]=new js(E&&E.currentValue,a,b===bi),s[d]=a}Hs.ngInherit=!0;const Ic="__ngSimpleChanges__";function Tc(s){return s[Ic]||null}function ei(s){for(;Array.isArray(s);)s=s[0];return s}function lo(s,a){return ei(a[s])}function mr(s,a){return ei(a[s.index])}function Br(s,a){return s.data[a]}function co(s,a){return s[a]}function Qt(s,a){const c=a[s];return zi(c)?c:c[0]}function Yo(s){return 64==(64&s[2])}function vs(s,a){return null==a?null:s[a]}function pl(s){s[18]=0}function Ma(s,a){s[5]+=a;let c=s,d=s[3];for(;null!==d&&(1===a&&1===c[5]||-1===a&&0===c[5]);)d[5]+=a,c=d,d=d[3]}const M={lFrame:qy(null),bindingsEnabled:!0};function Ct(){return M.bindingsEnabled}function De(){return M.lFrame.lView}function vt(){return M.lFrame.tView}function Gt(s){return M.lFrame.contextLView=s,s[8]}function Gs(s){return M.lFrame.contextLView=null,s}function An(){let s=Oa();for(;null!==s&&64===s.type;)s=s.parent;return s}function Oa(){return M.lFrame.currentTNode}function $s(){const s=M.lFrame,a=s.currentTNode;return s.isParent?a:a.parent}function ur(s,a){const c=M.lFrame;c.currentTNode=s,c.isParent=a}function dr(){return M.lFrame.isParent}function rs(){M.lFrame.isParent=!1}function pi(){const s=M.lFrame;let a=s.bindingRootIndex;return-1===a&&(a=s.bindingRootIndex=s.tView.bindingStartIndex),a}function Zs(){return M.lFrame.bindingIndex}function Ra(){return M.lFrame.bindingIndex++}function Qo(s){const a=M.lFrame,c=a.bindingIndex;return a.bindingIndex=a.bindingIndex+s,c}function ef(s){M.lFrame.inI18n=s}function dD(s,a){const c=M.lFrame;c.bindingIndex=c.bindingRootIndex=s,kg(a)}function kg(s){M.lFrame.currentDirectiveIndex=s}function Zy(){return M.lFrame.currentQueryIndex}function Nc(s){M.lFrame.currentQueryIndex=s}function Wy(s){const a=s[1];return 2===a.type?a.declTNode:1===a.type?s[6]:null}function tf(s,a,c){if(c&tt.SkipSelf){let f=a,m=s;for(;!(f=f.parent,null!==f||c&tt.Host||(f=Wy(m),null===f||(m=m[15],10&f.type))););if(null===f)return!1;a=f,s=m}const d=M.lFrame=nf();return d.currentTNode=a,d.lView=s,!0}function Fg(s){const a=nf(),c=s[1];M.lFrame=a,a.currentTNode=c.firstChild,a.lView=s,a.tView=c,a.contextLView=s,a.bindingIndex=c.bindingStartIndex,a.inI18n=!1}function nf(){const s=M.lFrame,a=null===s?null:s.child;return null===a?qy(s):a}function qy(s){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=a),a}function rf(){const s=M.lFrame;return M.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const Lg=rf;function xc(){const s=rf();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function Vi(){return M.lFrame.selectedIndex}function jr(s){M.lFrame.selectedIndex=s}function jn(){const s=M.lFrame;return Br(s.tView,s.selectedIndex)}function Mc(s,a){for(let c=a.directiveStart,d=a.directiveEnd;c<d;c++){const m=s.data[c].type.prototype,{ngAfterContentInit:b,ngAfterContentChecked:D,ngAfterViewInit:E,ngAfterViewChecked:T,ngOnDestroy:N}=m;b&&(s.contentHooks||(s.contentHooks=[])).push(-c,b),D&&((s.contentHooks||(s.contentHooks=[])).push(c,D),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(c,D)),E&&(s.viewHooks||(s.viewHooks=[])).push(-c,E),T&&((s.viewHooks||(s.viewHooks=[])).push(c,T),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(c,T)),null!=N&&(s.destroyHooks||(s.destroyHooks=[])).push(c,N)}}function Oc(s,a,c){cf(s,a,3,c)}function Pa(s,a,c,d){(3&s[2])===c&&cf(s,a,c,d)}function lf(s,a){let c=s[2];(3&c)===a&&(c&=2047,c+=1,s[2]=c)}function cf(s,a,c,d){const m=d??-1,b=a.length-1;let D=0;for(let E=void 0!==d?65535&s[18]:0;E<b;E++)if("number"==typeof a[E+1]){if(D=a[E],null!=d&&D>=d)break}else a[E]<0&&(s[18]+=65536),(D<m||-1==m)&&(Vg(s,c,a,E),s[18]=(4294901760&s[18])+E+2),E++}function Vg(s,a,c,d){const f=c[d]<0,m=c[d+1],D=s[f?-c[d]:c[d]];if(f){if(s[2]>>11<s[18]>>16&&(3&s[2])===a){s[2]+=2048;try{m.call(D)}finally{}}}else try{m.call(D)}finally{}}class Xo{constructor(a,c,d){this.factory=a,this.resolving=!1,this.canSeeViewProviders=c,this.injectImpl=d}}function _l(s,a,c){let d=0;for(;d<c.length;){const f=c[d];if("number"==typeof f){if(0!==f)break;d++;const m=c[d++],b=c[d++],D=c[d++];s.setAttribute(a,b,D,m)}else{const m=f,b=c[++d];nd(m)?s.setProperty(a,m,b):s.setAttribute(a,m,b),d++}}return d}function Pc(s){return 3===s||4===s||6===s}function nd(s){return 64===s.charCodeAt(0)}function kc(s,a){if(null!==a&&0!==a.length)if(null===s||0===s.length)s=a.slice();else{let c=-1;for(let d=0;d<a.length;d++){const f=a[d];"number"==typeof f?c=f:0===c||Bg(s,c,f,null,-1===c||2===c?a[++d]:null)}}return s}function Bg(s,a,c,d,f){let m=0,b=s.length;if(-1===a)b=-1;else for(;m<s.length;){const D=s[m++];if("number"==typeof D){if(D===a){b=-1;break}if(D>a){b=m-1;break}}}for(;m<s.length;){const D=s[m];if("number"==typeof D)break;if(D===c){if(null===d)return void(null!==f&&(s[m+1]=f));if(d===s[m+1])return void(s[m+2]=f)}m++,null!==d&&m++,null!==f&&m++}-1!==b&&(s.splice(b,0,a),m=b+1),s.splice(m++,0,c),null!==d&&s.splice(m++,0,d),null!==f&&s.splice(m++,0,f)}function jg(s){return-1!==s}function Fc(s){return 32767&s}function Vc(s,a){let c=function Lc(s){return s>>16}(s),d=a;for(;c>0;)d=d[15],c--;return d}let Ws=!0;function id(s){const a=Ws;return Ws=s,a}let Di=0;const uo={};function Bc(s,a){const c=rd(s,a);if(-1!==c)return c;const d=a[1];d.firstCreatePass&&(s.injectorIndex=a.length,jc(d.data,s),jc(a,null),jc(d.blueprint,null));const f=sd(s,a),m=s.injectorIndex;if(jg(f)){const b=Fc(f),D=Vc(f,a),E=D[1].data;for(let T=0;T<8;T++)a[m+T]=D[b+T]|E[b+T]}return a[m+8]=f,m}function jc(s,a){s.push(0,0,0,0,0,0,0,0,a)}function rd(s,a){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===a[s.injectorIndex+8]?-1:s.injectorIndex}function sd(s,a){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let c=0,d=null,f=a;for(;null!==f;){if(d=od(f),null===d)return-1;if(c++,f=f[15],-1!==d.injectorIndex)return d.injectorIndex|c<<16}return-1}function yl(s,a,c){!function hf(s,a,c){let d;"string"==typeof c?d=c.charCodeAt(0)||0:c.hasOwnProperty(Fi)&&(d=c[Fi]),null==d&&(d=c[Fi]=Di++);const f=255&d;a.data[s+(f>>5)]|=1<<f}(s,a,c)}function vl(s,a,c){if(c&tt.Optional||void 0!==s)return s;Ee()}function ff(s,a,c,d){if(c&tt.Optional&&void 0===d&&(d=null),0==(c&(tt.Self|tt.Host))){const f=s[9],m=kn(void 0);try{return f?f.get(a,d,c&tt.Optional):qi(a,d,c&tt.Optional)}finally{kn(m)}}return vl(d,0,c)}function Hc(s,a,c,d=tt.Default,f){if(null!==s){if(1024&a[2]){const b=function Dl(s,a,c,d,f){let m=s,b=a;for(;null!==m&&null!==b&&1024&b[2]&&!(256&b[2]);){const D=Gc(m,b,c,d|tt.Self,uo);if(D!==uo)return D;let E=m.parent;if(!E){const T=b[21];if(T){const N=T.get(c,uo,d);if(N!==uo)return N}E=od(b),b=b[15]}m=E}return f}(s,a,c,d,uo);if(b!==uo)return b}const m=Gc(s,a,c,d,uo);if(m!==uo)return m}return ff(a,c,d,f)}function Gc(s,a,c,d,f){const m=function pf(s){if("string"==typeof s)return s.charCodeAt(0)||0;const a=s.hasOwnProperty(Fi)?s[Fi]:void 0;return"number"==typeof a?a>=0?255&a:Zg:a}(c);if("function"==typeof m){if(!tf(a,s,d))return d&tt.Host?vl(f,0,d):ff(a,c,d,f);try{const b=m(d);if(null!=b||d&tt.Optional)return b;Ee()}finally{Lg()}}else if("number"==typeof m){let b=null,D=rd(s,a),E=-1,T=d&tt.Host?a[16][6]:null;for((-1===D||d&tt.SkipSelf)&&(E=-1===D?sd(s,a):a[D+8],-1!==E&&gf(d,!1)?(b=a[1],D=Fc(E),a=Vc(E,a)):D=-1);-1!==D;){const N=a[1];if($g(m,D,N.data)){const L=hD(D,a,c,b,d,T);if(L!==uo)return L}E=a[D+8],-1!==E&&gf(d,a[1].data[D+8]===T)&&$g(m,D,a)?(b=N,D=Fc(E),a=Vc(E,a)):D=-1}}return f}function hD(s,a,c,d,f,m){const b=a[1],D=b.data[s+8],N=bl(D,b,c,null==d?Vs(D)&&Ws:d!=b&&0!=(3&D.type),f&tt.Host&&m===D);return null!==N?Fa(a,b,N,D):uo}function bl(s,a,c,d,f){const m=s.providerIndexes,b=a.data,D=1048575&m,E=s.directiveStart,N=m>>20,q=f?D+N:s.directiveEnd;for(let ne=d?D:D+N;ne<q;ne++){const ve=b[ne];if(ne<E&&c===ve||ne>=E&&ve.type===c)return ne}if(f){const ne=b[E];if(ne&&lr(ne)&&ne.type===c)return E}return null}function Fa(s,a,c,d){let f=s[c];const m=a.data;if(function ka(s){return s instanceof Xo}(f)){const b=f;b.resolving&&function pt(s,a){const c=a?`. Dependency path: ${a.join(" > ")} > ${s}`:"";throw new Se(-200,`Circular dependency in DI detected for ${s}${c}`)}(function ue(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():be(s)}(m[c]));const D=id(b.canSeeViewProviders);b.resolving=!0;const E=b.injectImpl?kn(b.injectImpl):null;tf(s,d,tt.Default);try{f=s[c]=b.factory(void 0,m,s,d),a.firstCreatePass&&c>=d.directiveStart&&function af(s,a,c){const{ngOnChanges:d,ngOnInit:f,ngDoCheck:m}=a.type.prototype;if(d){const b=ao(a);(c.preOrderHooks||(c.preOrderHooks=[])).push(s,b),(c.preOrderCheckHooks||(c.preOrderCheckHooks=[])).push(s,b)}f&&(c.preOrderHooks||(c.preOrderHooks=[])).push(0-s,f),m&&((c.preOrderHooks||(c.preOrderHooks=[])).push(s,m),(c.preOrderCheckHooks||(c.preOrderCheckHooks=[])).push(s,m))}(c,m[c],a)}finally{null!==E&&kn(E),id(D),b.resolving=!1,Lg()}}return f}function $g(s,a,c){return!!(c[a+(s>>5)]&1<<s)}function gf(s,a){return!(s&tt.Self||s&tt.Host&&a)}class wl{constructor(a,c){this._tNode=a,this._lView=c}get(a,c,d){return Hc(this._tNode,this._lView,a,d,c)}}function Zg(){return new wl(An(),De())}function ho(s){return Rn(()=>{const a=s.prototype.constructor,c=a[Jn]||Wg(a),d=Object.prototype;let f=Object.getPrototypeOf(s.prototype).constructor;for(;f&&f!==d;){const m=f[Jn]||Wg(f);if(m&&m!==c)return m;f=Object.getPrototypeOf(f)}return m=>new m})}function Wg(s){return Pe(s)?()=>{const a=Wg(J(s));return a&&a()}:is(s)}function od(s){const a=s[1],c=a.type;return 2===c?a.declTNode:1===c?s[6]:null}function ad(s){return function Gg(s,a){if("class"===a)return s.classes;if("style"===a)return s.styles;const c=s.attrs;if(c){const d=c.length;let f=0;for(;f<d;){const m=c[f];if(Pc(m))break;if(0===m)f+=2;else if("number"==typeof m)for(f++;f<d&&"string"==typeof c[f];)f++;else{if(m===a)return c[f+1];f+=2}}}return null}(An(),s)}const La="__parameters__";function Wc(s,a,c){return Rn(()=>{const d=function _f(s){return function(...c){if(s){const d=s(...c);for(const f in d)this[f]=d[f]}}}(a);function f(...m){if(this instanceof f)return d.apply(this,m),this;const b=new f(...m);return D.annotation=b,D;function D(E,T,N){const L=E.hasOwnProperty(La)?E[La]:Object.defineProperty(E,La,{value:[]})[La];for(;L.length<=N;)L.push(null);return(L[N]=L[N]||[]).push(b),E}}return c&&(f.prototype=Object.create(c.prototype)),f.prototype.ngMetadataName=s,f.annotationCls=f,f})}class Fn{constructor(a,c){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof c?this.__NG_ELEMENT_ID__=c:void 0!==c&&(this.\u0275prov=nn({token:this,providedIn:c.providedIn||"root",factory:c.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function wn(s,a){void 0===a&&(a=s);for(let c=0;c<s.length;c++){let d=s[c];Array.isArray(d)?(a===s&&(a=s.slice(0,c)),wn(d,a)):a!==s&&a.push(d)}return a}function bs(s,a){s.forEach(c=>Array.isArray(c)?bs(c,a):a(c))}function Cl(s,a,c){a>=s.length?s.push(c):s.splice(a,0,c)}function ai(s,a){return a>=s.length-1?s.pop():s.splice(a,1)[0]}function ea(s,a){const c=[];for(let d=0;d<s;d++)c.push(a);return c}function at(s,a,c){let d=Il(s,a);return d>=0?s[1|d]=c:(d=~d,function vf(s,a,c,d){let f=s.length;if(f==a)s.push(c,d);else if(1===f)s.push(d,s[0]),s[0]=c;else{for(f--,s.push(s[f-1],s[f]);f>a;)s[f]=s[f-2],f--;s[a]=c,s[a+1]=d}}(s,d,a,c)),d}function bf(s,a){const c=Il(s,a);if(c>=0)return s[1|c]}function Il(s,a){return function dd(s,a,c){let d=0,f=s.length>>c;for(;f!==d;){const m=d+(f-d>>1),b=s[m<<c];if(a===b)return m<<c;b>a?f=m:d=m+1}return~(f<<c)}(s,a,1)}const zs={},wf="__NG_DI_FLAG__",Hr="ngTempTokenPath",ws=/\n/gm,Ci="__source";let go;function ta(s){const a=go;return go=s,a}function li(s,a=tt.Default){if(void 0===go)throw new Se(-203,!1);return null===go?qi(s,void 0,a):go.get(s,a&tt.Optional?null:void 0,a)}function cn(s,a=tt.Default){return(function Tr(){return Tn}()||li)(J(s),a)}function gi(s,a=tt.Default){return"number"!=typeof a&&(a=0|(a.optional&&8)|(a.host&&1)|(a.self&&2)|(a.skipSelf&&4)),cn(s,a)}function Pi(s){const a=[];for(let c=0;c<s.length;c++){const d=J(s[c]);if(Array.isArray(d)){if(0===d.length)throw new Se(900,!1);let f,m=tt.Default;for(let b=0;b<d.length;b++){const D=d[b],E=pd(D);"number"==typeof E?-1===E?f=D.token:m|=E:f=D}a.push(cn(f,m))}else a.push(cn(d))}return a}function ia(s,a){return s[wf]=a,s.prototype[wf]=a,s}function pd(s){return s[wf]}const ci=ia(Wc("Optional"),8),ra=ia(Wc("SkipSelf"),4);var Es=(()=>((Es=Es||{})[Es.Important=1]="Important",Es[Es.DashCase=2]="DashCase",Es))();const Xc=/^>|^->|<!--|-->|--!>|<!-$/g,dv=/(<|>)/;const nu=new Map;let Af=0;const _o="__ngContext__";function Bi(s,a){zi(a)?(s[_o]=a[20],function fv(s){nu.set(s[20],s)}(a)):s[_o]=a}let Cd;function Ed(s,a){return Cd(s,a)}function Ha(s){const a=s[3];return Ri(a)?a[3]:a}function Ga(s){return nm(s[13])}function yo(s){return nm(s[4])}function nm(s){for(;null!==s&&!Ri(s);)s=s[4];return s}function vo(s,a,c,d,f){if(null!=d){let m,b=!1;Ri(d)?m=d:zi(d)&&(b=!0,d=d[0]);const D=ei(d);0===s&&null!==c?null==f?am(a,c,D):wo(a,c,D,f||null,!0):1===s&&null!==c?wo(a,c,D,f||null,!0):2===s?Rd(a,D,b):3===s&&a.destroyNode(D),null!=m&&function Ff(s,a,c,d,f){const m=c[7];m!==ei(c)&&vo(a,s,d,m,f);for(let D=10;D<c.length;D++){const E=c[D];ca(E[1],E,s,a,d,m)}}(a,s,m,c,f)}}function Id(s,a){return s.createText(a)}function xf(s,a,c){s.setValue(a,c)}function bo(s,a){return s.createComment(function tu(s){return s.replace(Xc,a=>a.replace(dv,"\u200b$1\u200b"))}(a))}function Rl(s,a,c){return s.createElement(a,c)}function Mf(s,a){const c=s[9],d=c.indexOf(a),f=a[3];512&a[2]&&(a[2]&=-513,Ma(f,-1)),c.splice(d,1)}function Of(s,a){if(s.length<=10)return;const c=10+a,d=s[c];if(d){const f=d[17];null!==f&&f!==s&&Mf(f,d),a>0&&(s[c-1][4]=d[4]);const m=ai(s,10+a);!function $a(s,a){ca(s,a,a[11],2,null,null),a[0]=null,a[6]=null}(d[1],d);const b=m[19];null!==b&&b.detachView(m[1]),d[3]=null,d[4]=null,d[2]&=-65}return d}function sm(s,a){if(!(128&a[2])){const c=a[11];c.destroyNode&&ca(s,a,c,3,null,null),function bv(s){let a=s[13];if(!a)return Rf(s[1],s);for(;a;){let c=null;if(zi(a))c=a[13];else{const d=a[10];d&&(c=d)}if(!c){for(;a&&!a[4]&&a!==s;)zi(a)&&Rf(a[1],a),a=a[3];null===a&&(a=s),zi(a)&&Rf(a[1],a),c=a&&a[4]}a=c}}(a)}}function Rf(s,a){if(!(128&a[2])){a[2]&=-65,a[2]|=128,function om(s,a){let c;if(null!=s&&null!=(c=s.destroyHooks))for(let d=0;d<c.length;d+=2){const f=a[c[d]];if(!(f instanceof Xo)){const m=c[d+1];if(Array.isArray(m))for(let b=0;b<m.length;b+=2){const D=f[m[b]],E=m[b+1];try{E.call(D)}finally{}}else try{m.call(f)}finally{}}}}(s,a),function Dv(s,a){const c=s.cleanup,d=a[7];let f=-1;if(null!==c)for(let m=0;m<c.length-1;m+=2)if("string"==typeof c[m]){const b=c[m+1],D="function"==typeof b?b(a):ei(a[b]),E=d[f=c[m+2]],T=c[m+3];"boolean"==typeof T?D.removeEventListener(c[m],E,T):T>=0?d[f=T]():d[f=-T].unsubscribe(),m+=2}else{const b=d[f=c[m+1]];c[m].call(b)}if(null!==d){for(let m=f+1;m<d.length;m++)(0,d[m])();a[7]=null}}(s,a),1===a[1].type&&a[11].destroy();const c=a[17];if(null!==c&&Ri(a[3])){c!==a[3]&&Mf(c,a);const d=a[19];null!==d&&d.detachView(s)}!function bd(s){nu.delete(s[20])}(a)}}function Sd(s,a,c){return Ad(s,a.parent,c)}function Ad(s,a,c){let d=a;for(;null!==d&&40&d.type;)d=(a=d).parent;if(null===d)return c[0];if(2&d.flags){const f=s.data[d.directiveStart].encapsulation;if(f===ht.None||f===ht.Emulated)return null}return mr(d,c)}function wo(s,a,c,d,f){s.insertBefore(a,c,d,f)}function am(s,a,c){s.appendChild(a,c)}function su(s,a,c,d,f){null!==d?wo(s,a,c,d,f):am(s,a,c)}function fr(s,a){return s.parentNode(a)}function kf(s,a,c){return Nd(s,a,c)}function ou(s,a,c){return 40&s.type?mr(s,c):null}let Do,Pl,Bf,Nd=ou;function xd(s,a){Nd=s,Do=a}function Md(s,a,c,d){const f=Sd(s,d,a),m=a[11],D=kf(d.parent||a[6],d,a);if(null!=f)if(Array.isArray(c))for(let E=0;E<c.length;E++)su(m,f,c[E],D,!1);else su(m,f,c,D,!1);void 0!==Do&&Do(m,d,a,c,f)}function Nr(s,a){if(null!==a){const c=a.type;if(3&c)return mr(a,s);if(4&c)return au(-1,s[a.index]);if(8&c){const d=a.child;if(null!==d)return Nr(s,d);{const f=s[a.index];return Ri(f)?au(-1,f):ei(f)}}if(32&c)return Ed(a,s)()||ei(s[a.index]);{const d=Od(s,a);return null!==d?Array.isArray(d)?d[0]:Nr(Ha(s[16]),d):Nr(s,a.next)}}return null}function Od(s,a){return null!==a?s[16][6].projection[a.projection]:null}function au(s,a){const c=10+s+1;if(c<a.length){const d=a[c],f=d[1].firstChild;if(null!==f)return Nr(d,f)}return a[7]}function Rd(s,a,c){const d=fr(s,a);d&&function Pf(s,a,c,d){s.removeChild(a,c,d)}(s,d,a,c)}function lu(s,a,c,d,f,m,b){for(;null!=c;){const D=d[c.index],E=c.type;if(b&&0===a&&(D&&Bi(ei(D),d),c.flags|=4),64!=(64&c.flags))if(8&E)lu(s,a,c.child,d,f,m,!1),vo(a,s,f,D,m);else if(32&E){const T=Ed(c,d);let N;for(;N=T();)vo(a,s,f,N,m);vo(a,s,f,D,m)}else 16&E?ua(s,a,d,c,f,m):vo(a,s,f,D,m);c=b?c.projectionNext:c.next}}function ca(s,a,c,d,f,m){lu(c,d,s.firstChild,a,f,m,!1)}function ua(s,a,c,d,f,m){const b=c[16],E=b[6].projection[d.projection];if(Array.isArray(E))for(let T=0;T<E.length;T++)vo(a,s,f,E[T],m);else lu(s,a,E,b[3],f,m,!0)}function as(s,a,c){s.setAttribute(a,"style",c)}function da(s,a,c){""===c?s.removeAttribute(a,"class"):s.setAttribute(a,"class",c)}function ha(s){return function cu(){if(void 0===Pl&&(Pl=null,Vt.trustedTypes))try{Pl=Vt.trustedTypes.createPolicy("angular",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return Pl}()?.createHTML(s)||s}function v(s){Bf=s}class _e{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function ki(s){return s instanceof _e?s.changingThisBreaksApplicationSecurity:s}class Wa{constructor(a){this.inertDocumentHelper=a}getInertBodyElement(a){a="<body><remove></remove>"+a;try{const c=(new window.DOMParser).parseFromString(ha(a),"text/html").body;return null===c?this.inertDocumentHelper.getInertBodyElement(a):(c.removeChild(c.firstChild),c)}catch{return null}}}class hm{constructor(a){if(this.defaultDoc=a,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const c=this.inertDocument.createElement("html");this.inertDocument.appendChild(c);const d=this.inertDocument.createElement("body");c.appendChild(d)}}getInertBodyElement(a){const c=this.inertDocument.createElement("template");if("content"in c)return c.innerHTML=ha(a),c;const d=this.inertDocument.createElement("body");return d.innerHTML=ha(a),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(d),d}stripCustomNsAttrs(a){const c=a.attributes;for(let f=c.length-1;0<f;f--){const b=c.item(f).name;("xmlns:ns1"===b||0===b.indexOf("ns1:"))&&a.removeAttribute(b)}let d=a.firstChild;for(;d;)d.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(d),d=d.nextSibling}}const qa=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function za(s){return(s=String(s)).match(qa)?s:"unsafe:"+s}function Ka(s){const a={};for(const c of s.split(","))a[c]=!0;return a}function jf(...s){const a={};for(const c of s)for(const d in c)c.hasOwnProperty(d)&&(a[d]=!0);return a}const yD=Ka("area,br,col,hr,img,wbr"),vD=Ka("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),bD=Ka("rp,rt"),Hf=jf(yD,jf(vD,Ka("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),jf(bD,Ka("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),jf(bD,vD)),kd=Ka("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),wD=jf(kd,Ka("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Ka("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"));var Ii=(()=>((Ii=Ii||{})[Ii.NONE=0]="NONE",Ii[Ii.HTML=1]="HTML",Ii[Ii.STYLE=2]="STYLE",Ii[Ii.SCRIPT=3]="SCRIPT",Ii[Ii.URL=4]="URL",Ii[Ii.RESOURCE_URL=5]="RESOURCE_URL",Ii))();function Fd(s){const a=function kl(){const s=De();return s&&s[12]}();return a?a.sanitize(Ii.URL,s)||"":function ls(s,a){const c=function lm(s){return s instanceof _e&&s.getTypeName()||null}(s);if(null!=c&&c!==a){if("ResourceURL"===c&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${c} (see https://g.co/ng/security#xss)`)}return c===a}(s,"URL")?ki(s):za(be(s))}const mm=new Fn("ENVIRONMENT_INITIALIZER"),Ld=new Fn("INJECTOR",-1),Av=new Fn("INJECTOR_DEF_TYPES");class TD{get(a,c=zs){if(c===zs){const d=new Error(`NullInjectorError: No provider for ${ye(a)}!`);throw d.name="NullInjectorError",d}return c}}function XT(...s){return{\u0275providers:SD(0,s)}}function SD(s,...a){const c=[],d=new Set;let f;return bs(a,m=>{const b=m;Nv(b,c,[],d)&&(f||(f=[]),f.push(b))}),void 0!==f&&AD(f,c),c}function AD(s,a){for(let c=0;c<s.length;c++){const{providers:f}=s[c];bs(f,m=>{a.push(m)})}}function Nv(s,a,c,d){if(!(s=J(s)))return!1;let f=null,m=sr(s);const b=!m&&U(s);if(m||b){if(b&&!b.standalone)return!1;f=s}else{const E=s.ngModule;if(m=sr(E),!m)return!1;f=E}const D=d.has(f);if(b){if(D)return!1;if(d.add(f),b.dependencies){const E="function"==typeof b.dependencies?b.dependencies():b.dependencies;for(const T of E)Nv(T,a,c,d)}}else{if(!m)return!1;{if(null!=m.imports&&!D){let T;d.add(f);try{bs(m.imports,N=>{Nv(N,a,c,d)&&(T||(T=[]),T.push(N))})}finally{}void 0!==T&&AD(T,a)}if(!D){const T=is(f)||(()=>new f);a.push({provide:f,useFactory:T,deps:Nt},{provide:Av,useValue:f,multi:!0},{provide:mm,useValue:()=>cn(f),multi:!0})}const E=m.providers;null==E||D||bs(E,N=>{a.push(N)})}}return f!==s&&void 0!==s.providers}const eS=me({provide:String,useValue:me});function Mv(s){return null!==s&&"object"==typeof s&&eS in s}function du(s){return"function"==typeof s}const Ov=new Fn("Set Injector scope."),$f={},nS={};let _m;function Zf(){return void 0===_m&&(_m=new TD),_m}class Fl{}class Rv extends Fl{constructor(a,c,d,f){super(),this.parent=c,this.source=d,this.scopes=f,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,vm(a,b=>this.processProvider(b)),this.records.set(Ld,Vd(void 0,this)),f.has("environment")&&this.records.set(Fl,Vd(void 0,this));const m=this.records.get(Ov);null!=m&&"string"==typeof m.value&&this.scopes.add(m.value),this.injectorDefTypes=new Set(this.get(Av.multi,Nt,tt.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const a of this._ngOnDestroyHooks)a.ngOnDestroy();for(const a of this._onDestroyHooks)a()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(a){this._onDestroyHooks.push(a)}runInContext(a){this.assertNotDestroyed();const c=ta(this),d=kn(void 0);try{return a()}finally{ta(c),kn(d)}}get(a,c=zs,d=tt.Default){this.assertNotDestroyed();const f=ta(this),m=kn(void 0);try{if(!(d&tt.SkipSelf)){let D=this.records.get(a);if(void 0===D){const E=function OD(s){return"function"==typeof s||"object"==typeof s&&s instanceof Fn}(a)&&jt(a);D=E&&this.injectableDefInScope(E)?Vd(ym(a),$f):null,this.records.set(a,D)}if(null!=D)return this.hydrate(a,D)}return(d&tt.Self?Zf():this.parent).get(a,c=d&tt.Optional&&c===zs?null:c)}catch(b){if("NullInjectorError"===b.name){if((b[Hr]=b[Hr]||[]).unshift(ye(a)),f)throw b;return function rv(s,a,c,d){const f=s[Hr];throw a[Ci]&&f.unshift(a[Ci]),s.message=function ss(s,a,c,d=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.slice(2):s;let f=ye(a);if(Array.isArray(a))f=a.map(ye).join(" -> ");else if("object"==typeof a){let m=[];for(let b in a)if(a.hasOwnProperty(b)){let D=a[b];m.push(b+":"+("string"==typeof D?JSON.stringify(D):ye(D)))}f=`{${m.join(", ")}}`}return`${c}${d?"("+d+")":""}[${f}]: ${s.replace(ws,"\n  ")}`}("\n"+s.message,f,c,d),s.ngTokenPath=f,s[Hr]=null,s}(b,a,"R3InjectorError",this.source)}throw b}finally{kn(m),ta(f)}}resolveInjectorInitializers(){const a=ta(this),c=kn(void 0);try{const d=this.get(mm.multi,Nt,tt.Self);for(const f of d)f()}finally{ta(a),kn(c)}}toString(){const a=[],c=this.records;for(const d of c.keys())a.push(ye(d));return`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Se(205,!1)}processProvider(a){let c=du(a=J(a))?a:J(a&&a.provide);const d=function rS(s){return Mv(s)?Vd(void 0,s.useValue):Vd(MD(s),$f)}(a);if(du(a)||!0!==a.multi)this.records.get(c);else{let f=this.records.get(c);f||(f=Vd(void 0,$f,!0),f.factory=()=>Pi(f.multi),this.records.set(c,f)),c=a,f.multi.push(a)}this.records.set(c,d)}hydrate(a,c){return c.value===$f&&(c.value=nS,c.value=c.factory()),"object"==typeof c.value&&c.value&&function oS(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(c.value)&&this._ngOnDestroyHooks.add(c.value),c.value}injectableDefInScope(a){if(!a.providedIn)return!1;const c=J(a.providedIn);return"string"==typeof c?"any"===c||this.scopes.has(c):this.injectorDefTypes.has(c)}}function ym(s){const a=jt(s),c=null!==a?a.factory:is(s);if(null!==c)return c;if(s instanceof Fn)throw new Se(204,!1);if(s instanceof Function)return function iS(s){const a=s.length;if(a>0)throw ea(a,"?"),new Se(204,!1);const c=function xi(s){const a=s&&(s[hi]||s[fi]);if(a){const c=function On(s){if(s.hasOwnProperty("name"))return s.name;const a=(""+s).match(/^function\s*([^\s(]+)/);return null===a?"":a[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${c}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${c}" class.`),a}return null}(s);return null!==c?()=>c.factory(s):()=>new s}(s);throw new Se(204,!1)}function MD(s,a,c){let d;if(du(s)){const f=J(s);return is(f)||ym(f)}if(Mv(s))d=()=>J(s.useValue);else if(function xD(s){return!(!s||!s.useFactory)}(s))d=()=>s.useFactory(...Pi(s.deps||[]));else if(function ND(s){return!(!s||!s.useExisting)}(s))d=()=>cn(J(s.useExisting));else{const f=J(s&&(s.useClass||s.provide));if(!function sS(s){return!!s.deps}(s))return is(f)||ym(f);d=()=>new f(...Pi(s.deps))}return d}function Vd(s,a,c=!1){return{factory:s,value:a,multi:c?[]:void 0}}function Pv(s){return!!s.\u0275providers}function vm(s,a){for(const c of s)Array.isArray(c)?vm(c,a):Pv(c)?vm(c.\u0275providers,a):a(c)}class aS{}class cS{resolveComponentFactory(a){throw function lS(s){const a=Error(`No component factory found for ${ye(s)}. Did you add it to @NgModule.entryComponents?`);return a.ngComponent=s,a}(a)}}let Ll=(()=>{class s{}return s.NULL=new cS,s})();function kD(){return Vl(An(),De())}function Vl(s,a){return new hu(mr(s,a))}let hu=(()=>{class s{constructor(c){this.nativeElement=c}}return s.__NG_ELEMENT_ID__=kD,s})();function uS(s){return s instanceof hu?s.nativeElement:s}class Wf{}let dS=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function hS(){const s=De(),c=Qt(An().index,s);return(zi(c)?c:s)[11]}(),s})(),fS=(()=>{class s{}return s.\u0275prov=nn({token:s,providedIn:"root",factory:()=>null}),s})();class FD{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const LD=new FD("14.2.12"),bm={};function wm(s){return s.ngOriginalError}class fu{constructor(){this._console=console}handleError(a){const c=this._findOriginalError(a);this._console.error("ERROR",a),c&&this._console.error("ORIGINAL ERROR",c)}_findOriginalError(a){let c=a&&wm(a);for(;c&&wm(c);)c=wm(c);return c||null}}function pa(s){return s instanceof Function?s():s}function Fv(s,a,c){let d=s.length;for(;;){const f=s.indexOf(a,c);if(-1===f)return f;if(0===f||s.charCodeAt(f-1)<=32){const m=a.length;if(f+m===d||s.charCodeAt(f+m)<=32)return f}c=f+1}}const Em="ng-template";function bS(s,a,c){let d=0;for(;d<s.length;){let f=s[d++];if(c&&"class"===f){if(f=s[d],-1!==Fv(f.toLowerCase(),a,0))return!0}else if(1===f){for(;d<s.length&&"string"==typeof(f=s[d++]);)if(f.toLowerCase()===a)return!0;return!1}}return!1}function UD(s){return 4===s.type&&s.value!==Em}function wS(s,a,c){return a===(4!==s.type||c?s.value:Em)}function BD(s,a,c){let d=4;const f=s.attrs||[],m=function jD(s){for(let a=0;a<s.length;a++)if(Pc(s[a]))return a;return s.length}(f);let b=!1;for(let D=0;D<a.length;D++){const E=a[D];if("number"!=typeof E){if(!b)if(4&d){if(d=2|1&d,""!==E&&!wS(s,E,c)||""===E&&1===a.length){if(Co(d))return!1;b=!0}}else{const T=8&d?E:a[++D];if(8&d&&null!==s.attrs){if(!bS(s.attrs,T,c)){if(Co(d))return!1;b=!0}continue}const L=hP(8&d?"class":E,f,UD(s),c);if(-1===L){if(Co(d))return!1;b=!0;continue}if(""!==T){let q;q=L>m?"":f[L+1].toLowerCase();const ne=8&d?q:null;if(ne&&-1!==Fv(ne,T,0)||2&d&&T!==q){if(Co(d))return!1;b=!0}}}}else{if(!b&&!Co(d)&&!Co(E))return!1;if(b&&Co(E))continue;b=!1,d=E|1&d}}return Co(d)||b}function Co(s){return 0==(1&s)}function hP(s,a,c,d){if(null===a)return-1;let f=0;if(d||!c){let m=!1;for(;f<a.length;){const b=a[f];if(b===s)return f;if(3===b||6===b)m=!0;else{if(1===b||2===b){let D=a[++f];for(;"string"==typeof D;)D=a[++f];continue}if(4===b)break;if(0===b){f+=4;continue}}f+=m?1:2}return-1}return function DS(s,a){let c=s.indexOf(4);if(c>-1)for(c++;c<s.length;){const d=s[c];if("number"==typeof d)return-1;if(d===a)return c;c++}return-1}(a,s)}function zf(s,a,c=!1){for(let d=0;d<a.length;d++)if(BD(s,a[d],c))return!0;return!1}function CS(s,a){e:for(let c=0;c<a.length;c++){const d=a[c];if(s.length===d.length){for(let f=0;f<s.length;f++)if(s[f]!==d[f])continue e;return!0}}return!1}function Im(s,a){return s?":not("+a.trim()+")":a}function ES(s){let a=s[0],c=1,d=2,f="",m=!1;for(;c<s.length;){let b=s[c];if("string"==typeof b)if(2&d){const D=s[++c];f+="["+b+(D.length>0?'="'+D+'"':"")+"]"}else 8&d?f+="."+b:4&d&&(f+=" "+b);else""!==f&&!Co(b)&&(a+=Im(m,f),f=""),d=b,m=m||!Co(d);c++}return""!==f&&(a+=Im(m,f)),a}const $t={};function HD(s){Lv(vt(),De(),Vi()+s,!1)}function Lv(s,a,c,d){if(!d)if(3==(3&a[2])){const m=s.preOrderCheckHooks;null!==m&&Oc(a,m,c)}else{const m=s.preOrderHooks;null!==m&&Pa(a,m,0,c)}jr(c)}function Ud(s,a=null,c=null,d){const f=WD(s,a,c,d);return f.resolveInjectorInitializers(),f}function WD(s,a=null,c=null,d,f=new Set){const m=[c||Nt,XT(s)];return d=d||("object"==typeof s?void 0:ye(s)),new Rv(m,a||Zf(),d||null,f)}let ga=(()=>{class s{static create(c,d){if(Array.isArray(c))return Ud({name:""},d,c,"");{const f=c.name??"";return Ud({name:f},c.parent,c.providers,f)}}}return s.THROW_IF_NOT_FOUND=zs,s.NULL=new TD,s.\u0275prov=nn({token:s,providedIn:"any",factory:()=>cn(Ld)}),s.__NG_ELEMENT_ID__=-1,s})();function Hd(s,a=tt.Default){const c=De();return null===c?cn(s,a):Hc(An(),c,J(s),a)}function Yf(){throw new Error("invalid")}function Io(s,a){return s<<17|a<<2}function Yi(s){return s>>17&32767}function _u(s){return 2|s}function To(s){return(131068&s)>>2}function xm(s,a){return-131069&s|a<<2}function Mm(s){return 1|s}function uC(s,a){const c=s.contentQueries;if(null!==c)for(let d=0;d<c.length;d+=2){const f=c[d],m=c[d+1];if(-1!==m){const b=s.data[m];Nc(f),b.contentQueries(2,a[m],m)}}}function ep(s,a,c,d,f,m,b,D,E,T,N){const L=a.blueprint.slice();return L[0]=f,L[2]=76|d,(null!==N||s&&1024&s[2])&&(L[2]|=1024),pl(L),L[3]=L[15]=s,L[8]=c,L[10]=b||s&&s[10],L[11]=D||s&&s[11],L[12]=E||s&&s[12]||null,L[9]=T||s&&s[9]||null,L[6]=m,L[20]=function hv(){return Af++}(),L[21]=N,L[16]=2==a.type?s[16]:L,L}function Gd(s,a,c,d,f){let m=s.data[a];if(null===m)m=Qv(s,a,c,d,f),function uD(){return M.lFrame.inI18n}()&&(m.flags|=64);else if(64&m.type){m.type=c,m.value=d,m.attrs=f;const b=$s();m.injectorIndex=null===b?-1:b.injectorIndex}return ur(m,!0),m}function Qv(s,a,c,d,f){const m=Oa(),b=dr(),E=s.data[a]=function pC(s,a,c,d,f,m){return{type:c,index:d,insertBeforeIndex:null,injectorIndex:a?a.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:m,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,b?m:m&&m.parent,c,a,d,f);return null===s.firstChild&&(s.firstChild=E),null!==m&&(b?null==m.child&&null!==E.parent&&(m.child=E):null===m.next&&(m.next=E)),E}function $d(s,a,c,d){if(0===c)return-1;const f=a.length;for(let m=0;m<c;m++)a.push(d),s.blueprint.push(d),s.data.push(null);return f}function ya(s,a,c){Fg(a);try{const d=s.viewQuery;null!==d&&Hm(1,d,c);const f=s.template;null!==f&&hC(s,a,f,1,c),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&uC(s,a),s.staticViewQueries&&Hm(2,s.viewQuery,c);const m=s.components;null!==m&&function dC(s,a){for(let c=0;c<a.length;c++)KS(s,a[c])}(a,m)}catch(d){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),d}finally{a[2]&=-5,xc()}}function Zd(s,a,c,d){const f=a[2];if(128!=(128&f)){Fg(a);try{pl(a),function Xh(s){return M.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==c&&hC(s,a,c,2,d);const b=3==(3&f);if(b){const T=s.preOrderCheckHooks;null!==T&&Oc(a,T,null)}else{const T=s.preOrderHooks;null!==T&&Pa(a,T,0,null),lf(a,0)}if(function Qs(s){for(let a=Ga(s);null!==a;a=yo(a)){if(!a[2])continue;const c=a[9];for(let d=0;d<c.length;d++){const f=c[d],m=f[3];0==(512&f[2])&&Ma(m,1),f[2]|=512}}}(a),function s0(s){for(let a=Ga(s);null!==a;a=yo(a))for(let c=10;c<a.length;c++){const d=a[c],f=d[1];Yo(d)&&Zd(f,d,f.template,d[8])}}(a),null!==s.contentQueries&&uC(s,a),b){const T=s.contentCheckHooks;null!==T&&Oc(a,T)}else{const T=s.contentHooks;null!==T&&Pa(a,T,1),lf(a,1)}!function BS(s,a){const c=s.hostBindingOpCodes;if(null!==c)try{for(let d=0;d<c.length;d++){const f=c[d];if(f<0)jr(~f);else{const m=f,b=c[++d],D=c[++d];dD(b,m),D(2,a[m])}}}finally{jr(-1)}}(s,a);const D=s.components;null!==D&&function jS(s,a){for(let c=0;c<a.length;c++)zS(s,a[c])}(a,D);const E=s.viewQuery;if(null!==E&&Hm(2,E,d),b){const T=s.viewCheckHooks;null!==T&&Oc(a,T)}else{const T=s.viewHooks;null!==T&&Pa(a,T,2),lf(a,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),a[2]&=-41,512&a[2]&&(a[2]&=-513,Ma(a[3],-1))}finally{xc()}}}function hC(s,a,c,d,f){const m=Vi(),b=2&d;try{jr(-1),b&&a.length>22&&Lv(s,a,22,!1),c(d,f)}finally{jr(m)}}function Wd(s,a,c){!Ct()||(function Um(s,a,c,d){const f=c.directiveStart,m=c.directiveEnd;s.firstCreatePass||Bc(c,a),Bi(d,a);const b=c.initialInputs;for(let D=f;D<m;D++){const E=s.data[D],T=lr(E);T&&qS(a,c,E);const N=Fa(a,s,D,c);Bi(N,a),null!==b&&ui(0,D-f,N,E,0,b),T&&(Qt(c.index,a)[8]=N)}}(s,a,c,mr(c,a)),128==(128&c.flags)&&function yC(s,a,c){const d=c.directiveStart,f=c.directiveEnd,m=c.index,b=function Pg(){return M.lFrame.currentDirectiveIndex}();try{jr(m);for(let D=d;D<f;D++){const E=s.data[D],T=a[D];kg(D),(null!==E.hostBindings||0!==E.hostVars||null!==E.hostAttrs)&&r0(E,T)}}finally{jr(-1),kg(b)}}(s,a,c))}function $l(s,a,c=mr){const d=a.localNames;if(null!==d){let f=a.index+1;for(let m=0;m<d.length;m+=2){const b=d[m+1],D=-1===b?c(a,s):s[b];s[f++]=D}}}function Jv(s){const a=s.tView;return null===a||a.incompleteFirstPass?s.tView=Xv(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):a}function Xv(s,a,c,d,f,m,b,D,E,T){const N=22+d,L=N+f,q=function HS(s,a){const c=[];for(let d=0;d<a;d++)c.push(d<s?null:$t);return c}(N,L),ne="function"==typeof T?T():T;return q[1]={type:s,blueprint:q,template:c,queries:null,viewQuery:D,declTNode:a,data:q.slice().fill(null,N),bindingStartIndex:N,expandoStartIndex:L,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof m?m():m,pipeRegistry:"function"==typeof b?b():b,firstChild:null,schemas:E,consts:ne,incompleteFirstPass:!1}}function Lm(s,a,c,d){const f=wC(a);null===c?f.push(d):(f.push(c),s.firstCreatePass&&DC(s).push(d,f.length-1))}function gC(s,a,c){for(let d in s)if(s.hasOwnProperty(d)){const f=s[d];(c=null===c?{}:c).hasOwnProperty(d)?c[d].push(a,f):c[d]=[a,f]}return c}function e0(s,a){const d=a.directiveEnd,f=s.data,m=a.attrs,b=[];let D=null,E=null;for(let T=a.directiveStart;T<d;T++){const N=f[T],L=N.inputs,q=null===m||UD(a)?null:an(L,m);b.push(q),D=gC(L,T,D),E=gC(N.outputs,T,E)}null!==D&&(D.hasOwnProperty("class")&&(a.flags|=16),D.hasOwnProperty("style")&&(a.flags|=32)),a.initialInputs=b,a.inputs=D,a.outputs=E}function cs(s,a,c,d,f,m,b,D){const E=mr(a,c);let N,T=a.inputs;!D&&null!=T&&(N=T[d])?(en(s,c,N,d,f),Vs(a)&&t0(c,a.index)):3&a.type&&(d=function $S(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(d),f=null!=b?b(f,a.value||"",d):f,m.setProperty(E,d,f))}function t0(s,a){const c=Qt(a,s);16&c[2]||(c[2]|=32)}function Vm(s,a,c,d){let f=!1;if(Ct()){const m=function xn(s,a,c){const d=s.directiveRegistry;let f=null;if(d)for(let m=0;m<d.length;m++){const b=d[m];zf(c,b.selectors,!1)&&(f||(f=[]),yl(Bc(c,a),s,b.type),lr(b)?(vn(s,c),f.unshift(b)):f.push(b))}return f}(s,a,c),b=null===d?null:{"":-1};if(null!==m){f=!0,Ln(c,s.data.length,m.length);for(let N=0;N<m.length;N++){const L=m[N];L.providersResolver&&L.providersResolver(L)}let D=!1,E=!1,T=$d(s,a,m.length,null);for(let N=0;N<m.length;N++){const L=m[N];c.mergedAttrs=kc(c.mergedAttrs,L.hostAttrs),Bm(s,c,a,T,L),Zl(T,L,b),null!==L.contentQueries&&(c.flags|=8),(null!==L.hostBindings||null!==L.hostAttrs||0!==L.hostVars)&&(c.flags|=128);const q=L.type.prototype;!D&&(q.ngOnChanges||q.ngOnInit||q.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(c.index),D=!0),!E&&(q.ngOnChanges||q.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(c.index),E=!0),T++}e0(s,c)}b&&function on(s,a,c){if(a){const d=s.localNames=[];for(let f=0;f<a.length;f+=2){const m=c[a[f+1]];if(null==m)throw new Se(-301,!1);d.push(a[f],m)}}}(c,d,b)}return c.mergedAttrs=kc(c.mergedAttrs,c.attrs),f}function n0(s,a,c,d,f,m){const b=m.hostBindings;if(b){let D=s.hostBindingOpCodes;null===D&&(D=s.hostBindingOpCodes=[]);const E=~a.index;(function _C(s){let a=s.length;for(;a>0;){const c=s[--a];if("number"==typeof c&&c<0)return c}return 0})(D)!=E&&D.push(E),D.push(d,f,b)}}function r0(s,a){null!==s.hostBindings&&s.hostBindings(1,a)}function vn(s,a){a.flags|=2,(s.components||(s.components=[])).push(a.index)}function Zl(s,a,c){if(c){if(a.exportAs)for(let d=0;d<a.exportAs.length;d++)c[a.exportAs[d]]=s;lr(a)&&(c[""]=s)}}function Ln(s,a,c){s.flags|=1,s.directiveStart=a,s.directiveEnd=a+c,s.providerIndexes=a}function Bm(s,a,c,d,f){s.data[d]=f;const m=f.factory||(f.factory=is(f.type)),b=new Xo(m,lr(f),Hd);s.blueprint[d]=b,c[d]=b,n0(s,a,0,d,$d(s,c,f.hostVars,$t),f)}function qS(s,a,c){const d=mr(a,s),f=Jv(c),m=s[10],b=va(s,ep(s,f,null,c.onPush?32:16,d,a,m,m.createRenderer(d,c),null,null,null));s[a.index]=b}function jm(s,a,c,d,f,m,b){if(null==m)s.removeAttribute(a,f,c);else{const D=null==b?be(m):b(m,d||"",f);s.setAttribute(a,f,D,c)}}function ui(s,a,c,d,f,m){const b=m[a];if(null!==b){const D=d.setInput;for(let E=0;E<b.length;){const T=b[E++],N=b[E++],L=b[E++];null!==D?d.setInput(c,L,T,N):c[N]=L}}}function an(s,a){let c=null,d=0;for(;d<a.length;){const f=a[d];if(0!==f)if(5!==f){if("number"==typeof f)break;s.hasOwnProperty(f)&&(null===c&&(c=[]),c.push(f,s[f],a[d+1])),d+=2}else d+=2;else d+=4}return c}function vC(s,a,c,d){return new Array(s,!0,!1,a,null,0,d,c,null,null)}function zS(s,a){const c=Qt(a,s);if(Yo(c)){const d=c[1];48&c[2]?Zd(d,c,d.template,c[8]):c[5]>0&&o0(c)}}function o0(s){for(let d=Ga(s);null!==d;d=yo(d))for(let f=10;f<d.length;f++){const m=d[f];if(Yo(m))if(512&m[2]){const b=m[1];Zd(b,m,b.template,m[8])}else m[5]>0&&o0(m)}const c=s[1].components;if(null!==c)for(let d=0;d<c.length;d++){const f=Qt(c[d],s);Yo(f)&&f[5]>0&&o0(f)}}function KS(s,a){const c=Qt(a,s),d=c[1];(function bC(s,a){for(let c=a.length;c<s.blueprint.length;c++)a.push(s.blueprint[c])})(d,c),ya(d,c,c[8])}function va(s,a){return s[13]?s[14][4]=a:s[13]=a,s[14]=a,a}function tp(s){for(;s;){s[2]|=32;const a=Ha(s);if($u(s)&&!a)return s;s=a}return null}function Wl(s,a,c,d=!0){const f=a[10];f.begin&&f.begin();try{Zd(s,a,s.template,c)}catch(b){throw d&&ql(a,b),b}finally{f.end&&f.end()}}function Hm(s,a,c){Nc(0),a(s,c)}function wC(s){return s[7]||(s[7]=[])}function DC(s){return s.cleanup||(s.cleanup=[])}function ql(s,a){const c=s[9],d=c?c.get(fu,null):null;d&&d.handleError(a)}function en(s,a,c,d,f){for(let m=0;m<c.length;){const b=c[m++],D=c[m++],E=a[b],T=s.data[b];null!==T.setInput?T.setInput(E,f,d,D):E[D]=f}}function Js(s,a,c){const d=lo(a,s);xf(s[11],d,c)}function yu(s,a,c){let d=c?s.styles:null,f=c?s.classes:null,m=0;if(null!==a)for(let b=0;b<a.length;b++){const D=a[b];"number"==typeof D?m=D:1==m?f=he(f,D):2==m&&(d=he(d,D+": "+a[++b]+";"))}c?s.styles=d:s.stylesWithoutHost=d,c?s.classes=f:s.classesWithoutHost=f}function np(s,a,c,d,f=!1){for(;null!==c;){const m=a[c.index];if(null!==m&&d.push(ei(m)),Ri(m))for(let D=10;D<m.length;D++){const E=m[D],T=E[1].firstChild;null!==T&&np(E[1],E,T,d)}const b=c.type;if(8&b)np(s,a,c.child,d);else if(32&b){const D=Ed(c,a);let E;for(;E=D();)d.push(E)}else if(16&b){const D=Od(a,c);if(Array.isArray(D))d.push(...D);else{const E=Ha(a[16]);np(E[1],E,D,d,!0)}}c=f?c.projectionNext:c.next}return d}class hs{constructor(a,c){this._lView=a,this._cdRefInjectingView=c,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const a=this._lView,c=a[1];return np(c,a,c.firstChild,[])}get context(){return this._lView[8]}set context(a){this._lView[8]=a}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[3];if(Ri(a)){const c=a[8],d=c?c.indexOf(this):-1;d>-1&&(Of(a,d),ai(c,d))}this._attachedToViewContainer=!1}sm(this._lView[1],this._lView)}onDestroy(a){Lm(this._lView[1],this._lView,null,a)}markForCheck(){tp(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Wl(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Se(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function rm(s,a){ca(s,a,a[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(a){if(this._attachedToViewContainer)throw new Se(902,!1);this._appRef=a}}class Gm extends hs{constructor(a){super(a),this._view=a}detectChanges(){const a=this._view;Wl(a[1],a,a[8],!1)}checkNoChanges(){}get context(){return null}}class Is extends Ll{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const c=U(a);return new vu(c,this.ngModule)}}function CC(s){const a=[];for(let c in s)s.hasOwnProperty(c)&&a.push({propName:s[c],templateName:c});return a}class YS{constructor(a,c){this.injector=a,this.parentInjector=c}get(a,c,d){const f=this.injector.get(a,bm,d);return f!==bm||c===bm?f:this.parentInjector.get(a,c,d)}}class vu extends aS{constructor(a,c){super(),this.componentDef=a,this.ngModule=c,this.componentType=a.type,this.selector=function IS(s){return s.map(ES).join(",")}(a.selectors),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!c}get inputs(){return CC(this.componentDef.inputs)}get outputs(){return CC(this.componentDef.outputs)}create(a,c,d,f){let m=(f=f||this.ngModule)instanceof Fl?f:f?.injector;m&&null!==this.componentDef.getStandaloneInjector&&(m=this.componentDef.getStandaloneInjector(m)||m);const b=m?new YS(a,m):a,D=b.get(Wf,null);if(null===D)throw new Se(407,!1);const E=b.get(fS,null),T=D.createRenderer(null,this.componentDef),N=this.componentDef.selectors[0][0]||"div",L=d?function GS(s,a,c){return s.selectRootElement(a,c===ht.ShadowDom)}(T,d,this.componentDef.encapsulation):Rl(T,N,function fs(s){const a=s.toLowerCase();return"svg"===a?"svg":"math"===a?"math":null}(N)),q=this.componentDef.onPush?288:272,ne=Xv(0,null,null,1,0,null,null,null,null,null),ve=ep(null,ne,null,q,null,null,D,T,E,b,null);let je,Qe;Fg(ve);try{const wt=function IC(s,a,c,d,f,m){const b=c[1];c[22]=s;const E=Gd(b,22,2,"#host",null),T=E.mergedAttrs=a.hostAttrs;null!==T&&(yu(E,T,!0),null!==s&&(_l(f,s,T),null!==E.classes&&da(f,s,E.classes),null!==E.styles&&as(f,s,E.styles)));const N=d.createRenderer(s,a),L=ep(c,Jv(a),null,a.onPush?32:16,c[22],E,d,N,m||null,null,null);return b.firstCreatePass&&(yl(Bc(E,c),b,a.type),vn(b,E),Ln(E,c.length,1)),va(c,L),c[22]=L}(L,this.componentDef,ve,D,T);if(L)if(d)_l(T,L,["ng-version",LD.full]);else{const{attrs:kt,classes:Oe}=function TS(s){const a=[],c=[];let d=1,f=2;for(;d<s.length;){let m=s[d];if("string"==typeof m)2===f?""!==m&&a.push(m,s[++d]):8===f&&c.push(m);else{if(!Co(f))break;f=m}d++}return{attrs:a,classes:c}}(this.componentDef.selectors[0]);kt&&_l(T,L,kt),Oe&&Oe.length>0&&da(T,L,Oe.join(" "))}if(Qe=Br(ne,22),void 0!==c){const kt=Qe.projection=[];for(let Oe=0;Oe<this.ngContentSelectors.length;Oe++){const Mt=c[Oe];kt.push(null!=Mt?Array.from(Mt):null)}}je=function qd(s,a,c,d){const f=c[1],m=function WS(s,a,c){const d=An();s.firstCreatePass&&(c.providersResolver&&c.providersResolver(c),Bm(s,d,a,$d(s,a,1,null),c),e0(s,d));const f=Fa(a,s,d.directiveStart,d);Bi(f,a);const m=mr(d,a);return m&&Bi(m,a),f}(f,c,a);if(s[8]=c[8]=m,null!==d)for(const D of d)D(m,a);if(a.contentQueries){const D=An();a.contentQueries(1,m,D.directiveStart)}const b=An();return!f.firstCreatePass||null===a.hostBindings&&null===a.hostAttrs||(jr(b.index),n0(c[1],b,0,b.directiveStart,b.directiveEnd,a),r0(a,m)),m}(wt,this.componentDef,ve,[TC]),ya(ne,ve,null)}finally{xc()}return new EC(this.componentType,je,Vl(Qe,ve),ve,Qe)}}class EC extends class RD{}{constructor(a,c,d,f,m){super(),this.location=d,this._rootLView=f,this._tNode=m,this.instance=c,this.hostView=this.changeDetectorRef=new Gm(f),this.componentType=a}setInput(a,c){const d=this._tNode.inputs;let f;if(null!==d&&(f=d[a])){const m=this._rootLView;en(m[1],m,f,a,c),t0(m,this._tNode.index)}}get injector(){return new wl(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}function TC(){const s=An();Mc(De()[1],s)}function u0(s){let a=function c0(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),c=!0;const d=[s];for(;a;){let f;if(lr(s))f=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new Se(903,!1);f=a.\u0275dir}if(f){if(c){d.push(f);const b=s;b.inputs=d0(s.inputs),b.declaredInputs=d0(s.declaredInputs),b.outputs=d0(s.outputs);const D=f.hostBindings;D&&eA(s,D);const E=f.viewQuery,T=f.contentQueries;if(E&&zn(s,E),T&&XS(s,T),ae(s.inputs,f.inputs),ae(s.declaredInputs,f.declaredInputs),ae(s.outputs,f.outputs),lr(f)&&f.data.animation){const N=s.data;N.animation=(N.animation||[]).concat(f.data.animation)}}const m=f.features;if(m)for(let b=0;b<m.length;b++){const D=m[b];D&&D.ngInherit&&D(s),D===u0&&(c=!1)}}a=Object.getPrototypeOf(a)}!function JS(s){let a=0,c=null;for(let d=s.length-1;d>=0;d--){const f=s[d];f.hostVars=a+=f.hostVars,f.hostAttrs=kc(f.hostAttrs,c=kc(c,f.hostAttrs))}}(d)}function d0(s){return s===bi?{}:s===Nt?[]:s}function zn(s,a){const c=s.viewQuery;s.viewQuery=c?(d,f)=>{a(d,f),c(d,f)}:a}function XS(s,a){const c=s.contentQueries;s.contentQueries=c?(d,f,m)=>{a(d,f,m),c(d,f,m)}:a}function eA(s,a){const c=s.hostBindings;s.hostBindings=c?(d,f)=>{a(d,f),c(d,f)}:a}let Xs=null;function So(){if(!Xs){const s=Vt.Symbol;if(s&&s.iterator)Xs=s.iterator;else{const a=Object.getOwnPropertyNames(Map.prototype);for(let c=0;c<a.length;++c){const d=a[c];"entries"!==d&&"size"!==d&&Map.prototype[d]===Map.prototype.entries&&(Xs=d)}}}return Xs}function ip(s){return!!ni(s)&&(Array.isArray(s)||!(s instanceof Map)&&So()in s)}function ni(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function ba(s,a,c){return s[a]=c}function _r(s,a,c){return!Object.is(s[a],c)&&(s[a]=c,!0)}function eo(s,a,c,d){const f=_r(s,a,c);return _r(s,a+1,d)||f}function p0(s,a,c,d){const f=De();return _r(f,Ra(),a)&&(vt(),function us(s,a,c,d,f,m){const b=mr(s,a);jm(a[11],b,m,s.value,c,d,f)}(jn(),f,s,a,c,d)),p0}function wa(s,a,c,d){return _r(s,Ra(),c)?a+be(c)+d:$t}function Yd(s,a,c,d,f,m,b,D,E,T){const L=function Mr(s,a,c,d,f,m){const b=eo(s,a,c,d);return eo(s,a+2,f,m)||b}(s,Zs(),c,f,b,E);return Qo(4),L?a+be(c)+d+be(f)+m+be(b)+D+be(E)+T:$t}function NC(s,a,c,d,f,m,b,D){const E=De(),T=vt(),N=s+22,L=T.firstCreatePass?function y0(s,a,c,d,f,m,b,D,E){const T=a.consts,N=Gd(a,s,4,b||null,vs(T,D));Vm(a,c,N,vs(T,E)),Mc(a,N);const L=N.tViews=Xv(2,N,d,f,m,a.directiveRegistry,a.pipeRegistry,null,a.schemas,T);return null!==a.queries&&(a.queries.template(a,N),L.queries=a.queries.embeddedTView(N)),N}(N,T,E,a,c,d,f,m,b):T.data[N];ur(L,!1);const q=E[11].createComment("");Md(T,E,q,L),Bi(q,E),va(E,E[N]=vC(q,E,q,L)),ll(L)&&Wd(T,E,L),null!=b&&$l(E,L,D)}function v0(s){return co(function $y(){return M.lFrame.contextLView}(),22+s)}function b0(s,a,c){const d=De();return _r(d,Ra(),a)&&cs(vt(),jn(),d,s,a,d[11],c,!1),b0}function w0(s,a,c,d,f){const b=f?"class":"style";en(s,c,a.inputs[b],b,d)}function Zr(s,a,c,d){const f=De(),m=vt(),b=22+s,D=f[11],E=f[b]=Rl(D,a,function Xu(){return M.lFrame.currentNamespace}()),T=m.firstCreatePass?function iA(s,a,c,d,f,m,b){const D=a.consts,T=Gd(a,s,2,f,vs(D,m));return Vm(a,c,T,vs(D,b)),null!==T.attrs&&yu(T,T.attrs,!1),null!==T.mergedAttrs&&yu(T,T.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,T),T}(b,m,f,0,a,c,d):m.data[b];ur(T,!0);const N=T.mergedAttrs;null!==N&&_l(D,E,N);const L=T.classes;null!==L&&da(D,E,L);const q=T.styles;return null!==q&&as(D,E,q),64!=(64&T.flags)&&Md(m,f,E,T),0===function de(){return M.lFrame.elementDepthCount}()&&Bi(E,f),function Be(){M.lFrame.elementDepthCount++}(),ll(T)&&(Wd(m,f,T),function fC(s,a,c){if(Zo(a)){const f=a.directiveEnd;for(let m=a.directiveStart;m<f;m++){const b=s.data[m];b.contentQueries&&b.contentQueries(1,c[m],m)}}}(m,T,f)),null!==d&&$l(f,T),Zr}function eh(){let s=An();dr()?rs():(s=s.parent,ur(s,!1));const a=s;!function ze(){M.lFrame.elementDepthCount--}();const c=vt();return c.firstCreatePass&&(Mc(c,s),Zo(s)&&c.queries.elementEnd(s)),null!=a.classesWithoutHost&&function ed(s){return 0!=(16&s.flags)}(a)&&w0(c,a,De(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function Ug(s){return 0!=(32&s.flags)}(a)&&w0(c,a,De(),a.stylesWithoutHost,!1),eh}function lp(s,a,c,d){return Zr(s,a,c,d),eh(),lp}function Cu(){return De()}function Da(s){return!!s&&"function"==typeof s.then}function xC(s){return!!s&&"function"==typeof s.subscribe}const MC=xC;function Eu(s,a,c,d){const f=De(),m=vt(),b=An();return function cp(s,a,c,d,f,m,b,D){const E=ll(d),N=s.firstCreatePass&&DC(s),L=a[8],q=wC(a);let ne=!0;if(3&d.type||D){const Qe=mr(d,a),wt=D?D(Qe):Qe,kt=q.length,Oe=D?bn=>D(ei(bn[d.index])):d.index;let Mt=null;if(!D&&E&&(Mt=function rA(s,a,c,d){const f=s.cleanup;if(null!=f)for(let m=0;m<f.length-1;m+=2){const b=f[m];if(b===c&&f[m+1]===d){const D=a[7],E=f[m+2];return D.length>E?D[E]:null}"string"==typeof b&&(m+=2)}return null}(s,a,f,d.index)),null!==Mt)(Mt.__ngLastListenerFn__||Mt).__ngNextListenerFn__=m,Mt.__ngLastListenerFn__=m,ne=!1;else{m=C0(d,a,L,m,!1);const bn=c.listen(wt,f,m);q.push(m,bn),N&&N.push(f,Oe,kt,kt+1)}}else m=C0(d,a,L,m,!1);const ve=d.outputs;let je;if(ne&&null!==ve&&(je=ve[f])){const Qe=je.length;if(Qe)for(let wt=0;wt<Qe;wt+=2){const Hn=a[je[wt]][je[wt+1]].subscribe(m),Mu=q.length;q.push(m,Hn),N&&N.push(f,d.index,Mu,-(Mu+1))}}}(m,f,f[11],b,s,a,0,d),Eu}function nh(s,a,c,d){try{return!1!==c(d)}catch(f){return ql(s,f),!1}}function C0(s,a,c,d,f){return function m(b){if(b===Function)return d;tp(2&s.flags?Qt(s.index,a):a);let E=nh(a,0,d,b),T=m.__ngNextListenerFn__;for(;T;)E=nh(a,0,T,b)&&E,T=T.__ngNextListenerFn__;return f&&!1===E&&(b.preventDefault(),b.returnValue=!1),E}}function up(s=1){return function ml(s){return(M.lFrame.contextLView=function sf(s,a){for(;s>0;)a=a[15],s--;return a}(s,M.lFrame.contextLView))[8]}(s)}function Iu(s,a){let c=null;const d=function fP(s){const a=s.attrs;if(null!=a){const c=a.indexOf(5);if(0==(1&c))return a[c+1]}return null}(s);for(let f=0;f<a.length;f++){const m=a[f];if("*"!==m){if(null===d?zf(s,m,!0):CS(d,m))return f}else c=f}return c}function Wm(s){const a=De()[16][6];if(!a.projection){const d=a.projection=ea(s?s.length:1,null),f=d.slice();let m=a.child;for(;null!==m;){const b=s?Iu(m,s):0;null!==b&&(f[b]?f[b].projectionNext=m:d[b]=m,f[b]=m),m=m.next}}}function RC(s,a=0,c){const d=De(),f=vt(),m=Gd(f,22+s,16,null,c||null);null===m.projection&&(m.projection=a),rs(),64!=(64&m.flags)&&function xr(s,a,c){ua(a[11],0,a,c,Sd(s,c,a),kf(c.parent||a[6],c,a))}(f,d,m)}function Vn(s,a,c){return ps(s,"",a,"",c),Vn}function ps(s,a,c,d,f){const m=De(),b=wa(m,a,c,d);return b!==$t&&cs(vt(),jn(),m,s,b,m[11],f,!1),ps}function kC(s,a,c,d,f){const m=s[c+1],b=null===a;let D=d?Yi(m):To(m),E=!1;for(;0!==D&&(!1===E||b);){const N=s[D+1];sA(s[D],a)&&(E=!0,s[D+1]=d?Mm(N):_u(N)),D=d?Yi(N):To(N)}E&&(s[c+1]=d?_u(m):Mm(m))}function sA(s,a){return null===s||null==a||(Array.isArray(s)?s[1]:s)===a||!(!Array.isArray(s)||"string"!=typeof a)&&Il(s,a)>=0}const Ji={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function FC(s){return s.substring(Ji.key,Ji.keyEnd)}function LC(s,a){const c=Ji.textEnd;return c===a?-1:(a=Ji.keyEnd=function lA(s,a,c){for(;a<c&&s.charCodeAt(a)>32;)a++;return a}(s,Ji.key=a,c),rh(s,a,c))}function rh(s,a,c){for(;a<c&&s.charCodeAt(a)<=32;)a++;return a}function Qm(s,a,c){return No(s,a,c,!1),Qm}function sh(s,a){return No(s,a,null,!0),sh}function A0(s){!function xo(s,a,c,d){const f=vt(),m=Qo(2);f.firstUpdatePass&&Jm(f,null,m,d);const b=De();if(c!==$t&&_r(b,m,c)){const D=f.data[Vi()];if(HC(D,d)&&!N0(f,m)){let E=d?D.classesWithoutHost:D.stylesWithoutHost;null!==E&&(c=he(E,c||"")),w0(f,D,b,c,d)}else!function gA(s,a,c,d,f,m,b,D){f===$t&&(f=Nt);let E=0,T=0,N=0<f.length?f[0]:null,L=0<m.length?m[0]:null;for(;null!==N||null!==L;){const q=E<f.length?f[E+1]:void 0,ne=T<m.length?m[T+1]:void 0;let je,ve=null;N===L?(E+=2,T+=2,q!==ne&&(ve=L,je=ne)):null===L||null!==N&&N<L?(E+=2,ve=N):(T+=2,ve=L,je=ne),null!==ve&&O0(s,a,c,d,ve,je,b,D),N=E<f.length?f[E]:null,L=T<m.length?m[T]:null}}(f,D,b,b[11],b[m+1],b[m+1]=function x0(s,a,c){if(null==c||""===c)return Nt;const d=[],f=ki(c);if(Array.isArray(f))for(let m=0;m<f.length;m++)s(d,f[m],!0);else if("object"==typeof f)for(const m in f)f.hasOwnProperty(m)&&s(d,m,f[m]);else"string"==typeof f&&a(d,f);return d}(s,a,c),d,m)}}(at,Ao,s,!0)}function Ao(s,a){for(let c=function aA(s){return function UC(s){Ji.key=0,Ji.keyEnd=0,Ji.value=0,Ji.valueEnd=0,Ji.textEnd=s.length}(s),LC(s,rh(s,0,Ji.textEnd))}(a);c>=0;c=LC(a,c))at(s,FC(a),!0)}function No(s,a,c,d){const f=De(),m=vt(),b=Qo(2);m.firstUpdatePass&&Jm(m,s,b,d),a!==$t&&_r(f,b,a)&&O0(m,m.data[Vi()],f,f[11],s,f[b+1]=function mA(s,a){return null==s||("string"==typeof a?s+=a:"object"==typeof s&&(s=ye(ki(s)))),s}(a,c),d,b)}function N0(s,a){return a>=s.expandoStartIndex}function Jm(s,a,c,d){const f=s.data;if(null===f[c+1]){const m=f[Vi()],b=N0(s,c);HC(m,d)&&null===a&&!b&&(a=!1),a=function dA(s,a,c,d){const f=function Ac(s){const a=M.lFrame.currentDirectiveIndex;return-1===a?null:s[a]}(s);let m=d?a.residualClasses:a.residualStyles;if(null===f)0===(d?a.classBindings:a.styleBindings)&&(c=Xl(c=Xm(null,s,a,c,d),a.attrs,d),m=null);else{const b=a.directiveStylingLast;if(-1===b||s[b]!==f)if(c=Xm(f,s,a,c,d),null===m){let E=function hA(s,a,c){const d=c?a.classBindings:a.styleBindings;if(0!==To(d))return s[Yi(d)]}(s,a,d);void 0!==E&&Array.isArray(E)&&(E=Xm(null,s,a,E[1],d),E=Xl(E,a.attrs,d),function fA(s,a,c,d){s[Yi(c?a.classBindings:a.styleBindings)]=d}(s,a,d,E))}else m=function pA(s,a,c){let d;const f=a.directiveEnd;for(let m=1+a.directiveStylingLast;m<f;m++)d=Xl(d,s[m].hostAttrs,c);return Xl(d,a.attrs,c)}(s,a,d)}return void 0!==m&&(d?a.residualClasses=m:a.residualStyles=m),c}(f,m,a,d),function PC(s,a,c,d,f,m){let b=m?a.classBindings:a.styleBindings,D=Yi(b),E=To(b);s[d]=c;let N,T=!1;if(Array.isArray(c)){const L=c;N=L[1],(null===N||Il(L,N)>0)&&(T=!0)}else N=c;if(f)if(0!==E){const q=Yi(s[D+1]);s[d+1]=Io(q,D),0!==q&&(s[q+1]=xm(s[q+1],d)),s[D+1]=function MS(s,a){return 131071&s|a<<17}(s[D+1],d)}else s[d+1]=Io(D,0),0!==D&&(s[D+1]=xm(s[D+1],d)),D=d;else s[d+1]=Io(E,0),0===D?D=d:s[E+1]=xm(s[E+1],d),E=d;T&&(s[d+1]=_u(s[d+1])),kC(s,N,d,!0),kC(s,N,d,!1),function Ym(s,a,c,d,f){const m=f?s.residualClasses:s.residualStyles;null!=m&&"string"==typeof a&&Il(m,a)>=0&&(c[d+1]=Mm(c[d+1]))}(a,N,s,d,m),b=Io(D,E),m?a.classBindings=b:a.styleBindings=b}(f,m,a,c,b,d)}}function Xm(s,a,c,d,f){let m=null;const b=c.directiveEnd;let D=c.directiveStylingLast;for(-1===D?D=c.directiveStart:D++;D<b&&(m=a[D],d=Xl(d,m.hostAttrs,f),m!==s);)D++;return null!==s&&(c.directiveStylingLast=D),d}function Xl(s,a,c){const d=c?1:2;let f=-1;if(null!==a)for(let m=0;m<a.length;m++){const b=a[m];"number"==typeof b?f=b:f===d&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),at(s,b,!!c||a[++m]))}return void 0===s?null:s}function O0(s,a,c,d,f,m,b,D){if(!(3&a.type))return;const E=s.data,T=E[D+1];t_(function Qi(s){return 1==(1&s)}(T)?e_(E,a,c,f,To(T),b):void 0)||(t_(m)||function jl(s){return 2==(2&s)}(T)&&(m=e_(E,null,c,f,D,b)),function Cv(s,a,c,d,f){if(a)f?s.addClass(c,d):s.removeClass(c,d);else{let m=-1===d.indexOf("-")?void 0:Es.DashCase;null==f?s.removeStyle(c,d,m):("string"==typeof f&&f.endsWith("!important")&&(f=f.slice(0,-10),m|=Es.Important),s.setStyle(c,d,f,m))}}(d,b,lo(Vi(),c),f,m))}function e_(s,a,c,d,f,m){const b=null===a;let D;for(;f>0;){const E=s[f],T=Array.isArray(E),N=T?E[1]:E,L=null===N;let q=c[f+1];q===$t&&(q=L?Nt:void 0);let ne=L?bf(q,d):N===d?q:void 0;if(T&&!t_(ne)&&(ne=bf(E,d)),t_(ne)&&(D=ne,b))return D;const ve=s[f+1];f=b?Yi(ve):To(ve)}if(null!==a){let E=m?a.residualClasses:a.residualStyles;null!=E&&(D=bf(E,d))}return D}function t_(s){return void 0!==s}function HC(s,a){return 0!=(s.flags&(a?16:32))}function GC(s,a=""){const c=De(),d=vt(),f=s+22,m=d.firstCreatePass?Gd(d,f,1,a,null):d.data[f],b=c[f]=Id(c[11],a);Md(d,c,b,m),ur(m,!1)}function R0(s){return n_("",s,""),R0}function n_(s,a,c){const d=De(),f=wa(d,s,a,c);return f!==$t&&Js(d,Vi(),f),n_}function P0(s,a,c,d,f){const m=De(),b=function Kd(s,a,c,d,f,m){const D=eo(s,Zs(),c,f);return Qo(2),D?a+be(c)+d+be(f)+m:$t}(m,s,a,c,d,f);return b!==$t&&Js(m,Vi(),b),P0}function F0(s,a,c,d,f,m,b,D,E){const T=De(),N=Yd(T,s,a,c,d,f,m,b,D,E);return N!==$t&&Js(T,Vi(),N),F0}function o_(s,a,c){const d=De();return _r(d,Ra(),a)&&cs(vt(),jn(),d,s,a,d[11],c,!0),o_}const el=void 0;var IA=["en",[["a","p"],["AM","PM"],el],[["AM","PM"],el,el],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],el,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],el,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",el,"{1} 'at' {0}",el],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function a_(s){const c=Math.floor(Math.abs(s)),d=s.toString().replace(/^[^.]*\.?/,"").length;return 1===c&&0===d?1:5}];let Mo={};function l_(s){const a=function H0(s){return s.toLowerCase().replace(/_/g,"-")}(s);let c=gp(a);if(c)return c;const d=a.split("-")[0];if(c=gp(d),c)return c;if("en"===d)return IA;throw new Se(701,!1)}function ah(s){return l_(s)[Rt.PluralCase]}function gp(s){return s in Mo||(Mo[s]=Vt.ng&&Vt.ng.common&&Vt.ng.common.locales&&Vt.ng.common.locales[s]),Mo[s]}var Rt=(()=>((Rt=Rt||{})[Rt.LocaleId=0]="LocaleId",Rt[Rt.DayPeriodsFormat=1]="DayPeriodsFormat",Rt[Rt.DayPeriodsStandalone=2]="DayPeriodsStandalone",Rt[Rt.DaysFormat=3]="DaysFormat",Rt[Rt.DaysStandalone=4]="DaysStandalone",Rt[Rt.MonthsFormat=5]="MonthsFormat",Rt[Rt.MonthsStandalone=6]="MonthsStandalone",Rt[Rt.Eras=7]="Eras",Rt[Rt.FirstDayOfWeek=8]="FirstDayOfWeek",Rt[Rt.WeekendRange=9]="WeekendRange",Rt[Rt.DateFormat=10]="DateFormat",Rt[Rt.TimeFormat=11]="TimeFormat",Rt[Rt.DateTimeFormat=12]="DateTimeFormat",Rt[Rt.NumberSymbols=13]="NumberSymbols",Rt[Rt.NumberFormats=14]="NumberFormats",Rt[Rt.CurrencyCode=15]="CurrencyCode",Rt[Rt.CurrencySymbol=16]="CurrencySymbol",Rt[Rt.CurrencyName=17]="CurrencyName",Rt[Rt.Currencies=18]="Currencies",Rt[Rt.Directionality=19]="Directionality",Rt[Rt.PluralCase=20]="PluralCase",Rt[Rt.ExtraData=21]="ExtraData",Rt))();const AA=["zero","one","two","few","many"],lh="en-US",c_={marker:"element"},ch={marker:"ICU"};var di=(()=>((di=di||{})[di.SHIFT=2]="SHIFT",di[di.APPEND_EAGERLY=1]="APPEND_EAGERLY",di[di.COMMENT=2]="COMMENT",di))();let G0=lh;function n1(s){(function Lt(s,a){null==s&&Ke(a,s,null,"!=")})(s,"Expected localeId to be defined"),"string"==typeof s&&(G0=s.toLowerCase().replace(/_/g,"-"))}function $0(s,a,c){const d=a.insertBeforeIndex,f=Array.isArray(d)?d[0]:d;return null===f?ou(s,0,c):ei(c[f])}function u_(s,a,c,d,f){const m=a.insertBeforeIndex;if(Array.isArray(m)){let b=d,D=null;if(3&a.type||(D=b,b=f),null!==b&&0==(2&a.flags))for(let E=1;E<m.length;E++)wo(s,b,c[m[E]],D,!1)}}function d_(s,a){if(s.push(a),s.length>1)for(let c=s.length-2;c>=0;c--){const d=s[c];h_(d)||f_(d,a)&&null===Tu(d)&&Z0(d,a.index)}}function h_(s){return!(64&s.type)}function f_(s,a){return h_(a)||s.index>a.index}function Tu(s){const a=s.insertBeforeIndex;return Array.isArray(a)?a[0]:a}function Z0(s,a){const c=s.insertBeforeIndex;Array.isArray(c)?c[0]=a:(xd($0,u_),s.insertBeforeIndex=a)}function uh(s,a){const c=s.data[a];return null===c||"string"==typeof c?null:c.hasOwnProperty("currentCaseLViewIndex")?c:c.value}function i1(s,a,c){const d=Qv(s,c,64,null,null);return d_(a,d),d}function g_(s,a){const c=a[s.currentCaseLViewIndex];return null===c?c:c<0?~c:c}function dh(s){return s>>>17}function m_(s){return(131070&s)>>>1}let _p=0,Su=0;function hh(s,a,c,d){const f=c[11];let b,m=null;for(let D=0;D<a.length;D++){const E=a[D];if("string"==typeof E){const T=a[++D];null===c[T]&&(c[T]=Id(f,E))}else if("number"==typeof E)switch(1&E){case 0:const T=dh(E);let N,L;if(null===m&&(m=T,b=fr(f,d)),T===m?(N=d,L=b):(N=null,L=ei(c[T])),null!==L){const je=m_(E);wo(f,L,c[je],N,!1);const wt=uh(s,je);if(null!==wt&&"object"==typeof wt){const kt=g_(wt,c);null!==kt&&hh(s,wt.create[kt],c,c[wt.anchorIdx])}}break;case 1:const ne=a[++D],ve=a[++D];jm(f,lo(E>>>1,c),null,null,ne,ve,null)}else switch(E){case ch:const T=a[++D],N=a[++D];null===c[N]&&Bi(c[N]=bo(f,T),c);break;case c_:const L=a[++D],q=a[++D];null===c[q]&&Bi(c[q]=Rl(f,L,null),c)}}}function Oo(s,a,c,d,f){for(let m=0;m<c.length;m++){const b=c[m],D=c[++m];if(b&f){let E="";for(let T=m+1;T<=m+D;T++){const N=c[T];if("string"==typeof N)E+=N;else if("number"==typeof N)if(N<0)E+=be(a[d-N]);else{const L=N>>>2;switch(3&N){case 1:const q=c[++T],ne=c[++T],ve=s.data[L];"string"==typeof ve?jm(a[11],a[L],null,ve,q,E,ne):cs(s,ve,a,q,E,a[11],ne,!1);break;case 0:const je=a[L];null!==je&&xf(a[11],je,E);break;case 2:PA(s,uh(s,L),a,E);break;case 3:fh(s,uh(s,L),d,a)}}}}else{const E=c[m+1];if(E>0&&3==(3&E)){const N=uh(s,E>>>2);a[N.currentCaseLViewIndex]<0&&fh(s,N,d,a)}}m+=D}}function fh(s,a,c,d){let f=d[a.currentCaseLViewIndex];if(null!==f){let m=_p;f<0&&(f=d[a.currentCaseLViewIndex]=~f,m=-1),Oo(s,d,a.update[f],c,m)}}function PA(s,a,c,d){const f=function q0(s,a){let c=s.cases.indexOf(a);if(-1===c)switch(s.type){case 1:{const d=function mp(s,a){const c=ah(a)(parseInt(s,10)),d=AA[c];return void 0!==d?d:"other"}(a,function xA(){return G0}());c=s.cases.indexOf(d),-1===c&&"other"!==d&&(c=s.cases.indexOf("other"));break}case 0:c=s.cases.indexOf("other")}return-1===c?null:c}(a,d);if(g_(a,c)!==f&&(W0(s,a,c),c[a.currentCaseLViewIndex]=null===f?null:~f,null!==f)){const b=c[a.anchorIdx];b&&hh(s,a.create[f],c,b)}}function W0(s,a,c){let d=g_(a,c);if(null!==d){const f=a.remove[d];for(let m=0;m<f.length;m++){const b=f[m];if(b>0){const D=lo(b,c);null!==D&&Rd(c[11],D)}else W0(s,uh(s,~b),c)}}}function yp(){const s=[];let c,d,a=-1;function m(D,E){a=0;const T=g_(D,E);d=null!==T?D.remove[T]:Nt}function b(){if(a<d.length){const D=d[a++];return D>0?c[D]:(s.push(a,d),m(c[1].data[~D],c),b())}return 0===s.length?null:(d=s.pop(),a=s.pop(),b())}return function f(D,E){for(c=E;s.length;)s.pop();return m(D.value,E),b}}const Au=/\ufffd(\d+):?\d*\ufffd/gi,Ts=/\ufffd(\d+)\ufffd/,z0=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,l1=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,FA=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,LA=/\uE500/g;function ph(s,a,c,d,f,m,b){const D=$d(s,d,1,null);let E=D<<di.SHIFT,T=$s();a===T&&(T=null),null===T&&(E|=di.APPEND_EAGERLY),b&&(E|=di.COMMENT,function Xg(s){void 0===Cd&&(Cd=s())}(yp)),f.push(E,null===m?"":m);const N=Qv(s,D,b?32:1,null===m?"":m,null);d_(c,N);const L=N.index;return ur(N,!1),null!==T&&a!==T&&function p_(s,a){let c=s.insertBeforeIndex;null===c?(xd($0,u_),c=s.insertBeforeIndex=[null,a]):(function Ce(s,a,c){s!=a&&Ke(c,s,a,"==")}(Array.isArray(c),!0,"Expecting array here"),c.push(a))}(T,L),N}function u1(s,a,c,d,f,m,b){const D=b.match(Au),E=ph(s,a,c,m,d,D?null:b,!1);D&&bp(f,b,E.index,null,0,null)}function bp(s,a,c,d,f,m){const b=s.length,D=b+1;s.push(null,null);const E=b+2,T=a.split(Au);let N=0;for(let L=0;L<T.length;L++){const q=T[L];if(1&L){const ne=f+parseInt(q,10);s.push(-1-ne),N|=wp(ne)}else""!==q&&s.push(q)}return s.push(c<<2|(d?1:0)),d&&s.push(d,m),s[b]=N,s[D]=s.length-E,N}function wp(s){return 1<<Math.min(s,31)}function v_(s){let a,m,c="",d=0,f=!1;for(;null!==(a=l1.exec(s));)f?a[0]===`\ufffd/*${m}\ufffd`&&(d=a.index,f=!1):(c+=s.substring(d,a.index+a[0].length),m=a[1],f=!0);return c+=s.slice(d),c}function h1(s,a,c,d,f,m){let b=0;const D={type:f.type,currentCaseLViewIndex:$d(s,a,1,null),anchorIdx:m,cases:[],create:[],remove:[],update:[]};(function g1(s,a,c){s.push(wp(a.mainBinding),2,-1-a.mainBinding,c<<2|2)})(c,f,m),function MA(s,a,c){const d=s.data[a];null===d?s.data[a]=c:d.value=c}(s,m,D);const E=f.values;for(let T=0;T<E.length;T++){const N=E[T],L=[];for(let q=0;q<N.length;q++){const ne=N[q];if("string"!=typeof ne){const ve=L.push(ne)-1;N[q]=`\x3c!--\ufffd${ve}\ufffd--\x3e`}}b=HA(s,D,a,c,d,f.cases[T],N.join(""),L)|b}b&&function GA(s,a,c){s.push(a,1,c<<2|3)}(c,b,m)}function jA(s){const a=[],c=[];let d=1,f=0;const m=b_(s=s.replace(z0,function(b,D,E){return d="select"===E?0:1,f=parseInt(D.slice(1),10),""}));for(let b=0;b<m.length;){let D=m[b++].trim();1===d&&(D=D.replace(/\s*(?:=)?(\w+)\s*/,"$1")),D.length&&a.push(D);const E=b_(m[b++]);a.length>c.length&&c.push(E)}return{type:d,mainBinding:f,cases:a,values:c}}function b_(s){if(!s)return[];let a=0;const c=[],d=[],f=/[{}]/g;let m;for(f.lastIndex=0;m=f.exec(s);){const D=m.index;if("}"==m[0]){if(c.pop(),0==c.length){const E=s.substring(a,D);z0.test(E)?d.push(jA(E)):d.push(E),a=D+1}}else{if(0==c.length){const E=s.substring(a,D);d.push(E),a=D+1}c.push("{")}}const b=s.substring(a);return d.push(b),d}function HA(s,a,c,d,f,m,b,D){const E=[],T=[],N=[];a.cases.push(m),a.create.push(E),a.remove.push(T),a.update.push(N);const q=function fa(s){const a=new hm(s);return function Iv(){try{return!!(new window.DOMParser).parseFromString(ha(""),"text/html")}catch{return!1}}()?new Wa(a):a}(function p(){return void 0!==Bf?Bf:typeof document<"u"?document:void 0}()).getInertBodyElement(b),ne=function pm(s){return"content"in s&&function zT(s){return s.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===s.nodeName}(s)?s.content:null}(q)||q;return ne?f1(s,a,c,d,E,T,N,ne,f,D,0):0}function f1(s,a,c,d,f,m,b,D,E,T,N){let L=0,q=D.firstChild;for(;q;){const ne=$d(s,c,1,null);switch(q.nodeType){case Node.ELEMENT_NODE:const ve=q,je=ve.tagName.toLowerCase();if(Hf.hasOwnProperty(je)){nc(f,c_,je,E,ne),s.data[ne]=je;const Oe=ve.attributes;for(let Mt=0;Mt<Oe.length;Mt++){const bn=Oe.item(Mt),Hn=bn.name.toLowerCase();bn.value.match(Au)?wD.hasOwnProperty(Hn)&&bp(b,bn.value,ne,bn.name,0,kd[Hn]?za:null):ic(f,ne,bn)}L=f1(s,a,c,d,f,m,b,q,ne,T,N+1)|L,p1(m,ne,N)}break;case Node.TEXT_NODE:const Qe=q.textContent||"",wt=Qe.match(Au);nc(f,null,wt?"":Qe,E,ne),p1(m,ne,N),wt&&(L=bp(b,Qe,ne,null,0,null)|L);break;case Node.COMMENT_NODE:const kt=Ts.exec(q.textContent||"");if(kt){const Mt=T[parseInt(kt[1],10)];nc(f,ch,"",E,ne),h1(s,c,d,E,Mt,ne),Y0(m,ne,N)}}q=q.nextSibling}return L}function p1(s,a,c){0===c&&s.push(a)}function Y0(s,a,c){0===c&&(s.push(~a),s.push(a))}function nc(s,a,c,d,f){null!==a&&s.push(a),s.push(c,f,function OA(s,a,c){return s|a<<17|c<<1}(0,d,f))}function ic(s,a,c){s.push(a<<1|1,c.name,c.value)}function Dp(s,a,c=-1){const d=vt(),f=De(),m=22+s,b=vs(d.consts,a),D=$s();d.firstCreatePass&&function c1(s,a,c,d,f,m){const b=$s(),D=[],E=[],T=[[]];f=function BA(s,a){if(function UA(s){return-1===s}(a))return v_(s);{const c=s.indexOf(`:${a}\ufffd`)+2+a.toString().length,d=s.search(new RegExp(`\ufffd\\/\\*\\d+:${a}\ufffd`));return v_(s.substring(c,d))}}(f,m);const N=function VA(s){return s.replace(LA," ")}(f).split(FA);for(let L=0;L<N.length;L++){let q=N[L];if(0==(1&L)){const ne=b_(q);for(let ve=0;ve<ne.length;ve++){let je=ne[ve];if(0==(1&ve)){const Qe=je;""!==Qe&&u1(s,b,T[0],D,E,c,Qe)}else{const Qe=je;if("object"!=typeof Qe)throw new Error(`Unable to parse ICU expression in "${f}" message.`);h1(s,c,E,a,Qe,ph(s,b,T[0],c,D,"",!0).index)}}}else{const ne=47===q.charCodeAt(0),je=(q.charCodeAt(ne?1:0),22+Number.parseInt(q.substring(ne?2:1)));if(ne)T.shift(),ur($s(),!1);else{const Qe=i1(s,T[0],je);T.unshift([]),ur(Qe,!0)}}}s.data[d]={create:D,update:E}}(d,null===D?0:D.index,f,m,b,c);const E=d.data[m],N=Ad(d,D===f[6]?null:D,f);(function RA(s,a,c,d){const f=s[11];for(let m=0;m<a.length;m++){const b=a[m++],D=a[m],E=(b&di.COMMENT)===di.COMMENT,T=(b&di.APPEND_EAGERLY)===di.APPEND_EAGERLY,N=b>>>di.SHIFT;let L=s[N];null===L&&(L=s[N]=E?f.createComment(D):Id(f,D)),T&&null!==c&&wo(f,c,L,d,!1)}})(f,E.create,N,D&&8&D.type?f[D.index]:null),ef(!0)}function C_(s,a,c){Dp(s,a,c),function D_(){ef(!1)}()}function J0(s){return function __(s){s&&(_p|=1<<Math.min(Su,31)),Su++}(_r(De(),Ra(),s)),J0}function E_(s){!function s1(s,a,c){if(Su>0){const d=s.data[c];Oo(s,a,Array.isArray(d)?d:d.update,Zs()-Su-1,_p)}_p=0,Su=0}(vt(),De(),s+22)}function X0(s,a,c,d,f){if(s=J(s),Array.isArray(s))for(let m=0;m<s.length;m++)X0(s[m],a,c,d,f);else{const m=vt(),b=De();let D=du(s)?s:J(s.provide),E=MD(s);const T=An(),N=1048575&T.providerIndexes,L=T.directiveStart,q=T.providerIndexes>>20;if(du(s)||!s.multi){const ne=new Xo(E,f,Hd),ve=Cp(D,a,f?N:N+q,L);-1===ve?(yl(Bc(T,b),m,D),I_(m,s,a.length),a.push(D),T.directiveStart++,T.directiveEnd++,f&&(T.providerIndexes+=1048576),c.push(ne),b.push(ne)):(c[ve]=ne,b[ve]=ne)}else{const ne=Cp(D,a,N+q,L),ve=Cp(D,a,N,N+q),je=ne>=0&&c[ne],Qe=ve>=0&&c[ve];if(f&&!Qe||!f&&!je){yl(Bc(T,b),m,D);const wt=function rc(s,a,c,d,f){const m=new Xo(s,c,Hd);return m.multi=[],m.index=a,m.componentProviders=0,eb(m,f,d&&!c),m}(f?gs:w1,c.length,f,d,E);!f&&Qe&&(c[ve].providerFactory=wt),I_(m,s,a.length,0),a.push(D),T.directiveStart++,T.directiveEnd++,f&&(T.providerIndexes+=1048576),c.push(wt),b.push(wt)}else I_(m,s,ne>-1?ne:ve,eb(c[f?ve:ne],E,!f&&d));!f&&d&&Qe&&c[ve].componentProviders++}}}function I_(s,a,c,d){const f=du(a),m=function tS(s){return!!s.useClass}(a);if(f||m){const E=(m?J(a.useClass):a).prototype.ngOnDestroy;if(E){const T=s.destroyHooks||(s.destroyHooks=[]);if(!f&&a.multi){const N=T.indexOf(c);-1===N?T.push(c,[d,E]):T[N+1].push(d,E)}else T.push(c,E)}}}function eb(s,a,c){return c&&s.componentProviders++,s.multi.push(a)-1}function Cp(s,a,c,d){for(let f=c;f<d;f++)if(a[f]===s)return f;return-1}function w1(s,a,c,d){return mh(this.multi,[])}function gs(s,a,c,d){const f=this.multi;let m;if(this.providerFactory){const b=this.providerFactory.componentProviders,D=Fa(c,c[1],this.providerFactory.index,d);m=D.slice(0,b),mh(f,m);for(let E=b;E<D.length;E++)m.push(D[E])}else m=[],mh(f,m);return m}function mh(s,a){for(let c=0;c<s.length;c++)a.push((0,s[c])());return a}function Ep(s,a=[]){return c=>{c.providersResolver=(d,f)=>function b1(s,a,c){const d=vt();if(d.firstCreatePass){const f=lr(s);X0(c,d.data,d.blueprint,f,!0),X0(a,d.data,d.blueprint,f,!1)}}(d,f?f(s):s,a)}}class yr{}class sc{}function D1(s,a){return new oc(s,a??null)}class oc extends yr{constructor(a,c){super(),this._parent=c,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Is(this);const d=ut(a);this._bootstrapComponents=pa(d.bootstrap),this._r3Injector=WD(a,c,[{provide:yr,useValue:this},{provide:Ll,useValue:this.componentFactoryResolver}],ye(a),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(a)}get injector(){return this._r3Injector}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(c=>c()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class C1 extends sc{constructor(a){super(),this.moduleType=a}create(a){return new oc(this.moduleType,a)}}class KA extends yr{constructor(a,c,d){super(),this.componentFactoryResolver=new Is(this),this.instance=null;const f=new Rv([...a,{provide:yr,useValue:this},{provide:Ll,useValue:this.componentFactoryResolver}],c||Zf(),d,new Set(["environment"]));this.injector=f,f.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(a){this.injector.onDestroy(a)}}function tb(s,a,c=null){return new KA(s,a,c).injector}let nb=(()=>{class s{constructor(c){this._injector=c,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(c){if(!c.standalone)return null;if(!this.cachedInjectors.has(c.id)){const d=SD(0,c.type),f=d.length>0?tb([d],this._injector,`Standalone[${c.type.name}]`):null;this.cachedInjectors.set(c.id,f)}return this.cachedInjectors.get(c.id)}ngOnDestroy(){try{for(const c of this.cachedInjectors.values())null!==c&&c.destroy()}finally{this.cachedInjectors.clear()}}}return s.\u0275prov=nn({token:s,providedIn:"environment",factory:()=>new s(cn(Fl))}),s})();function E1(s){s.getStandaloneInjector=a=>a.get(nb).getOrCreateStandaloneInjector(s)}function M1(s,a,c,d){return P1(De(),pi(),s,a,c,d)}function O1(s,a,c,d,f){return function k1(s,a,c,d,f,m,b){const D=a+c;return eo(s,D,f,m)?ba(s,D+2,b?d.call(b,f,m):d(f,m)):Sp(s,D+2)}(De(),pi(),s,a,c,d,f)}function R1(s,a,c,d,f,m){return function F1(s,a,c,d,f,m,b,D){const E=a+c;return function zl(s,a,c,d,f){const m=eo(s,a,c,d);return _r(s,a+2,f)||m}(s,E,f,m,b)?ba(s,E+3,D?d.call(D,f,m,b):d(f,m,b)):Sp(s,E+3)}(De(),pi(),s,a,c,d,f,m)}function Sp(s,a){const c=s[a];return c===$t?void 0:c}function P1(s,a,c,d,f,m){const b=a+c;return _r(s,b,f)?ba(s,b+1,m?d.call(m,f):d(f)):Sp(s,b+1)}function U1(s,a){const c=vt();let d;const f=s+22;c.firstCreatePass?(d=function ko(s,a){if(a)for(let c=a.length-1;c>=0;c--){const d=a[c];if(s===d.name)return d}}(a,c.pipeRegistry),c.data[f]=d,d.onDestroy&&(c.destroyHooks||(c.destroyHooks=[])).push(f,d.onDestroy)):d=c.data[f];const m=d.factory||(d.factory=is(d.type)),b=kn(Hd);try{const D=id(!1),E=m();return id(D),function nA(s,a,c,d){c>=s.data.length&&(s.data[c]=null,s.blueprint[c]=null),a[c]=d}(c,De(),f,E),E}finally{kn(b)}}function T_(s,a,c){const d=s+22,f=De(),m=co(f,d);return function Ap(s,a){return s[1].data[a].pure}(f,d)?P1(f,pi(),a,m.transform,c,m):m.transform(c)}function ab(s){return a=>{setTimeout(s,void 0,a)}}const Fo=class aN extends l.x{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,c,d){let f=a,m=c||(()=>null),b=d;if(a&&"object"==typeof a){const E=a;f=E.next?.bind(E),m=E.error?.bind(E),b=E.complete?.bind(E)}this.__isAsync&&(m=ab(m),f&&(f=ab(f)),b&&(b=ab(b)));const D=super.subscribe({next:f,error:m,complete:b});return a instanceof X.w0&&a.add(D),D}};function lN(){return this._results[So()]()}class lb{constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const c=So(),d=lb.prototype;d[c]||(d[c]=lN)}get changes(){return this._changes||(this._changes=new Fo)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,c){return this._results.reduce(a,c)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,c){const d=this;d.dirty=!1;const f=wn(a);(this._changesDetected=!function Wn(s,a,c){if(s.length!==a.length)return!1;for(let d=0;d<s.length;d++){let f=s[d],m=a[d];if(c&&(f=c(f),m=c(m)),m!==f)return!1}return!0}(d._results,f,c))&&(d._results=f,d.length=f.length,d.last=f[this.length-1],d.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let S_=(()=>{class s{}return s.__NG_ELEMENT_ID__=uN,s})();const H1=S_,cN=class extends H1{constructor(a,c,d){super(),this._declarationLView=a,this._declarationTContainer=c,this.elementRef=d}createEmbeddedView(a,c){const d=this._declarationTContainer.tViews,f=ep(this._declarationLView,d,a,16,null,d.declTNode,null,null,null,null,c||null);f[17]=this._declarationLView[this._declarationTContainer.index];const b=this._declarationLView[19];return null!==b&&(f[19]=b.createEmbeddedView(d)),ya(d,f,a),new hs(f)}};function uN(){return A_(An(),De())}function A_(s,a){return 4&s.type?new cN(a,s,Vl(s,a)):null}let N_=(()=>{class s{}return s.__NG_ELEMENT_ID__=dN,s})();function dN(){return fN(An(),De())}const hN=N_,G1=class extends hN{constructor(a,c,d){super(),this._lContainer=a,this._hostTNode=c,this._hostLView=d}get element(){return Vl(this._hostTNode,this._hostLView)}get injector(){return new wl(this._hostTNode,this._hostLView)}get parentInjector(){const a=sd(this._hostTNode,this._hostLView);if(jg(a)){const c=Vc(a,this._hostLView),d=Fc(a);return new wl(c[1].data[d+8],c)}return new wl(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const c=$1(this._lContainer);return null!==c&&c[a]||null}get length(){return this._lContainer.length-10}createEmbeddedView(a,c,d){let f,m;"number"==typeof d?f=d:null!=d&&(f=d.index,m=d.injector);const b=a.createEmbeddedView(c||{},m);return this.insert(b,f),b}createComponent(a,c,d,f,m){const b=a&&!function Sr(s){return"function"==typeof s}(a);let D;if(b)D=c;else{const L=c||{};D=L.index,d=L.injector,f=L.projectableNodes,m=L.environmentInjector||L.ngModuleRef}const E=b?a:new vu(U(a)),T=d||this.parentInjector;if(!m&&null==E.ngModule){const q=(b?T:this.parentInjector).get(Fl,null);q&&(m=q)}const N=E.create(T,f,void 0,m);return this.insert(N.hostView,D),N}insert(a,c){const d=a._lView,f=d[1];if(function Sc(s){return Ri(s[3])}(d)){const N=this.indexOf(a);if(-1!==N)this.detach(N);else{const L=d[3],q=new G1(L,L[6],L[3]);q.detach(q.indexOf(a))}}const m=this._adjustIndex(c),b=this._lContainer;!function ru(s,a,c,d){const f=10+d,m=c.length;d>0&&(c[f-1][4]=a),d<m-10?(a[4]=c[f],Cl(c,10+d,a)):(c.push(a),a[4]=null),a[3]=c;const b=a[17];null!==b&&c!==b&&function wv(s,a){const c=s[9];a[16]!==a[3][3][16]&&(s[2]=!0),null===c?s[9]=[a]:c.push(a)}(b,a);const D=a[19];null!==D&&D.insertView(s),a[2]|=64}(f,d,b,m);const D=au(m,b),E=d[11],T=fr(E,b[7]);return null!==T&&function Td(s,a,c,d,f,m){d[0]=f,d[6]=a,ca(s,d,c,1,f,m)}(f,b[6],E,d,T,D),a.attachToViewContainerRef(),Cl(cb(b),m,a),a}move(a,c){return this.insert(a,c)}indexOf(a){const c=$1(this._lContainer);return null!==c?c.indexOf(a):-1}remove(a){const c=this._adjustIndex(a,-1),d=Of(this._lContainer,c);d&&(ai(cb(this._lContainer),c),sm(d[1],d))}detach(a){const c=this._adjustIndex(a,-1),d=Of(this._lContainer,c);return d&&null!=ai(cb(this._lContainer),c)?new hs(d):null}_adjustIndex(a,c=0){return a??this.length+c}};function $1(s){return s[8]}function cb(s){return s[8]||(s[8]=[])}function fN(s,a){let c;const d=a[s.index];if(Ri(d))c=d;else{let f;if(8&s.type)f=ei(d);else{const m=a[11];f=m.createComment("");const b=mr(s,a);wo(m,fr(m,b),f,function Za(s,a){return s.nextSibling(a)}(m,b),!1)}a[s.index]=c=vC(d,a,f,s),va(a,c)}return new G1(c,s,a)}class ub{constructor(a){this.queryList=a,this.matches=null}clone(){return new ub(this.queryList)}setDirty(){this.queryList.setDirty()}}class x_{constructor(a=[]){this.queries=a}createEmbeddedView(a){const c=a.queries;if(null!==c){const d=null!==a.contentQueries?a.contentQueries[0]:c.length,f=[];for(let m=0;m<d;m++){const b=c.getByIndex(m);f.push(this.queries[b.indexInDeclarationView].clone())}return new x_(f)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let c=0;c<this.queries.length;c++)null!==M_(a,c).matches&&this.queries[c].setDirty()}}class Z1{constructor(a,c,d=null){this.predicate=a,this.flags=c,this.read=d}}class db{constructor(a=[]){this.queries=a}elementStart(a,c){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(a,c)}elementEnd(a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementEnd(a)}embeddedTView(a){let c=null;for(let d=0;d<this.length;d++){const f=null!==c?c.length:0,m=this.getByIndex(d).embeddedTView(a,f);m&&(m.indexInDeclarationView=d,null!==c?c.push(m):c=[m])}return null!==c?new db(c):null}template(a,c){for(let d=0;d<this.queries.length;d++)this.queries[d].template(a,c)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class hb{constructor(a,c=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=c}elementStart(a,c){this.isApplyingToNode(c)&&this.matchTNode(a,c)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,c){this.elementStart(a,c)}embeddedTView(a,c){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,c),new hb(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const c=this._declarationNodeIndex;let d=a.parent;for(;null!==d&&8&d.type&&d.index!==c;)d=d.parent;return c===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(a,c){const d=this.metadata.predicate;if(Array.isArray(d))for(let f=0;f<d.length;f++){const m=d[f];this.matchTNodeWithReadOption(a,c,gN(c,m)),this.matchTNodeWithReadOption(a,c,bl(c,a,m,!1,!1))}else d===S_?4&c.type&&this.matchTNodeWithReadOption(a,c,-1):this.matchTNodeWithReadOption(a,c,bl(c,a,d,!1,!1))}matchTNodeWithReadOption(a,c,d){if(null!==d){const f=this.metadata.read;if(null!==f)if(f===hu||f===N_||f===S_&&4&c.type)this.addMatch(c.index,-2);else{const m=bl(c,a,f,!1,!1);null!==m&&this.addMatch(c.index,m)}else this.addMatch(c.index,d)}}addMatch(a,c){null===this.matches?this.matches=[a,c]:this.matches.push(a,c)}}function gN(s,a){const c=s.localNames;if(null!==c)for(let d=0;d<c.length;d+=2)if(c[d]===a)return c[d+1];return null}function vr(s,a,c,d){return-1===c?function ac(s,a){return 11&s.type?Vl(s,a):4&s.type?A_(s,a):null}(a,s):-2===c?function Ss(s,a,c){return c===hu?Vl(a,s):c===S_?A_(a,s):c===N_?fN(a,s):void 0}(s,a,d):Fa(s,s[1],c,a)}function yh(s,a,c,d){const f=a[19].queries[d];if(null===f.matches){const m=s.data,b=c.matches,D=[];for(let E=0;E<b.length;E+=2){const T=b[E];D.push(T<0?null:vr(a,m[T],b[E+1],c.metadata.read))}f.matches=D}return f.matches}function fb(s,a,c,d){const f=s.queries.getByIndex(c),m=f.matches;if(null!==m){const b=yh(s,a,f,c);for(let D=0;D<m.length;D+=2){const E=m[D];if(E>0)d.push(b[D/2]);else{const T=m[D+1],N=a[-E];for(let L=10;L<N.length;L++){const q=N[L];q[17]===q[3]&&fb(q[1],q,T,d)}if(null!==N[9]){const L=N[9];for(let q=0;q<L.length;q++){const ne=L[q];fb(ne[1],ne,T,d)}}}}}return d}function W1(s){const a=De(),c=vt(),d=Zy();Nc(d+1);const f=M_(c,d);if(s.dirty&&function Jh(s){return 4==(4&s[2])}(a)===(2==(2&f.metadata.flags))){if(null===f.matches)s.reset([]);else{const m=f.crossesNgTemplate?fb(c,a,d,[]):yh(c,a,f,d);s.reset(m,uS),s.notifyOnChanges()}return!0}return!1}function q1(s,a,c){const d=vt();d.firstCreatePass&&(pb(d,new Z1(s,a,c),-1),2==(2&a)&&(d.staticViewQueries=!0)),K1(d,De(),a)}function z1(s,a,c,d){const f=vt();if(f.firstCreatePass){const m=An();pb(f,new Z1(a,c,d),m.index),function Y1(s,a){const c=s.contentQueries||(s.contentQueries=[]);a!==(c.length?c[c.length-1]:-1)&&c.push(s.queries.length-1,a)}(f,s),2==(2&c)&&(f.staticContentQueries=!0)}K1(f,De(),c)}function Np(){return function mN(s,a){return s[19].queries[a].queryList}(De(),Zy())}function K1(s,a,c){const d=new lb(4==(4&c));Lm(s,a,d,d.destroy),null===a[19]&&(a[19]=new x_),a[19].queries.push(new ub(d))}function pb(s,a,c){null===s.queries&&(s.queries=new db),s.queries.track(new hb(a,c))}function M_(s,a){return s.queries.getByIndex(a)}function O_(s,a){return A_(s,a)}function Dh(...s){}const U_=new Fn("Application Initializer");let Pp=(()=>{class s{constructor(c){this.appInits=c,this.resolve=Dh,this.reject=Dh,this.initialized=!1,this.done=!1,this.donePromise=new Promise((d,f)=>{this.resolve=d,this.reject=f})}runInitializers(){if(this.initialized)return;const c=[],d=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let f=0;f<this.appInits.length;f++){const m=this.appInits[f]();if(Da(m))c.push(m);else if(MC(m)){const b=new Promise((D,E)=>{m.subscribe({complete:D,error:E})});c.push(b)}}Promise.all(c).then(()=>{d()}).catch(f=>{this.reject(f)}),0===c.length&&d(),this.initialized=!0}}return s.\u0275fac=function(c){return new(c||s)(cn(U_,8))},s.\u0275prov=nn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const Db=new Fn("AppId",{providedIn:"root",factory:function B_(){return`${Cb()}${Cb()}${Cb()}`}});function Cb(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const cE=new Fn("Platform Initializer"),j_=new Fn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),H_=new Fn("appBootstrapListener");let hE=(()=>{class s{log(c){console.log(c)}warn(c){console.warn(c)}}return s.\u0275fac=function(c){return new(c||s)},s.\u0275prov=nn({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const kp=new Fn("LocaleId",{providedIn:"root",factory:()=>gi(kp,tt.Optional|tt.SkipSelf)||function xN(){return typeof $localize<"u"&&$localize.locale||lh}()}),Ch=new Fn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class ON{constructor(a,c){this.ngModuleFactory=a,this.componentFactories=c}}let RN=(()=>{class s{compileModuleSync(c){return new C1(c)}compileModuleAsync(c){return Promise.resolve(this.compileModuleSync(c))}compileModuleAndAllComponentsSync(c){const d=this.compileModuleSync(c),m=pa(ut(c).declarations).reduce((b,D)=>{const E=U(D);return E&&b.push(new vu(E)),b},[]);return new ON(d,m)}compileModuleAndAllComponentsAsync(c){return Promise.resolve(this.compileModuleAndAllComponentsSync(c))}clearCache(){}clearCacheFor(c){}getModuleId(c){}}return s.\u0275fac=function(c){return new(c||s)},s.\u0275prov=nn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const gE=(()=>Promise.resolve(0))();function Fp(s){typeof Zone>"u"?gE.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class no{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:c=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Fo(!1),this.onMicrotaskEmpty=new Fo(!1),this.onStable=new Fo(!1),this.onError=new Fo(!1),typeof Zone>"u")throw new Se(908,!1);Zone.assertZonePatched();const f=this;if(f._nesting=0,f._outer=f._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const m=Zone.AsyncStackTaggingZoneSpec;f._inner=f._inner.fork(new m("Angular"))}Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!d&&c,f.shouldCoalesceRunChangeDetection=d,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function FN(){let s=Vt.requestAnimationFrame,a=Vt.cancelAnimationFrame;if(typeof Zone<"u"&&s&&a){const c=s[Zone.__symbol__("OriginalDelegate")];c&&(s=c);const d=a[Zone.__symbol__("OriginalDelegate")];d&&(a=d)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function _E(s){const a=()=>{!function mE(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(Vt,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,$_(s),s.isCheckStableRunning=!0,G_(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),$_(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(c,d,f,m,b,D)=>{try{return Ib(s),c.invokeTask(f,m,b,D)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===m.type||s.shouldCoalesceRunChangeDetection)&&a(),VN(s)}},onInvoke:(c,d,f,m,b,D,E)=>{try{return Ib(s),c.invoke(f,m,b,D,E)}finally{s.shouldCoalesceRunChangeDetection&&a(),VN(s)}},onHasTask:(c,d,f,m)=>{c.hasTask(f,m),d===f&&("microTask"==m.change?(s._hasPendingMicrotasks=m.microTask,$_(s),G_(s)):"macroTask"==m.change&&(s.hasPendingMacrotasks=m.macroTask))},onHandleError:(c,d,f,m)=>(c.handleError(f,m),s.runOutsideAngular(()=>s.onError.emit(m)),!1)})}(f)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!no.isInAngularZone())throw new Se(909,!1)}static assertNotInAngularZone(){if(no.isInAngularZone())throw new Se(909,!1)}run(a,c,d){return this._inner.run(a,c,d)}runTask(a,c,d,f){const m=this._inner,b=m.scheduleEventTask("NgZoneEvent: "+f,a,LN,Dh,Dh);try{return m.runTask(b,c,d)}finally{m.cancelTask(b)}}runGuarded(a,c,d){return this._inner.runGuarded(a,c,d)}runOutsideAngular(a){return this._outer.run(a)}}const LN={};function G_(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function $_(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function Ib(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function VN(s){s._nesting--,G_(s)}class UN{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Fo,this.onMicrotaskEmpty=new Fo,this.onStable=new Fo,this.onError=new Fo}run(a,c,d){return a.apply(c,d)}runGuarded(a,c,d){return a.apply(c,d)}runOutsideAngular(a){return a()}runTask(a,c,d,f){return a.apply(c,d)}}const BN=new Fn(""),jN=new Fn("");let Z_,Tb=(()=>{class s{constructor(c,d,f){this._ngZone=c,this.registry=d,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Z_||(function GN(s){Z_=s}(f),f.addToWindow(d)),this._watchAngularEvents(),c.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{no.assertNotInAngularZone(),Fp(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Fp(()=>{for(;0!==this._callbacks.length;){let c=this._callbacks.pop();clearTimeout(c.timeoutId),c.doneCb(this._didWork)}this._didWork=!1});else{let c=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(c)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(c=>({source:c.source,creationLocation:c.creationLocation,data:c.data})):[]}addCallback(c,d,f){let m=-1;d&&d>0&&(m=setTimeout(()=>{this._callbacks=this._callbacks.filter(b=>b.timeoutId!==m),c(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:c,timeoutId:m,updateCb:f})}whenStable(c,d,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(c,d,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(c){this.registry.registerApplication(c,this)}unregisterApplication(c){this.registry.unregisterApplication(c)}findProviders(c,d,f){return[]}}return s.\u0275fac=function(c){return new(c||s)(cn(no),cn(HN),cn(jN))},s.\u0275prov=nn({token:s,factory:s.\u0275fac}),s})(),HN=(()=>{class s{constructor(){this._applications=new Map}registerApplication(c,d){this._applications.set(c,d)}unregisterApplication(c){this._applications.delete(c)}unregisterAllApplications(){this._applications.clear()}getTestability(c){return this._applications.get(c)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(c,d=!0){return Z_?.findTestabilityInTree(this,c,d)??null}}return s.\u0275fac=function(c){return new(c||s)},s.\u0275prov=nn({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})(),lc=null;const Sb=new Fn("AllowMultipleToken"),Lp=new Fn("PlatformDestroyListeners");class $N{constructor(a,c){this.name=a,this.token=c}}function WN(s,a,c=[]){const d=`Platform: ${a}`,f=new Fn(d);return(m=[])=>{let b=bE();if(!b||b.injector.get(Sb,!1)){const D=[...c,...m,{provide:f,useValue:!0}];s?s(D):function KP(s){if(lc&&!lc.get(Sb,!1))throw new Se(400,!1);lc=s;const a=s.get(KN);(function vE(s){const a=s.get(cE,null);a&&a.forEach(c=>c())})(s)}(function zN(s=[],a){return ga.create({name:a,providers:[{provide:Ov,useValue:"platform"},{provide:Lp,useValue:new Set([()=>lc=null])},...s]})}(D,d))}return function qN(s){const a=bE();if(!a)throw new Se(401,!1);return a}()}}function bE(){return lc?.get(KN)??null}let KN=(()=>{class s{constructor(c){this._injector=c,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(c,d){const f=function wE(s,a){let c;return c="noop"===s?new UN:("zone.js"===s?void 0:s)||new no(a),c}(d?.ngZone,function YN(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!s||!s.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!s||!s.ngZoneRunCoalescing)||!1}}(d)),m=[{provide:no,useValue:f}];return f.run(()=>{const b=ga.create({providers:m,parent:this.injector,name:c.moduleType.name}),D=c.create(b),E=D.injector.get(fu,null);if(!E)throw new Se(402,!1);return f.runOutsideAngular(()=>{const T=f.onError.subscribe({next:N=>{E.handleError(N)}});D.onDestroy(()=>{Ih(this._modules,D),T.unsubscribe()})}),function DE(s,a,c){try{const d=c();return Da(d)?d.catch(f=>{throw a.runOutsideAngular(()=>s.handleError(f)),f}):d}catch(d){throw a.runOutsideAngular(()=>s.handleError(d)),d}}(E,f,()=>{const T=D.injector.get(Pp);return T.runInitializers(),T.donePromise.then(()=>(n1(D.injector.get(kp,lh)||lh),this._moduleDoBootstrap(D),D))})})}bootstrapModule(c,d=[]){const f=W_({},d);return function qP(s,a,c){const d=new C1(c);return Promise.resolve(d)}(0,0,c).then(m=>this.bootstrapModuleFactory(m,f))}_moduleDoBootstrap(c){const d=c.injector.get(Eh);if(c._bootstrapComponents.length>0)c._bootstrapComponents.forEach(f=>d.bootstrap(f));else{if(!c.instance.ngDoBootstrap)throw new Se(403,!1);c.instance.ngDoBootstrap(d)}this._modules.push(c)}onDestroy(c){this._destroyListeners.push(c)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Se(404,!1);this._modules.slice().forEach(d=>d.destroy()),this._destroyListeners.forEach(d=>d());const c=this._injector.get(Lp,null);c&&(c.forEach(d=>d()),c.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(c){return new(c||s)(cn(ga))},s.\u0275prov=nn({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function W_(s,a){return Array.isArray(a)?a.reduce(W_,s):{...s,...a}}let Eh=(()=>{class s{constructor(c,d,f){this._zone=c,this._injector=d,this._exceptionHandler=f,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const m=new V.y(D=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{D.next(this._stable),D.complete()})}),b=new V.y(D=>{let E;this._zone.runOutsideAngular(()=>{E=this._zone.onStable.subscribe(()=>{no.assertNotInAngularZone(),Fp(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,D.next(!0))})})});const T=this._zone.onUnstable.subscribe(()=>{no.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{D.next(!1)}))});return()=>{E.unsubscribe(),T.unsubscribe()}});this.isStable=(0,re.T)(m,b.pipe((0,fe.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(c,d){const f=c instanceof aS;if(!this._injector.get(Pp).done)throw!f&&Ye(c),new Se(405,false);let b;b=f?c:this._injector.get(Ll).resolveComponentFactory(c),this.componentTypes.push(b.componentType);const D=function zP(s){return s.isBoundToModule}(b)?void 0:this._injector.get(yr),T=b.create(ga.NULL,[],d||b.selector,D),N=T.location.nativeElement,L=T.injector.get(BN,null);return L?.registerApplication(N),T.onDestroy(()=>{this.detachView(T.hostView),Ih(this.components,T),L?.unregisterApplication(N)}),this._loadComponent(T),T}tick(){if(this._runningTick)throw new Se(101,!1);try{this._runningTick=!0;for(let c of this._views)c.detectChanges()}catch(c){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(c))}finally{this._runningTick=!1}}attachView(c){const d=c;this._views.push(d),d.attachToAppRef(this)}detachView(c){const d=c;Ih(this._views,d),d.detachFromAppRef()}_loadComponent(c){this.attachView(c.hostView),this.tick(),this.components.push(c),this._injector.get(H_,[]).concat(this._bootstrapListeners).forEach(f=>f(c))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(c=>c()),this._views.slice().forEach(c=>c.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(c){return this._destroyListeners.push(c),()=>Ih(this._destroyListeners,c)}destroy(){if(this._destroyed)throw new Se(406,!1);const c=this._injector;c.destroy&&!c.destroyed&&c.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(c){return new(c||s)(cn(no),cn(Fl),cn(fu))},s.\u0275prov=nn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function Ih(s,a){const c=s.indexOf(a);c>-1&&s.splice(c,1)}let z_=!0,K_=!1;function qr(){return K_=!0,z_}function YP(){if(K_)throw new Error("Cannot enable prod mode after platform setup.");z_=!1}let CE=(()=>{class s{}return s.__NG_ELEMENT_ID__=EE,s})();function EE(s){return function IE(s,a,c){if(Vs(s)&&!c){const d=Qt(s.index,a);return new hs(d,d)}return 47&s.type?new hs(a[16],a):null}(An(),De(),16==(16&s))}class As{constructor(){}supports(a){return ip(a)}create(a){return new Bp(a)}}const Up=(s,a)=>a;class Bp{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||Up}forEachItem(a){let c;for(c=this._itHead;null!==c;c=c._next)a(c)}forEachOperation(a){let c=this._itHead,d=this._removalsHead,f=0,m=null;for(;c||d;){const b=!d||c&&c.currentIndex<cc(d,f,m)?c:d,D=cc(b,f,m),E=b.currentIndex;if(b===d)f--,d=d._nextRemoved;else if(c=c._next,null==b.previousIndex)f++;else{m||(m=[]);const T=D-f,N=E-f;if(T!=N){for(let q=0;q<T;q++){const ne=q<m.length?m[q]:m[q]=0,ve=ne+q;N<=ve&&ve<T&&(m[q]=ne+1)}m[b.previousIndex]=N-T}}D!==E&&a(b,D,E)}}forEachPreviousItem(a){let c;for(c=this._previousItHead;null!==c;c=c._nextPrevious)a(c)}forEachAddedItem(a){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)a(c)}forEachMovedItem(a){let c;for(c=this._movesHead;null!==c;c=c._nextMoved)a(c)}forEachRemovedItem(a){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)a(c)}forEachIdentityChange(a){let c;for(c=this._identityChangesHead;null!==c;c=c._nextIdentityChange)a(c)}diff(a){if(null==a&&(a=[]),!ip(a))throw new Se(900,!1);return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let f,m,b,c=this._itHead,d=!1;if(Array.isArray(a)){this.length=a.length;for(let D=0;D<this.length;D++)m=a[D],b=this._trackByFn(D,m),null!==c&&Object.is(c.trackById,b)?(d&&(c=this._verifyReinsertion(c,m,b,D)),Object.is(c.item,m)||this._addIdentityChange(c,m)):(c=this._mismatch(c,m,b,D),d=!0),c=c._next}else f=0,function tA(s,a){if(Array.isArray(s))for(let c=0;c<s.length;c++)a(s[c]);else{const c=s[So()]();let d;for(;!(d=c.next()).done;)a(d.value)}}(a,D=>{b=this._trackByFn(f,D),null!==c&&Object.is(c.trackById,b)?(d&&(c=this._verifyReinsertion(c,D,b,f)),Object.is(c.item,D)||this._addIdentityChange(c,D)):(c=this._mismatch(c,D,b,f),d=!0),c=c._next,f++}),this.length=f;return this._truncate(c),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,c,d,f){let m;return null===a?m=this._itTail:(m=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(a.item,c)||this._addIdentityChange(a,c),this._reinsertAfter(a,m,f)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(d,f))?(Object.is(a.item,c)||this._addIdentityChange(a,c),this._moveAfter(a,m,f)):a=this._addAfter(new ex(c,d),m,f),a}_verifyReinsertion(a,c,d,f){let m=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==m?a=this._reinsertAfter(m,a._prev,f):a.currentIndex!=f&&(a.currentIndex=f,this._addToMoves(a,f)),a}_truncate(a){for(;null!==a;){const c=a._next;this._addToRemovals(this._unlink(a)),a=c}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,c,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const f=a._prevRemoved,m=a._nextRemoved;return null===f?this._removalsHead=m:f._nextRemoved=m,null===m?this._removalsTail=f:m._prevRemoved=f,this._insertAfter(a,c,d),this._addToMoves(a,d),a}_moveAfter(a,c,d){return this._unlink(a),this._insertAfter(a,c,d),this._addToMoves(a,d),a}_addAfter(a,c,d){return this._insertAfter(a,c,d),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,c,d){const f=null===c?this._itHead:c._next;return a._next=f,a._prev=c,null===f?this._itTail=a:f._prev=a,null===c?this._itHead=a:c._next=a,null===this._linkedRecords&&(this._linkedRecords=new kb),this._linkedRecords.put(a),a.currentIndex=d,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const c=a._prev,d=a._next;return null===c?this._itHead=d:c._next=d,null===d?this._itTail=c:d._prev=c,a}_addToMoves(a,c){return a.previousIndex===c||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new kb),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,c){return a.item=c,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class ex{constructor(a,c){this.item=a,this.trackById=c,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class tx{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,c){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===c||c<=d.currentIndex)&&Object.is(d.trackById,a))return d;return null}remove(a){const c=a._prevDup,d=a._nextDup;return null===c?this._head=d:c._nextDup=d,null===d?this._tail=c:d._prevDup=c,null===this._head}}class kb{constructor(){this.map=new Map}put(a){const c=a.trackById;let d=this.map.get(c);d||(d=new tx,this.map.set(c,d)),d.add(a)}get(a,c){const f=this.map.get(a);return f?f.get(a,c):null}remove(a){const c=a.trackById;return this.map.get(c).remove(a)&&this.map.delete(c),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function cc(s,a,c){const d=s.previousIndex;if(null===d)return d;let f=0;return c&&d<c.length&&(f=c[d]),d+a+f}class Lo{constructor(){}supports(a){return a instanceof Map||ni(a)}create(){return new nx}}class nx{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let c;for(c=this._mapHead;null!==c;c=c._next)a(c)}forEachPreviousItem(a){let c;for(c=this._previousMapHead;null!==c;c=c._nextPrevious)a(c)}forEachChangedItem(a){let c;for(c=this._changesHead;null!==c;c=c._nextChanged)a(c)}forEachAddedItem(a){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)a(c)}forEachRemovedItem(a){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)a(c)}diff(a){if(a){if(!(a instanceof Map||ni(a)))throw new Se(900,!1)}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let c=this._mapHead;if(this._appendAfter=null,this._forEach(a,(d,f)=>{if(c&&c.key===f)this._maybeAddToChanges(c,d),this._appendAfter=c,c=c._next;else{const m=this._getOrCreateRecordForKey(f,d);c=this._insertBeforeOrAppend(c,m)}}),c){c._prev&&(c._prev._next=null),this._removalsHead=c;for(let d=c;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,c){if(a){const d=a._prev;return c._next=a,c._prev=d,a._prev=c,d&&(d._next=c),a===this._mapHead&&(this._mapHead=c),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=c,c._prev=this._appendAfter):this._mapHead=c,this._appendAfter=c,null}_getOrCreateRecordForKey(a,c){if(this._records.has(a)){const f=this._records.get(a);this._maybeAddToChanges(f,c);const m=f._prev,b=f._next;return m&&(m._next=b),b&&(b._prev=m),f._next=null,f._prev=null,f}const d=new xE(a);return this._records.set(a,d),d.currentValue=c,this._addToAdditions(d),d}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,c){Object.is(c,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=c,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,c){a instanceof Map?a.forEach(c):Object.keys(a).forEach(d=>c(a[d],d))}}class xE{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function ME(){return new Fb([new As])}let Fb=(()=>{class s{constructor(c){this.factories=c}static create(c,d){if(null!=d){const f=d.factories.slice();c=c.concat(f)}return new s(c)}static extend(c){return{provide:s,useFactory:d=>s.create(c,d||ME()),deps:[[s,new ra,new ci]]}}find(c){const d=this.factories.find(f=>f.supports(c));if(null!=d)return d;throw new Se(901,!1)}}return s.\u0275prov=nn({token:s,providedIn:"root",factory:ME}),s})();function tl(){return new Lb([new Lo])}let Lb=(()=>{class s{constructor(c){this.factories=c}static create(c,d){if(d){const f=d.factories.slice();c=c.concat(f)}return new s(c)}static extend(c){return{provide:s,useFactory:d=>s.create(c,d||tl()),deps:[[s,new ra,new ci]]}}find(c){const d=this.factories.find(f=>f.supports(c));if(d)return d;throw new Se(901,!1)}}return s.\u0275prov=nn({token:s,providedIn:"root",factory:tl}),s})();const ix=WN(null,"core",[]);let Kn=(()=>{class s{constructor(c){}}return s.\u0275fac=function(c){return new(c||s)(cn(Eh))},s.\u0275mod=Ut({type:s}),s.\u0275inj=Et({}),s})();function RE(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}function kE(s,a){const c=U(s),d=a.elementInjector||Zf();return new vu(c).create(d,a.projectableNodes,a.hostElement,a.environmentInjector)}},3942:(yt,Me,R)=>{R.d(Me,{Z:()=>Se});var l=R(2090),X=R(4859),V=R(9681),re=R(1877);class fe{constructor(be,ue){this._delegate=be,this.firebase=ue,(0,V._addComponent)(be,new X.wA("app-compat",()=>this,"PUBLIC")),this.container=be.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(be){this._delegate.automaticDataCollectionEnabled=be}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(be=>{this._delegate.checkDestroyed(),be()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,V.deleteApp)(this._delegate)))}_getService(be,ue=V._DEFAULT_ENTRY_NAME){var pt;this._delegate.checkDestroyed();const lt=this._delegate.container.getProvider(be);return!lt.isInitialized()&&"EXPLICIT"===(null===(pt=lt.getComponent())||void 0===pt?void 0:pt.instantiationMode)&&lt.initialize(),lt.getImmediate({identifier:ue})}_removeServiceInstance(be,ue=V._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(be).clearInstance(ue)}_addComponent(be){(0,V._addComponent)(this._delegate,be)}_addOrOverwriteComponent(be){(0,V._addOrOverwriteComponent)(this._delegate,be)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ae=new l.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),G=function he(){const et=function ye(et){const be={},ue={__esModule:!0,initializeApp:function Re(Le,j={}){const Ce=V.initializeApp(Le,j);if((0,l.r3)(be,Ce.name))return be[Ce.name];const Q=new et(Ce,ue);return be[Ce.name]=Q,Q},app:lt,registerVersion:V.registerVersion,setLogLevel:V.setLogLevel,onLog:V.onLog,apps:null,SDK_VERSION:V.SDK_VERSION,INTERNAL:{registerComponent:function Ae(Le){const j=Le.name,Ce=j.replace("-compat","");if(V._registerComponent(Le)&&"PUBLIC"===Le.type){const Q=(te=lt())=>{if("function"!=typeof te[Ce])throw ae.create("invalid-app-argument",{appName:j});return te[Ce]()};void 0!==Le.serviceProps&&(0,l.ZB)(Q,Le.serviceProps),ue[Ce]=Q,et.prototype[Ce]=function(...te){return this._getService.bind(this,j).apply(this,Le.multipleInstances?te:[])}}return"PUBLIC"===Le.type?ue[Ce]:null},removeApp:function pt(Le){delete be[Le]},useAsService:function $e(Le,j){return"serverAuth"===j?null:j},modularAPIs:V}};function lt(Le){if(!(0,l.r3)(be,Le=Le||V._DEFAULT_ENTRY_NAME))throw ae.create("no-app",{appName:Le});return be[Le]}return ue.default=ue,Object.defineProperty(ue,"apps",{get:function Ee(){return Object.keys(be).map(Le=>be[Le])}}),lt.App=et,ue}(fe);return et.INTERNAL=Object.assign(Object.assign({},et.INTERNAL),{createFirebaseNamespace:he,extendNamespace:function be(ue){(0,l.ZB)(et,ue)},createSubscribe:l.ne,ErrorFactory:l.LL,deepExtend:l.ZB}),et}(),$=new re.Yd("@firebase/app-compat");if((0,l.jU)()&&void 0!==self.firebase){$.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const et=self.firebase.SDK_VERSION;et&&et.indexOf("LITE")>=0&&$.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Se=G;!function Te(et){(0,V.registerVersion)("@firebase/app-compat","0.2.0",et)}()},9681:(yt,Me,R)=>{R.r(Me),R.d(Me,{FirebaseError:()=>re.ZR,SDK_VERSION:()=>sr,_DEFAULT_ENTRY_NAME:()=>Lt,_addComponent:()=>dn,_addOrOverwriteComponent:()=>nn,_apps:()=>un,_clearComponents:()=>rr,_components:()=>Un,_getProvider:()=>Et,_registerComponent:()=>ii,_removeServiceInstance:()=>jt,deleteApp:()=>Lr,getApp:()=>Wi,getApps:()=>fi,initializeApp:()=>hi,onLog:()=>Tr,registerVersion:()=>Tn,setLogLevel:()=>kn});var l=R(5861),X=R(4859),V=R(1877),re=R(2090),fe=R(8766);class me{constructor(Ne){this.container=Ne}getPlatformInfoString(){return this.container.getProviders().map(ot=>{if(function ae(nt){return"VERSION"===nt.getComponent()?.type}(ot)){const xt=ot.getImmediate();return`${xt.library}/${xt.version}`}return null}).filter(ot=>ot).join(" ")}}const ye="@firebase/app",G=new V.Yd("@firebase/app"),Lt="[DEFAULT]",Ke={[ye]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},un=new Map,Un=new Map;function dn(nt,Ne){try{nt.container.addComponent(Ne)}catch(ot){G.debug(`Component ${Ne.name} failed to register with FirebaseApp ${nt.name}`,ot)}}function nn(nt,Ne){nt.container.addOrOverwriteComponent(Ne)}function ii(nt){const Ne=nt.name;if(Un.has(Ne))return G.debug(`There were multiple attempts to register component ${Ne}.`),!1;Un.set(Ne,nt);for(const ot of un.values())dn(ot,nt);return!0}function Et(nt,Ne){const ot=nt.container.getProvider("heartbeat").getImmediate({optional:!0});return ot&&ot.triggerHeartbeat(),nt.container.getProvider(Ne)}function jt(nt,Ne,ot=Lt){Et(nt,Ne).clearInstance(ot)}function rr(){Un.clear()}const xi=new re.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class On{constructor(Ne,ot,xt){this._isDeleted=!1,this._options=Object.assign({},Ne),this._config=Object.assign({},ot),this._name=ot.name,this._automaticDataCollectionEnabled=ot.automaticDataCollectionEnabled,this._container=xt,this.container.addComponent(new X.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ne){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ne}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ne){this._isDeleted=Ne}checkDestroyed(){if(this.isDeleted)throw xi.create("app-deleted",{appName:this._name})}}const sr="9.15.0";function hi(nt,Ne={}){let ot=nt;"object"!=typeof Ne&&(Ne={name:Ne});const xt=Object.assign({name:Lt,automaticDataCollectionEnabled:!1},Ne),Ft=xt.name;if("string"!=typeof Ft||!Ft)throw xi.create("bad-app-name",{appName:String(Ft)});if(ot||(ot=(0,re.aH)()),!ot)throw xi.create("no-options");const Ut=un.get(Ft);if(Ut){if((0,re.vZ)(ot,Ut.options)&&(0,re.vZ)(xt,Ut.config))return Ut;throw xi.create("duplicate-app",{appName:Ft})}const H=new X.H0(Ft);for(const O of Un.values())H.addComponent(O);const B=new On(ot,xt,H);return un.set(Ft,B),B}function Wi(nt=Lt){const Ne=un.get(nt);if(!Ne&&nt===Lt)return hi();if(!Ne)throw xi.create("no-app",{appName:nt});return Ne}function fi(){return Array.from(un.values())}function Lr(nt){return tt.apply(this,arguments)}function tt(){return(tt=(0,l.Z)(function*(nt){const Ne=nt.name;un.has(Ne)&&(un.delete(Ne),yield Promise.all(nt.container.getProviders().map(ot=>ot.delete())),nt.isDeleted=!0)})).apply(this,arguments)}function Tn(nt,Ne,ot){var xt;let Ft=null!==(xt=Ke[nt])&&void 0!==xt?xt:nt;ot&&(Ft+=`-${ot}`);const Ut=Ft.match(/\s|\//),H=Ne.match(/\s|\//);if(Ut||H){const B=[`Unable to register library "${Ft}" with version "${Ne}":`];return Ut&&B.push(`library name "${Ft}" contains illegal characters (whitespace or "/")`),Ut&&H&&B.push("and"),H&&B.push(`version name "${Ne}" contains illegal characters (whitespace or "/")`),void G.warn(B.join(" "))}ii(new X.wA(`${Ft}-version`,()=>({library:Ft,version:Ne}),"VERSION"))}function Tr(nt,Ne){if(null!==nt&&"function"!=typeof nt)throw xi.create("invalid-log-argument");(0,V.Am)(nt,Ne)}function kn(nt){(0,V.Ub)(nt)}const Rn="firebase-heartbeat-store";let $n=null;function ln(){return $n||($n=(0,fe.X3)("firebase-heartbeat-database",1,{upgrade:(nt,Ne)=>{0===Ne&&nt.createObjectStore(Rn)}}).catch(nt=>{throw xi.create("idb-open",{originalErrorMessage:nt.message})})),$n}function ht(){return(ht=(0,l.Z)(function*(nt){try{return(yield ln()).transaction(Rn).objectStore(Rn).get(Qn(nt))}catch(Ne){if(Ne instanceof re.ZR)G.warn(Ne.message);else{const ot=xi.create("idb-get",{originalErrorMessage:Ne?.message});G.warn(ot.message)}}})).apply(this,arguments)}function Vt(nt,Ne){return pn.apply(this,arguments)}function pn(){return(pn=(0,l.Z)(function*(nt,Ne){try{const xt=(yield ln()).transaction(Rn,"readwrite");return yield xt.objectStore(Rn).put(Ne,Qn(nt)),xt.done}catch(ot){if(ot instanceof re.ZR)G.warn(ot.message);else{const xt=xi.create("idb-set",{originalErrorMessage:ot?.message});G.warn(xt.message)}}})).apply(this,arguments)}function Qn(nt){return`${nt.name}!${nt.options.appId}`}class or{constructor(Ne){this.container=Ne,this._heartbeatsCache=null;const ot=this.container.getProvider("app").getImmediate();this._storage=new Xt(ot),this._heartbeatsCachePromise=this._storage.read().then(xt=>(this._heartbeatsCache=xt,xt))}triggerHeartbeat(){var Ne=this;return(0,l.Z)(function*(){const xt=Ne.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Ft=Yt();if(null===Ne._heartbeatsCache&&(Ne._heartbeatsCache=yield Ne._heartbeatsCachePromise),Ne._heartbeatsCache.lastSentHeartbeatDate!==Ft&&!Ne._heartbeatsCache.heartbeats.some(Ut=>Ut.date===Ft))return Ne._heartbeatsCache.heartbeats.push({date:Ft,agent:xt}),Ne._heartbeatsCache.heartbeats=Ne._heartbeatsCache.heartbeats.filter(Ut=>{const H=new Date(Ut.date).valueOf();return Date.now()-H<=2592e6}),Ne._storage.overwrite(Ne._heartbeatsCache)})()}getHeartbeatsHeader(){var Ne=this;return(0,l.Z)(function*(){if(null===Ne._heartbeatsCache&&(yield Ne._heartbeatsCachePromise),null===Ne._heartbeatsCache||0===Ne._heartbeatsCache.heartbeats.length)return"";const ot=Yt(),{heartbeatsToSend:xt,unsentEntries:Ft}=function Mi(nt,Ne=1024){const ot=[];let xt=nt.slice();for(const Ft of nt){const Ut=ot.find(H=>H.agent===Ft.agent);if(Ut){if(Ut.dates.push(Ft.date),Jn(ot)>Ne){Ut.dates.pop();break}}else if(ot.push({agent:Ft.agent,dates:[Ft.date]}),Jn(ot)>Ne){ot.pop();break}xt=xt.slice(1)}return{heartbeatsToSend:ot,unsentEntries:xt}}(Ne._heartbeatsCache.heartbeats),Ut=(0,re.L)(JSON.stringify({version:2,heartbeats:xt}));return Ne._heartbeatsCache.lastSentHeartbeatDate=ot,Ft.length>0?(Ne._heartbeatsCache.heartbeats=Ft,yield Ne._storage.overwrite(Ne._heartbeatsCache)):(Ne._heartbeatsCache.heartbeats=[],Ne._storage.overwrite(Ne._heartbeatsCache)),Ut})()}}function Yt(){return(new Date).toISOString().substring(0,10)}class Xt{constructor(Ne){this.app=Ne,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,l.Z)(function*(){return!!(0,re.hl)()&&(0,re.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ne=this;return(0,l.Z)(function*(){return(yield Ne._canUseIndexedDBPromise)&&(yield function Dt(nt){return ht.apply(this,arguments)}(Ne.app))||{heartbeats:[]}})()}overwrite(Ne){var ot=this;return(0,l.Z)(function*(){var xt;if(yield ot._canUseIndexedDBPromise){const Ut=yield ot.read();return Vt(ot.app,{lastSentHeartbeatDate:null!==(xt=Ne.lastSentHeartbeatDate)&&void 0!==xt?xt:Ut.lastSentHeartbeatDate,heartbeats:Ne.heartbeats})}})()}add(Ne){var ot=this;return(0,l.Z)(function*(){var xt;if(yield ot._canUseIndexedDBPromise){const Ut=yield ot.read();return Vt(ot.app,{lastSentHeartbeatDate:null!==(xt=Ne.lastSentHeartbeatDate)&&void 0!==xt?xt:Ut.lastSentHeartbeatDate,heartbeats:[...Ut.heartbeats,...Ne.heartbeats]})}})()}}function Jn(nt){return(0,re.L)(JSON.stringify({version:2,heartbeats:nt})).length}!function Fi(nt){ii(new X.wA("platform-logger",Ne=>new me(Ne),"PRIVATE")),ii(new X.wA("heartbeat",Ne=>new or(Ne),"PRIVATE")),Tn(ye,"0.9.0",nt),Tn(ye,"0.9.0","esm2017"),Tn("fire-js","")}("")},4859:(yt,Me,R)=>{R.d(Me,{H0:()=>ye,wA:()=>V,zt:()=>fe});var l=R(5861),X=R(2090);class V{constructor(G,$,J){this.name=G,this.instanceFactory=$,this.type=J,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(G){return this.instantiationMode=G,this}setMultipleInstances(G){return this.multipleInstances=G,this}setServiceProps(G){return this.serviceProps=G,this}setInstanceCreatedCallback(G){return this.onInstanceCreated=G,this}}const re="[DEFAULT]";class fe{constructor(G,$){this.name=G,this.container=$,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(G){const $=this.normalizeInstanceIdentifier(G);if(!this.instancesDeferred.has($)){const J=new X.BH;if(this.instancesDeferred.set($,J),this.isInitialized($)||this.shouldAutoInitialize())try{const Pe=this.getOrInitializeService({instanceIdentifier:$});Pe&&J.resolve(Pe)}catch{}}return this.instancesDeferred.get($).promise}getImmediate(G){var $;const J=this.normalizeInstanceIdentifier(G?.identifier),Pe=null!==($=G?.optional)&&void 0!==$&&$;if(!this.isInitialized(J)&&!this.shouldAutoInitialize()){if(Pe)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:J})}catch(Te){if(Pe)return null;throw Te}}getComponent(){return this.component}setComponent(G){if(G.name!==this.name)throw Error(`Mismatching Component ${G.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=G,this.shouldAutoInitialize()){if(function ae(he){return"EAGER"===he.instantiationMode}(G))try{this.getOrInitializeService({instanceIdentifier:re})}catch{}for(const[$,J]of this.instancesDeferred.entries()){const Pe=this.normalizeInstanceIdentifier($);try{const Te=this.getOrInitializeService({instanceIdentifier:Pe});J.resolve(Te)}catch{}}}}clearInstance(G=re){this.instancesDeferred.delete(G),this.instancesOptions.delete(G),this.instances.delete(G)}delete(){var G=this;return(0,l.Z)(function*(){const $=Array.from(G.instances.values());yield Promise.all([...$.filter(J=>"INTERNAL"in J).map(J=>J.INTERNAL.delete()),...$.filter(J=>"_delete"in J).map(J=>J._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(G=re){return this.instances.has(G)}getOptions(G=re){return this.instancesOptions.get(G)||{}}initialize(G={}){const{options:$={}}=G,J=this.normalizeInstanceIdentifier(G.instanceIdentifier);if(this.isInitialized(J))throw Error(`${this.name}(${J}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Pe=this.getOrInitializeService({instanceIdentifier:J,options:$});for(const[Te,Se]of this.instancesDeferred.entries())J===this.normalizeInstanceIdentifier(Te)&&Se.resolve(Pe);return Pe}onInit(G,$){var J;const Pe=this.normalizeInstanceIdentifier($),Te=null!==(J=this.onInitCallbacks.get(Pe))&&void 0!==J?J:new Set;Te.add(G),this.onInitCallbacks.set(Pe,Te);const Se=this.instances.get(Pe);return Se&&G(Se,Pe),()=>{Te.delete(G)}}invokeOnInitCallbacks(G,$){const J=this.onInitCallbacks.get($);if(J)for(const Pe of J)try{Pe(G,$)}catch{}}getOrInitializeService({instanceIdentifier:G,options:$={}}){let J=this.instances.get(G);if(!J&&this.component&&(J=this.component.instanceFactory(this.container,{instanceIdentifier:(he=G,he===re?void 0:he),options:$}),this.instances.set(G,J),this.instancesOptions.set(G,$),this.invokeOnInitCallbacks(J,G),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,G,J)}catch{}var he;return J||null}normalizeInstanceIdentifier(G=re){return this.component?this.component.multipleInstances?G:re:G}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ye{constructor(G){this.name=G,this.providers=new Map}addComponent(G){const $=this.getProvider(G.name);if($.isComponentSet())throw new Error(`Component ${G.name} has already been registered with ${this.name}`);$.setComponent(G)}addOrOverwriteComponent(G){this.getProvider(G.name).isComponentSet()&&this.providers.delete(G.name),this.addComponent(G)}getProvider(G){if(this.providers.has(G))return this.providers.get(G);const $=new fe(G,this);return this.providers.set(G,$),$}getProviders(){return Array.from(this.providers.values())}}},2833:(yt,Me,R)=>{var l=R(5861),X=R(9681),V=R(4859),re=R(2090),fe=R(8766);const me="@firebase/installations",he="w:0.6.0",G="FIS_v2",et=new re.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function be(K){return K instanceof re.ZR&&K.code.includes("request-failed")}function ue({projectId:K}){return`https://firebaseinstallations.googleapis.com/v1/projects/${K}/installations`}function pt(K){return{token:K.token,requestStatus:2,expiresIn:j(K.expiresIn),creationTime:Date.now()}}function lt(K,we){return Re.apply(this,arguments)}function Re(){return(Re=(0,l.Z)(function*(K,we){const ft=(yield we.json()).error;return et.create("request-failed",{requestName:K,serverCode:ft.code,serverMessage:ft.message,serverStatus:ft.status})})).apply(this,arguments)}function Ee({apiKey:K}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":K})}function Ae(K,{refreshToken:we}){const Ue=Ee(K);return Ue.append("Authorization",function Ce(K){return`${G} ${K}`}(we)),Ue}function $e(K){return Le.apply(this,arguments)}function Le(){return(Le=(0,l.Z)(function*(K){const we=yield K();return we.status>=500&&we.status<600?K():we})).apply(this,arguments)}function j(K){return Number(K.replace("s","000"))}function Q(K,we){return te.apply(this,arguments)}function te(){return(te=(0,l.Z)(function*({appConfig:K,heartbeatServiceProvider:we},{fid:Ue}){const ft=ue(K),Ht=Ee(K),rn=we.getImmediate({optional:!0});if(rn){const Li=yield rn.getHeartbeatsHeader();Li&&Ht.append("x-firebase-client",Li)}const gn={method:"POST",headers:Ht,body:JSON.stringify({fid:Ue,authVersion:G,appId:K.appId,sdkVersion:he})},ar=yield $e(()=>fetch(ft,gn));if(ar.ok){const Li=yield ar.json();return{fid:Li.fid||Ue,registrationStatus:2,refreshToken:Li.refreshToken,authToken:pt(Li.authToken)}}throw yield lt("Create Installation",ar)})).apply(this,arguments)}function se(K){return new Promise(we=>{setTimeout(we,K)})}const He=/^[cdef][\w-]{21}$/;function gt(){try{const K=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(K),K[0]=112+K[0]%16;const Ue=function Jt(K){return function ie(K){return btoa(String.fromCharCode(...K)).replace(/\+/g,"-").replace(/\//g,"_")}(K).substr(0,22)}(K);return He.test(Ue)?Ue:""}catch{return""}}function Lt(K){return`${K.appName}!${K.appId}`}const Ke=new Map;function un(K,we){const Ue=Lt(K);nn(Ue,we),function ii(K,we){const Ue=function jt(){return!Et&&"BroadcastChannel"in self&&(Et=new BroadcastChannel("[Firebase] FID Change"),Et.onmessage=K=>{nn(K.data.key,K.data.fid)}),Et}();Ue&&Ue.postMessage({key:K,fid:we}),function rr(){0===Ke.size&&Et&&(Et.close(),Et=null)}()}(Ue,we)}function nn(K,we){const Ue=Ke.get(K);if(Ue)for(const ft of Ue)ft(we)}let Et=null;const On="firebase-installations-store";let sr=null;function hi(){return sr||(sr=(0,fe.X3)("firebase-installations-database",1,{upgrade:(K,we)=>{0===we&&K.createObjectStore(On)}})),sr}function Wi(K,we){return fi.apply(this,arguments)}function fi(){return(fi=(0,l.Z)(function*(K,we){const Ue=Lt(K),Ht=(yield hi()).transaction(On,"readwrite"),rn=Ht.objectStore(On),Xn=yield rn.get(Ue);return yield rn.put(we,Ue),yield Ht.done,(!Xn||Xn.fid!==we.fid)&&un(K,we.fid),we})).apply(this,arguments)}function Lr(K){return tt.apply(this,arguments)}function tt(){return(tt=(0,l.Z)(function*(K){const we=Lt(K),ft=(yield hi()).transaction(On,"readwrite");yield ft.objectStore(On).delete(we),yield ft.done})).apply(this,arguments)}function Tn(K,we){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,l.Z)(function*(K,we){const Ue=Lt(K),Ht=(yield hi()).transaction(On,"readwrite"),rn=Ht.objectStore(On),Xn=yield rn.get(Ue),gn=we(Xn);return void 0===gn?yield rn.delete(Ue):yield rn.put(gn,Ue),yield Ht.done,gn&&(!Xn||Xn.fid!==gn.fid)&&un(K,gn.fid),gn})).apply(this,arguments)}function kn(K){return qi.apply(this,arguments)}function qi(){return(qi=(0,l.Z)(function*(K){let we;const Ue=yield Tn(K.appConfig,ft=>{const Ht=ri(ft),rn=Rn(K,Ht);return we=rn.registrationPromise,rn.installationEntry});return""===Ue.fid?{installationEntry:yield we}:{installationEntry:Ue,registrationPromise:we}})).apply(this,arguments)}function ri(K){return pn(K||{fid:gt(),registrationStatus:0})}function Rn(K,we){if(0===we.registrationStatus){if(!navigator.onLine)return{installationEntry:we,registrationPromise:Promise.reject(et.create("app-offline"))};const Ue={fid:we.fid,registrationStatus:1,registrationTime:Date.now()},ft=function $n(K,we){return ln.apply(this,arguments)}(K,Ue);return{installationEntry:Ue,registrationPromise:ft}}return 1===we.registrationStatus?{installationEntry:we,registrationPromise:Dt(K)}:{installationEntry:we}}function ln(){return(ln=(0,l.Z)(function*(K,we){try{const Ue=yield Q(K,we);return Wi(K.appConfig,Ue)}catch(Ue){throw be(Ue)&&409===Ue.customData.serverCode?yield Lr(K.appConfig):yield Wi(K.appConfig,{fid:we.fid,registrationStatus:0}),Ue}})).apply(this,arguments)}function Dt(K){return ht.apply(this,arguments)}function ht(){return(ht=(0,l.Z)(function*(K){let we=yield Vt(K.appConfig);for(;1===we.registrationStatus;)yield se(100),we=yield Vt(K.appConfig);if(0===we.registrationStatus){const{installationEntry:Ue,registrationPromise:ft}=yield kn(K);return ft||Ue}return we})).apply(this,arguments)}function Vt(K){return Tn(K,we=>{if(!we)throw et.create("installation-not-found");return pn(we)})}function pn(K){return function Qn(K){return 1===K.registrationStatus&&K.registrationTime+1e4<Date.now()}(K)?{fid:K.fid,registrationStatus:0}:K}function bi(K,we){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,l.Z)(function*({appConfig:K,heartbeatServiceProvider:we},Ue){const ft=or(K,Ue),Ht=Ae(K,Ue),rn=we.getImmediate({optional:!0});if(rn){const Li=yield rn.getHeartbeatsHeader();Li&&Ht.append("x-firebase-client",Li)}const gn={method:"POST",headers:Ht,body:JSON.stringify({installation:{sdkVersion:he,appId:K.appId}})},ar=yield $e(()=>fetch(ft,gn));if(ar.ok)return pt(yield ar.json());throw yield lt("Generate Auth Token",ar)})).apply(this,arguments)}function or(K,{fid:we}){return`${ue(K)}/${we}/authTokens:generate`}function Yt(K){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,l.Z)(function*(K,we=!1){let Ue;const ft=yield Tn(K.appConfig,rn=>{if(!ot(rn))throw et.create("not-registered");const Xn=rn.authToken;if(!we&&xt(Xn))return rn;if(1===Xn.requestStatus)return Ue=Xt(K,we),rn;{if(!navigator.onLine)throw et.create("app-offline");const gn=Ut(rn);return Ue=nt(K,gn),gn}});return Ue?yield Ue:ft.authToken})).apply(this,arguments)}function Xt(K,we){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,l.Z)(function*(K,we){let Ue=yield Fi(K.appConfig);for(;1===Ue.authToken.requestStatus;)yield se(100),Ue=yield Fi(K.appConfig);const ft=Ue.authToken;return 0===ft.requestStatus?Yt(K,we):ft})).apply(this,arguments)}function Fi(K){return Tn(K,we=>{if(!ot(we))throw et.create("not-registered");return function H(K){return 1===K.requestStatus&&K.requestTime+1e4<Date.now()}(we.authToken)?Object.assign(Object.assign({},we),{authToken:{requestStatus:0}}):we})}function nt(K,we){return Ne.apply(this,arguments)}function Ne(){return(Ne=(0,l.Z)(function*(K,we){try{const Ue=yield bi(K,we),ft=Object.assign(Object.assign({},we),{authToken:Ue});return yield Wi(K.appConfig,ft),Ue}catch(Ue){if(!be(Ue)||401!==Ue.customData.serverCode&&404!==Ue.customData.serverCode){const ft=Object.assign(Object.assign({},we),{authToken:{requestStatus:0}});yield Wi(K.appConfig,ft)}else yield Lr(K.appConfig);throw Ue}})).apply(this,arguments)}function ot(K){return void 0!==K&&2===K.registrationStatus}function xt(K){return 2===K.requestStatus&&!function Ft(K){const we=Date.now();return we<K.creationTime||K.creationTime+K.expiresIn<we+36e5}(K)}function Ut(K){const we={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},K),{authToken:we})}function O(){return(O=(0,l.Z)(function*(K){const we=K,{installationEntry:Ue,registrationPromise:ft}=yield kn(we);return ft?ft.catch(console.error):Yt(we).catch(console.error),Ue.fid})).apply(this,arguments)}function U(){return(U=(0,l.Z)(function*(K,we=!1){const Ue=K;return yield oe(Ue),(yield Yt(Ue,we)).token})).apply(this,arguments)}function oe(K){return Ie.apply(this,arguments)}function Ie(){return(Ie=(0,l.Z)(function*(K){const{registrationPromise:we}=yield kn(K);we&&(yield we)})).apply(this,arguments)}function hn(K){return et.create("missing-app-config-values",{valueName:K})}const Vr="installations",ts=K=>{const we=K.getProvider("app").getImmediate(),Ue=function si(K){if(!K||!K.options)throw hn("App Configuration");if(!K.name)throw hn("App Name");const we=["projectId","apiKey","appId"];for(const Ue of we)if(!K.options[Ue])throw hn(Ue);return{appName:K.name,projectId:K.options.projectId,apiKey:K.options.apiKey,appId:K.options.appId}}(we);return{app:we,appConfig:Ue,heartbeatServiceProvider:(0,X._getProvider)(we,"heartbeat"),_delete:()=>Promise.resolve()}},Ls=K=>{const we=K.getProvider("app").getImmediate(),Ue=(0,X._getProvider)(we,Vr).getImmediate();return{getId:()=>function B(K){return O.apply(this,arguments)}(Ue),getToken:Ht=>function W(K){return U.apply(this,arguments)}(Ue,Ht)}};(function Bt(){(0,X._registerComponent)(new V.wA(Vr,ts,"PUBLIC")),(0,X._registerComponent)(new V.wA("installations-internal",Ls,"PRIVATE"))})(),(0,X.registerVersion)(me,"0.6.0"),(0,X.registerVersion)(me,"0.6.0","esm2017")},1877:(yt,Me,R)=>{R.d(Me,{Am:()=>he,Ub:()=>ye,Yd:()=>ae,in:()=>X});const l=[];var X=(()=>{return(G=X||(X={}))[G.DEBUG=0]="DEBUG",G[G.VERBOSE=1]="VERBOSE",G[G.INFO=2]="INFO",G[G.WARN=3]="WARN",G[G.ERROR=4]="ERROR",G[G.SILENT=5]="SILENT",X;var G})();const V={debug:X.DEBUG,verbose:X.VERBOSE,info:X.INFO,warn:X.WARN,error:X.ERROR,silent:X.SILENT},re=X.INFO,fe={[X.DEBUG]:"log",[X.VERBOSE]:"log",[X.INFO]:"info",[X.WARN]:"warn",[X.ERROR]:"error"},me=(G,$,...J)=>{if($<G.logLevel)return;const Pe=(new Date).toISOString(),Te=fe[$];if(!Te)throw new Error(`Attempted to log a message with an invalid logType (value: ${$})`);console[Te](`[${Pe}]  ${G.name}:`,...J)};class ae{constructor($){this.name=$,this._logLevel=re,this._logHandler=me,this._userLogHandler=null,l.push(this)}get logLevel(){return this._logLevel}set logLevel($){if(!($ in X))throw new TypeError(`Invalid value "${$}" assigned to \`logLevel\``);this._logLevel=$}setLogLevel($){this._logLevel="string"==typeof $?V[$]:$}get logHandler(){return this._logHandler}set logHandler($){if("function"!=typeof $)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=$}get userLogHandler(){return this._userLogHandler}set userLogHandler($){this._userLogHandler=$}debug(...$){this._userLogHandler&&this._userLogHandler(this,X.DEBUG,...$),this._logHandler(this,X.DEBUG,...$)}log(...$){this._userLogHandler&&this._userLogHandler(this,X.VERBOSE,...$),this._logHandler(this,X.VERBOSE,...$)}info(...$){this._userLogHandler&&this._userLogHandler(this,X.INFO,...$),this._logHandler(this,X.INFO,...$)}warn(...$){this._userLogHandler&&this._userLogHandler(this,X.WARN,...$),this._logHandler(this,X.WARN,...$)}error(...$){this._userLogHandler&&this._userLogHandler(this,X.ERROR,...$),this._logHandler(this,X.ERROR,...$)}}function ye(G){l.forEach($=>{$.setLogLevel(G)})}function he(G,$){for(const J of l){let Pe=null;$&&$.level&&(Pe=V[$.level]),J.userLogHandler=null===G?null:(Te,Se,...et)=>{const be=et.map(ue=>{if(null==ue)return null;if("string"==typeof ue)return ue;if("number"==typeof ue||"boolean"==typeof ue)return ue.toString();if(ue instanceof Error)return ue.message;try{return JSON.stringify(ue)}catch{return null}}).filter(ue=>ue).join(" ");Se>=(Pe??Te.logLevel)&&G({level:X[Se].toLowerCase(),message:be,args:et,type:Te.name})}}}},3008:(yt,Me,R)=>{R.d(Me,{IH:()=>or,Gb:()=>Mi});var l=R(5861),X=R(9681),V=R(1877),re=R(2090),fe=R(4859);R(2833);const ae="analytics",ye="firebase_id",$="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",J="https://www.googletagmanager.com/gtag/js",Pe=new V.Yd("@firebase/analytics");function Te(O){return Promise.all(O.map(W=>W.catch(U=>U)))}function Se(O,W){const U=document.createElement("script");U.src=`${J}?l=${O}&id=${W}`,U.async=!0,document.head.appendChild(U)}function be(O,W,U,oe,Ie,Ye){return ue.apply(this,arguments)}function ue(){return(ue=(0,l.Z)(function*(O,W,U,oe,Ie,Ye){const ut=oe[Ie];try{if(ut)yield W[ut];else{const xe=(yield Te(U)).find(Fe=>Fe.measurementId===Ie);xe&&(yield W[xe.appId])}}catch(mt){Pe.error(mt)}O("config",Ie,Ye)})).apply(this,arguments)}function pt(O,W,U,oe,Ie){return lt.apply(this,arguments)}function lt(){return(lt=(0,l.Z)(function*(O,W,U,oe,Ie){try{let Ye=[];if(Ie&&Ie.send_to){let ut=Ie.send_to;Array.isArray(ut)||(ut=[ut]);const mt=yield Te(U);for(const xe of ut){const Fe=mt.find(yn=>yn.measurementId===xe),At=Fe&&W[Fe.appId];if(!At){Ye=[];break}Ye.push(At)}}0===Ye.length&&(Ye=Object.values(W)),yield Promise.all(Ye),O("event",oe,Ie||{})}catch(Ye){Pe.error(Ye)}})).apply(this,arguments)}function Ae(O){const W=window.document.getElementsByTagName("script");for(const U of Object.values(W))if(U.src&&U.src.includes(J)&&U.src.includes(O))return U;return null}const Le=new re.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),te=new class Q{constructor(W={},U=1e3){this.throttleMetadata=W,this.intervalMillis=U}getThrottleMetadata(W){return this.throttleMetadata[W]}setThrottleMetadata(W,U){this.throttleMetadata[W]=U}deleteThrottleMetadata(W){delete this.throttleMetadata[W]}};function se(O){return new Headers({Accept:"application/json","x-goog-api-key":O})}function ie(O){return He.apply(this,arguments)}function He(){return(He=(0,l.Z)(function*(O){var W;const{appId:U,apiKey:oe}=O,Ie={method:"GET",headers:se(oe)},Ye=$.replace("{app-id}",U),ut=yield fetch(Ye,Ie);if(200!==ut.status&&304!==ut.status){let mt="";try{const xe=yield ut.json();null!==(W=xe.error)&&void 0!==W&&W.message&&(mt=xe.error.message)}catch{}throw Le.create("config-fetch-failed",{httpStatus:ut.status,responseMessage:mt})}return ut.json()})).apply(this,arguments)}function Ve(O){return gt.apply(this,arguments)}function gt(){return(gt=(0,l.Z)(function*(O,W=te,U){const{appId:oe,apiKey:Ie,measurementId:Ye}=O.options;if(!oe)throw Le.create("no-app-id");if(!Ie){if(Ye)return{measurementId:Ye,appId:oe};throw Le.create("no-api-key")}const ut=W.getThrottleMetadata(oe)||{backoffCount:0,throttleEndTimeMillis:Date.now()},mt=new Un;return setTimeout((0,l.Z)(function*(){mt.abort()}),void 0!==U?U:6e4),Jt({appId:oe,apiKey:Ie,measurementId:Ye},ut,mt,W)})).apply(this,arguments)}function Jt(O,W,U){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,l.Z)(function*(O,{throttleEndTimeMillis:W,backoffCount:U},oe,Ie=te){var Ye;const{appId:ut,measurementId:mt}=O;try{yield Ke(oe,W)}catch(xe){if(mt)return Pe.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${mt} provided in the "measurementId" field in the local Firebase config. [${xe?.message}]`),{appId:ut,measurementId:mt};throw xe}try{const xe=yield ie(O);return Ie.deleteThrottleMetadata(ut),xe}catch(xe){const Fe=xe;if(!un(Fe)){if(Ie.deleteThrottleMetadata(ut),mt)return Pe.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${mt} provided in the "measurementId" field in the local Firebase config. [${Fe?.message}]`),{appId:ut,measurementId:mt};throw xe}const At=503===Number(null===(Ye=Fe?.customData)||void 0===Ye?void 0:Ye.httpStatus)?(0,re.$s)(U,Ie.intervalMillis,30):(0,re.$s)(U,Ie.intervalMillis),yn={throttleEndTimeMillis:Date.now()+At,backoffCount:U+1};return Ie.setThrottleMetadata(ut,yn),Pe.debug(`Calling attemptFetch again in ${At} millis`),Jt(O,yn,oe,Ie)}})).apply(this,arguments)}function Ke(O,W){return new Promise((U,oe)=>{const Ie=Math.max(W-Date.now(),0),Ye=setTimeout(U,Ie);O.addEventListener(()=>{clearTimeout(Ye),oe(Le.create("fetch-throttle",{throttleEndTimeMillis:W}))})})}function un(O){if(!(O instanceof re.ZR&&O.customData))return!1;const W=Number(O.customData.httpStatus);return 429===W||500===W||503===W||504===W}class Un{constructor(){this.listeners=[]}addEventListener(W){this.listeners.push(W)}abort(){this.listeners.forEach(W=>W())}}let dn,Wi;function ii(){return(ii=(0,l.Z)(function*(O,W,U,oe,Ie){if(Ie&&Ie.global)O("event",U,oe);else{const Ye=yield W;O("event",U,Object.assign(Object.assign({},oe),{send_to:Ye}))}})).apply(this,arguments)}function fi(O){Wi=O}function Lr(O){dn=O}function tt(){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,l.Z)(function*(){if(!(0,re.hl)())return Pe.warn(Le.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,re.eu)()}catch(O){return Pe.warn(Le.create("indexeddb-unavailable",{errorInfo:O?.toString()}).message),!1}return!0})).apply(this,arguments)}function kn(){return(kn=(0,l.Z)(function*(O,W,U,oe,Ie,Ye,ut){var mt;const xe=Ve(O);xe.then(hn=>{U[hn.measurementId]=hn.appId,O.options.measurementId&&hn.measurementId!==O.options.measurementId&&Pe.warn(`The measurement ID in the local Firebase config (${O.options.measurementId}) does not match the measurement ID fetched from the server (${hn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(hn=>Pe.error(hn)),W.push(xe);const Fe=tt().then(hn=>{if(hn)return oe.getId()}),[At,yn]=yield Promise.all([xe,Fe]);Ae(Ye)||Se(Ye,At.measurementId),Wi&&(Ie("consent","default",Wi),fi(void 0)),Ie("js",new Date);const si=null!==(mt=ut?.config)&&void 0!==mt?mt:{};return si.origin="firebase",si.update=!0,null!=yn&&(si[ye]=yn),Ie("config",At.measurementId,si),dn&&(Ie("set",dn),Lr(void 0)),At.measurementId})).apply(this,arguments)}class qi{constructor(W){this.app=W}_delete(){return delete ri[this.app.options.appId],Promise.resolve()}}let ri={},Rn=[];const $n={};let ht,Vt,ln="dataLayer",pn=!1;function Nt(O,W,U){!function bi(){const O=[];if((0,re.ru)()&&O.push("This is a browser extension environment."),(0,re.zI)()||O.push("Cookies are not available."),O.length>0){const W=O.map((oe,Ie)=>`(${Ie+1}) ${oe}`).join(" "),U=Le.create("invalid-analytics-context",{errorInfo:W});Pe.warn(U.message)}}();const oe=O.options.appId;if(!oe)throw Le.create("no-app-id");if(!O.options.apiKey){if(!O.options.measurementId)throw Le.create("no-api-key");Pe.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${O.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=ri[oe])throw Le.create("already-exists",{id:oe});if(!pn){!function et(O){let W=[];Array.isArray(window[O])?W=window[O]:window[O]=W}(ln);const{wrappedGtag:Ye,gtagCore:ut}=function Ee(O,W,U,oe,Ie){let Ye=function(...ut){window[oe].push(arguments)};return window[Ie]&&"function"==typeof window[Ie]&&(Ye=window[Ie]),window[Ie]=function Re(O,W,U,oe){function Ye(){return(Ye=(0,l.Z)(function*(ut,mt,xe){try{"event"===ut?yield pt(O,W,U,mt,xe):"config"===ut?yield be(O,W,U,oe,mt,xe):"consent"===ut?O("consent","update",xe):O("set",mt)}catch(Fe){Pe.error(Fe)}})).apply(this,arguments)}return function Ie(ut,mt,xe){return Ye.apply(this,arguments)}}(Ye,O,W,U),{gtagCore:Ye,wrappedGtag:window[Ie]}}(ri,Rn,$n,ln,"gtag");Vt=Ye,ht=ut,pn=!0}return ri[oe]=function Tr(O,W,U,oe,Ie,Ye,ut){return kn.apply(this,arguments)}(O,Rn,$n,W,ht,ln,U),new qi(O)}function or(O=(0,X.getApp)()){O=(0,re.m9)(O);const W=(0,X._getProvider)(O,ae);return W.isInitialized()?W.getImmediate():function Yt(O,W={}){const U=(0,X._getProvider)(O,ae);if(U.isInitialized()){const Ie=U.getImmediate();if((0,re.vZ)(W,U.getOptions()))return Ie;throw Le.create("already-initialized")}return U.initialize({options:W})}(O)}function Mi(){return Xt.apply(this,arguments)}function Xt(){return(Xt=(0,l.Z)(function*(){if((0,re.ru)()||!(0,re.zI)()||!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch{return!1}})).apply(this,arguments)}const Ut="@firebase/analytics",H="0.9.0";!function B(){(0,X._registerComponent)(new fe.wA(ae,(W,{options:U})=>Nt(W.getProvider("app").getImmediate(),W.getProvider("installations-internal").getImmediate(),U),"PUBLIC")),(0,X._registerComponent)(new fe.wA("analytics-internal",function O(W){try{const U=W.getProvider(ae).getImmediate();return{logEvent:(oe,Ie,Ye)=>function xt(O,W,U,oe){O=(0,re.m9)(O),function nn(O,W,U,oe,Ie){return ii.apply(this,arguments)}(Vt,ri[O.app.options.appId],W,U,oe).catch(Ie=>Pe.error(Ie))}(U,oe,Ie,Ye)}}catch(U){throw Le.create("interop-component-reg-failed",{reason:U})}},"PRIVATE")),(0,X.registerVersion)(Ut,H),(0,X.registerVersion)(Ut,H,"esm2017")}()},259:(yt,Me,R)=>{R.d(Me,{C6:()=>l.getApps,Mq:()=>l.getApp,ZF:()=>l.initializeApp});var l=R(9681);(0,l.registerVersion)("firebase","9.15.0","app")},9260:(yt,Me,R)=>{R.d(Me,{Z:()=>l.Z});var l=R(3942);l.Z.registerVersion("firebase","9.15.0","app-compat")},9169:(yt,Me,R)=>{R.r(Me);var l=R(5861),X=R(3942),V=R(2090),re=R(9681),fe=R(1877),me=R(655),ae=R(4859);const Se=function Pe(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},et=function Te(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},be=new V.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),pt=new fe.Yd("@firebase/auth");function lt(v,...p){pt.logLevel<=fe.in.ERROR&&pt.error(`Auth (${re.SDK_VERSION}): ${v}`,...p)}function Re(v,...p){throw Le(v,...p)}function Ee(v,...p){return Le(v,...p)}function Ae(v,p,_){const w=Object.assign(Object.assign({},et()),{[p]:_});return new V.LL("auth","Firebase",w).create(p,{appName:v.name})}function $e(v,p,_){if(!(p instanceof _))throw _.name!==p.constructor.name&&Re(v,"argument-error"),Ae(v,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Le(v,...p){if("string"!=typeof v){const _=p[0],w=[...p.slice(1)];return w[0]&&(w[0].appName=v.name),v._errorFactory.create(_,...w)}return be.create(v,...p)}function j(v,p,..._){if(!v)throw Le(p,..._)}function Ce(v){const p="INTERNAL ASSERTION FAILED: "+v;throw lt(p),new Error(p)}function Q(v,p){v||Ce(p)}const te=new Map;function se(v){Q(v instanceof Function,"Expected a class definition");let p=te.get(v);return p?(Q(p instanceof v,"Instance stored in cache mismatched with class"),p):(p=new v,te.set(v,p),p)}function Ve(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function gt(){return"http:"===Jt()||"https:"===Jt()}function Jt(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class un{constructor(p,_){this.shortDelay=p,this.longDelay=_,Q(_>p,"Short delay should be less than long delay!"),this.isMobile=(0,V.uI)()||(0,V.b$)()}get(){return function Lt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(gt()||(0,V.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Un(v,p){Q(v.emulator,"Emulator should always be set here");const{url:_}=v.emulator;return p?`${_}${p.startsWith("/")?p.slice(1):p}`:_}class dn{static initialize(p,_,w){this.fetchImpl=p,_&&(this.headersImpl=_),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Ce("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Ce("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Ce("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const nn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},ii=new un(3e4,6e4);function Et(v,p){return v.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:v.tenantId}):p}function jt(v,p,_,w){return rr.apply(this,arguments)}function rr(){return(rr=(0,l.Z)(function*(v,p,_,w,S={}){return Fr(v,S,(0,l.Z)(function*(){let x={},Y={};w&&("GET"===p?Y=w:x={body:JSON.stringify(w)});const _e=(0,V.xO)(Object.assign({key:v.config.apiKey},Y)).slice(1),qe=yield v._getAdditionalHeaders();return qe["Content-Type"]="application/json",v.languageCode&&(qe["X-Firebase-Locale"]=v.languageCode),dn.fetch()(hi(v,v.config.apiHost,_,_e),Object.assign({method:p,headers:qe,referrerPolicy:"no-referrer"},x))}))})).apply(this,arguments)}function Fr(v,p,_){return xi.apply(this,arguments)}function xi(){return(xi=(0,l.Z)(function*(v,p,_){v._canInitEmulator=!1;const w=Object.assign(Object.assign({},nn),p);try{const S=new Wi(v),x=yield Promise.race([_(),S.promise]);S.clearNetworkTimeout();const Y=yield x.json();if("needConfirmation"in Y)throw fi(v,"account-exists-with-different-credential",Y);if(x.ok&&!("errorMessage"in Y))return Y;{const _e=x.ok?Y.errorMessage:Y.error.message,[qe,dt]=_e.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===qe)throw fi(v,"credential-already-in-use",Y);if("EMAIL_EXISTS"===qe)throw fi(v,"email-already-in-use",Y);if("USER_DISABLED"===qe)throw fi(v,"user-disabled",Y);const Pt=w[qe]||qe.toLowerCase().replace(/[_\s]+/g,"-");if(dt)throw Ae(v,Pt,dt);Re(v,Pt)}}catch(S){if(S instanceof V.ZR)throw S;Re(v,"network-request-failed")}})).apply(this,arguments)}function On(v,p,_,w){return sr.apply(this,arguments)}function sr(){return(sr=(0,l.Z)(function*(v,p,_,w,S={}){const x=yield jt(v,p,_,w,S);return"mfaPendingCredential"in x&&Re(v,"multi-factor-auth-required",{_serverResponse:x}),x})).apply(this,arguments)}function hi(v,p,_,w){const S=`${p}${_}?${w}`;return v.config.emulator?Un(v.config,S):`${v.config.apiScheme}://${S}`}class Wi{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((_,w)=>{this.timer=setTimeout(()=>w(Ee(this.auth,"network-request-failed")),ii.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function fi(v,p,_){const w={appName:v.name};_.email&&(w.email=_.email),_.phoneNumber&&(w.phoneNumber=_.phoneNumber);const S=Ee(v,p,w);return S.customData._tokenResponse=_,S}function tt(){return(tt=(0,l.Z)(function*(v,p){return jt(v,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function Tn(v,p){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,l.Z)(function*(v,p){return jt(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function kn(v,p){return qi.apply(this,arguments)}function qi(){return(qi=(0,l.Z)(function*(v,p){return jt(v,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function ri(v){if(v)try{const p=new Date(Number(v));if(!isNaN(p.getTime()))return p.toUTCString()}catch{}}function ln(){return(ln=(0,l.Z)(function*(v,p=!1){const _=(0,V.m9)(v),w=yield _.getIdToken(p),S=ht(w);j(S&&S.exp&&S.auth_time&&S.iat,_.auth,"internal-error");const x="object"==typeof S.firebase?S.firebase:void 0,Y=x?.sign_in_provider;return{claims:S,token:w,authTime:ri(Dt(S.auth_time)),issuedAtTime:ri(Dt(S.iat)),expirationTime:ri(Dt(S.exp)),signInProvider:Y||null,signInSecondFactor:x?.sign_in_second_factor||null}})).apply(this,arguments)}function Dt(v){return 1e3*Number(v)}function ht(v){const[p,_,w]=v.split(".");if(void 0===p||void 0===_||void 0===w)return lt("JWT malformed, contained fewer than 3 sections"),null;try{const S=(0,V.tV)(_);return S?JSON.parse(S):(lt("Failed to decode base64 JWT payload"),null)}catch(S){return lt("Caught error parsing JWT payload as JSON",S?.toString()),null}}function pn(v,p){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,l.Z)(function*(v,p,_=!1){if(_)return p;try{return yield p}catch(w){throw w instanceof V.ZR&&bi(w)&&v.auth.currentUser===v&&(yield v.auth.signOut()),w}})).apply(this,arguments)}function bi({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}class Nt{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var _;if(p){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const S=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,S)}}schedule(p=!1){var _=this;if(!this.isRunning)return;const w=this.getInterval(p);this.timerId=setTimeout((0,l.Z)(function*(){yield _.iteration()}),w)}iteration(){var p=this;return(0,l.Z)(function*(){try{yield p.user.getIdToken(!0)}catch(_){return void("auth/network-request-failed"===_?.code&&p.schedule(!0))}p.schedule()})()}}class or{constructor(p,_){this.createdAt=p,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=ri(this.lastLoginAt),this.creationTime=ri(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Yt(v){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,l.Z)(function*(v){var p;const _=v.auth,w=yield v.getIdToken(),S=yield pn(v,kn(_,{idToken:w}));j(S?.users.length,_,"internal-error");const x=S.users[0];v._notifyReloadListener(x);const Y=null!==(p=x.providerUserInfo)&&void 0!==p&&p.length?nt(x.providerUserInfo):[],_e=Fi(v.providerData,Y),Pt=!!v.isAnonymous&&!(v.email&&x.passwordHash||_e?.length),It={uid:x.localId,displayName:x.displayName||null,photoURL:x.photoUrl||null,email:x.email||null,emailVerified:x.emailVerified||!1,phoneNumber:x.phoneNumber||null,tenantId:x.tenantId||null,providerData:_e,metadata:new or(x.createdAt,x.lastLoginAt),isAnonymous:Pt};Object.assign(v,It)})).apply(this,arguments)}function Jn(){return(Jn=(0,l.Z)(function*(v){const p=(0,V.m9)(v);yield Yt(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function Fi(v,p){return[...v.filter(w=>!p.some(S=>S.providerId===w.providerId)),...p]}function nt(v){return v.map(p=>{var{providerId:_}=p,w=(0,me._T)(p,["providerId"]);return{providerId:_,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}function ot(){return(ot=(0,l.Z)(function*(v,p){const _=yield Fr(v,{},(0,l.Z)(function*(){const w=(0,V.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:S,apiKey:x}=v.config,Y=hi(v,S,"/v1/token",`key=${x}`),_e=yield v._getAdditionalHeaders();return _e["Content-Type"]="application/x-www-form-urlencoded",dn.fetch()(Y,{method:"POST",headers:_e,body:w})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class xt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){j(p.idToken,"internal-error"),j(typeof p.idToken<"u","internal-error"),j(typeof p.refreshToken<"u","internal-error");const _="expiresIn"in p&&typeof p.expiresIn<"u"?Number(p.expiresIn):function Vt(v){const p=ht(v);return j(p,"internal-error"),j(typeof p.exp<"u","internal-error"),j(typeof p.iat<"u","internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,_)}getToken(p,_=!1){var w=this;return(0,l.Z)(function*(){return j(!w.accessToken||w.refreshToken,p,"user-token-expired"),_||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(p,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,_){var w=this;return(0,l.Z)(function*(){const{accessToken:S,refreshToken:x,expiresIn:Y}=yield function Ne(v,p){return ot.apply(this,arguments)}(p,_);w.updateTokensAndExpiration(S,x,Number(Y))})()}updateTokensAndExpiration(p,_,w){this.refreshToken=_||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(p,_){const{refreshToken:w,accessToken:S,expirationTime:x}=_,Y=new xt;return w&&(j("string"==typeof w,"internal-error",{appName:p}),Y.refreshToken=w),S&&(j("string"==typeof S,"internal-error",{appName:p}),Y.accessToken=S),x&&(j("number"==typeof x,"internal-error",{appName:p}),Y.expirationTime=x),Y}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new xt,this.toJSON())}_performRefresh(){return Ce("not implemented")}}function Ft(v,p){j("string"==typeof v||typeof v>"u","internal-error",{appName:p})}class Ut{constructor(p){var{uid:_,auth:w,stsTokenManager:S}=p,x=(0,me._T)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Nt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=w,this.stsTokenManager=S,this.accessToken=S.accessToken,this.displayName=x.displayName||null,this.email=x.email||null,this.emailVerified=x.emailVerified||!1,this.phoneNumber=x.phoneNumber||null,this.photoURL=x.photoURL||null,this.isAnonymous=x.isAnonymous||!1,this.tenantId=x.tenantId||null,this.providerData=x.providerData?[...x.providerData]:[],this.metadata=new or(x.createdAt||void 0,x.lastLoginAt||void 0)}getIdToken(p){var _=this;return(0,l.Z)(function*(){const w=yield pn(_,_.stsTokenManager.getToken(_.auth,p));return j(w,_.auth,"internal-error"),_.accessToken!==w&&(_.accessToken=w,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),w})()}getIdTokenResult(p){return function $n(v){return ln.apply(this,arguments)}(this,p)}reload(){return function Xt(v){return Jn.apply(this,arguments)}(this)}_assign(p){this!==p&&(j(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(_=>Object.assign({},_)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){return new Ut(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(p){j(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,_=!1){var w=this;return(0,l.Z)(function*(){let S=!1;p.idToken&&p.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(p),S=!0),_&&(yield Yt(w)),yield w.auth._persistUserIfCurrent(w),S&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var p=this;return(0,l.Z)(function*(){const _=yield p.getIdToken();return yield pn(p,function Lr(v,p){return tt.apply(this,arguments)}(p.auth,{idToken:_})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,_){var w,S,x,Y,_e,qe,dt,Pt;const It=null!==(w=_.displayName)&&void 0!==w?w:void 0,Dn=null!==(S=_.email)&&void 0!==S?S:void 0,ki=null!==(x=_.phoneNumber)&&void 0!==x?x:void 0,ls=null!==(Y=_.photoURL)&&void 0!==Y?Y:void 0,lm=null!==(_e=_.tenantId)&&void 0!==_e?_e:void 0,cm=null!==(qe=_._redirectEventId)&&void 0!==qe?qe:void 0,um=null!==(dt=_.createdAt)&&void 0!==dt?dt:void 0,Pd=null!==(Pt=_.lastLoginAt)&&void 0!==Pt?Pt:void 0,{uid:dm,emailVerified:Ev,isAnonymous:fa,providerData:Wa,stsTokenManager:hm}=_;j(dm&&hm,p,"internal-error");const Iv=xt.fromJSON(this.name,hm);j("string"==typeof dm,p,"internal-error"),Ft(It,p.name),Ft(Dn,p.name),j("boolean"==typeof Ev,p,"internal-error"),j("boolean"==typeof fa,p,"internal-error"),Ft(ki,p.name),Ft(ls,p.name),Ft(lm,p.name),Ft(cm,p.name),Ft(um,p.name),Ft(Pd,p.name);const qa=new Ut({uid:dm,auth:p,email:Dn,emailVerified:Ev,displayName:It,isAnonymous:fa,photoURL:ls,phoneNumber:ki,tenantId:lm,stsTokenManager:Iv,createdAt:um,lastLoginAt:Pd});return Wa&&Array.isArray(Wa)&&(qa.providerData=Wa.map(za=>Object.assign({},za))),cm&&(qa._redirectEventId=cm),qa}static _fromIdTokenResponse(p,_,w=!1){return(0,l.Z)(function*(){const S=new xt;S.updateFromServerResponse(_);const x=new Ut({uid:_.localId,auth:p,stsTokenManager:S,isAnonymous:w});return yield Yt(x),x})()}}const B=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,l.Z)(function*(){return!0})()}_set(_,w){var S=this;return(0,l.Z)(function*(){S.storage[_]=w})()}_get(_){var w=this;return(0,l.Z)(function*(){const S=w.storage[_];return void 0===S?null:S})()}_remove(_){var w=this;return(0,l.Z)(function*(){delete w.storage[_]})()}_addListener(_,w){}_removeListener(_,w){}}return v.type="NONE",v})();function O(v,p,_){return`firebase:${v}:${p}:${_}`}class W{constructor(p,_,w){this.persistence=p,this.auth=_,this.userKey=w;const{config:S,name:x}=this.auth;this.fullUserKey=O(this.userKey,S.apiKey,x),this.fullPersistenceKey=O("persistence",S.apiKey,x),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,l.Z)(function*(){const _=yield p.persistence._get(p.fullUserKey);return _?Ut._fromJSON(p.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var _=this;return(0,l.Z)(function*(){if(_.persistence===p)return;const w=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=p,w?_.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,_,w="authUser"){return(0,l.Z)(function*(){if(!_.length)return new W(se(B),p,w);const S=(yield Promise.all(_.map(function(){var dt=(0,l.Z)(function*(Pt){if(yield Pt._isAvailable())return Pt});return function(Pt){return dt.apply(this,arguments)}}()))).filter(dt=>dt);let x=S[0]||se(B);const Y=O(w,p.config.apiKey,p.name);let _e=null;for(const dt of _)try{const Pt=yield dt._get(Y);if(Pt){const It=Ut._fromJSON(p,Pt);dt!==x&&(_e=It),x=dt;break}}catch{}const qe=S.filter(dt=>dt._shouldAllowMigration);return x._shouldAllowMigration&&qe.length?(x=qe[0],_e&&(yield x._set(Y,_e.toJSON())),yield Promise.all(_.map(function(){var dt=(0,l.Z)(function*(Pt){if(Pt!==x)try{yield Pt._remove(Y)}catch{}});return function(Pt){return dt.apply(this,arguments)}}())),new W(x,p,w)):new W(x,p,w)})()}}function U(v){const p=v.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(ut(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(oe(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(xe(p))return"Blackberry";if(Fe(p))return"Webos";if(Ie(p))return"Safari";if((p.includes("chrome/")||Ye(p))&&!p.includes("edge/"))return"Chrome";if(mt(p))return"Android";{const w=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===w?.length)return w[1]}return"Other"}function oe(v=(0,V.z$)()){return/firefox\//i.test(v)}function Ie(v=(0,V.z$)()){const p=v.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function Ye(v=(0,V.z$)()){return/crios\//i.test(v)}function ut(v=(0,V.z$)()){return/iemobile/i.test(v)}function mt(v=(0,V.z$)()){return/android/i.test(v)}function xe(v=(0,V.z$)()){return/blackberry/i.test(v)}function Fe(v=(0,V.z$)()){return/webos/i.test(v)}function At(v=(0,V.z$)()){return/iphone|ipad|ipod/i.test(v)||/macintosh/i.test(v)&&/mobile/i.test(v)}function Vr(v=(0,V.z$)()){return At(v)||mt(v)||Fe(v)||xe(v)||/windows phone/i.test(v)||ut(v)}function ts(v,p=[]){let _;switch(v){case"Browser":_=U((0,V.z$)());break;case"Worker":_=`${U((0,V.z$)())}-${v}`;break;default:_=v}const w=p.length?p.join(","):"FirebaseCore-web";return`${_}/JsCore/${re.SDK_VERSION}/${w}`}class Ls{constructor(p){this.auth=p,this.queue=[]}pushCallback(p,_){const w=x=>new Promise((Y,_e)=>{try{Y(p(x))}catch(qe){_e(qe)}});w.onAbort=_,this.queue.push(w);const S=this.queue.length-1;return()=>{this.queue[S]=()=>Promise.resolve()}}runMiddleware(p){var _=this;return(0,l.Z)(function*(){if(_.auth.currentUser===p)return;const w=[];try{for(const S of _.queue)yield S(p),S.onAbort&&w.push(S.onAbort)}catch(S){w.reverse();for(const x of w)try{x()}catch{}throw _.auth._errorFactory.create("login-blocked",{originalMessage:S?.message})}})()}}class Bt{constructor(p,_,w){this.app=p,this.heartbeatServiceProvider=_,this.config=w,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new we(this),this.idTokenSubscription=new we(this),this.beforeStateQueue=new Ls(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=be,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=w.sdkClientVersion}_initializeWithPersistence(p,_){var w=this;return _&&(this._popupRedirectResolver=se(_)),this._initializationPromise=this.queue((0,l.Z)(function*(){var S,x;if(!w._deleted&&(w.persistenceManager=yield W.create(w,p),!w._deleted)){if(null!==(S=w._popupRedirectResolver)&&void 0!==S&&S._shouldInitProactively)try{yield w._popupRedirectResolver._initialize(w)}catch{}yield w.initializeCurrentUser(_),w.lastNotifiedUid=(null===(x=w.currentUser)||void 0===x?void 0:x.uid)||null,!w._deleted&&(w._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,l.Z)(function*(){if(p._deleted)return;const _=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||_){if(p.currentUser&&_&&p.currentUser.uid===_.uid)return p._currentUser._assign(_),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(_,!0)}})()}initializeCurrentUser(p){var _=this;return(0,l.Z)(function*(){var w;const S=yield _.assertedPersistence.getCurrentUser();let x=S,Y=!1;if(p&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const _e=null===(w=_.redirectUser)||void 0===w?void 0:w._redirectEventId,qe=x?._redirectEventId,dt=yield _.tryRedirectSignIn(p);(!_e||_e===qe)&&dt?.user&&(x=dt.user,Y=!0)}if(!x)return _.directlySetCurrentUser(null);if(!x._redirectEventId){if(Y)try{yield _.beforeStateQueue.runMiddleware(x)}catch(_e){x=S,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(_e))}return x?_.reloadAndSetCurrentUserOrClear(x):_.directlySetCurrentUser(null)}return j(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===x._redirectEventId?_.directlySetCurrentUser(x):_.reloadAndSetCurrentUserOrClear(x)})()}tryRedirectSignIn(p){var _=this;return(0,l.Z)(function*(){let w=null;try{w=yield _._popupRedirectResolver._completeRedirectFn(_,p,!0)}catch{yield _._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(p){var _=this;return(0,l.Z)(function*(){try{yield Yt(p)}catch(w){if("auth/network-request-failed"!==w?.code)return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function Ke(){if(typeof navigator>"u")return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var p=this;return(0,l.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var _=this;return(0,l.Z)(function*(){const w=p?(0,V.m9)(p):null;return w&&j(w.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(w&&w._clone(_))})()}_updateCurrentUser(p,_=!1){var w=this;return(0,l.Z)(function*(){if(!w._deleted)return p&&j(w.tenantId===p.tenantId,w,"tenant-id-mismatch"),_||(yield w.beforeStateQueue.runMiddleware(p)),w.queue((0,l.Z)(function*(){yield w.directlySetCurrentUser(p),w.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,l.Z)(function*(){return yield p.beforeStateQueue.runMiddleware(null),(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null,!0)})()}setPersistence(p){var _=this;return this.queue((0,l.Z)(function*(){yield _.assertedPersistence.setPersistence(se(p))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new V.LL("auth","Firebase",p())}onAuthStateChanged(p,_,w){return this.registerStateListener(this.authStateSubscription,p,_,w)}beforeAuthStateChanged(p,_){return this.beforeStateQueue.pushCallback(p,_)}onIdTokenChanged(p,_,w){return this.registerStateListener(this.idTokenSubscription,p,_,w)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,_){var w=this;return(0,l.Z)(function*(){const S=yield w.getOrInitRedirectPersistenceManager(_);return null===p?S.removeCurrentUser():S.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var _=this;return(0,l.Z)(function*(){if(!_.redirectPersistenceManager){const w=p&&se(p)||_._popupRedirectResolver;j(w,_,"argument-error"),_.redirectPersistenceManager=yield W.create(_,[se(w._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(p){var _=this;return(0,l.Z)(function*(){var w,S;return _._isInitialized&&(yield _.queue((0,l.Z)(function*(){}))),(null===(w=_._currentUser)||void 0===w?void 0:w._redirectEventId)===p?_._currentUser:(null===(S=_.redirectUser)||void 0===S?void 0:S._redirectEventId)===p?_.redirectUser:null})()}_persistUserIfCurrent(p){var _=this;return(0,l.Z)(function*(){if(p===_.currentUser)return _.queue((0,l.Z)(function*(){return _.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(_=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,_,w,S){if(this._deleted)return()=>{};const x="function"==typeof _?_:_.next.bind(_),Y=this._isInitialized?Promise.resolve():this._initializationPromise;return j(Y,this,"internal-error"),Y.then(()=>x(this.currentUser)),"function"==typeof _?p.addObserver(_,w,S):p.addObserver(_)}directlySetCurrentUser(p){var _=this;return(0,l.Z)(function*(){_.currentUser&&_.currentUser!==p&&_._currentUser._stopProactiveRefresh(),p&&_.isProactiveRefreshEnabled&&p._startProactiveRefresh(),_.currentUser=p,p?yield _.assertedPersistence.setCurrentUser(p):yield _.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return j(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=ts(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,l.Z)(function*(){var _;const w={"X-Client-Version":p.clientVersion};p.app.options.appId&&(w["X-Firebase-gmpid"]=p.app.options.appId);const S=yield null===(_=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();return S&&(w["X-Firebase-Client"]=S),w})()}}function K(v){return(0,V.m9)(v)}class we{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,V.ne)(_=>this.observer=_)}get next(){return j(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ft(v){const p=v.indexOf(":");return p<0?"":v.substr(0,p+1)}function rn(v){if(!v)return null;const p=Number(v);return isNaN(p)?null:p}class gn{constructor(p,_){this.providerId=p,this.signInMethod=_}toJSON(){return Ce("not implemented")}_getIdTokenResponse(p){return Ce("not implemented")}_linkToIdToken(p,_){return Ce("not implemented")}_getReauthenticationResolver(p){return Ce("not implemented")}}function ar(v,p){return Li.apply(this,arguments)}function Li(){return(Li=(0,l.Z)(function*(v,p){return jt(v,"POST","/v1/accounts:resetPassword",Et(v,p))})).apply(this,arguments)}function fn(v,p){return wc.apply(this,arguments)}function wc(){return(wc=(0,l.Z)(function*(v,p){return jt(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Dc(v,p){return oo.apply(this,arguments)}function oo(){return(oo=(0,l.Z)(function*(v,p){return jt(v,"POST","/v1/accounts:update",Et(v,p))})).apply(this,arguments)}function Oi(){return(Oi=(0,l.Z)(function*(v,p){return On(v,"POST","/v1/accounts:signInWithPassword",Et(v,p))})).apply(this,arguments)}function ys(v,p){return Ur.apply(this,arguments)}function Ur(){return(Ur=(0,l.Z)(function*(v,p){return jt(v,"POST","/v1/accounts:sendOobCode",Et(v,p))})).apply(this,arguments)}function Sn(v,p){return Aa.apply(this,arguments)}function Aa(){return(Aa=(0,l.Z)(function*(v,p){return ys(v,p)})).apply(this,arguments)}function zi(v,p){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,l.Z)(function*(v,p){return ys(v,p)})).apply(this,arguments)}function Zo(v,p){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,l.Z)(function*(v,p){return ys(v,p)})).apply(this,arguments)}function ll(v,p){return lr.apply(this,arguments)}function lr(){return(lr=(0,l.Z)(function*(v,p){return ys(v,p)})).apply(this,arguments)}function Zu(){return(Zu=(0,l.Z)(function*(v,p){return On(v,"POST","/v1/accounts:signInWithEmailLink",Et(v,p))})).apply(this,arguments)}function Us(){return(Us=(0,l.Z)(function*(v,p){return On(v,"POST","/v1/accounts:signInWithEmailLink",Et(v,p))})).apply(this,arguments)}class cl extends gn{constructor(p,_,w,S=null){super("password",w),this._email=p,this._password=_,this._tenantId=S}static _fromEmailAndPassword(p,_){return new cl(p,_,"password")}static _fromEmailAndCode(p,_,w=null){return new cl(p,_,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p;if(_?.email&&_?.password){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(p){var _=this;return(0,l.Z)(function*(){switch(_.signInMethod){case"password":return function Sa(v,p){return Oi.apply(this,arguments)}(p,{returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function $u(v,p){return Zu.apply(this,arguments)}(p,{email:_._email,oobCode:_._password});default:Re(p,"internal-error")}})()}_linkToIdToken(p,_){var w=this;return(0,l.Z)(function*(){switch(w.signInMethod){case"password":return fn(p,{idToken:_,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function Na(v,p){return Us.apply(this,arguments)}(p,{idToken:_,email:w._email,oobCode:w._password});default:Re(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function wi(v,p){return Wu.apply(this,arguments)}function Wu(){return(Wu=(0,l.Z)(function*(v,p){return On(v,"POST","/v1/accounts:signInWithIdp",Et(v,p))})).apply(this,arguments)}class ns extends gn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const _=new ns(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(_.idToken=p.idToken),p.accessToken&&(_.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(_.nonce=p.nonce),p.pendingToken&&(_.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(_.accessToken=p.oauthToken,_.secret=p.oauthTokenSecret):Re("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p,{providerId:w,signInMethod:S}=_,x=(0,me._T)(_,["providerId","signInMethod"]);if(!w||!S)return null;const Y=new ns(w,S);return Y.idToken=x.idToken||void 0,Y.accessToken=x.accessToken||void 0,Y.secret=x.secret,Y.nonce=x.nonce,Y.pendingToken=x.pendingToken||null,Y}_getIdTokenResponse(p){return wi(p,this.buildRequest())}_linkToIdToken(p,_){const w=this.buildRequest();return w.idToken=_,wi(p,w)}_getReauthenticationResolver(p){const _=this.buildRequest();return _.autoCreate=!1,wi(p,_)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),p.postBody=(0,V.xO)(_)}return p}}function qu(v,p){return Cc.apply(this,arguments)}function Cc(){return(Cc=(0,l.Z)(function*(v,p){return jt(v,"POST","/v1/accounts:sendVerificationCode",Et(v,p))})).apply(this,arguments)}function Ku(){return(Ku=(0,l.Z)(function*(v,p){return On(v,"POST","/v1/accounts:signInWithPhoneNumber",Et(v,p))})).apply(this,arguments)}function Yh(){return(Yh=(0,l.Z)(function*(v,p){const _=yield On(v,"POST","/v1/accounts:signInWithPhoneNumber",Et(v,p));if(_.temporaryProof)throw fi(v,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const Yu={USER_NOT_FOUND:"user-not-found"};function Qh(){return(Qh=(0,l.Z)(function*(v,p){return On(v,"POST","/v1/accounts:signInWithPhoneNumber",Et(v,Object.assign(Object.assign({},p),{operation:"REAUTH"})),Yu)})).apply(this,arguments)}class Bs extends gn{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,_){return new Bs({verificationId:p,verificationCode:_})}static _fromTokenResponse(p,_){return new Bs({phoneNumber:p,temporaryProof:_})}_getIdTokenResponse(p){return function zu(v,p){return Ku.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,_){return function jy(v,p){return Yh.apply(this,arguments)}(p,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function Hy(v,p){return Qh.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:_,verificationId:w,verificationCode:S}=this.params;return p&&_?{temporaryProof:p,phoneNumber:_}:{sessionInfo:w,code:S}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:_,verificationCode:w,phoneNumber:S,temporaryProof:x}=p;return w||_||S||x?new Bs({verificationId:_,verificationCode:w,phoneNumber:S,temporaryProof:x}):null}}class ul{constructor(p){var _,w,S,x,Y,_e;const qe=(0,V.zd)((0,V.pd)(p)),dt=null!==(_=qe.apiKey)&&void 0!==_?_:null,Pt=null!==(w=qe.oobCode)&&void 0!==w?w:null,It=function Ec(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(S=qe.mode)&&void 0!==S?S:null);j(dt&&Pt&&It,"argument-error"),this.apiKey=dt,this.operation=It,this.code=Pt,this.continueUrl=null!==(x=qe.continueUrl)&&void 0!==x?x:null,this.languageCode=null!==(Y=qe.languageCode)&&void 0!==Y?Y:null,this.tenantId=null!==(_e=qe.tenantId)&&void 0!==_e?_e:null}static parseLink(p){const _=function Mg(v){const p=(0,V.zd)((0,V.pd)(v)).link,_=p?(0,V.zd)((0,V.pd)(p)).deep_link_id:null,w=(0,V.zd)((0,V.pd)(v)).deep_link_id;return(w?(0,V.zd)((0,V.pd)(w)).link:null)||w||_||p||v}(p);try{return new ul(_)}catch{return null}}}let is=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(_,w){return cl._fromEmailAndPassword(_,w)}static credentialWithLink(_,w){const S=ul.parseLink(w);return j(S,"argument-error"),cl._fromEmailAndCode(_,S.code,S.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class js{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class Hs extends js{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class ao extends Hs{static credentialFromJSON(p){const _="string"==typeof p?JSON.parse(p):p;return j("providerId"in _&&"signInMethod"in _,"argument-error"),ns._fromParams(_)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return j(p.idToken||p.accessToken,"argument-error"),ns._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return ao.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return ao.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:_,oauthAccessToken:w,oauthTokenSecret:S,pendingToken:x,nonce:Y,providerId:_e}=p;if(!w&&!S&&!_&&!x||!_e)return null;try{return new ao(_e)._credential({idToken:_,accessToken:w,nonce:Y,pendingToken:x})}catch{return null}}}let dl=(()=>{class v extends Hs{constructor(){super("facebook.com")}static credential(_){return ns._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return v.credential(_.oauthAccessToken)}catch{return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),hl=(()=>{class v extends Hs{constructor(){super("google.com"),this.addScope("profile")}static credential(_,w){return ns._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:w})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:w,oauthAccessToken:S}=_;if(!w&&!S)return null;try{return v.credential(w,S)}catch{return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),Ic=(()=>{class v extends Hs{constructor(){super("github.com")}static credential(_){return ns._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return v.credential(_.oauthAccessToken)}catch{return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class oi extends gn{constructor(p,_){super(p,p),this.pendingToken=_}_getIdTokenResponse(p){return wi(p,this.buildRequest())}_linkToIdToken(p,_){const w=this.buildRequest();return w.idToken=_,wi(p,w)}_getReauthenticationResolver(p){const _=this.buildRequest();return _.autoCreate=!1,wi(p,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p,{providerId:w,signInMethod:S,pendingToken:x}=_;return w&&S&&x&&w===S?new oi(w,x):null}static _create(p,_){return new oi(p,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class qo extends js{constructor(p){j(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return qo.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return qo.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const _=oi.fromJSON(p);return j(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:_,providerId:w}=p;if(!_||!w)return null;try{return oi._create(w,_)}catch{return null}}}let Ki=(()=>{class v extends Hs{constructor(){super("twitter.com")}static credential(_,w){return ns._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:w})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:w,oauthTokenSecret:S}=_;if(!w||!S)return null;try{return v.credential(w,S)}catch{return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function zo(v,p){return xa.apply(this,arguments)}function xa(){return(xa=(0,l.Z)(function*(v,p){return On(v,"POST","/v1/accounts:signUp",Et(v,p))})).apply(this,arguments)}class cr{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,_,w,S=!1){return(0,l.Z)(function*(){const x=yield Ut._fromIdTokenResponse(p,w,S),Y=Og(w);return new cr({user:x,providerId:Y,_tokenResponse:w,operationType:_})})()}static _forOperation(p,_,w){return(0,l.Z)(function*(){yield p._updateTokensIfNecessary(w,!0);const S=Og(w);return new cr({user:p,providerId:S,_tokenResponse:w,operationType:_})})()}}function Og(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function ei(){return(ei=(0,l.Z)(function*(v){var p;const _=K(v);if(yield _._initializationPromise,null!==(p=_.currentUser)&&void 0!==p&&p.isAnonymous)return new cr({user:_.currentUser,providerId:null,operationType:"signIn"});const w=yield zo(_,{returnSecureToken:!0}),S=yield cr._fromIdTokenResponse(_,"signIn",w,!0);return yield _._updateCurrentUser(S.user),S})).apply(this,arguments)}class fl extends V.ZR{constructor(p,_,w,S){var x;super(_.code,_.message),this.operationType=w,this.user=S,Object.setPrototypeOf(this,fl.prototype),this.customData={appName:p.name,tenantId:null!==(x=p.tenantId)&&void 0!==x?x:void 0,_serverResponse:_.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(p,_,w,S){return new fl(p,_,w,S)}}function Ko(v,p,_,w){return("reauthenticate"===p?_._getReauthenticationResolver(v):_._getIdTokenResponse(v)).catch(x=>{throw"auth/multi-factor-auth-required"===x.code?fl._fromErrorAndOperation(v,x,p,w):x})}function lo(v){return new Set(v.map(({providerId:p})=>p).filter(p=>!!p))}function Qu(){return(Qu=(0,l.Z)(function*(v,p){const _=(0,V.m9)(v);yield Qt(!0,_,p);const{providerUserInfo:w}=yield Tn(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[p]}),S=lo(w||[]);return _.providerData=_.providerData.filter(x=>S.has(x.providerId)),S.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_})).apply(this,arguments)}function Br(v,p){return co.apply(this,arguments)}function co(){return(co=(0,l.Z)(function*(v,p,_=!1){const w=yield pn(v,p._linkToIdToken(v.auth,yield v.getIdToken()),_);return cr._forOperation(v,"link",w)})).apply(this,arguments)}function Qt(v,p,_){return Jh.apply(this,arguments)}function Jh(){return(Jh=(0,l.Z)(function*(v,p,_){yield Yt(p);const S=!1===v?"provider-already-linked":"no-such-provider";j(lo(p.providerData).has(_)===v,p.auth,S)})).apply(this,arguments)}function Yo(v,p){return Sc.apply(this,arguments)}function Sc(){return(Sc=(0,l.Z)(function*(v,p,_=!1){const{auth:w}=v,S="reauthenticate";try{const x=yield pn(v,Ko(w,S,p,v),_);j(x.idToken,w,"internal-error");const Y=ht(x.idToken);j(Y,w,"internal-error");const{sub:_e}=Y;return j(v.uid===_e,w,"user-mismatch"),cr._forOperation(v,S,x)}catch(x){throw"auth/user-not-found"===x?.code&&Re(w,"user-mismatch"),x}})).apply(this,arguments)}function vs(v,p){return pl.apply(this,arguments)}function pl(){return(pl=(0,l.Z)(function*(v,p,_=!1){const w="signIn",S=yield Ko(v,w,p),x=yield cr._fromIdTokenResponse(v,w,S);return _||(yield v._updateCurrentUser(x.user)),x})).apply(this,arguments)}function Ma(v,p){return M.apply(this,arguments)}function M(){return(M=(0,l.Z)(function*(v,p){return vs(K(v),p)})).apply(this,arguments)}function P(v,p){return z.apply(this,arguments)}function z(){return(z=(0,l.Z)(function*(v,p){const _=(0,V.m9)(v);return yield Qt(!1,_,p.providerId),Br(_,p)})).apply(this,arguments)}function de(v,p){return Be.apply(this,arguments)}function Be(){return(Be=(0,l.Z)(function*(v,p){return Yo((0,V.m9)(v),p)})).apply(this,arguments)}function ze(v,p){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,l.Z)(function*(v,p){return On(v,"POST","/v1/accounts:signInWithCustomToken",Et(v,p))})).apply(this,arguments)}function Zn(){return(Zn=(0,l.Z)(function*(v,p){const _=K(v),w=yield ze(_,{token:p,returnSecureToken:!0}),S=yield cr._fromIdTokenResponse(_,"signIn",w);return yield _._updateCurrentUser(S.user),S})).apply(this,arguments)}class De{constructor(p,_){this.factorId=p,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(p,_){return"phoneInfo"in _?vt._fromServerResponse(p,_):Re(p,"internal-error")}}class vt extends De{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,_){return new vt(_)}}function Gt(v,p,_){var w;j((null===(w=_.url)||void 0===w?void 0:w.length)>0,v,"invalid-continue-uri"),j(typeof _.dynamicLinkDomain>"u"||_.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),p.continueUrl=_.url,p.dynamicLinkDomain=_.dynamicLinkDomain,p.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(j(_.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),p.iOSBundleId=_.iOS.bundleId),_.android&&(j(_.android.packageName.length>0,v,"missing-android-pkg-name"),p.androidInstallApp=_.android.installApp,p.androidMinimumVersionCode=_.android.minimumVersion,p.androidPackageName=_.android.packageName)}function An(){return(An=(0,l.Z)(function*(v,p,_){const w=(0,V.m9)(v),S={requestType:"PASSWORD_RESET",email:p};_&&Gt(w,S,_),yield zi(w,S)})).apply(this,arguments)}function $s(){return($s=(0,l.Z)(function*(v,p,_){yield ar((0,V.m9)(v),{oobCode:p,newPassword:_})})).apply(this,arguments)}function dr(){return(dr=(0,l.Z)(function*(v,p){yield Dc((0,V.m9)(v),{oobCode:p})})).apply(this,arguments)}function rs(v,p){return gl.apply(this,arguments)}function gl(){return(gl=(0,l.Z)(function*(v,p){const _=(0,V.m9)(v),w=yield ar(_,{oobCode:p}),S=w.requestType;switch(j(S,_,"internal-error"),S){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":j(w.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":j(w.mfaInfo,_,"internal-error");default:j(w.email,_,"internal-error")}let x=null;return w.mfaInfo&&(x=De._fromServerResponse(K(_),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:x},operation:S}})).apply(this,arguments)}function Rg(){return(Rg=(0,l.Z)(function*(v,p){const{data:_}=yield rs((0,V.m9)(v),p);return _.email})).apply(this,arguments)}function pi(){return(pi=(0,l.Z)(function*(v,p,_){const w=K(v),S=yield zo(w,{returnSecureToken:!0,email:p,password:_}),x=yield cr._fromIdTokenResponse(w,"signIn",S);return yield w._updateCurrentUser(x.user),x})).apply(this,arguments)}function Ra(){return(Ra=(0,l.Z)(function*(v,p,_){const w=(0,V.m9)(v),S={requestType:"EMAIL_SIGNIN",email:p};j(_.handleCodeInApp,w,"argument-error"),_&&Gt(w,S,_),yield Zo(w,S)})).apply(this,arguments)}function ef(){return(ef=(0,l.Z)(function*(v,p,_){const w=(0,V.m9)(v),S=is.credentialWithLink(p,_||Ve());return j(S._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),Ma(w,S)})).apply(this,arguments)}function dD(v,p){return Pg.apply(this,arguments)}function Pg(){return(Pg=(0,l.Z)(function*(v,p){return jt(v,"POST","/v1/accounts:createAuthUri",Et(v,p))})).apply(this,arguments)}function Ac(){return(Ac=(0,l.Z)(function*(v,p){const w={identifier:p,continueUri:gt()?Ve():"http://localhost"},{signinMethods:S}=yield dD((0,V.m9)(v),w);return S||[]})).apply(this,arguments)}function Nc(){return(Nc=(0,l.Z)(function*(v,p){const _=(0,V.m9)(v),S={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};p&&Gt(_.auth,S,p);const{email:x}=yield Sn(_.auth,S);x!==v.email&&(yield v.reload())})).apply(this,arguments)}function tf(){return(tf=(0,l.Z)(function*(v,p,_){const w=(0,V.m9)(v),x={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:p};_&&Gt(w.auth,x,_);const{email:Y}=yield ll(w.auth,x);Y!==v.email&&(yield v.reload())})).apply(this,arguments)}function Fg(v,p){return nf.apply(this,arguments)}function nf(){return(nf=(0,l.Z)(function*(v,p){return jt(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function rf(){return(rf=(0,l.Z)(function*(v,{displayName:p,photoURL:_}){if(void 0===p&&void 0===_)return;const w=(0,V.m9)(v),x={idToken:yield w.getIdToken(),displayName:p,photoUrl:_,returnSecureToken:!0},Y=yield pn(w,Fg(w.auth,x));w.displayName=Y.displayName||null,w.photoURL=Y.photoUrl||null;const _e=w.providerData.find(({providerId:qe})=>"password"===qe);_e&&(_e.displayName=w.displayName,_e.photoURL=w.photoURL),yield w._updateTokensIfNecessary(Y)})).apply(this,arguments)}function ml(v,p,_){return sf.apply(this,arguments)}function sf(){return(sf=(0,l.Z)(function*(v,p,_){const{auth:w}=v,x={idToken:yield v.getIdToken(),returnSecureToken:!0};p&&(x.email=p),_&&(x.password=_);const Y=yield pn(v,fn(w,x));yield v._updateTokensIfNecessary(Y,!0)})).apply(this,arguments)}class jr{constructor(p,_,w={}){this.isNewUser=p,this.providerId=_,this.profile=w}}class jn extends jr{constructor(p,_,w,S){super(p,_,w),this.username=S}}class zy extends jr{constructor(p,_){super(p,"facebook.com",_)}}class Ky extends jn{constructor(p,_){super(p,"github.com",_,"string"==typeof _?.login?_?.login:null)}}class Yy extends jr{constructor(p,_){super(p,"google.com",_)}}class Qy extends jn{constructor(p,_,w){super(p,"twitter.com",_,w)}}function Xu(v){const{user:p,_tokenResponse:_}=v;return p.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function Vi(v){var p,_;if(!v)return null;const{providerId:w}=v,S=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},x=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!w&&v?.idToken){const Y=null===(_=null===(p=ht(v.idToken))||void 0===p?void 0:p.firebase)||void 0===_?void 0:_.sign_in_provider;if(Y)return new jr(x,"anonymous"!==Y&&"custom"!==Y?Y:null)}if(!w)return null;switch(w){case"facebook.com":return new zy(x,S);case"github.com":return new Ky(x,S);case"google.com":return new Yy(x,S);case"twitter.com":return new Qy(x,S,v.screenName||null);case"custom":case"anonymous":return new jr(x,null);default:return new jr(x,w,S)}}(_)}class ka{constructor(p,_,w){this.type=p,this.credential=_,this.auth=w}static _fromIdtoken(p,_){return new ka("enroll",p,_)}static _fromMfaPendingCredential(p){return new ka("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var _,w;if(p?.multiFactorSession){if(null!==(_=p.multiFactorSession)&&void 0!==_&&_.pendingCredential)return ka._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null!==(w=p.multiFactorSession)&&void 0!==w&&w.idToken)return ka._fromIdtoken(p.multiFactorSession.idToken)}return null}}class uf{constructor(p,_,w){this.session=p,this.hints=_,this.signInResolver=w}static _fromError(p,_){const w=K(p),S=_.customData._serverResponse,x=(S.mfaInfo||[]).map(_e=>De._fromServerResponse(w,_e));j(S.mfaPendingCredential,w,"internal-error");const Y=ka._fromMfaPendingCredential(S.mfaPendingCredential);return new uf(Y,x,function(){var _e=(0,l.Z)(function*(qe){const dt=yield qe._process(w,Y);delete S.mfaInfo,delete S.mfaPendingCredential;const Pt=Object.assign(Object.assign({},S),{idToken:dt.idToken,refreshToken:dt.refreshToken});switch(_.operationType){case"signIn":const It=yield cr._fromIdTokenResponse(w,_.operationType,Pt);return yield w._updateCurrentUser(It.user),It;case"reauthenticate":return j(_.user,w,"internal-error"),cr._forOperation(_.user,_.operationType,Pt);default:Re(w,"internal-error")}});return function(qe){return _e.apply(this,arguments)}}())}resolveSignIn(p){var _=this;return(0,l.Z)(function*(){return _.signInResolver(p)})()}}function df(v,p){return jt(v,"POST","/v2/accounts/mfaEnrollment:start",Et(v,p))}class Jy{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(w=>De._fromServerResponse(p.auth,w)))})}static _fromUser(p){return new Jy(p)}getSession(){var p=this;return(0,l.Z)(function*(){return ka._fromIdtoken(yield p.user.getIdToken(),p.user.auth)})()}enroll(p,_){var w=this;return(0,l.Z)(function*(){const S=p,x=yield w.getSession(),Y=yield pn(w.user,S._process(w.user.auth,x,_));return yield w.user._updateTokensIfNecessary(Y),w.user.reload()})()}unenroll(p){var _=this;return(0,l.Z)(function*(){const w="string"==typeof p?p:p.uid,S=yield _.user.getIdToken(),x=yield pn(_.user,function Ug(v,p){return jt(v,"POST","/v2/accounts/mfaEnrollment:withdraw",Et(v,p))}(_.user.auth,{idToken:S,mfaEnrollmentId:w}));_.enrolledFactors=_.enrolledFactors.filter(({uid:Y})=>Y!==w),yield _.user._updateTokensIfNecessary(x);try{yield _.user.reload()}catch(Y){if("auth/user-token-expired"!==Y?.code)throw Y}})()}}const td=new WeakMap,Pc="__sak";class nd{constructor(p,_){this.storageRetriever=p,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(Pc,"1"),this.storage.removeItem(Pc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(p,_){return this.storage.setItem(p,JSON.stringify(_)),Promise.resolve()}_get(p){const _=this.storage.getItem(p);return Promise.resolve(_?JSON.parse(_):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const Lc=(()=>{class v extends nd{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,w)=>this.onStorageEvent(_,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function kc(){const v=(0,V.z$)();return Ie(v)||At(v)}()&&function Nn(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Vr(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const w of Object.keys(this.listeners)){const S=this.storage.getItem(w),x=this.localCache[w];S!==x&&_(w,x,S)}}onStorageEvent(_,w=!1){if(!_.key)return void this.forAllChangedKeys((_e,qe,dt)=>{this.notifyListeners(_e,dt)});const S=_.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const _e=this.storage.getItem(S);if(_.newValue!==_e)null!==_.newValue?this.storage.setItem(S,_.newValue):this.storage.removeItem(S);else if(this.localCache[S]===_.newValue&&!w)return}const x=()=>{const _e=this.storage.getItem(S);!w&&this.localCache[S]===_e||this.notifyListeners(S,_e)},Y=this.storage.getItem(S);!function hn(){return(0,V.w1)()&&10===document.documentMode}()||Y===_.newValue||_.newValue===_.oldValue?x():setTimeout(x,10)}notifyListeners(_,w){this.localCache[_]=w;const S=this.listeners[_];if(S)for(const x of Array.from(S))x(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,w,S)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:w,newValue:S}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(w)}_removeListener(_,w){this.listeners[_]&&(this.listeners[_].delete(w),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,w){var S=()=>super._set,x=this;return(0,l.Z)(function*(){yield S().call(x,_,w),x.localCache[_]=JSON.stringify(w)})()}_get(_){var w=()=>super._get,S=this;return(0,l.Z)(function*(){const x=yield w().call(S,_);return S.localCache[_]=JSON.stringify(x),x})()}_remove(_){var w=()=>super._remove,S=this;return(0,l.Z)(function*(){yield w().call(S,_),delete S.localCache[_]})()}}return v.type="LOCAL",v})(),Ws=(()=>{class v extends nd{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,w){}_removeListener(_,w){}}return v.type="SESSION",v})();let Hg=(()=>{class v{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const w=this.receivers.find(x=>x.isListeningto(_));if(w)return w;const S=new v(_);return this.receivers.push(S),S}isListeningto(_){return this.eventTarget===_}handleEvent(_){var w=this;return(0,l.Z)(function*(){const S=_,{eventId:x,eventType:Y,data:_e}=S.data,qe=w.handlersMap[Y];if(!qe?.size)return;S.ports[0].postMessage({status:"ack",eventId:x,eventType:Y});const dt=Array.from(qe).map(function(){var It=(0,l.Z)(function*(Dn){return Dn(S.origin,_e)});return function(Dn){return It.apply(this,arguments)}}()),Pt=yield function id(v){return Promise.all(v.map(function(){var p=(0,l.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(w){return{fulfilled:!1,reason:w}}});return function(_){return p.apply(this,arguments)}}()))}(dt);S.ports[0].postMessage({status:"done",eventId:x,eventType:Y,response:Pt})})()}_subscribe(_,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(w)}_unsubscribe(_,w){this.handlersMap[_]&&w&&this.handlersMap[_].delete(w),(!w||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function Uc(v="",p=10){let _="";for(let w=0;w<p;w++)_+=Math.floor(10*Math.random());return v+_}class Xy{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,_,w=50){var S=this;return(0,l.Z)(function*(){const x=typeof MessageChannel<"u"?new MessageChannel:null;if(!x)throw new Error("connection_unavailable");let Y,_e;return new Promise((qe,dt)=>{const Pt=Uc("",20);x.port1.start();const It=setTimeout(()=>{dt(new Error("unsupported_event"))},w);_e={messageChannel:x,onMessage(Dn){const ki=Dn;if(ki.data.eventId===Pt)switch(ki.data.status){case"ack":clearTimeout(It),Y=setTimeout(()=>{dt(new Error("timeout"))},3e3);break;case"done":clearTimeout(Y),qe(ki.data.response);break;default:clearTimeout(It),clearTimeout(Y),dt(new Error("invalid_response"))}}},S.handlers.add(_e),x.port1.addEventListener("message",_e.onMessage),S.target.postMessage({eventType:p,eventId:Pt,data:_},[x.port2])}).finally(()=>{_e&&S.removeMessageHandler(_e)})})()}}function Di(){return window}function hf(){return typeof Di().WorkerGlobalScope<"u"&&"function"==typeof Di().importScripts}function jc(){return(jc=(0,l.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const yl="firebaseLocalStorageDb",vl="firebaseLocalStorage",ff="fbase_key";class Hc{constructor(p){this.request=p}toPromise(){return new Promise((p,_)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function Gc(v,p){return v.transaction([vl],p?"readwrite":"readonly").objectStore(vl)}function bl(){const v=indexedDB.open(yl,1);return new Promise((p,_)=>{v.addEventListener("error",()=>{_(v.error)}),v.addEventListener("upgradeneeded",()=>{const w=v.result;try{w.createObjectStore(vl,{keyPath:ff})}catch(S){_(S)}}),v.addEventListener("success",(0,l.Z)(function*(){const w=v.result;w.objectStoreNames.contains(vl)?p(w):(w.close(),yield function hD(){const v=indexedDB.deleteDatabase(yl);return new Hc(v).toPromise()}(),p(yield bl()))}))})}function Fa(v,p,_){return pf.apply(this,arguments)}function pf(){return(pf=(0,l.Z)(function*(v,p,_){const w=Gc(v,!0).put({[ff]:p,value:_});return new Hc(w).toPromise()})).apply(this,arguments)}function gf(){return(gf=(0,l.Z)(function*(v,p){const _=Gc(v,!1).get(p),w=yield new Hc(_).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function wl(v,p){const _=Gc(v,!0).delete(p);return new Hc(_).toPromise()}const Dl=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,l.Z)(function*(){return _.db||(_.db=yield bl()),_.db})()}_withRetries(_){var w=this;return(0,l.Z)(function*(){let S=0;for(;;)try{const x=yield w._openDb();return yield _(x)}catch(x){if(S++>3)throw x;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,l.Z)(function*(){return hf()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,l.Z)(function*(){_.receiver=Hg._getInstance(function sd(){return hf()?self:null}()),_.receiver._subscribe("keyChanged",function(){var w=(0,l.Z)(function*(S,x){return{keyProcessed:(yield _._poll()).includes(x.key)}});return function(S,x){return w.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var w=(0,l.Z)(function*(S,x){return["keyChanged"]});return function(S,x){return w.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,l.Z)(function*(){var w,S;if(_.activeServiceWorker=yield function Bc(){return jc.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new Xy(_.activeServiceWorker);const x=yield _.sender._send("ping",{},800);!x||(null===(w=x[0])||void 0===w?void 0:w.fulfilled)&&(null===(S=x[0])||void 0===S?void 0:S.value.includes("keyChanged"))&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var w=this;return(0,l.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function rd(){var v;return(null===(v=navigator?.serviceWorker)||void 0===v?void 0:v.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:_},w.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,l.Z)(function*(){try{if(!indexedDB)return!1;const _=yield bl();return yield Fa(_,Pc,"1"),yield wl(_,Pc),!0}catch{}return!1})()}_withPendingWrite(_){var w=this;return(0,l.Z)(function*(){w.pendingWrites++;try{yield _()}finally{w.pendingWrites--}})()}_set(_,w){var S=this;return(0,l.Z)(function*(){return S._withPendingWrite((0,l.Z)(function*(){return yield S._withRetries(x=>Fa(x,_,w)),S.localCache[_]=w,S.notifyServiceWorker(_)}))})()}_get(_){var w=this;return(0,l.Z)(function*(){const S=yield w._withRetries(x=>function $g(v,p){return gf.apply(this,arguments)}(x,_));return w.localCache[_]=S,S})()}_remove(_){var w=this;return(0,l.Z)(function*(){return w._withPendingWrite((0,l.Z)(function*(){return yield w._withRetries(S=>wl(S,_)),delete w.localCache[_],w.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,l.Z)(function*(){const w=yield _._withRetries(Y=>{const _e=Gc(Y,!1).getAll();return new Hc(_e).toPromise()});if(!w)return[];if(0!==_.pendingWrites)return[];const S=[],x=new Set;for(const{fbase_key:Y,value:_e}of w)x.add(Y),JSON.stringify(_.localCache[Y])!==JSON.stringify(_e)&&(_.notifyListeners(Y,_e),S.push(Y));for(const Y of Object.keys(_.localCache))_.localCache[Y]&&!x.has(Y)&&(_.notifyListeners(Y,null),S.push(Y));return S})()}notifyListeners(_,w){this.localCache[_]=w;const S=this.listeners[_];if(S)for(const x of Array.from(S))x(w)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,l.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(w)}_removeListener(_,w){this.listeners[_]&&(this.listeners[_].delete(w),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})();function od(v,p){return jt(v,"POST","/v2/accounts/mfaSignIn:start",Et(v,p))}function La(){return(La=(0,l.Z)(function*(v){return(yield jt(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function mf(v){return new Promise((p,_)=>{const w=document.createElement("script");w.setAttribute("src",v),w.onload=p,w.onerror=S=>{const x=Ee("internal-error");x.customData=S,_(x)},w.type="text/javascript",w.charset="UTF-8",function Zc(){var v,p;return null!==(p=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==p?p:document}().appendChild(w)})}function _f(v){return`__${v}${Math.floor(1e6*Math.random())}`}const yf=1e12;class Fn{constructor(p){this.auth=p,this.counter=yf,this._widgets=new Map}render(p,_){const w=this.counter;return this._widgets.set(w,new fD(p,this.auth.name,_||{})),this.counter++,w}reset(p){var _;const w=p||yf;null===(_=this._widgets.get(w))||void 0===_||_.delete(),this._widgets.delete(w)}getResponse(p){var _;return(null===(_=this._widgets.get(p||yf))||void 0===_?void 0:_.getResponse())||""}execute(p){var _=this;return(0,l.Z)(function*(){var w;return null===(w=_._widgets.get(p||yf))||void 0===w||w.execute(),""})()}}class fD{constructor(p,_,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const S="string"==typeof p?document.getElementById(p):p;j(S,"argument-error",{appName:_}),this.container=S,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function VT(v){const p=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<v;w++)p.push(_.charAt(Math.floor(Math.random()*_.length)));return p.join("")}(50);const{callback:p,"expired-callback":_}=this.params;if(p)try{p(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const ev=_f("rcb"),UT=new un(3e4,6e4);class jT{constructor(){var p;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(p=Di().grecaptcha)||void 0===p||!p.render)}load(p,_=""){return j(function HT(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(_),p,"argument-error"),this.shouldResolveImmediately(_)?Promise.resolve(Di().grecaptcha):new Promise((w,S)=>{const x=Di().setTimeout(()=>{S(Ee(p,"network-request-failed"))},UT.get());Di()[ev]=()=>{Di().clearTimeout(x),delete Di()[ev];const _e=Di().grecaptcha;if(!_e)return void S(Ee(p,"internal-error"));const qe=_e.render;_e.render=(dt,Pt)=>{const It=qe(dt,Pt);return this.counter++,It},this.hostLanguage=_,w(_e)},mf(`https://www.google.com/recaptcha/api.js??${(0,V.xO)({onload:ev,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(x),S(Ee(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){var _;return!(null===(_=Di().grecaptcha)||void 0===_||!_.render)&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class ld{load(p){return(0,l.Z)(function*(){return new Fn(p)})()}clearedOneInstance(){}}const pD="recaptcha",gD={theme:"light",type:"image"};class Ui{constructor(p,_=Object.assign({},gD),w){this.parameters=_,this.type=pD,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=K(w),this.isInvisible="invisible"===this.parameters.size,j(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const S="string"==typeof p?document.getElementById(p):p;j(S,this.auth,"argument-error"),this.container=S,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new ld:new jT,this.validateStartingState()}verify(){var p=this;return(0,l.Z)(function*(){p.assertNotDestroyed();const _=yield p.render(),w=p.getAssertedRecaptcha();return w.getResponse(_)||new Promise(x=>{const Y=_e=>{!_e||(p.tokenChangeListeners.delete(Y),x(_e))};p.tokenChangeListeners.add(Y),p.isInvisible&&w.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){j(!this.parameters.sitekey,this.auth,"argument-error"),j(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),j(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return _=>{if(this.tokenChangeListeners.forEach(w=>w(_)),"function"==typeof p)p(_);else if("string"==typeof p){const w=Di()[p];"function"==typeof w&&w(_)}}}assertNotDestroyed(){j(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,l.Z)(function*(){if(yield p.init(),!p.widgetId){let _=p.container;if(!p.isInvisible){const w=document.createElement("div");_.appendChild(w),_=w}p.widgetId=p.getAssertedRecaptcha().render(_,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,l.Z)(function*(){j(gt()&&!hf(),p.auth,"internal-error"),yield function Pn(){let v=null;return new Promise(p=>{"complete"!==document.readyState?(v=()=>p(),window.addEventListener("load",v)):p()}).catch(p=>{throw v&&window.removeEventListener("load",v),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const _=yield function $c(v){return La.apply(this,arguments)}(p.auth);j(_,p.auth,"internal-error"),p.parameters.sitekey=_})()}getAssertedRecaptcha(){return j(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Sr{constructor(p,_){this.verificationId=p,this.onConfirmation=_}confirm(p){const _=Bs._fromVerification(this.verificationId,p);return this.onConfirmation(_)}}function Wn(){return(Wn=(0,l.Z)(function*(v,p,_){const w=K(v),S=yield ea(w,p,(0,V.m9)(_));return new Sr(S,x=>Ma(w,x))})).apply(this,arguments)}function bs(){return(bs=(0,l.Z)(function*(v,p,_){const w=(0,V.m9)(v);yield Qt(!1,w,"phone");const S=yield ea(w.auth,p,(0,V.m9)(_));return new Sr(S,x=>P(w,x))})).apply(this,arguments)}function ai(){return(ai=(0,l.Z)(function*(v,p,_){const w=(0,V.m9)(v),S=yield ea(w.auth,p,(0,V.m9)(_));return new Sr(S,x=>de(w,x))})).apply(this,arguments)}function ea(v,p,_){return cd.apply(this,arguments)}function cd(){return(cd=(0,l.Z)(function*(v,p,_){var w;const S=yield _.verify();try{let x;if(j("string"==typeof S,v,"argument-error"),j(_.type===pD,v,"argument-error"),x="string"==typeof p?{phoneNumber:p}:p,"session"in x){const Y=x.session;if("phoneNumber"in x)return j("enroll"===Y.type,v,"internal-error"),(yield df(v,{idToken:Y.credential,phoneEnrollmentInfo:{phoneNumber:x.phoneNumber,recaptchaToken:S}})).phoneSessionInfo.sessionInfo;{j("signin"===Y.type,v,"internal-error");const _e=(null===(w=x.multiFactorHint)||void 0===w?void 0:w.uid)||x.multiFactorUid;return j(_e,v,"missing-multi-factor-info"),(yield od(v,{mfaPendingCredential:Y.credential,mfaEnrollmentId:_e,phoneSignInInfo:{recaptchaToken:S}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Y}=yield qu(v,{phoneNumber:x.phoneNumber,recaptchaToken:S});return Y}}finally{_._reset()}})).apply(this,arguments)}function vf(){return(vf=(0,l.Z)(function*(v,p){yield Br((0,V.m9)(v),p)})).apply(this,arguments)}let qc=(()=>{class v{constructor(_){this.providerId=v.PROVIDER_ID,this.auth=K(_)}verifyPhoneNumber(_,w){return ea(this.auth,_,(0,V.m9)(w))}static credential(_,w){return Bs._fromVerification(_,w)}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:w,temporaryProof:S}=_;return w&&S?Bs._fromTokenResponse(w,S):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function El(v,p){return p?se(p):(j(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class fo extends gn{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return wi(p,this._buildIdpRequest())}_linkToIdToken(p,_){return wi(p,this._buildIdpRequest(_))}_getReauthenticationResolver(p){return wi(p,this._buildIdpRequest())}_buildIdpRequest(p){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(_.idToken=p),_}}function at(v){return vs(v.auth,new fo(v),v.bypassAuthState)}function bf(v){const{auth:p,user:_}=v;return j(_,p,"internal-error"),Yo(_,new fo(v),v.bypassAuthState)}function Il(v){return ud.apply(this,arguments)}function ud(){return(ud=(0,l.Z)(function*(v){const{auth:p,user:_}=v;return j(_,p,"internal-error"),Br(_,new fo(v),v.bypassAuthState)})).apply(this,arguments)}class dd{constructor(p,_,w,S,x=!1){this.auth=p,this.resolver=w,this.user=S,this.bypassAuthState=x,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var p=this;return new Promise(function(){var _=(0,l.Z)(function*(w,S){p.pendingPromise={resolve:w,reject:S};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(x){p.reject(x)}});return function(w,S){return _.apply(this,arguments)}}())}onAuthEvent(p){var _=this;return(0,l.Z)(function*(){const{urlResponse:w,sessionId:S,postBody:x,tenantId:Y,error:_e,type:qe}=p;if(_e)return void _.reject(_e);const dt={auth:_.auth,requestUri:w,sessionId:S,tenantId:Y||void 0,postBody:x||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(qe)(dt))}catch(Pt){_.reject(Pt)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return at;case"linkViaPopup":case"linkViaRedirect":return Il;case"reauthViaPopup":case"reauthViaRedirect":return bf;default:Re(this.auth,"internal-error")}}resolve(p){Q(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){Q(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ti=new un(2e3,1e4);function Tl(){return(Tl=(0,l.Z)(function*(v,p,_){const w=K(v);$e(v,p,js);const S=El(w,_);return new qs(w,"signInViaPopup",p,S).executeNotNull()})).apply(this,arguments)}function hd(){return(hd=(0,l.Z)(function*(v,p,_){const w=(0,V.m9)(v);$e(w.auth,p,js);const S=El(w.auth,_);return new qs(w.auth,"reauthViaPopup",p,S,w).executeNotNull()})).apply(this,arguments)}function Kc(){return(Kc=(0,l.Z)(function*(v,p,_){const w=(0,V.m9)(v);$e(w.auth,p,js);const S=El(w.auth,_);return new qs(w.auth,"linkViaPopup",p,S,w).executeNotNull()})).apply(this,arguments)}let qs=(()=>{class v extends dd{constructor(_,w,S,x,Y){super(_,w,x,Y),this.provider=S,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var _=this;return(0,l.Z)(function*(){const w=yield _.execute();return j(w,_.auth,"internal-error"),w})()}onExecution(){var _=this;return(0,l.Z)(function*(){Q(1===_.filter.length,"Popup operations only handle one event");const w=Uc();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],w),_.authWindow.associatedEvent=w,_.resolver._originValidation(_.auth).catch(S=>{_.reject(S)}),_.resolver._isIframeWebStorageSupported(_.auth,S=>{S||_.reject(Ee(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(Ee(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const _=()=>{var w,S;this.pollId=null!==(S=null===(w=this.authWindow)||void 0===w?void 0:w.window)&&void 0!==S&&S.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ee(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(_,ti.get())};_()}}return v.currentPopupAction=null,v})();const zs=new Map;class wf extends dd{constructor(p,_,w=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,w),this.eventId=null}execute(){var p=()=>super.execute,_=this;return(0,l.Z)(function*(){let w=zs.get(_.auth._key());if(!w){try{const x=(yield function Hr(v,p){return Va.apply(this,arguments)}(_.resolver,_.auth))?yield p().call(_):null;w=()=>Promise.resolve(x)}catch(S){w=()=>Promise.reject(S)}zs.set(_.auth._key(),w)}return _.bypassAuthState||zs.set(_.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(p){var _=()=>super.onAuthEvent,w=this;return(0,l.Z)(function*(){if("signInViaRedirect"===p.type)return _().call(w,p);if("unknown"!==p.type){if(p.eventId){const S=yield w.auth._redirectUserForId(p.eventId);if(S)return w.user=S,_().call(w,p);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,l.Z)(function*(){})()}cleanUp(){}}function Va(){return(Va=(0,l.Z)(function*(v,p){const _=li(p),w=ta(v);if(!(yield w._isAvailable()))return!1;const S="true"===(yield w._get(_));return yield w._remove(_),S})).apply(this,arguments)}function ws(v,p){return fd.apply(this,arguments)}function fd(){return(fd=(0,l.Z)(function*(v,p){return ta(v)._set(li(p),"true")})).apply(this,arguments)}function go(v,p){zs.set(v._key(),p)}function ta(v){return se(v._redirectPersistence)}function li(v){return O("pendingRedirect",v.config.apiKey,v.name)}function gi(){return(gi=(0,l.Z)(function*(v,p,_){const w=K(v);$e(v,p,js);const S=El(w,_);return yield ws(S,w),S._openRedirect(w,p,"signInViaRedirect")})).apply(this,arguments)}function pd(){return(pd=(0,l.Z)(function*(v,p,_){const w=(0,V.m9)(v);$e(w.auth,p,js);const S=El(w.auth,_);yield ws(S,w.auth);const x=yield Yc(w);return S._openRedirect(w.auth,p,"reauthViaRedirect",x)})).apply(this,arguments)}function Ds(){return(Ds=(0,l.Z)(function*(v,p,_){const w=(0,V.m9)(v);$e(w.auth,p,js);const S=El(w.auth,_);yield Qt(!1,w,p.providerId),yield ws(S,w.auth);const x=yield Yc(w);return S._openRedirect(w.auth,p,"linkViaRedirect",x)})).apply(this,arguments)}function Cs(){return(Cs=(0,l.Z)(function*(v,p){return yield K(v)._initializationPromise,ra(v,p,!1)})).apply(this,arguments)}function ra(v,p){return mo.apply(this,arguments)}function mo(){return(mo=(0,l.Z)(function*(v,p,_=!1){const w=K(v),S=El(w,p),Y=yield new wf(w,S,_).execute();return Y&&!_&&(delete Y.user._redirectEventId,yield w._persistUserIfCurrent(Y.user),yield w._setRedirectUser(null,p)),Y})).apply(this,arguments)}function Yc(v){return sa.apply(this,arguments)}function sa(){return(sa=(0,l.Z)(function*(v){const p=Uc(`${v.uid}:::`);return v._redirectEventId=p,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),p})).apply(this,arguments)}class md{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let _=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(p,w)&&(_=!0,this.sendToConsumer(p,w),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function Ks(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return zt(v);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=p,_=!0)),_}sendToConsumer(p,_){var w;if(p.error&&!zt(p)){const S=(null===(w=p.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";_.onError(Ee(this.auth,S))}else _.onAuthEvent(p)}isEventForConsumer(p,_){const w=null===_.eventId||!!p.eventId&&p.eventId===_.eventId;return _.filter.includes(p.type)&&w}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(_d(p))}saveEventToCache(p){this.cachedEventUids.add(_d(p)),this.lastProcessedEventTime=Date.now()}}function _d(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(p=>p).join("-")}function zt({type:v,error:p}){return"unknown"===v&&"auth/no-auth-event"===p?.code}function Sl(v){return oa.apply(this,arguments)}function oa(){return(oa=(0,l.Z)(function*(v,p={}){return jt(v,"GET","/v1/projects",p)})).apply(this,arguments)}const mD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,qg=/^https?/;function Df(){return(Df=(0,l.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:p}=yield Sl(v);for(const _ of p)try{if(zg(_))return}catch{}Re(v,"unauthorized-domain")})).apply(this,arguments)}function zg(v){const p=Ve(),{protocol:_,hostname:w}=new URL(p);if(v.startsWith("chrome-extension://")){const Y=new URL(v);return""===Y.hostname&&""===w?"chrome-extension:"===_&&v.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===_&&Y.hostname===w}if(!qg.test(_))return!1;if(mD.test(v))return w===v;const S=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+S+"|"+S+")$","i").test(w)}const Kg=new un(3e4,6e4);function sv(){const v=Di().___jsl;if(v?.H)for(const p of Object.keys(v.H))if(v.H[p].r=v.H[p].r||[],v.H[p].L=v.H[p].L||[],v.H[p].r=[...v.H[p].L],v.CP)for(let _=0;_<v.CP.length;_++)v.CP[_]=null}let os=null;function Cf(v){return os=os||function Ei(v){return new Promise((p,_)=>{var w,S,x;function Y(){sv(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{sv(),_(Ee(v,"network-request-failed"))},timeout:Kg.get()})}if(null!==(S=null===(w=Di().gapi)||void 0===w?void 0:w.iframes)&&void 0!==S&&S.Iframe)p(gapi.iframes.getContext());else{if(null===(x=Di().gapi)||void 0===x||!x.load){const _e=_f("iframefcb");return Di()[_e]=()=>{gapi.load?Y():_(Ee(v,"network-request-failed"))},mf(`https://apis.google.com/js/api.js?onload=${_e}`).catch(qe=>_(qe))}Y()}}).catch(p=>{throw os=null,p})}(v),os}const Yg=new un(5e3,15e3),ov={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},av=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Qg(v){const p=v.config;j(p.authDomain,v,"auth-domain-config-required");const _=p.emulator?Un(p,"emulator/auth/iframe"):`https://${v.config.authDomain}/__/auth/iframe`,w={apiKey:p.apiKey,appName:v.name,v:re.SDK_VERSION},S=av.get(v.config.apiHost);S&&(w.eid=S);const x=v._getFrameworks();return x.length&&(w.fw=x.join(",")),`${_}?${(0,V.xO)(w).slice(1)}`}function Tf(){return Tf=(0,l.Z)(function*(v){const p=yield Cf(v),_=Di().gapi;return j(_,v,"internal-error"),p.open({where:document.body,url:Qg(v),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ov,dontclear:!0},w=>new Promise(function(){var S=(0,l.Z)(function*(x,Y){yield w.restyle({setHideOnLeave:!1});const _e=Ee(v,"network-request-failed"),qe=Di().setTimeout(()=>{Y(_e)},Yg.get());function dt(){Di().clearTimeout(qe),x(w)}w.ping(dt).then(dt,()=>{Y(_e)})});return function(x,Y){return S.apply(this,arguments)}}()))}),Tf.apply(this,arguments)}const lv={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class cv{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function vd(v,p,_,w,S,x){j(v.config.authDomain,v,"auth-domain-config-required"),j(v.config.apiKey,v,"invalid-api-key");const Y={apiKey:v.config.apiKey,appName:v.name,authType:_,redirectUrl:w,v:re.SDK_VERSION,eventId:S};if(p instanceof js){p.setDefaultLanguage(v.languageCode),Y.providerId=p.providerId||"",(0,V.xb)(p.getCustomParameters())||(Y.customParameters=JSON.stringify(p.getCustomParameters()));for(const[qe,dt]of Object.entries(x||{}))Y[qe]=dt}if(p instanceof Hs){const qe=p.getScopes().filter(dt=>""!==dt);qe.length>0&&(Y.scopes=qe.join(","))}v.tenantId&&(Y.tid=v.tenantId);const _e=Y;for(const qe of Object.keys(_e))void 0===_e[qe]&&delete _e[qe];return`${function Jc({config:v}){return v.emulator?Un(v,"emulator/auth/handler"):`https://${v.authDomain}/__/auth/handler`}(v)}?${(0,V.xO)(_e).slice(1)}`}const aa="webStorageSupport";class eu extends class dv{constructor(p){this.factorId=p}_process(p,_,w){switch(_.type){case"enroll":return this._finalizeEnroll(p,_.credential,w);case"signin":return this._finalizeSignIn(p,_.credential);default:return Ce("unexpected MultiFactorSessionType")}}}{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new eu(p)}_finalizeEnroll(p,_,w){return function ed(v,p){return jt(v,"POST","/v2/accounts/mfaEnrollment:finalize",Et(v,p))}(p,{idToken:_,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,_){return function ad(v,p){return jt(v,"POST","/v2/accounts/mfaSignIn:finalize",Et(v,p))}(p,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let tu=(()=>{class v{constructor(){}static assertion(_){return eu._fromCredential(_)}}return v.FACTOR_ID="phone",v})();var nu="@firebase/auth";class hv{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var _=this;return(0,l.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const _=this.auth.onIdTokenChanged(w=>{p(w?.stsTokenManager.accessToken||null)});this.internalListeners.set(p,_),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const _=this.internalListeners.get(p);!_||(this.internalListeners.delete(p),_(),this.updateProactiveRefresh())}assertAuthConfigured(){j(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function _o(){return window}function wd(){return(wd=(0,l.Z)(function*(v,p,_){var w;const{BuildInfo:S}=_o();Q(p.sessionId,"AuthEvent did not contain a session ID");const x=yield Ml(p.sessionId),Y={};return At()?Y.ibi=S.packageName:mt()?Y.apn=S.packageName:Re(v,"operation-not-supported-in-this-environment"),S.displayName&&(Y.appDisplayName=S.displayName),Y.sessionId=x,vd(v,_,p.type,void 0,null!==(w=p.eventId)&&void 0!==w?w:void 0,Y)})).apply(this,arguments)}function iu(){return(iu=(0,l.Z)(function*(v){const{BuildInfo:p}=_o(),_={};At()?_.iosBundleId=p.packageName:mt()?_.androidPackageName=p.packageName:Re(v,"operation-not-supported-in-this-environment"),yield Sl(v,_)})).apply(this,arguments)}function Dd(){return(Dd=(0,l.Z)(function*(v,p,_){const{cordova:w}=_o();let S=()=>{};try{yield new Promise((x,Y)=>{let _e=null;function qe(){var It;x();const Dn=null===(It=w.plugins.browsertab)||void 0===It?void 0:It.close;"function"==typeof Dn&&Dn(),"function"==typeof _?.close&&_.close()}function dt(){_e||(_e=window.setTimeout(()=>{Y(Ee(v,"redirect-cancelled-by-user"))},2e3))}function Pt(){"visible"===document?.visibilityState&&dt()}p.addPassiveListener(qe),document.addEventListener("resume",dt,!1),mt()&&document.addEventListener("visibilitychange",Pt,!1),S=()=>{p.removePassiveListener(qe),document.removeEventListener("resume",dt,!1),document.removeEventListener("visibilitychange",Pt,!1),_e&&window.clearTimeout(_e)}})}finally{S()}})).apply(this,arguments)}function Ml(v){return Ba.apply(this,arguments)}function Ba(){return(Ba=(0,l.Z)(function*(v){const p=Ol(v),_=yield crypto.subtle.digest("SHA-256",p);return Array.from(new Uint8Array(_)).map(S=>S.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Ol(v){if(Q(/[0-9a-zA-Z]+/.test(v),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(v);const p=new ArrayBuffer(v.length),_=new Uint8Array(p);for(let w=0;w<v.length;w++)_[w]=v.charCodeAt(w);return _}(0,V.Pz)("authIdTokenMaxAge"),function Jg(v){(0,re._registerComponent)(new ae.wA("auth",(p,{options:_})=>{const w=p.getProvider("app").getImmediate(),S=p.getProvider("heartbeat"),{apiKey:x,authDomain:Y}=w.options;return((_e,qe)=>{j(x&&!x.includes(":"),"invalid-api-key",{appName:_e.name}),j(!Y?.includes(":"),"argument-error",{appName:_e.name});const dt={apiKey:x,authDomain:Y,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ts(v)},Pt=new Bt(_e,qe,dt);return function He(v,p){const _=p?.persistence||[],w=(Array.isArray(_)?_:[_]).map(se);p?.errorMap&&v._updateErrorMap(p.errorMap),v._initializeWithPersistence(w,p?.popupRedirectResolver)}(Pt,_),Pt})(w,S)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,_,w)=>{p.getProvider("auth-internal").initialize()})),(0,re._registerComponent)(new ae.wA("auth-internal",p=>{const _=K(p.getProvider("auth").getImmediate());return new hv(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,re.registerVersion)(nu,"0.21.0",function fv(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,re.registerVersion)(nu,"0.21.0","esm2017")}("Browser");class Ed extends md{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(p=>{this.resolveInialized=p})}addPassiveListener(p){this.passiveListeners.add(p)}removePassiveListener(p){this.passiveListeners.delete(p)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(p){return this.resolveInialized(),this.passiveListeners.forEach(_=>_(p)),super.onEvent(p)}initialized(){var p=this;return(0,l.Z)(function*(){yield p.initPromise})()}}function em(v){return Ha.apply(this,arguments)}function Ha(){return(Ha=(0,l.Z)(function*(v){const p=yield Ga()._get(yo(v));return p&&(yield Ga()._remove(yo(v))),p})).apply(this,arguments)}function vv(){const v=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let _=0;_<20;_++){const w=Math.floor(Math.random()*p.length);v.push(p.charAt(w))}return v.join("")}function Ga(){return se(Lc)}function yo(v){return O("authEvent",v.config.apiKey,v.name)}function vo(v){if(!v?.includes("?"))return{};const[p,..._]=v.split("?");return(0,V.zd)(_.join("?"))}function Rl(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ee("no-auth-event")}}function ru(){var v;return(null===(v=self?.location)||void 0===v?void 0:v.protocol)||null}function Mf(v=(0,V.z$)()){return!("file:"!==ru()&&"ionic:"!==ru()&&"capacitor:"!==ru()||!v.toLowerCase().match(/iphone|ipad|ipod|android/))}function om(){try{const v=self.localStorage,p=Uc();if(v)return v.setItem(p,"1"),v.removeItem(p),!function Dv(v=(0,V.z$)()){return function sm(){return(0,V.w1)()&&11===document?.documentMode}()||function Rf(v=(0,V.z$)()){return/Edge\/\d+/.test(v)}(v)}()||(0,V.hl)()}catch{return Sd()&&(0,V.hl)()}return!1}function Sd(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Ad(){return(function wv(){return"http:"===ru()||"https:"===ru()}()||(0,V.ru)()||Mf())&&!function Of(){return(0,V.b$)()||(0,V.UG)()}()&&om()&&!Sd()}function wo(){return Mf()&&typeof document<"u"}function su(){return(su=(0,l.Z)(function*(){return!!wo()&&new Promise(v=>{const p=setTimeout(()=>{v(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(p),v(!0)})})})).apply(this,arguments)}const Ar={LOCAL:"local",NONE:"none",SESSION:"session"},fr=j,Za="persistence";function ou(v){return Nd.apply(this,arguments)}function Nd(){return(Nd=(0,l.Z)(function*(v){yield v._initializationPromise;const p=xd(),_=O(Za,v.config.apiKey,v.name);p&&p.setItem(_,v._getPersistence())})).apply(this,arguments)}function xd(){var v;try{return(null===(v=function Pf(){return typeof window<"u"?window:null}())||void 0===v?void 0:v.sessionStorage)||null}catch{return null}}const Md=j;class Nr{constructor(){this.browserResolver=se(class Es{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ws,this._completeRedirectFn=ra,this._overrideRedirectResult=go}_openPopup(p,_,w,S){var x=this;return(0,l.Z)(function*(){var Y;Q(null===(Y=x.eventManagers[p._key()])||void 0===Y?void 0:Y.manager,"_initialize() not called before _openPopup()");const _e=vd(p,_,w,Ve(),S);return function xl(v,p,_,w=500,S=600){const x=Math.max((window.screen.availHeight-S)/2,0).toString(),Y=Math.max((window.screen.availWidth-w)/2,0).toString();let _e="";const qe=Object.assign(Object.assign({},lv),{width:w.toString(),height:S.toString(),top:x,left:Y}),dt=(0,V.z$)().toLowerCase();_&&(_e=Ye(dt)?"_blank":_),oe(dt)&&(p=p||"http://localhost",qe.scrollbars="yes");const Pt=Object.entries(qe).reduce((Dn,[ki,ls])=>`${Dn}${ki}=${ls},`,"");if(function si(v=(0,V.z$)()){var p;return At(v)&&!(null===(p=window.navigator)||void 0===p||!p.standalone)}(dt)&&"_self"!==_e)return function uv(v,p){const _=document.createElement("a");_.href=v,_.target=p;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(w)}(p||"",_e),new cv(null);const It=window.open(p||"",_e,Pt);j(It,v,"popup-blocked");try{It.focus()}catch{}return new cv(It)}(p,_e,Uc())})()}_openRedirect(p,_,w,S){var x=this;return(0,l.Z)(function*(){return yield x._originValidation(p),function uo(v){Di().location.href=v}(vd(p,_,w,Ve(),S)),new Promise(()=>{})})()}_initialize(p){const _=p._key();if(this.eventManagers[_]){const{manager:S,promise:x}=this.eventManagers[_];return S?Promise.resolve(S):(Q(x,"If manager is not set, promise should be"),x)}const w=this.initAndGetManager(p);return this.eventManagers[_]={promise:w},w.catch(()=>{delete this.eventManagers[_]}),w}initAndGetManager(p){var _=this;return(0,l.Z)(function*(){const w=yield function If(v){return Tf.apply(this,arguments)}(p),S=new md(p);return w.register("authEvent",x=>(j(x?.authEvent,p,"invalid-auth-event"),{status:S.onEvent(x.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[p._key()]={manager:S},_.iframes[p._key()]=w,S})()}_isIframeWebStorageSupported(p,_){this.iframes[p._key()].send(aa,{type:aa},S=>{var x;const Y=null===(x=S?.[0])||void 0===x?void 0:x[aa];void 0!==Y&&_(!!Y),Re(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const _=p._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function Ys(v){return Df.apply(this,arguments)}(p)),this.originValidationPromises[_]}get _shouldInitProactively(){return Vr()||Ie()||At()}}),this.cordovaResolver=se(class xf{constructor(){this._redirectPersistence=Ws,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=ra,this._overrideRedirectResult=go}_initialize(p){var _=this;return(0,l.Z)(function*(){const w=p._key();let S=_.eventManagers.get(w);return S||(S=new Ed(p),_.eventManagers.set(w,S),_.attachCallbackListeners(p,S)),S})()}_openPopup(p){Re(p,"operation-not-supported-in-this-environment")}_openRedirect(p,_,w,S){var x=this;return(0,l.Z)(function*(){!function yv(v){var p,_,w,S,x,Y,_e,qe,dt,Pt;const It=_o();j("function"==typeof(null===(p=It?.universalLinks)||void 0===p?void 0:p.subscribe),v,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),j(typeof(null===(_=It?.BuildInfo)||void 0===_?void 0:_.packageName)<"u",v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),j("function"==typeof(null===(x=null===(S=null===(w=It?.cordova)||void 0===w?void 0:w.plugins)||void 0===S?void 0:S.browsertab)||void 0===x?void 0:x.openUrl),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),j("function"==typeof(null===(qe=null===(_e=null===(Y=It?.cordova)||void 0===Y?void 0:Y.plugins)||void 0===_e?void 0:_e.browsertab)||void 0===qe?void 0:qe.isAvailable),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),j("function"==typeof(null===(Pt=null===(dt=It?.cordova)||void 0===dt?void 0:dt.InAppBrowser)||void 0===Pt?void 0:Pt.open),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(p);const Y=yield x._initialize(p);yield Y.initialized(),Y.resetRedirect(),function Ci(){zs.clear()}(),yield x._originValidation(p);const _e=function Xg(v,p,_=null){return{type:p,eventId:_,urlResponse:null,sessionId:vv(),postBody:null,tenantId:v.tenantId,error:Ee(v,"no-auth-event")}}(p,w,S);yield function ja(v,p){return Ga()._set(yo(v),p)}(p,_e);const qe=yield function la(v,p,_){return wd.apply(this,arguments)}(p,_e,_),dt=yield function mv(v){const{cordova:p}=_o();return new Promise(_=>{p.plugins.browsertab.isAvailable(w=>{let S=null;w?p.plugins.browsertab.openUrl(v):S=p.InAppBrowser.open(v,function yn(v=(0,V.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}()?"_blank":"_system","location=yes"),_(S)})})}(qe);return function _v(v,p,_){return Dd.apply(this,arguments)}(p,Y,dt)})()}_isIframeWebStorageSupported(p,_){throw new Error("Method not implemented.")}_originValidation(p){const _=p._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function Ua(v){return iu.apply(this,arguments)}(p)),this.originValidationPromises[_]}attachCallbackListeners(p,_){const{universalLinks:w,handleOpenURL:S,BuildInfo:x}=_o(),Y=setTimeout((0,l.Z)(function*(){yield em(p),_.onEvent(Rl())}),500),_e=function(){var Pt=(0,l.Z)(function*(It){clearTimeout(Y);const Dn=yield em(p);let ki=null;Dn&&It?.url&&(ki=function tm(v,p){var _,w;const S=function im(v){const p=vo(v),_=p.link?decodeURIComponent(p.link):void 0,w=vo(_).link,S=p.deep_link_id?decodeURIComponent(p.deep_link_id):void 0;return vo(S).link||S||w||_||v}(p);if(S.includes("/__/auth/callback")){const x=vo(S),Y=x.firebaseError?function nm(v){try{return JSON.parse(v)}catch{return null}}(decodeURIComponent(x.firebaseError)):null,_e=null===(w=null===(_=Y?.code)||void 0===_?void 0:_.split("auth/"))||void 0===w?void 0:w[1],qe=_e?Ee(_e):null;return qe?{type:v.type,eventId:v.eventId,tenantId:v.tenantId,error:qe,urlResponse:null,sessionId:null,postBody:null}:{type:v.type,eventId:v.eventId,tenantId:v.tenantId,sessionId:v.sessionId,urlResponse:S,postBody:null}}return null}(Dn,It.url)),_.onEvent(ki||Rl())});return function(Dn){return Pt.apply(this,arguments)}}();typeof w<"u"&&"function"==typeof w.subscribe&&w.subscribe(null,_e);const qe=S,dt=`${x.packageName.toLowerCase()}://`;_o().handleOpenURL=function(){var Pt=(0,l.Z)(function*(It){if(It.toLowerCase().startsWith(dt)&&_e({url:It}),"function"==typeof qe)try{qe(It)}catch(Dn){console.error(Dn)}});return function(It){return Pt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Ws,this._completeRedirectFn=ra,this._overrideRedirectResult=go}_initialize(p){var _=this;return(0,l.Z)(function*(){return yield _.selectUnderlyingResolver(),_.assertedUnderlyingResolver._initialize(p)})()}_openPopup(p,_,w,S){var x=this;return(0,l.Z)(function*(){return yield x.selectUnderlyingResolver(),x.assertedUnderlyingResolver._openPopup(p,_,w,S)})()}_openRedirect(p,_,w,S){var x=this;return(0,l.Z)(function*(){return yield x.selectUnderlyingResolver(),x.assertedUnderlyingResolver._openRedirect(p,_,w,S)})()}_isIframeWebStorageSupported(p,_){this.assertedUnderlyingResolver._isIframeWebStorageSupported(p,_)}_originValidation(p){return this.assertedUnderlyingResolver._originValidation(p)}get _shouldInitProactively(){return wo()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Md(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var p=this;return(0,l.Z)(function*(){if(p.underlyingResolver)return;const _=yield function am(){return su.apply(this,arguments)}();p.underlyingResolver=_?p.cordovaResolver:p.browserResolver})()}}function Od(v){return v.unwrap()}function Rd(v){return ca(v)}function ca(v){const{_tokenResponse:p}=v instanceof V.ZR?v.customData:v;if(!p)return null;if(!(v instanceof V.ZR)&&"temporaryProof"in p&&"phoneNumber"in p)return qc.credentialFromResult(v);const _=p.providerId;if(!_||"password"===_)return null;let w;switch(_){case"google.com":w=hl;break;case"facebook.com":w=dl;break;case"github.com":w=Ic;break;case"twitter.com":w=Ki;break;default:const{oauthIdToken:S,oauthAccessToken:x,oauthTokenSecret:Y,pendingToken:_e,nonce:qe}=p;return x||Y||S||_e?_e?_.startsWith("saml.")?oi._create(_,_e):ns._fromParams({providerId:_,signInMethod:_,pendingToken:_e,idToken:S,accessToken:x}):new ao(_).credential({idToken:S,accessToken:x,rawNonce:qe}):null}return v instanceof V.ZR?w.credentialFromError(v):w.credentialFromResult(v)}function xr(v,p){return p.catch(_=>{throw _ instanceof V.ZR&&function lu(v,p){var _;const w=null===(_=p.customData)||void 0===_?void 0:_._tokenResponse;if("auth/multi-factor-auth-required"===p?.code)p.resolver=new Cv(v,function Rc(v,p){var _;const w=(0,V.m9)(v),S=p;return j(p.customData.operationType,w,"argument-error"),j(null===(_=S.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,w,"argument-error"),uf._fromError(w,S)}(v,p));else if(w){const S=ca(p),x=p;S&&(x.credential=S,x.tenantId=w.tenantId||void 0,x.email=w.email||void 0,x.phoneNumber=w.phoneNumber||void 0)}}(v,_),_}).then(_=>{const S=_.user;return{operationType:_.operationType,credential:Rd(_),additionalUserInfo:Xu(_),user:as.getOrCreate(S)}})}function ua(v,p){return Ff.apply(this,arguments)}function Ff(){return(Ff=(0,l.Z)(function*(v,p){const _=yield p;return{verificationId:_.verificationId,confirm:w=>xr(v,_.confirm(w))}})).apply(this,arguments)}class Cv{constructor(p,_){this.resolver=_,this.auth=function au(v){return v.wrapped()}(p)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(p){return xr(Od(this.auth),this.resolver.resolveSignIn(p))}}class as{constructor(p){this._delegate=p,this.multiFactor=function _l(v){const p=(0,V.m9)(v);return td.has(p)||td.set(p,Jy._fromUser(p)),td.get(p)}(p)}static getOrCreate(p){return as.USER_MAP.has(p)||as.USER_MAP.set(p,new as(p)),as.USER_MAP.get(p)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(p){return this._delegate.getIdTokenResult(p)}getIdToken(p){return this._delegate.getIdToken(p)}linkAndRetrieveDataWithCredential(p){return this.linkWithCredential(p)}linkWithCredential(p){var _=this;return(0,l.Z)(function*(){return xr(_.auth,P(_._delegate,p))})()}linkWithPhoneNumber(p,_){var w=this;return(0,l.Z)(function*(){return ua(w.auth,function wn(v,p,_){return bs.apply(this,arguments)}(w._delegate,p,_))})()}linkWithPopup(p){var _=this;return(0,l.Z)(function*(){return xr(_.auth,function zc(v,p,_){return Kc.apply(this,arguments)}(_._delegate,p,Nr))})()}linkWithRedirect(p){var _=this;return(0,l.Z)(function*(){return yield ou(K(_.auth)),function rv(v,p,_){return function ss(v,p,_){return Ds.apply(this,arguments)}(v,p,_)}(_._delegate,p,Nr)})()}reauthenticateAndRetrieveDataWithCredential(p){return this.reauthenticateWithCredential(p)}reauthenticateWithCredential(p){var _=this;return(0,l.Z)(function*(){return xr(_.auth,de(_._delegate,p))})()}reauthenticateWithPhoneNumber(p,_){return ua(this.auth,function Cl(v,p,_){return ai.apply(this,arguments)}(this._delegate,p,_))}reauthenticateWithPopup(p){return xr(this.auth,function iv(v,p,_){return hd.apply(this,arguments)}(this._delegate,p,Nr))}reauthenticateWithRedirect(p){var _=this;return(0,l.Z)(function*(){return yield ou(K(_.auth)),function Pi(v,p,_){return function ia(v,p,_){return pd.apply(this,arguments)}(v,p,_)}(_._delegate,p,Nr)})()}sendEmailVerification(p){return function Zy(v,p){return Nc.apply(this,arguments)}(this._delegate,p)}unlink(p){var _=this;return(0,l.Z)(function*(){return yield function mr(v,p){return Qu.apply(this,arguments)}(_._delegate,p),_})()}updateEmail(p){return function Lg(v,p){return ml((0,V.m9)(v),p,null)}(this._delegate,p)}updatePassword(p){return function xc(v,p){return ml((0,V.m9)(v),null,p)}(this._delegate,p)}updatePhoneNumber(p){return function tv(v,p){return vf.apply(this,arguments)}(this._delegate,p)}updateProfile(p){return function qy(v,p){return rf.apply(this,arguments)}(this._delegate,p)}verifyBeforeUpdateEmail(p,_){return function Wy(v,p,_){return tf.apply(this,arguments)}(this._delegate,p,_)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}as.USER_MAP=new WeakMap;const da=j;let Pl=(()=>{class v{constructor(_,w){if(this.app=_,w.isInitialized())return this._delegate=w.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:S}=_.options;da(S,"invalid-api-key",{appName:_.name}),da(S,"invalid-api-key",{appName:_.name});const x=typeof window<"u"?Nr:void 0;this._delegate=w.initialize({options:{persistence:ha(S,_.name),popupRedirectResolver:x}}),this._delegate._updateErrorMap(Se),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?as.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(_){this._delegate.languageCode=_}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(_){this._delegate.tenantId=_}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(_,w){!function Ue(v,p,_){const w=K(v);j(w._canInitEmulator,w,"emulator-config-failed"),j(/^https?:\/\//.test(p),w,"invalid-emulator-scheme");const S=!!_?.disableWarnings,x=ft(p),{host:Y,port:_e}=function Ht(v){const p=ft(v),_=/(\/\/)?([^?#/]+)/.exec(v.substr(p.length));if(!_)return{host:"",port:null};const w=_[2].split("@").pop()||"",S=/^(\[[^\]]+\])(:|$)/.exec(w);if(S){const x=S[1];return{host:x,port:rn(w.substr(x.length+1))}}{const[x,Y]=w.split(":");return{host:x,port:rn(Y)}}}(p);w.config.emulator={url:`${x}//${Y}${null===_e?"":`:${_e}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:Y,port:_e,protocol:x.replace(":",""),options:Object.freeze({disableWarnings:S})}),S||function Xn(){function v(){const p=document.createElement("p"),_=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}(this._delegate,_,w)}applyActionCode(_){return function ur(v,p){return dr.apply(this,arguments)}(this._delegate,_)}checkActionCode(_){return rs(this._delegate,_)}confirmPasswordReset(_,w){return function Oa(v,p,_){return $s.apply(this,arguments)}(this._delegate,_,w)}createUserWithEmailAndPassword(_,w){var S=this;return(0,l.Z)(function*(){return xr(S._delegate,function Ju(v,p,_){return pi.apply(this,arguments)}(S._delegate,_,w))})()}fetchProvidersForEmail(_){return this.fetchSignInMethodsForEmail(_)}fetchSignInMethodsForEmail(_){return function kg(v,p){return Ac.apply(this,arguments)}(this._delegate,_)}isSignInWithEmailLink(_){return function Qo(v,p){return"EMAIL_SIGNIN"===ul.parseLink(p)?.operation}(0,_)}getRedirectResult(){var _=this;return(0,l.Z)(function*(){da(Ad(),_._delegate,"operation-not-supported-in-this-environment");const w=yield function ci(v,p){return Cs.apply(this,arguments)}(_._delegate,Nr);return w?xr(_._delegate,Promise.resolve(w)):{credential:null,user:null}})()}addFrameworkForLogging(_){!function $a(v,p){K(v)._logFramework(p)}(this._delegate,_)}onAuthStateChanged(_,w,S){const{next:x,error:Y,complete:_e}=cu(_,w,S);return this._delegate.onAuthStateChanged(x,Y,_e)}onIdTokenChanged(_,w,S){const{next:x,error:Y,complete:_e}=cu(_,w,S);return this._delegate.onIdTokenChanged(x,Y,_e)}sendSignInLinkToEmail(_,w){return function Xh(v,p,_){return Ra.apply(this,arguments)}(this._delegate,_,w)}sendPasswordResetEmail(_,w){return function Gs(v,p,_){return An.apply(this,arguments)}(this._delegate,_,w||void 0)}setPersistence(_){var w=this;return(0,l.Z)(function*(){let S;switch(function kf(v,p){fr(Object.values(Ar).includes(p),v,"invalid-persistence-type"),(0,V.b$)()?fr(p!==Ar.SESSION,v,"unsupported-persistence-type"):(0,V.UG)()?fr(p===Ar.NONE,v,"unsupported-persistence-type"):Sd()?fr(p===Ar.NONE||p===Ar.LOCAL&&(0,V.hl)(),v,"unsupported-persistence-type"):fr(p===Ar.NONE||om(),v,"unsupported-persistence-type")}(w._delegate,_),_){case Ar.SESSION:S=Ws;break;case Ar.LOCAL:S=(yield se(Dl)._isAvailable())?Dl:Lc;break;case Ar.NONE:S=B;break;default:return Re("argument-error",{appName:w._delegate.name})}return w._delegate.setPersistence(S)})()}signInAndRetrieveDataWithCredential(_){return this.signInWithCredential(_)}signInAnonymously(){return xr(this._delegate,function cD(v){return ei.apply(this,arguments)}(this._delegate))}signInWithCredential(_){return xr(this._delegate,Ma(this._delegate,_))}signInWithCustomToken(_){return xr(this._delegate,function Bn(v,p){return Zn.apply(this,arguments)}(this._delegate,_))}signInWithEmailAndPassword(_,w){return xr(this._delegate,function Zs(v,p,_){return Ma((0,V.m9)(v),is.credential(p,_))}(this._delegate,_,w))}signInWithEmailLink(_,w){return xr(this._delegate,function uD(v,p,_){return ef.apply(this,arguments)}(this._delegate,_,w))}signInWithPhoneNumber(_,w){return ua(this._delegate,function bt(v,p,_){return Wn.apply(this,arguments)}(this._delegate,_,w))}signInWithPopup(_){var w=this;return(0,l.Z)(function*(){return da(Ad(),w._delegate,"operation-not-supported-in-this-environment"),xr(w._delegate,function nv(v,p,_){return Tl.apply(this,arguments)}(w._delegate,_,Nr))})()}signInWithRedirect(_){var w=this;return(0,l.Z)(function*(){return da(Ad(),w._delegate,"operation-not-supported-in-this-environment"),yield ou(w._delegate),function cn(v,p,_){return function na(v,p,_){return gi.apply(this,arguments)}(v,p,_)}(w._delegate,_,Nr)})()}updateCurrentUser(_){return this._delegate.updateCurrentUser(_)}verifyPasswordResetCode(_){return function $y(v,p){return Rg.apply(this,arguments)}(this._delegate,_)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return v.Persistence=Ar,v})();function cu(v,p,_){let w=v;"function"!=typeof v&&({next:w,error:p,complete:_}=v);const S=w;return{next:Y=>S(Y&&as.getOrCreate(Y)),error:p,complete:_}}function ha(v,p){const _=function Do(v,p){const _=xd();if(!_)return[];const w=O(Za,v,p);switch(_.getItem(w)){case Ar.NONE:return[B];case Ar.LOCAL:return[Dl,Ws];case Ar.SESSION:return[Ws];default:return[]}}(v,p);if(typeof self<"u"&&!_.includes(Dl)&&_.push(Dl),typeof window<"u")for(const w of[Lc,Ws])_.includes(w)||_.push(w);return _.includes(B)||_.push(B),_}class Lf{constructor(){this.providerId="phone",this._delegate=new qc(Od(X.Z.auth()))}static credential(p,_){return qc.credential(p,_)}verifyPhoneNumber(p,_){return this._delegate.verifyPhoneNumber(p,_)}unwrap(){return this._delegate}}Lf.PHONE_SIGN_IN_METHOD=qc.PHONE_SIGN_IN_METHOD,Lf.PROVIDER_ID=qc.PROVIDER_ID;const uu=j;class Vf{constructor(p,_,w=X.Z.app()){var S;uu(null===(S=w.options)||void 0===S?void 0:S.apiKey,"invalid-api-key",{appName:w.name}),this._delegate=new Ui(p,_,w.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Bf(v){v.INTERNAL.registerComponent(new ae.wA("auth-compat",p=>{const _=p.getProvider("app-compat").getImmediate(),w=p.getProvider("auth");return new Pl(_,w)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:is,FacebookAuthProvider:dl,GithubAuthProvider:Ic,GoogleAuthProvider:hl,OAuthProvider:ao,SAMLAuthProvider:qo,PhoneAuthProvider:Lf,PhoneMultiFactorGenerator:tu,RecaptchaVerifier:Vf,TwitterAuthProvider:Ki,Auth:Pl,AuthCredential:gn,Error:V.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),v.registerVersion("@firebase/auth-compat","0.3.0")}(X.Z)},8766:(yt,Me,R)=>{R.d(Me,{Lj:()=>Re,X3:()=>lt});var l=R(5861);let V,re;const ae=new WeakMap,ye=new WeakMap,he=new WeakMap,G=new WeakMap,$=new WeakMap;let Te={get(j,Ce,Q){if(j instanceof IDBTransaction){if("done"===Ce)return ye.get(j);if("objectStoreNames"===Ce)return j.objectStoreNames||he.get(j);if("store"===Ce)return Q.objectStoreNames[1]?void 0:Q.objectStore(Q.objectStoreNames[0])}return ue(j[Ce])},set:(j,Ce,Q)=>(j[Ce]=Q,!0),has:(j,Ce)=>j instanceof IDBTransaction&&("done"===Ce||"store"===Ce)||Ce in j};function be(j){return"function"==typeof j?function et(j){return j!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function me(){return re||(re=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(j)?function(...Ce){return j.apply(pt(this),Ce),ue(ae.get(this))}:function(...Ce){return ue(j.apply(pt(this),Ce))}:function(Ce,...Q){const te=j.call(pt(this),Ce,...Q);return he.set(te,Ce.sort?Ce.sort():[Ce]),ue(te)}}(j):(j instanceof IDBTransaction&&function Pe(j){if(ye.has(j))return;const Ce=new Promise((Q,te)=>{const se=()=>{j.removeEventListener("complete",ie),j.removeEventListener("error",He),j.removeEventListener("abort",He)},ie=()=>{Q(),se()},He=()=>{te(j.error||new DOMException("AbortError","AbortError")),se()};j.addEventListener("complete",ie),j.addEventListener("error",He),j.addEventListener("abort",He)});ye.set(j,Ce)}(j),((j,Ce)=>Ce.some(Q=>j instanceof Q))(j,function fe(){return V||(V=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(j,Te):j)}function ue(j){if(j instanceof IDBRequest)return function J(j){const Ce=new Promise((Q,te)=>{const se=()=>{j.removeEventListener("success",ie),j.removeEventListener("error",He)},ie=()=>{Q(ue(j.result)),se()},He=()=>{te(j.error),se()};j.addEventListener("success",ie),j.addEventListener("error",He)});return Ce.then(Q=>{Q instanceof IDBCursor&&ae.set(Q,j)}).catch(()=>{}),$.set(Ce,j),Ce}(j);if(G.has(j))return G.get(j);const Ce=be(j);return Ce!==j&&(G.set(j,Ce),$.set(Ce,j)),Ce}const pt=j=>$.get(j);function lt(j,Ce,{blocked:Q,upgrade:te,blocking:se,terminated:ie}={}){const He=indexedDB.open(j,Ce),Ve=ue(He);return te&&He.addEventListener("upgradeneeded",gt=>{te(ue(He.result),gt.oldVersion,gt.newVersion,ue(He.transaction))}),Q&&He.addEventListener("blocked",()=>Q()),Ve.then(gt=>{ie&&gt.addEventListener("close",()=>ie()),se&&gt.addEventListener("versionchange",()=>se())}).catch(()=>{}),Ve}function Re(j,{blocked:Ce}={}){const Q=indexedDB.deleteDatabase(j);return Ce&&Q.addEventListener("blocked",()=>Ce()),ue(Q).then(()=>{})}const Ee=["get","getKey","getAll","getAllKeys","count"],Ae=["put","add","delete","clear"],$e=new Map;function Le(j,Ce){if(!(j instanceof IDBDatabase)||Ce in j||"string"!=typeof Ce)return;if($e.get(Ce))return $e.get(Ce);const Q=Ce.replace(/FromIndex$/,""),te=Ce!==Q,se=Ae.includes(Q);if(!(Q in(te?IDBIndex:IDBObjectStore).prototype)||!se&&!Ee.includes(Q))return;const ie=function(){var He=(0,l.Z)(function*(Ve,...gt){const Jt=this.transaction(Ve,se?"readwrite":"readonly");let Lt=Jt.store;return te&&(Lt=Lt.index(gt.shift())),(yield Promise.all([Lt[Q](...gt),se&&Jt.done]))[0]});return function(gt){return He.apply(this,arguments)}}();return $e.set(Ce,ie),ie}!function Se(j){Te=j(Te)}(j=>({...j,get:(Ce,Q,te)=>Le(Ce,Q)||j.get(Ce,Q,te),has:(Ce,Q)=>!!Le(Ce,Q)||j.has(Ce,Q)}))},5861:(yt,Me,R)=>{function l(V,re,fe,me,ae,ye,he){try{var G=V[ye](he),$=G.value}catch(J){return void fe(J)}G.done?re($):Promise.resolve($).then(me,ae)}function X(V){return function(){var re=this,fe=arguments;return new Promise(function(me,ae){var ye=V.apply(re,fe);function he($){l(ye,me,ae,he,G,"next",$)}function G($){l(ye,me,ae,he,G,"throw",$)}he(void 0)})}}R.d(Me,{Z:()=>X})}},yt=>{yt(yt.s=4411)}]);